---
title: AWS認定資格試験テキスト＆問題集　AWS認定ソリューションアーキテクト - プロフェッショナル　改訂第2版 (ＡＷＳ認定資格試験テキスト)
categories:
  - AWS
  - Cloud
  - 資格
tags: 
  - 教科書
date: 2023-06-24 00:00:00

---


# AWS認定資格試験テキスト＆問題集　AWS認定ソリューションアーキテクト - プロフェッショナル　改訂第2版 (ＡＷＳ認定資格試験テキスト)

## 書籍情報

- <https://www.sbcr.jp/product/4815617929/>

山下光洋：著者

基礎知識から合格する解答力を身につける！

AWSプラットフォームでシステム設計やアプリケーション開発をするために必要な技術スキルと経験を検証するのが「AWS認定ソリューションアーキテクト-プロフェッショナル」試験です。プロフェッショナル試験では、具体的な業務要件や課題をケース問題で出題されるため、基本となる知識をベースに、要件や課題に対応した最適な解答を導く応用力が求められます。
本書は、2022年秋に改訂された「SAP-C02 」試験に向けたテキスト＆問題集になっています。出題分野である「複雑な組織に対応するソリューションの設計」「新しいソリューションのための設計」「既存のソリューションの継続的な改善」「ワークロードの移行とモダナイゼーションの加速」に対応して、具体的な要件や課題を読み解きながら、ポイントとなるサービスの利用方法を紹介し、最適な解答につながるように丁寧に解説しています。
各節末のポイントのまとめは試験の直前に知識の確認に利用してもらえ、各章末の確認テストや最終章の模擬試験は合格に必要な解答力をしっかり身につけてもらえます。

## コンテンツ

### 第1章　AWS認定ソリューションアーキテクト－プロフェッショナル

#### 1　試験の概要

- IMDb: <https://psbr.hatenablog.com/entry/imdb>
  - Amazonの子会社
  - AWS Data Exchangeを使っていて、S3バケットに様々なデータをインポートしている

- AWS Data Pipeline: AWSリソースやコマンドからAWSリソースへデータを変換、コピーする一連の処理をパイプラインとして設定できる
  - 現在、マネジメントコンソールからアクセスできなくなったため、今後は重要なサービスではなくなる可能性がある

- Amazon EMR: EMR(Elastic Map Reduce)はApacheHadoopやSparkなどのOSSをマネージドサービスで提供

- AWS Glue: ETLサービス
  - データを指定した方法で変換してS3などストレージやデータベースにデータを保管できる

- Amazon Kinesis Data Analytics: ストリーミングデータをSQLなど使い慣れた言語を使ってリアルタイムに抽出検索
- Amazon Kinesis Data Firehose: 最低60秒のバッファでデータをS3、OpenSearchServiceなどに簡単に格納
- Amazon Kinesis Data Streams: 秒あたり数GBのデータをリアルタイムにストリーミング処理できます。

- AWS Lake Formation: データレイクの構築、管理を簡易化

- Amazon Managed Streaming for Apache Kafka(Amazon MSK): マネージドなApache Kafkaを提供するサービス

- Amazon OpenSearch Service: Amazon Elasticsearch Serviceの後継サービス
  - テキストや非構造化データの全文検索や視覚化、ダッシュボード分析が可能

- Amazon QuickSight: BIサービス


- Amazon AppFlow: 外部SaaSからのノーコードなデータ連携サービス

- AWS AppSync: GraphQL APIとPubSub APIを高速に開発できる


#### 2　お勧めの学習方法

- 模擬試験 AWS Skill Builder
  - <https://explore.skillbuilder.aws/learn/external-ecommerce;view=none;redirectURL=?ctldoc-catalog-0=se-%22architect%20professional%22>

- 検証用のAWSアカウント
  - 会社、個人でAWSアカウントを利用して実際に動かしてみる

- Well-Architected Framework
  - <https://aws.amazon.com/jp/architecture/well-architected/?wa-lens-whitepapers.sort-by=item.additionalFields.sortDate&wa-lens-whitepapers.sort-order=desc&wa-guidance-whitepapers.sort-by=item.additionalFields.sortDate&wa-guidance-whitepapers.sort-order=desc>
  - 6つの柱を抑えておく
    - オペレーショナル・エクセレンス
    - セキュリティ
    - パフォーマンス
    - コスト最適化
    - 信頼性
    - 持続可能性

- その他リソース
  - AWS Black Belt
  - AWS FAQ

### 第2章　複雑な組織への対応

#### 1　組織のネットワーク設計

- VPC内のEC2からリクエストを実行するためには以下のいずれかが必要
  - インターネットゲートウェイがアタッチされたVPCのパブリックネットワークでEC2を起動する
  - インターネットゲートウェイがアタッチされ、NATゲートウェイが起動しているVPCのプライベートサブネットでEC2を起動
  - VPCエンドポイントを設定

- VPCエンドポイント
  - ゲートウェイエンドポイント
    - VPCのサービス専用のゲートウェイをアタッチする
    - 対象サービスはS3とDynamoDB
  - インターフェースエンドポイント
    - VPCのサブネットにENI(Elastic Network Interface)を作成
    - ENIに割り当てられたプライベートIPアドレスを使用してサービスにアクセス
    - ENIとサービス間のプライベート接続を提供しているのがAWS PrivateLinkという技術

##### S3ゲートウェイエンドポイント

ゲートウェイエンドポイントは利用料金が不要

オンプレからアクセスする場合はプロキシサーバーを経由してアクセス

プロキシサーバーの可用性を考慮すると、ELB、EC2、Auto Scalingを検討する必要がある

##### S3インターフェースエンドポイント

インターフェイスエンドポイントは利用料金が発生する

インターフェイスエンドポイントは指定したサブネットにENIを作成

インターフェイスエンドポイントが作成されるとDNS名が発行される

このDNSをS3のエンドポイントに指定してアプリケーションなどからリクエストを実行

VPCエンドポイントにはエンドポイントポリシーがあり、デフォルトでは全てのリソース、すべてのアクションを許可している

##### AWS PrivateLinkを使用したサードパーティサービスの提供

独自のソフトウェアサービスをサードパーティサービスと呼ぶことがある

##### AWSクライアントVPN

クライアントからVPCへのアクセス

VPCを介したオンプレミスやインターネット、他のVPCへのOpenVPNベースのVPNクライアントを使用した安全なアクセスを可能にする

- 認証タイプ
  - Active Directory（ユーザーベース）
    - AWS Managed Microsoft ADまたは、AD Connectorを使用
  - シングルサインオン（SAMLベースのフェデレーション、ユーザーベース）
    - IAM SAML IDプロバイダー
  - 相互認証（証明書ベース）
    - AWS Certificate Managerにアップロードしたサーバー証明書とクライアント証明書を使用

- 基本設定
  - クライアントが使用するIPアドレス葉にをCIDRで設定
  - AWSクライアントVPNにサブネットを関連付ける
  - 関連付けられたサブネットにはENIが作成され、ENIにはセキュリティグループがアタッチされる

- 接続ログ
  - オプションでCloudwatchLogsに接続ログを記録することができる

- 接続ハンドラ
  - 接続時にLambda関数で任意のプログラムを実行して、接続の許可・拒否判定ロジックを実装できる

##### AWS Site-to-Site VPN

VPCに仮想プライベートゲートウェイをアタッチして、データセンターなどのオンプレミスのルーターと、インタネットプロトコルセキュリティ（IPSec）VPN接続が可能

- 仮想プライベートゲートウェイ
  - ASN（自律システム番号）を指定することもできる
  - 指定しない場合はAmaxonのデフォルトASN（64512）が使用

- カスタマーゲートウェイ
  - オンプレミス側のルーターなどのこと
  - 動的ルーティングでは、BGP（ボーダーゲートウェイプロトコル）ASNの指定が可能
  - パブリックなASNが無い場合は、プライベートASNを指定できる
  - 証明書ベースではなく、事前共有キーで認証する場合は、インターネットから接続可能なIPアドレスが必要
  - 証明書ベースの認証をする場合は、AWS Certificate Managerにプライベート証明書をインポートして指定可能

- 静的ルーティングと動的ルーティング
  - カスタマーゲートウェイデバイスがBGPをサポートしている場合は動的ルーティング
  - サポートしていない場合は静的ルーティングを選択

- VPN接続
  - Internet Key Exchangeバージョン2(IKEv2):暗号化のための共通鍵を交換する仕組み
  - NATトラバーサル: オンプレミス側でNATルーターを介したVPN接続が可能
  - デッドピア検出（DPD）：接続先のデバイスが有効かどうかを確認

- 複数のSite-to-SiteVPN接続
  - 1つの仮想プライベートゲートウェイから、複数のカスタマーゲートウェイにVPN接続を作成可能
  - この設計はVPN CloudHubと呼ばれる
- 冗長なSite-to-SiteVPN接続
  - カスタマーゲートウェイデバイスを冗長化する構成
- ソフトウェアVPN
  - EC2インスタンスにソフトウェアVPNをセットアップして、インターネットゲートウェイ経由でVPN接続も可能
  - 次のような要件の場合利用
    - コンプライアンス要件により、接続両端を完全にコントロールする必要がある
    - IPsec以外のVPNプロトコルが必要

##### AWS Direct Connect(DX)

ユーザーまたはパートナーのルーター（Customer Router）からDirect Connectのルーター（DX Router）に標準のイーサネット光ファイバーケーブルを介して接続するサービス

この接続を使用して、VPCやAWSパブリックサービスへの仮想インターフェースを作成

インターネットサービスプロバイダーを利用する必要なく、オンプレミス拠点間の専用線の代替として、AWSへの接続に使用できるサービス

- 接続
  - 専用接続
  - ホスト接続

- VPNバックアップのDirectConnect

- 回復性レベル
  - 最大回復性
  - 高い回復性
  - 開発とテスト
  - クラシック
  - AWS Direct Connect フェイルオーバーテスト

- 仮想インターフェース
  - AWS Direct Connect接続を使用するには、仮想インターフェイス(VIF)が必要
  - 仮想インターフェイスの種類は以下
    - プライベート仮想インターフェイス
      - オンプレミスのOSでEFSにマウントできる
    - パブリック仮想インターフェイス
      - S3,DynamoDBにアクセスできる
    - トランジット仮想インターフェイス
      - Direct Connect Gatewayに関連付けられたTransit Gatewayにアクセスできる

- LAG(Link Aggregation Group)

- Direct Connect の料金
  - ポート時間
    - 容量、接続タイプによって時間料金が決まる
  - データ転送
    - プライベートVIFの場合は、データ転送を行うAWSアカウントに課金される

##### VPC ピア接続

VPCピア接続を使用することで、VPCが他のVPCとの接続をプライベートネットワークで行える

##### AWS Transit Gateway

最大5000のVPCやオンプレミス環境の接続を簡素化する

- VPCアタッチメント
- VPN接続
- Direct Connectトランジット仮想インターフェイス
- Transit Gatewayピアリング接続
- Transit Gateway Network Manager

- Global Accelerator連携のVPN高速化
- Route 53 プライベートホストゾーンとRoute 53 Resolver
  - Route 53 プライベートホストゾーン
  - Route 53 Resolver

#### 2　マルチアカウント

##### クロスアカウントアクセス

- 組織内でのクロスアカウントアクセス
  - 複数のAWSアカウントに対して認証が必要な場合の管理
  - IAMユーザは特定のAWSアカウントで管理
  - 組織内の各AWSアカウントにはIAMロールを作成
  - AWS STSのAssume RoleアクションによってIAMロールから一時的認証情報を取得して使用
  - 信頼関係
    - 誰がIAMロールに対して、sts:AssumeRoleを実行できるかを許可しているのが信頼関係

##### カスタムIDブローカーアプリケーション

クロスアカウントだけでなく、オンプレミスのアプリからも同様にSDKにより開発したプログラムでIAMロール二リクエストを実行することにより、一時的な認証情報を使用してAWSのサービスをアプリケーションから使用したり、マネジメントコンソールへのリダイレクトURLを生成できる

##### サードパーティ製品へのアクセス許可

外部のサービスに対して必要なリソースへの操作を許可することもできる

ただし、「混乱した代理問題」が課題

- ※AWS作図くんの例

- 「混乱した代理問題」を解決するのが「外部ID」

##### AWS Directory Service

サーバー認証に、組織で管理している既存のActiceDirectoryを使用したいケースがある

- AD Connector
  - オンプレミスのデータセンターなどで稼働しているActiveDirectoryの認証をそのまま使えるサービス
  - AD Connectorを使えば、Amazon Workspaces, Amazon WorkDocs, Amazon WorkMail, Amazon QuickSightなどのAWSマネージドディレクトリと連携するサービスを、既存のADのユーザ情報で利用できる
- Simple AD
  - Samba 4 Active Directory Compatible Server
  - 最大５０００ユーザー
    - 5000を超える場合はAWS Managed Microsoft ADを利用
      - また、他ドメインとの信頼関係、MFA（多要素認証）が必要な場合もAWS Managed Microsoft ADを使用する
- AWS Directory Service for Microsoft Active Directory(AWS Managed Microsoft AD)
  - Microsoft Active Directoryのマネージドサービス
  - 5000を超えるユーザー
  - 他ドメインとの信頼関係
  - MFA(他要素認証)

##### IAMアイデンティティセンター（AWS SSOの後継）

複数のAWSアカウントとSalesforceやBOXなどの外部アプリケーションへのSSOが可能

- IAMアイデンティティセンターの認証
  - アイデンティティセンターディレクトリ
    - 認証情報（ユーザ名、パスワード）をIAMアイデンティティセンターで管理、デフォルト設定
  - ActiveDirectory
    - AWS Managed Microsoft ADか、AD Connectorを選択できる
  - 外部IDプロバイダー
    - Azure AD,Okta,OneLoginなど外部IDプロバイダーを使用できる

- AWSアカウントへの許可セット
  - IAMアイデンティティセンターで許可セットを作成して、AWSアカウントにSSOした際の権限を設定できる

- 外部アプリケーションの追加
- IAMアイデンティティセンターを使用しないケース
  - すでにAD FS(Active Directory Federation Services)や、認証だけでなくOkta、OneLoginのポータルサイトも使用している場合に、
  - IAMアイデンティティセンターを使用せずに設定するケースもある

##### AWS Organizations

AWS Organizationsを利用していない複数のアカウント環境では、次の重複作業が発生

- アカウント作成時にクレジットカード、電話番号などの登録
- 各アカウントのIAMロールのポリシー設定
- 請求管理
- CloudTrailなどのさまざまなサービスはアカウントごとの設定

AWS Organizationsを利用した場合

- AWS Organizations APIによるアカウント作成の自動化
- SCP(サービスコントロールポリシー)による組織単位のポリシー設定
- 一括請求管理
- 各AWSサービスとのサービス統合

- アカウント作成の自動化
  - 通常、あWSアカウントの作成時には、メールアドレス、パスワード、住所、電話番号、クレジットカードが必要
  - SMSか通話での本人確認も必要
  - Organizationsでは、既存アカウントを組織のメンバーアカウントとして招待できますが、新規メンバーアカウントもマネジメントコンソール、CLI、SDKから追加可能

- SCP(サービスコントロールポリシー)
  - Organizations組織でOUやアカウントに設定するポリシー
  - 予防コントロールとして、OUに所属するアカウント、またはアカウントでの権限を制限できる
  - SCPはOUの階層において下のレベルへ継承される

- SCPの許可リスト戦略
- SCPの拒否リスト戦略

- 一括請求（コンソリデーテッドビリング）
  - １つの請求書、統合請求データ：コストと使用状況データを複数カウントに渡って複合的に分析できる
  - 合計量によるボリュームディスカウント：複数アカウントの合計容量による従量制の割引が受けられる
  - リザーブドインスタンス（RI）、Savings Plansの共有
    - 組織のアカウントの合計使用量にリザーブドインスタンス、Savings Plansを適用できるので選択しやすくなる

- MEMO: Saving Plans <https://aws.amazon.com/jp/savingsplans/>
  - Savings Plans は、1 年または 3 年の時間単位で利用をコミットする代わりに、オンデマンド料金と比較して最大 72% の請求額の削減を可能にする柔軟な料金モデルです。
  - AWS は 3 種類の Savings Plans を提供しています:
    - Compute Savings Plans
    - EC2 Instance Savings Plans
    - Amazon SageMaker Savings Plans

- AWS CloudFormation StackSets
  - 複数リージョン、複数アカウントにスタックを作成して、変更・削除・管理できる機能
  - Organizationsと統合することで、組織、OU、アカウントを指定して、スタックを作成・変更・削除できる

- AWS CloudTrail （ユーザのアクティビティやAPI使用量をトレース）
  - Organizations組織のマスターアカウントで、組織内のすべてのアカウントについてCloudTrailを有効化できる
  - 書き出されるS3オブジェクトのプレフィックスには組織IDが含まれる

- AWS Service Catalog
  - IAMユーザ二CloudFormationスタックで作成されるリソースへの直接的なアクセス権限を与えられずに、事前に用意されたテンプレートからスタックを作成できる
  - 例えば、スタックによって作成されたEC2インスタンスなどのリソースには直接アクセスできませんので、決められたインスタンスタイプ以外を起動したり、セキュリティグループを勝手に変更することはできない
  - 管理者があら化mじめテンプレートを**製品**としてService Catalogに登録し、IAMユーザに許可する製品のリストをポートフォリオとして設定
  - ポートフォリオはいわばIAMユーザにとってのサービスカタログメニューで、Organizations組織でOUを指定して共有できる



#### 3　確認テスト

### 第3章　ソリューション設計と継続的改善
#### 1　運用上の優秀性
#### 2　セキュリティ
#### 3　信頼性
#### 4　パフォーマンス
#### 5　コスト最適化
#### 6　確認テスト

### 第4章　移行とモダナイゼーションの加速
#### 1　移行評価とアプローチ
#### 2　移行後アーキテクチャとモダナイゼーション
#### 3　確認テスト

### 第5章　模擬テスト
#### 1　問題
#### 2　解答と解説

