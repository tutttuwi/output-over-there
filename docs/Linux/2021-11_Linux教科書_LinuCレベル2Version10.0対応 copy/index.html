<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Linux教科書_LinuCレベル2Version10.0対応 | OUTPUT*OVER-THERE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#264A2E">
    
    
    <meta name="keywords" content="教科書">
    <meta name="description" content="Linux教科書_LinuCレベル2Version10.0対応理解したこと書籍サイトhttps:&#x2F;&#x2F;www.shoeisha.co.jp&#x2F;book&#x2F;detail&#x2F;9784798167961 ダウンロードhttps:&#x2F;&#x2F;www.shoeisha.co.jp&#x2F;book&#x2F;download&#x2F;9784798167961&#x2F;detail 書籍情報支持率No.1「Linux教科書」シリーズのノウハウを注いだ『Li">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux教科書_LinuCレベル2Version10.0対応">
<meta property="og:url" content="http://yoursite.com/Linux/2021-11_Linux%E6%95%99%E7%A7%91%E6%9B%B8_LinuC%E3%83%AC%E3%83%99%E3%83%AB2Version10.0%E5%AF%BE%E5%BF%9C%20copy/index.html">
<meta property="og:site_name" content="OUTPUT*OVER-THERE">
<meta property="og:description" content="Linux教科書_LinuCレベル2Version10.0対応理解したこと書籍サイトhttps:&#x2F;&#x2F;www.shoeisha.co.jp&#x2F;book&#x2F;detail&#x2F;9784798167961 ダウンロードhttps:&#x2F;&#x2F;www.shoeisha.co.jp&#x2F;book&#x2F;download&#x2F;9784798167961&#x2F;detail 書籍情報支持率No.1「Linux教科書」シリーズのノウハウを注いだ『Li">
<meta property="og:locale" content="ja_JP">
<meta property="article:published_time" content="2021-11-19T15:00:00.000Z">
<meta property="article:modified_time" content="2021-11-23T16:02:00.930Z">
<meta property="article:author" content="t-tsutsui">
<meta property="article:tag" content="教科書">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="OUTPUT*OVER-THERE" href="https://tutttuwi.github.io/output-over-there/atom.xml">
    
    <link rel="shortcut icon" href="https://tutttuwi.github.io/output-over-there/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(https://tutttuwi.github.io/output-over-there/img/brand.png)">
      <div class="brand">
        <a href="https://tutttuwi.github.io/output-over-there/" class="avatar waves-effect waves-circle waves-light">
          <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">t-tsutsui</h5>
          <a href="mailto:t.tsutsui9117@gmail.com" title="t.tsutsui9117@gmail.com" class="mail">t.tsutsui9117@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/about"  >
                <i class="icon icon-lg icon-link"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Linux教科書_LinuCレベル2Version10.0対応</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="検索">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Linux教科書_LinuCレベル2Version10.0対応</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-11-19T15:00:00.000Z" itemprop="datePublished" class="page-time">
  2021-11-20
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/Linux/">Linux</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Linux教科書-LinuCレベル2Version10-0対応"><span class="post-toc-number">1.</span> <span class="post-toc-text">Linux教科書_LinuCレベル2Version10.0対応</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#理解したこと"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">理解したこと</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#書籍サイト"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">書籍サイト</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ダウンロード"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">ダウンロード</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#書籍情報"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">書籍情報</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#メモ"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">メモ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#序章-LinuCの概要"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">序章　LinuCの概要</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#LinuCとは"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">LinuCとは</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#LinuCの概要"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">LinuCの概要</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#受験の申し込み手続き"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">受験の申し込み手続き</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#受験の実際"><span class="post-toc-number">1.10.</span> <span class="post-toc-text">受験の実際</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#試験問題の形式"><span class="post-toc-number">1.11.</span> <span class="post-toc-text">試験問題の形式</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#学習の進め方"><span class="post-toc-number">1.12.</span> <span class="post-toc-text">学習の進め方</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#受験のテクニック"><span class="post-toc-number">1.13.</span> <span class="post-toc-text">受験のテクニック</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#■第1部-201試験（LinuC-Level2-Exam-201）"><span class="post-toc-number">1.14.</span> <span class="post-toc-text">■第1部　201試験（LinuC Level2 Exam 201）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第1章-システムの起動とLinuxカーネル"><span class="post-toc-number">1.15.</span> <span class="post-toc-text">第1章　システムの起動とLinuxカーネル</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-ブートプロセス"><span class="post-toc-number">1.15.1.</span> <span class="post-toc-text">1.1　ブートプロセス</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-ブートローダ"><span class="post-toc-number">1.15.2.</span> <span class="post-toc-text">1.2　ブートローダ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-システム起動のカスタマイズ"><span class="post-toc-number">1.15.3.</span> <span class="post-toc-text">1.3　システム起動のカスタマイズ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-4-カーネルの構成要素"><span class="post-toc-number">1.15.4.</span> <span class="post-toc-text">1.4　カーネルの構成要素</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-5-カーネルのコンパイル"><span class="post-toc-number">1.15.5.</span> <span class="post-toc-text">1.5　カーネルのコンパイル</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-6-カーネルパラメータの変更"><span class="post-toc-number">1.15.6.</span> <span class="post-toc-text">1.6　カーネルパラメータの変更</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-7-カーネルの管理と問題解決"><span class="post-toc-number">1.15.7.</span> <span class="post-toc-text">1.7　カーネルの管理と問題解決</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#練習問題"><span class="post-toc-number">1.15.8.</span> <span class="post-toc-text">練習問題</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第2章-ファイルシステムとストレージ管理"><span class="post-toc-number">1.16.</span> <span class="post-toc-text">第2章　ファイルシステムとストレージ管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-ファイルシステムの設定とマウント"><span class="post-toc-number">1.16.1.</span> <span class="post-toc-text">2.1　ファイルシステムの設定とマウント</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-ファイルシステムの作成"><span class="post-toc-number">1.16.2.</span> <span class="post-toc-text">2.2　ファイルシステムの作成</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-ファイルシステムの管理"><span class="post-toc-number">1.16.3.</span> <span class="post-toc-text">2.3　ファイルシステムの管理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-LVM"><span class="post-toc-number">1.16.4.</span> <span class="post-toc-text">2.4　LVM</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#練習問題-1"><span class="post-toc-number">1.16.5.</span> <span class="post-toc-text">練習問題</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第3章-ネットワーク構成"><span class="post-toc-number">1.17.</span> <span class="post-toc-text">第3章　ネットワーク構成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-基本的なネットワーク構成"><span class="post-toc-number">1.17.1.</span> <span class="post-toc-text">3.1　基本的なネットワーク構成</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-2-高度なネットワーク設定"><span class="post-toc-number">1.17.2.</span> <span class="post-toc-text">3.2　高度なネットワーク設定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-ネットワークの問題解決"><span class="post-toc-number">1.17.3.</span> <span class="post-toc-text">3.3　ネットワークの問題解決</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#練習問題-2"><span class="post-toc-number">1.17.4.</span> <span class="post-toc-text">練習問題</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第4章-システムの保守と運用管理"><span class="post-toc-number">1.18.</span> <span class="post-toc-text">第4章　システムの保守と運用管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-makeによるソースコードからのビルドとインストール"><span class="post-toc-number">1.18.1.</span> <span class="post-toc-text">4.1　makeによるソースコードからのビルドとインストール</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-バックアップ"><span class="post-toc-number">1.18.2.</span> <span class="post-toc-text">4.2　バックアップ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-ユーザーへのシステム管理情報の通知"><span class="post-toc-number">1.18.3.</span> <span class="post-toc-text">4.3　ユーザーへのシステム管理情報の通知</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-4-リソース使用状況の把握"><span class="post-toc-number">1.18.4.</span> <span class="post-toc-text">4.4　リソース使用状況の把握</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-死活監視と運用監視ツール"><span class="post-toc-number">1.18.5.</span> <span class="post-toc-text">4.5　死活監視と運用監視ツール</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-6-システム構成ツール"><span class="post-toc-number">1.18.6.</span> <span class="post-toc-text">4.6　システム構成ツール</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#練習問題-3"><span class="post-toc-number">1.18.7.</span> <span class="post-toc-text">練習問題</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第5章-仮想化サーバー"><span class="post-toc-number">1.19.</span> <span class="post-toc-text">第5章　仮想化サーバー</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-1-仮想マシンの仕組みとKVM"><span class="post-toc-number">1.19.1.</span> <span class="post-toc-text">5.1　仮想マシンの仕組みとKVM</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-仮想マシンの作成と管理"><span class="post-toc-number">1.19.2.</span> <span class="post-toc-text">5.2　仮想マシンの作成と管理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#練習問題-4"><span class="post-toc-number">1.19.3.</span> <span class="post-toc-text">練習問題</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第6章-コンテナ"><span class="post-toc-number">1.20.</span> <span class="post-toc-text">第6章　コンテナ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-1-コンテナの仕組み"><span class="post-toc-number">1.20.1.</span> <span class="post-toc-text">6.1　コンテナの仕組み</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-Dockerコンテナとコンテナイメージの管理"><span class="post-toc-number">1.20.2.</span> <span class="post-toc-text">6.2　Dockerコンテナとコンテナイメージの管理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#練習問題-5"><span class="post-toc-number">1.20.3.</span> <span class="post-toc-text">練習問題</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第7章-201模擬試験"><span class="post-toc-number">1.21.</span> <span class="post-toc-text">第7章　201模擬試験</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Q56-コンテナに関する説明で誤っているもの"><span class="post-toc-number">1.22.</span> <span class="post-toc-text">Q56.コンテナに関する説明で誤っているもの</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#模擬試験-問題"><span class="post-toc-number">1.23.</span> <span class="post-toc-text">模擬試験 問題</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#模擬試験-解答・解説"><span class="post-toc-number">1.24.</span> <span class="post-toc-text">模擬試験 解答・解説</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#■第2部-202試験（LinuC-Level2-Exam-202）"><span class="post-toc-number">1.25.</span> <span class="post-toc-text">■第2部　202試験（LinuC Level2 Exam 202）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第8章-ネットワーククライアントの管理"><span class="post-toc-number">1.26.</span> <span class="post-toc-text">第8章　ネットワーククライアントの管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-1-DHCPの設定"><span class="post-toc-number">1.26.1.</span> <span class="post-toc-text">8.1　DHCPの設定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-2-PAM認証"><span class="post-toc-number">1.26.2.</span> <span class="post-toc-text">8.2　PAM認証</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-3-LDAP"><span class="post-toc-number">1.26.3.</span> <span class="post-toc-text">8.3　LDAP</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第9章-ドメインネームサーバー"><span class="post-toc-number">1.27.</span> <span class="post-toc-text">第9章　ドメインネームサーバー</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-DNSの基本"><span class="post-toc-number">1.27.1.</span> <span class="post-toc-text">9.1　DNSの基本</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-2-BINDの基本設定"><span class="post-toc-number">1.27.2.</span> <span class="post-toc-text">9.2　BINDの基本設定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-3-ゾーンファイルの管理"><span class="post-toc-number">1.27.3.</span> <span class="post-toc-text">9.3　ゾーンファイルの管理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-4-DNSサーバーのセキュリティ"><span class="post-toc-number">1.27.4.</span> <span class="post-toc-text">9.4　DNSサーバーのセキュリティ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第10章-HTTPサーバーとプロキシサーバー"><span class="post-toc-number">1.28.</span> <span class="post-toc-text">第10章　HTTPサーバーとプロキシサーバー</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-1-Webサーバーの設定"><span class="post-toc-number">1.28.1.</span> <span class="post-toc-text">10.1　Webサーバーの設定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-2-Nginx"><span class="post-toc-number">1.28.2.</span> <span class="post-toc-text">10.2　Nginx</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-3-プロキシサーバーの設定"><span class="post-toc-number">1.28.3.</span> <span class="post-toc-text">10.3　プロキシサーバーの設定</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第11章-電子メールサービス"><span class="post-toc-number">1.29.</span> <span class="post-toc-text">第11章　電子メールサービス</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11-1-SMTPサーバーの構築"><span class="post-toc-number">1.29.1.</span> <span class="post-toc-text">11.1　SMTPサーバーの構築</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11-2-Dovecotの利用"><span class="post-toc-number">1.29.2.</span> <span class="post-toc-text">11.2　Dovecotの利用</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第12章-ファイル共有サービス"><span class="post-toc-number">1.30.</span> <span class="post-toc-text">第12章　ファイル共有サービス</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-1-Microsoftネットワーク"><span class="post-toc-number">1.30.1.</span> <span class="post-toc-text">12.1　Microsoftネットワーク</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-2-Sambaサーバーの構築"><span class="post-toc-number">1.30.2.</span> <span class="post-toc-text">12.2　Sambaサーバーの構築</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-3-NFSサーバーの構築"><span class="post-toc-number">1.30.3.</span> <span class="post-toc-text">12.3　NFSサーバーの構築</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第13章-システムのセキュリティ"><span class="post-toc-number">1.31.</span> <span class="post-toc-text">第13章　システムのセキュリティ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#13-1-パケットフィルタリング"><span class="post-toc-number">1.31.1.</span> <span class="post-toc-text">13.1　パケットフィルタリング</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#13-2-OpenSSH"><span class="post-toc-number">1.31.2.</span> <span class="post-toc-text">13.2　OpenSSH</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#13-3-OpenVPN"><span class="post-toc-number">1.31.3.</span> <span class="post-toc-text">13.3　OpenVPN</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#13-4-セキュリティ業務"><span class="post-toc-number">1.31.4.</span> <span class="post-toc-text">13.4　セキュリティ業務</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第14章-システムアーキテクチャ"><span class="post-toc-number">1.32.</span> <span class="post-toc-text">第14章　システムアーキテクチャ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#14-1-高可用システムの実現方法"><span class="post-toc-number">1.32.1.</span> <span class="post-toc-text">14.1　高可用システムの実現方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#14-2-キャパシティプランニングとスケーラビリティの確保"><span class="post-toc-number">1.32.2.</span> <span class="post-toc-text">14.2　キャパシティプランニングとスケーラビリティの確保</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#14-3-クラウドサービス上のシステム構成"><span class="post-toc-number">1.32.3.</span> <span class="post-toc-text">14.3　クラウドサービス上のシステム構成</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#14-4-典型的なシステムアーキテクチャ"><span class="post-toc-number">1.32.4.</span> <span class="post-toc-text">14.4　典型的なシステムアーキテクチャ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第15章-202模擬試験"><span class="post-toc-number">1.33.</span> <span class="post-toc-text">第15章　202模擬試験</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#模擬試験-問題-1"><span class="post-toc-number">1.34.</span> <span class="post-toc-text">模擬試験 問題</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#模擬試験-解答・解説-1"><span class="post-toc-number">1.35.</span> <span class="post-toc-text">模擬試験 解答・解説</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#付録-Linux実習環境の使い方"><span class="post-toc-number">1.36.</span> <span class="post-toc-text">付録　Linux実習環境の使い方</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux実習環境の利用について"><span class="post-toc-number">1.37.</span> <span class="post-toc-text">Linux実習環境の利用について</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#VirtualBoxのインストール"><span class="post-toc-number">1.38.</span> <span class="post-toc-text">VirtualBoxのインストール</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#仮想マシンの使い方"><span class="post-toc-number">1.39.</span> <span class="post-toc-text">仮想マシンの使い方</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-2021-11_Linux教科書_LinuCレベル2Version10.0対応 copy"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Linux教科書_LinuCレベル2Version10.0対応</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-11-20 00:00:00" datetime="2021-11-19T15:00:00.000Z"  itemprop="datePublished">2021-11-20</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/Linux/">Linux</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Linux教科書-LinuCレベル2Version10-0対応"><a href="#Linux教科書-LinuCレベル2Version10-0対応" class="headerlink" title="Linux教科書_LinuCレベル2Version10.0対応"></a>Linux教科書_LinuCレベル2Version10.0対応</h1><h2 id="理解したこと"><a href="#理解したこと" class="headerlink" title="理解したこと"></a>理解したこと</h2><h2 id="書籍サイト"><a href="#書籍サイト" class="headerlink" title="書籍サイト"></a>書籍サイト</h2><p><a href="https://www.shoeisha.co.jp/book/detail/9784798167961">https://www.shoeisha.co.jp/book/detail/9784798167961</a></p>
<h2 id="ダウンロード"><a href="#ダウンロード" class="headerlink" title="ダウンロード"></a>ダウンロード</h2><p><a href="https://www.shoeisha.co.jp/book/download/9784798167961/detail">https://www.shoeisha.co.jp/book/download/9784798167961/detail</a></p>
<h2 id="書籍情報"><a href="#書籍情報" class="headerlink" title="書籍情報"></a>書籍情報</h2><p>支持率No.1「Linux教科書」シリーズのノウハウを注いだ『LinuCレベル2』が登場！<br>クラウド時代のLinuxエンジニアの技術力を証明する資格として<br>LPI-Japanにより新たに開発された認定試験が「LinuC（リナック）」です。</p>
<p>この試験が、2020年4月よりVersion 10.0にバージョンアップ。<br>本書は「レベル2 Version 10.0」に対応したLPI-Japan認定テキストです。<br>「あずき本」で有名な、支持率No.1「Linux教科書」シリーズのノウハウを<br>すべて注ぎ込み、LinuCレベル2最新バージョンの出題範囲を完全網羅した新しい定番書です。</p>
<p>●「201試験」「202試験」の2試験に対応。出題範囲を完全網羅<br>●学習したことを確認できる練習問題を、各章末に豊富に掲載しています<br>●巻末には1回分の模擬試験を収録。本試験に向けて実力を試せます<br>●Linux実習環境（CentOS）を翔泳社Webサイトからダウンロード可。<br>　実際にコマンドを入力しながら学習できます</p>
<p>【LinuCレベル2】 「仮想マシン・コンテナを含むLinuxシステム、ネットワークの設定・構築」<br>ができるエンジニアとして認定されます。</p>
<h2 id="メモ"><a href="#メモ" class="headerlink" title="メモ"></a>メモ</h2><ul>
<li>ローカル環境にDockerでCentOS7環境を作ってSSHで接続して演習する<ul>
<li><a href="https://pocketcode.net/docker-centos7-ssh-connect">https://pocketcode.net/docker-centos7-ssh-connect</a></li>
</ul>
</li>
</ul>
<h2 id="序章-LinuCの概要"><a href="#序章-LinuCの概要" class="headerlink" title="序章　LinuCの概要"></a>序章　LinuCの概要</h2><h2 id="LinuCとは"><a href="#LinuCとは" class="headerlink" title="LinuCとは"></a>LinuCとは</h2><h2 id="LinuCの概要"><a href="#LinuCの概要" class="headerlink" title="LinuCの概要"></a>LinuCの概要</h2><h2 id="受験の申し込み手続き"><a href="#受験の申し込み手続き" class="headerlink" title="受験の申し込み手続き"></a>受験の申し込み手続き</h2><h2 id="受験の実際"><a href="#受験の実際" class="headerlink" title="受験の実際"></a>受験の実際</h2><h2 id="試験問題の形式"><a href="#試験問題の形式" class="headerlink" title="試験問題の形式"></a>試験問題の形式</h2><h2 id="学習の進め方"><a href="#学習の進め方" class="headerlink" title="学習の進め方"></a>学習の進め方</h2><h2 id="受験のテクニック"><a href="#受験のテクニック" class="headerlink" title="受験のテクニック"></a>受験のテクニック</h2><h2 id="■第1部-201試験（LinuC-Level2-Exam-201）"><a href="#■第1部-201試験（LinuC-Level2-Exam-201）" class="headerlink" title="■第1部　201試験（LinuC Level2 Exam 201）"></a>■第1部　201試験（LinuC Level2 Exam 201）</h2><h2 id="第1章-システムの起動とLinuxカーネル"><a href="#第1章-システムの起動とLinuxカーネル" class="headerlink" title="第1章　システムの起動とLinuxカーネル"></a>第1章　システムの起動とLinuxカーネル</h2><h3 id="1-1-ブートプロセス"><a href="#1-1-ブートプロセス" class="headerlink" title="1.1　ブートプロセス"></a>1.1　ブートプロセス</h3><ul>
<li>BIOS<ul>
<li>MBR:マスターブートレコード<ul>
<li>ブートローダ：OSを起動するプログラム</li>
<li>パーティションテーブル</li>
</ul>
</li>
</ul>
</li>
<li>UEFI<ul>
<li>GPT:GUID Partition Table</li>
<li>ブートローダ：UEFIシステムパーティション(ESP)に格納される</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ブロックデバイスを一覧表示する</span></span><br><span class="line">lsblk</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ブートローダ：OSを起動するプログラム</p>
<ul>
<li>Linuxでもっともよく利用されるブートローダはGRUB(Grand Unified Bootloader)</li>
</ul>
</li>
<li><p>カーネル</p>
<ul>
<li>OSの中でハードウェアとソフトウェアの仲立ちをしてくれるプログラム</li>
<li><a href="https://qiita.com/uguis410/items/17ec1e447e9716bfdca7">https://qiita.com/uguis410/items/17ec1e447e9716bfdca7</a></li>
<li>起動処理<ul>
<li>組み込まれているハードウェアの検出と初期化</li>
<li>システムクロックの設定</li>
<li>ルートパーティションのチェックとマウント</li>
<li>systemdの開始</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">journalctl -b</span><br><span class="line">dmesg</span><br></pre></td></tr></table></figure>

<ul>
<li><p>初期RAMディスク</p>
<ul>
<li>カーネルが起動すると、初期RAMディスクをルートパーティションとしてマウントする</li>
</ul>
</li>
<li><p>RAMディスク：メモリ上にファイルシステムを作成</p>
</li>
<li><p>ループバックマウント：ファイルをファイルシステムとしてマウントする</p>
</li>
<li><p>TODO: 初期RAMディスクの作成などについては復習が必要</p>
</li>
</ul>
<h3 id="1-2-ブートローダ"><a href="#1-2-ブートローダ" class="headerlink" title="1.2　ブートローダ"></a>1.2　ブートローダ</h3><ul>
<li>ブートローダとは：<ul>
<li>カーネルをストレージから読み込み、システムを起動するためのプログラム</li>
<li>Linuxの代表的なブートローダはGRUB</li>
</ul>
</li>
</ul>
<h3 id="1-3-システム起動のカスタマイズ"><a href="#1-3-システム起動のカスタマイズ" class="headerlink" title="1.3　システム起動のカスタマイズ"></a>1.3　システム起動のカスタマイズ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># メンテナンスモード</span></span><br><span class="line">systemctl isolate rescue.target</span><br><span class="line">systemctl rescue</span><br><span class="line"><span class="comment"># 緊急モード</span></span><br><span class="line">systemctl isolate emergency.target</span><br><span class="line">systemclt emergency</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Unit設定ファイル</p>
<ul>
<li><code>/etc/systemd/system</code>ディレクトリに配置される<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[tomo@localhost system]$ cat multi-user.target.wants/postfix.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=Postfix Mail Transport Agent</span><br><span class="line">After=syslog.target network.target</span><br><span class="line">Conflicts=sendmail.service exim.service</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">PIDFile=/var/spool/postfix/pid/master.pid</span><br><span class="line">EnvironmentFile=-/etc/sysconfig/network</span><br><span class="line">ExecStartPre=-/usr/libexec/postfix/aliasesdb</span><br><span class="line">ExecStartPre=-/usr/libexec/postfix/chroot-update</span><br><span class="line">ExecStart=/usr/sbin/postfix start</span><br><span class="line">ExecReload=/usr/sbin/postfix reload</span><br><span class="line">ExecStop=/usr/sbin/postfix stop</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># systemd-deltaコマンド 設定ファイルの差分を出力</span></span><br><span class="line">[tomo@localhost system]$ systemd-delta</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-0.slice → /run/systemd/system/user-0.slice.d/50-After-systemd-logind\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-0.slice → /run/systemd/system/user-0.slice.d/50-TasksMax.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-0.slice → /run/systemd/system/user-0.slice.d/50-Description.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-0.slice → /run/systemd/system/user-0.slice.d/50-After-systemd-user-sessions\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-2.scope → /run/systemd/system/session-2.scope.d/50-After-systemd-user-sessions\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-2.scope → /run/systemd/system/session-2.scope.d/50-After-systemd-logind\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-2.scope → /run/systemd/system/session-2.scope.d/50-Description.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-2.scope → /run/systemd/system/session-2.scope.d/50-Slice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-2.scope → /run/systemd/system/session-2.scope.d/50-SendSIGHUP.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-2.scope → /run/systemd/system/session-2.scope.d/50-TasksMax.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-6.scope → /run/systemd/system/session-6.scope.d/50-Slice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-6.scope → /run/systemd/system/session-6.scope.d/50-TasksMax.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-6.scope → /run/systemd/system/session-6.scope.d/50-After-systemd-user-sessions\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-6.scope → /run/systemd/system/session-6.scope.d/50-After-systemd-logind\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-6.scope → /run/systemd/system/session-6.scope.d/50-Description.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-6.scope → /run/systemd/system/session-6.scope.d/50-SendSIGHUP.conf</span><br><span class="line">[EQUIVALENT] /etc/systemd/system/default.target → /usr/lib/systemd/system/default.target</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-3.scope → /run/systemd/system/session-3.scope.d/50-After-systemd-logind\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-3.scope → /run/systemd/system/session-3.scope.d/50-SendSIGHUP.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-3.scope → /run/systemd/system/session-3.scope.d/50-TasksMax.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-3.scope → /run/systemd/system/session-3.scope.d/50-Description.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-3.scope → /run/systemd/system/session-3.scope.d/50-Slice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/session-3.scope → /run/systemd/system/session-3.scope.d/50-After-systemd-user-sessions\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-1000.slice → /run/systemd/system/user-1000.slice.d/50-After-systemd-logind\x2eservice.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-1000.slice → /run/systemd/system/user-1000.slice.d/50-Description.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-1000.slice → /run/systemd/system/user-1000.slice.d/50-TasksMax.conf</span><br><span class="line">[EXTENDED]   /run/systemd/system/user-1000.slice → /run/systemd/system/user-1000.slice.d/50-After-systemd-user-sessions\x2eservice.conf</span><br><span class="line"></span><br><span class="line">27 overridden configuration files found.</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>systemdのログ</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">journalctl -b</span><br><span class="line">journalctl -f</span><br><span class="line">journalctl -n 10</span><br><span class="line">journalctl -p err</span><br><span class="line">-p, --priority=</span><br><span class="line">           Filter output by message priorities or priority ranges. Takes either a single numeric or textual <span class="built_in">log</span> level (i.e. between 0/<span class="string">"emerg"</span> and 7/<span class="string">"debug"</span>), or a range of numeric/text <span class="built_in">log</span> levels <span class="keyword">in</span> the</span><br><span class="line">           form FROM..TO. The <span class="built_in">log</span> levels are the usual syslog <span class="built_in">log</span> levels as documented <span class="keyword">in</span> syslog(3), i.e.  <span class="string">"emerg"</span> (0), <span class="string">"alert"</span> (1), <span class="string">"crit"</span> (2), <span class="string">"err"</span> (3), <span class="string">"warning"</span> (4), <span class="string">"notice"</span> (5), <span class="string">"info"</span> (6),</span><br><span class="line">           <span class="string">"debug"</span> (7). If a single <span class="built_in">log</span> level is specified, all messages with this <span class="built_in">log</span> level or a lower (hence more important) <span class="built_in">log</span> level are shown. If a range is specified, all messages within the range are</span><br><span class="line">           shown, including both the start and the end value of the range. This will add <span class="string">"PRIORITY="</span> matches <span class="keyword">for</span> the specified priorities.</span><br><span class="line"></span><br><span class="line">journalctl -r</span><br><span class="line"><span class="comment"># よく使うことになるのはこれだけと思う</span></span><br><span class="line">journalctl -u postfix.service</span><br></pre></td></tr></table></figure>

<ul>
<li>ログの保存場所<ul>
<li><code>/var/run/log/journal</code>ディレクトリ配下にバイナリファイルが存在する。このファイルはシステム再起動で失われるため永続化するなら</li>
<li><code>/var/log/journal</code>ディレクトリを作成して、<code>/etc/systemd/journalId.conf</code>ファイルで次の設定</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Storage&#x3D;persistent</span><br><span class="line">SystemMaxUse&#x3D;200M</span><br></pre></td></tr></table></figure>


<h3 id="1-4-カーネルの構成要素"><a href="#1-4-カーネルの構成要素" class="headerlink" title="1.4　カーネルの構成要素"></a>1.4　カーネルの構成要素</h3><ul>
<li><p>カーネルバージョン</p>
<ul>
<li><code>uname</code>コマンドでバージョンがわかる</li>
<li><code>cat /proc/version</code>でもわかる</li>
</ul>
</li>
<li><p>カーネルイメージ</p>
<ul>
<li><code>ls /boot</code>でvmlinuz-xxxの名前でファイルが存在する</li>
</ul>
</li>
<li><p>lsmodコマンド</p>
<ul>
<li>現在ロードされているすべてのモジュール一覧を表示</li>
<li><code>cat /proc/modules</code>でも同様の情報が取得できる</li>
</ul>
</li>
<li><p>modinfoコマンド</p>
<ul>
<li>モジュールの情報を表示</li>
</ul>
</li>
<li><p>insmodコマンド</p>
<ul>
<li>ローダブルモジュールをロード</li>
</ul>
</li>
<li><p>rmmodコマンド</p>
<ul>
<li>ロードされているモジュールをアンロード</li>
</ul>
</li>
<li><p>modproveコマンド</p>
<ul>
<li>モジュールのロードやアンロードを行います。</li>
<li>insmodやrmmodだと依存関係を気にしなければ行けないが、</li>
<li>このコマンドであれば必要なモジュールをロードできるから楽</li>
<li>modproveコマンドが参照する依存関係はmodles.depファイルに記述されている</li>
</ul>
</li>
</ul>
<h3 id="1-5-カーネルのコンパイル"><a href="#1-5-カーネルのコンパイル" class="headerlink" title="1.5　カーネルのコンパイル"></a>1.5　カーネルのコンパイル</h3><ul>
<li>カーネルソースの格納ディレクトリ：<code>/usr/src/linux</code></li>
<li>TODO: ディレクトリ内構造把握しておいたほうがいい</li>
</ul>
<h3 id="1-6-カーネルパラメータの変更"><a href="#1-6-カーネルパラメータの変更" class="headerlink" title="1.6　カーネルパラメータの変更"></a>1.6　カーネルパラメータの変更</h3><h3 id="1-7-カーネルの管理と問題解決"><a href="#1-7-カーネルの管理と問題解決" class="headerlink" title="1.7　カーネルの管理と問題解決"></a>1.7　カーネルの管理と問題解決</h3><h3 id="練習問題"><a href="#練習問題" class="headerlink" title="練習問題"></a>練習問題</h3><ul>
<li>1.1 GRUBの設定ファイルgrub.cfgを生成するコマンド：grub2-mkconfig -o &#x2F;boot&#x2F;grub2&#x2F;grub.cfg</li>
<li>1.2 システム起動→GRUBメニュー画面→カーネルが見つからないエラー：メニュー画面で<code>[c]</code>を押下してGRUBシェルを起動し、原因を探って修復</li>
<li>1.3 GRUBを再インストールするコマンド：<code>grub-install</code>or<code>grub2-install</code>コマンド</li>
<li>1.4 systemdを採用したシステムでログを確認するコマンド：<code>journalctl</code>コマンド</li>
<li>1.5 systemdを採用したシステムでnginxサーバが自動起動しないようにするコマンド：<code>systemctl disabled nginx.service</code></li>
<li>1.6 rescueモードで起動：一般ユーザはログインできない、ネットワーク接続されない</li>
<li>1.7 mobproveコマンドが利用するファイルで、モジュールの依存関係情報が格納されているファイル：<code>/lib/modules/4.19.132/modules.dep</code></li>
<li>1.8 xxx</li>
<li>1.9 カーネルソースツリーを初期化するコマンド：make mrproper</li>
<li>1.10 ロードされているカーネルモジュールを確認する方法：<code>lsmod</code>or<code>cat /proc/modules</code></li>
<li>1.11 初期RAMディスクに関する問題：システム起動に必要なデバイスドライバがカーネル本体に含まれていれば初期RAMディスクは必須ではない</li>
<li>1.12 </li>
<li>1.13</li>
<li>1.14</li>
<li>1.15</li>
</ul>
<h2 id="第2章-ファイルシステムとストレージ管理"><a href="#第2章-ファイルシステムとストレージ管理" class="headerlink" title="第2章　ファイルシステムとストレージ管理"></a>第2章　ファイルシステムとストレージ管理</h2><h3 id="2-1-ファイルシステムの設定とマウント"><a href="#2-1-ファイルシステムの設定とマウント" class="headerlink" title="2.1　ファイルシステムの設定とマウント"></a>2.1　ファイルシステムの設定とマウント</h3><ul>
<li>ファイルシステム：SSDやHDDなどのストレージにファイルを保存して管理する仕組み</li>
<li>システムで利用するファイルシステム情報は<code>/etc/fstab</code>ファイルに記述されている</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost etc]<span class="comment"># cat /etc/fstab</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># /etc/fstab</span></span><br><span class="line"><span class="comment"># Created by anaconda on Sat Nov 20 22:26:51 2021</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span></span><br><span class="line"><span class="comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">/dev/mapper/centos-root /                       xfs     defaults        0 0</span><br><span class="line">UUID=165774f9-21d1-4f11-ac52-75928012626b /boot                   xfs     defaults        0 0</span><br><span class="line">/dev/mapper/centos-swap swap                    swap    defaults        0 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 書式：</span></span><br><span class="line"><span class="comment"># 1.デバイスファイル名・ラベル・UID</span></span><br><span class="line"><span class="comment"># 2.マウントポイント</span></span><br><span class="line"><span class="comment"># 3.ファイルシステムの種類</span></span><br><span class="line"><span class="comment"># 4.マウントオプション</span></span><br><span class="line"><span class="comment"># 5.dumpコマンドの対象</span></span><br><span class="line"><span class="comment"># 6.ブート時にfsckがチェックする順序</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># UUIDを確認するコマンド</span></span><br><span class="line">[root@localhost etc]<span class="comment"># blkid</span></span><br><span class="line">/dev/mapper/centos-root: UUID=<span class="string">"947b91d3-28fe-493a-b8e9-522e5c598fb6"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line">/dev/sda2: UUID=<span class="string">"Rl5syf-IFgI-7shw-aKvy-Y4cH-ZrIM-lVVpOU"</span> TYPE=<span class="string">"LVM2_member"</span></span><br><span class="line">/dev/sda1: UUID=<span class="string">"165774f9-21d1-4f11-ac52-75928012626b"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line">/dev/mapper/centos-swap: UUID=<span class="string">"4fab2c94-5288-45ee-8a62-1acd401bb752"</span> TYPE=<span class="string">"swap"</span></span><br><span class="line"></span><br><span class="line">[root@localhost etc]<span class="comment"># ls -l /dev/disk/by-uuid/</span></span><br><span class="line">合計 0</span><br><span class="line">lrwxrwxrwx. 1 root root 10 11月 21 17:49 165774f9-21d1-4f11-ac52-75928012626b -&gt; ../../sda1</span><br><span class="line">lrwxrwxrwx. 1 root root 10 11月 21 17:49 4fab2c94-5288-45ee-8a62-1acd401bb752 -&gt; ../../dm-1</span><br><span class="line">lrwxrwxrwx. 1 root root 10 11月 21 17:49 947b91d3-28fe-493a-b8e9-522e5c598fb6 -&gt; ../../dm-0</span><br><span class="line"></span><br><span class="line"><span class="comment"># UUIDを変更するコマンド</span></span><br><span class="line">tune2fs -U `uuidgen` /dev/sdb1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost etc]<span class="comment"># cat /usr/lib/systemd/system/tmp.mount</span></span><br><span class="line"><span class="comment">#  This file is part of systemd.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  systemd is free software; you can redistribute it and/or modify it</span></span><br><span class="line"><span class="comment">#  under the terms of the GNU Lesser General Public License as published by</span></span><br><span class="line"><span class="comment">#  the Free Software Foundation; either version 2.1 of the License, or</span></span><br><span class="line"><span class="comment">#  (at your option) any later version.</span></span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=Temporary Directory</span><br><span class="line">Documentation=man:hier(7)</span><br><span class="line">Documentation=http://www.freedesktop.org/wiki/Software/systemd/APIFileSystems</span><br><span class="line">ConditionPathIsSymbolicLink=!/tmp</span><br><span class="line">DefaultDependencies=no</span><br><span class="line">Conflicts=umount.target</span><br><span class="line">Before=<span class="built_in">local</span>-fs.target umount.target</span><br><span class="line"></span><br><span class="line">[Mount]</span><br><span class="line">What=tmpfs</span><br><span class="line">Where=/tmp</span><br><span class="line">Type=tmpfs</span><br><span class="line">Options=mode=1777,strictatime</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make 'systemctl enable tmp.mount' work:</span></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=<span class="built_in">local</span>-fs.target</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># カーネルがサポートしているファイルシステム</span></span><br><span class="line">[root@localhost etc]<span class="comment"># cat /proc/filesystems</span></span><br><span class="line">nodev   sysfs</span><br><span class="line">nodev   rootfs</span><br><span class="line">nodev   ramfs</span><br><span class="line">nodev   bdev</span><br><span class="line">nodev   proc</span><br><span class="line">nodev   cgroup</span><br><span class="line">nodev   cpuset</span><br><span class="line">nodev   tmpfs</span><br><span class="line">nodev   devtmpfs</span><br><span class="line">nodev   debugfs</span><br><span class="line">nodev   securityfs</span><br><span class="line">nodev   sockfs</span><br><span class="line">nodev   dax</span><br><span class="line">nodev   bpf</span><br><span class="line">nodev   pipefs</span><br><span class="line">nodev   configfs</span><br><span class="line">nodev   devpts</span><br><span class="line">nodev   hugetlbfs</span><br><span class="line">nodev   autofs</span><br><span class="line">nodev   pstore</span><br><span class="line">nodev   mqueue</span><br><span class="line">nodev   selinuxfs</span><br><span class="line">        fuseblk</span><br><span class="line">nodev   fuse</span><br><span class="line">nodev   fusectl</span><br><span class="line">        xfs</span><br><span class="line">nodev   rpc_pipefs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 現在どのようなファイルシステムがマウントされているか</span></span><br><span class="line">[root@localhost etc]<span class="comment"># cat /etc/mtab</span></span><br><span class="line">sysfs /sys sysfs rw,seclabel,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">devtmpfs /dev devtmpfs rw,seclabel,nosuid,size=4515168k,nr_inodes=1128792,mode=755 0 0</span><br><span class="line">securityfs /sys/kernel/security securityfs rw,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">tmpfs /dev/shm tmpfs rw,seclabel,nosuid,nodev 0 0</span><br><span class="line">devpts /dev/pts devpts rw,seclabel,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0</span><br><span class="line">tmpfs /run tmpfs rw,seclabel,nosuid,nodev,mode=755 0 0</span><br><span class="line">tmpfs /sys/fs/cgroup tmpfs ro,seclabel,nosuid,nodev,noexec,mode=755 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/systemd cgroup rw,seclabel,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd 0 0</span><br><span class="line">pstore /sys/fs/pstore pstore rw,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/devices cgroup rw,seclabel,nosuid,nodev,noexec,relatime,devices 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/net_cls,net_prio cgroup rw,seclabel,nosuid,nodev,noexec,relatime,net_prio,net_cls 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/hugetlb cgroup rw,seclabel,nosuid,nodev,noexec,relatime,hugetlb 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/cpuset cgroup rw,seclabel,nosuid,nodev,noexec,relatime,cpuset 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/cpu,cpuacct cgroup rw,seclabel,nosuid,nodev,noexec,relatime,cpuacct,cpu 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/memory cgroup rw,seclabel,nosuid,nodev,noexec,relatime,memory 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/perf_event cgroup rw,seclabel,nosuid,nodev,noexec,relatime,perf_event 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/pids cgroup rw,seclabel,nosuid,nodev,noexec,relatime,pids 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/blkio cgroup rw,seclabel,nosuid,nodev,noexec,relatime,blkio 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/freezer cgroup rw,seclabel,nosuid,nodev,noexec,relatime,freezer 0 0</span><br><span class="line">configfs /sys/kernel/config configfs rw,relatime 0 0</span><br><span class="line">/dev/mapper/centos-root / xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0</span><br><span class="line">selinuxfs /sys/fs/selinux selinuxfs rw,relatime 0 0</span><br><span class="line">systemd-1 /proc/sys/fs/binfmt_misc autofs rw,relatime,fd=22,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=10915 0 0</span><br><span class="line">debugfs /sys/kernel/debug debugfs rw,relatime 0 0</span><br><span class="line">mqueue /dev/mqueue mqueue rw,seclabel,relatime 0 0</span><br><span class="line">fusectl /sys/fs/fuse/connections fusectl rw,relatime 0 0</span><br><span class="line">hugetlbfs /dev/hugepages hugetlbfs rw,seclabel,relatime 0 0</span><br><span class="line">/dev/sda1 /boot xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0</span><br><span class="line">sunrpc /var/lib/nfs/rpc_pipefs rpc_pipefs rw,relatime 0 0</span><br><span class="line">tmpfs /run/user/1000 tmpfs rw,seclabel,nosuid,nodev,relatime,size=906448k,mode=700,uid=1000,gid=1000 0 0</span><br><span class="line">gvfsd-fuse /run/user/1000/gvfs fuse.gvfsd-fuse rw,nosuid,nodev,relatime,user_id=1000,group_id=1000 0 0</span><br><span class="line">tmpfs /run/user/0 tmpfs rw,seclabel,nosuid,nodev,relatime,size=906448k,mode=700 0 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># こちらにもほぼ同じ情報（どのようなファイルシステムがマウントされているか）</span></span><br><span class="line">[root@localhost etc]<span class="comment"># cat /proc/mounts</span></span><br><span class="line">sysfs /sys sysfs rw,seclabel,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">devtmpfs /dev devtmpfs rw,seclabel,nosuid,size=4515168k,nr_inodes=1128792,mode=755 0 0</span><br><span class="line">securityfs /sys/kernel/security securityfs rw,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">tmpfs /dev/shm tmpfs rw,seclabel,nosuid,nodev 0 0</span><br><span class="line">devpts /dev/pts devpts rw,seclabel,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0</span><br><span class="line">tmpfs /run tmpfs rw,seclabel,nosuid,nodev,mode=755 0 0</span><br><span class="line">tmpfs /sys/fs/cgroup tmpfs ro,seclabel,nosuid,nodev,noexec,mode=755 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/systemd cgroup rw,seclabel,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd 0 0</span><br><span class="line">pstore /sys/fs/pstore pstore rw,nosuid,nodev,noexec,relatime 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/devices cgroup rw,seclabel,nosuid,nodev,noexec,relatime,devices 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/net_cls,net_prio cgroup rw,seclabel,nosuid,nodev,noexec,relatime,net_prio,net_cls 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/hugetlb cgroup rw,seclabel,nosuid,nodev,noexec,relatime,hugetlb 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/cpuset cgroup rw,seclabel,nosuid,nodev,noexec,relatime,cpuset 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/cpu,cpuacct cgroup rw,seclabel,nosuid,nodev,noexec,relatime,cpuacct,cpu 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/memory cgroup rw,seclabel,nosuid,nodev,noexec,relatime,memory 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/perf_event cgroup rw,seclabel,nosuid,nodev,noexec,relatime,perf_event 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/pids cgroup rw,seclabel,nosuid,nodev,noexec,relatime,pids 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/blkio cgroup rw,seclabel,nosuid,nodev,noexec,relatime,blkio 0 0</span><br><span class="line">cgroup /sys/fs/cgroup/freezer cgroup rw,seclabel,nosuid,nodev,noexec,relatime,freezer 0 0</span><br><span class="line">configfs /sys/kernel/config configfs rw,relatime 0 0</span><br><span class="line">/dev/mapper/centos-root / xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0</span><br><span class="line">selinuxfs /sys/fs/selinux selinuxfs rw,relatime 0 0</span><br><span class="line">systemd-1 /proc/sys/fs/binfmt_misc autofs rw,relatime,fd=22,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=10915 0 0</span><br><span class="line">debugfs /sys/kernel/debug debugfs rw,relatime 0 0</span><br><span class="line">mqueue /dev/mqueue mqueue rw,seclabel,relatime 0 0</span><br><span class="line">fusectl /sys/fs/fuse/connections fusectl rw,relatime 0 0</span><br><span class="line">hugetlbfs /dev/hugepages hugetlbfs rw,seclabel,relatime 0 0</span><br><span class="line">/dev/sda1 /boot xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0</span><br><span class="line">sunrpc /var/lib/nfs/rpc_pipefs rpc_pipefs rw,relatime 0 0</span><br><span class="line">tmpfs /run/user/1000 tmpfs rw,seclabel,nosuid,nodev,relatime,size=906448k,mode=700,uid=1000,gid=1000 0 0</span><br><span class="line">gvfsd-fuse /run/user/1000/gvfs fuse.gvfsd-fuse rw,nosuid,nodev,relatime,user_id=1000,group_id=1000 0 0</span><br><span class="line">tmpfs /run/user/0 tmpfs rw,seclabel,nosuid,nodev,relatime,size=906448k,mode=700 0 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># そのため、/etc/mtabを誤って編集してしまった場合は、/proc/mountsを利用して復旧を試みることができる</span></span><br></pre></td></tr></table></figure>

<ul>
<li>マウントとアンマウント<ul>
<li>ファイルシステムを利用するには、任意のディレクトリをマウントポイントとしてマウントする必要がある</li>
<li>ファイルシステムをマウントするには<code>mount</code>コマンドを使う</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost etc]<span class="comment"># mount</span></span><br><span class="line">sysfs on /sys <span class="built_in">type</span> sysfs (rw,nosuid,nodev,noexec,relatime,seclabel)</span><br><span class="line">proc on /proc <span class="built_in">type</span> proc (rw,nosuid,nodev,noexec,relatime)</span><br><span class="line">devtmpfs on /dev <span class="built_in">type</span> devtmpfs (rw,nosuid,seclabel,size=4515168k,nr_inodes=1128792,mode=755)</span><br><span class="line">securityfs on /sys/kernel/security <span class="built_in">type</span> securityfs (rw,nosuid,nodev,noexec,relatime)</span><br><span class="line">tmpfs on /dev/shm <span class="built_in">type</span> tmpfs (rw,nosuid,nodev,seclabel)</span><br><span class="line">devpts on /dev/pts <span class="built_in">type</span> devpts (rw,nosuid,noexec,relatime,seclabel,gid=5,mode=620,ptmxmode=000)</span><br><span class="line">tmpfs on /run <span class="built_in">type</span> tmpfs (rw,nosuid,nodev,seclabel,mode=755)</span><br><span class="line">tmpfs on /sys/fs/cgroup <span class="built_in">type</span> tmpfs (ro,nosuid,nodev,noexec,seclabel,mode=755)</span><br><span class="line">cgroup on /sys/fs/cgroup/systemd <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)</span><br><span class="line">pstore on /sys/fs/pstore <span class="built_in">type</span> pstore (rw,nosuid,nodev,noexec,relatime)</span><br><span class="line">cgroup on /sys/fs/cgroup/devices <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,devices)</span><br><span class="line">cgroup on /sys/fs/cgroup/net_cls,net_prio <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,net_prio,net_cls)</span><br><span class="line">cgroup on /sys/fs/cgroup/hugetlb <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,hugetlb)</span><br><span class="line">cgroup on /sys/fs/cgroup/cpuset <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,cpuset)</span><br><span class="line">cgroup on /sys/fs/cgroup/cpu,cpuacct <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,cpuacct,cpu)</span><br><span class="line">cgroup on /sys/fs/cgroup/memory <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,memory)</span><br><span class="line">cgroup on /sys/fs/cgroup/perf_event <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,perf_event)</span><br><span class="line">cgroup on /sys/fs/cgroup/pids <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,pids)</span><br><span class="line">cgroup on /sys/fs/cgroup/blkio <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,blkio)</span><br><span class="line">cgroup on /sys/fs/cgroup/freezer <span class="built_in">type</span> cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,freezer)</span><br><span class="line">configfs on /sys/kernel/config <span class="built_in">type</span> configfs (rw,relatime)</span><br><span class="line">/dev/mapper/centos-root on / <span class="built_in">type</span> xfs (rw,relatime,seclabel,attr2,inode64,noquota)</span><br><span class="line">selinuxfs on /sys/fs/selinux <span class="built_in">type</span> selinuxfs (rw,relatime)</span><br><span class="line">systemd-1 on /proc/sys/fs/binfmt_misc <span class="built_in">type</span> autofs (rw,relatime,fd=22,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=10915)</span><br><span class="line">debugfs on /sys/kernel/debug <span class="built_in">type</span> debugfs (rw,relatime)</span><br><span class="line">mqueue on /dev/mqueue <span class="built_in">type</span> mqueue (rw,relatime,seclabel)</span><br><span class="line">fusectl on /sys/fs/fuse/connections <span class="built_in">type</span> fusectl (rw,relatime)</span><br><span class="line">hugetlbfs on /dev/hugepages <span class="built_in">type</span> hugetlbfs (rw,relatime,seclabel)</span><br><span class="line">/dev/sda1 on /boot <span class="built_in">type</span> xfs (rw,relatime,seclabel,attr2,inode64,noquota)</span><br><span class="line">sunrpc on /var/lib/nfs/rpc_pipefs <span class="built_in">type</span> rpc_pipefs (rw,relatime)</span><br><span class="line">tmpfs on /run/user/1000 <span class="built_in">type</span> tmpfs (rw,nosuid,nodev,relatime,seclabel,size=906448k,mode=700,uid=1000,gid=1000)</span><br><span class="line">gvfsd-fuse on /run/user/1000/gvfs <span class="built_in">type</span> fuse.gvfsd-fuse (rw,nosuid,nodev,relatime,user_id=1000,group_id=1000)</span><br><span class="line">tmpfs on /run/user/0 <span class="built_in">type</span> tmpfs (rw,nosuid,nodev,relatime,seclabel,size=906448k,mode=700)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># マウント</span></span><br><span class="line">mount /dev/sdb1 /data</span><br><span class="line">mount -o remount /data</span><br></pre></td></tr></table></figure>

<ul>
<li>スワップ<ul>
<li>スワップ領域は、ブロックデバイス上の仮想的なメモリ領域として使われます。</li>
<li>スワップ領域は通常、システムのインストール時に作成しますが、あとから作成することも可能</li>
<li>作成するには、<code>mkswap</code>コマンドを使う</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># スワップ領域作成</span></span><br><span class="line">mkswap -c /dev/sda3</span><br><span class="line"></span><br><span class="line">[root@localhost etc]<span class="comment"># dd if=/dev/zero of=/tmp/swapfile bs=1M count=500</span></span><br><span class="line">500+0 レコード入力</span><br><span class="line">500+0 レコード出力</span><br><span class="line">524288000 バイト (524 MB) コピーされました、 0.539949 秒、 971 MB/秒</span><br><span class="line">[root@localhost etc]<span class="comment"># mkswap /tmp/swapfile</span></span><br><span class="line">スワップ空間バージョン1を設定します、サイズ = 511996 KiB</span><br><span class="line">ラベルはありません, UUID=2b778452-5107-43a0-8f90-03fb310b6c19</span><br><span class="line">[root@localhost etc]<span class="comment"># chmod 600 /tmp/swapfile</span></span><br><span class="line">[root@localhost etc]<span class="comment"># ll /tmp/swapfile</span></span><br><span class="line">-rw-------. 1 root root 524288000 11月 21 18:59 /tmp/swapfile</span><br><span class="line"></span><br><span class="line">[root@localhost etc]<span class="comment"># swapon /tmp/swapfile</span></span><br><span class="line">[root@localhost etc]<span class="comment"># swapon -s</span></span><br><span class="line">Filename                                Type            Size    Used    Priority</span><br><span class="line">/dev/dm-1                               partition       839676  0       -2</span><br><span class="line">/tmp/swapfile                           file    511996  0       -3</span><br><span class="line">[root@localhost etc]<span class="comment"># cat /proc/swaps</span></span><br><span class="line">Filename                                Type            Size    Used    Priority</span><br><span class="line">/dev/dm-1                               partition       839676  0       -2</span><br><span class="line">/tmp/swapfile                           file            511996  0       -3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost etc]<span class="comment"># swapoff /tmp/swapfile</span></span><br><span class="line">[root@localhost etc]<span class="comment"># swapon -s</span></span><br><span class="line">Filename                                Type            Size    Used    Priority</span><br><span class="line">/dev/dm-1                               partition       839676  0       -2</span><br></pre></td></tr></table></figure>

<h3 id="2-2-ファイルシステムの作成"><a href="#2-2-ファイルシステムの作成" class="headerlink" title="2.2　ファイルシステムの作成"></a>2.2　ファイルシステムの作成</h3><ul>
<li><code>mkfs</code>コマンド：ファイルシステムを作成するコマンド</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ブロックデバイス確認</span></span><br><span class="line">lsblk</span><br><span class="line">[root@localhost etc]<span class="comment"># lsblk -p</span></span><br><span class="line">NAME                        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">/dev/sda                      8:0    0    8G  0 disk</span><br><span class="line">tq/dev/sda1                   8:1    0    1G  0 part /boot</span><br><span class="line">mq/dev/sda2                   8:2    0    7G  0 part</span><br><span class="line">  tq/dev/mapper/centos-root 253:0    0  6.2G  0 lvm  /</span><br><span class="line">  mq/dev/mapper/centos-swap 253:1    0  820M  0 lvm  [SWAP]</span><br><span class="line">/dev/sr0                     11:0    1 1024M  0 rom</span><br><span class="line"></span><br><span class="line"><span class="comment"># ext2/ext3/ext4ファイルシステムの作成</span></span><br><span class="line">mke2fs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mke2fsコマンドのデフォルト値</span></span><br><span class="line">[root@localhost etc]<span class="comment"># cat /etc/mke2fs.conf</span></span><br><span class="line">[defaults]</span><br><span class="line">        base_features = sparse_super,filetype,resize_inode,dir_index,ext_attr</span><br><span class="line">        default_mntopts = acl,user_xattr</span><br><span class="line">        enable_periodic_fsck = 0</span><br><span class="line">        blocksize = 4096</span><br><span class="line">        inode_size = 256</span><br><span class="line">        inode_ratio = 16384</span><br><span class="line"></span><br><span class="line">[fs_types]</span><br><span class="line">        ext3 = &#123;</span><br><span class="line">                features = has_journal</span><br><span class="line">        &#125;</span><br><span class="line">        ext4 = &#123;</span><br><span class="line">                features = has_journal,extent,huge_file,flex_bg,uninit_bg,dir_nlink,extra_isize,64bit</span><br><span class="line">                inode_size = 256</span><br><span class="line">        &#125;</span><br><span class="line">        ext4dev = &#123;</span><br><span class="line">                features = has_journal,extent,huge_file,flex_bg,uninit_bg,dir_nlink,extra_isize</span><br><span class="line">                inode_size = 256</span><br><span class="line">                options = test_fs=1</span><br><span class="line">        &#125;</span><br><span class="line">        rhel6_ext4 = &#123;</span><br><span class="line">                features = has_journal,extent,huge_file,flex_bg,uninit_bg,dir_nlink,extra_isize</span><br><span class="line">                inode_size = 256</span><br><span class="line">                enable_periodic_fsck = 1</span><br><span class="line">                default_mntopts = <span class="string">""</span></span><br><span class="line">        &#125;</span><br><span class="line">        small = &#123;</span><br><span class="line">                blocksize = 1024</span><br><span class="line">                inode_size = 128</span><br><span class="line">                inode_ratio = 4096</span><br><span class="line">        &#125;</span><br><span class="line">        floppy = &#123;</span><br><span class="line">                blocksize = 1024</span><br><span class="line">                inode_size = 128</span><br><span class="line">                inode_ratio = 8192</span><br><span class="line">        &#125;</span><br><span class="line">        big = &#123;</span><br><span class="line">                inode_ratio = 32768</span><br><span class="line">        &#125;</span><br><span class="line">        huge = &#123;</span><br><span class="line">                inode_ratio = 65536</span><br><span class="line">        &#125;</span><br><span class="line">        news = &#123;</span><br><span class="line">                inode_ratio = 4096</span><br><span class="line">        &#125;</span><br><span class="line">        largefile = &#123;</span><br><span class="line">                inode_ratio = 1048576</span><br><span class="line">                blocksize = -1</span><br><span class="line">        &#125;</span><br><span class="line">        largefile4 = &#123;</span><br><span class="line">                inode_ratio = 4194304</span><br><span class="line">                blocksize = -1</span><br><span class="line">        &#125;</span><br><span class="line">        hurd = &#123;</span><br><span class="line">             blocksize = 4096</span><br><span class="line">             inode_size = 128</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mkfsコマンドによるファイルシステム作成</span></span><br><span class="line">mkdf -t ext3 /dev/sdc1</span><br></pre></td></tr></table></figure>

<ul>
<li>Btrfsファイルシステムの作成<ul>
<li>Btrfs(B-tree file system)はLinux向けの新しいファイルシステムで対象外性に優れ先進的な機能が取り込まれている<ul>
<li>最大ファイルサイズは16EiB</li>
<li>コピーオンライと</li>
<li>ディスク容量の効率的な使用</li>
<li>iノードの動的割当</li>
<li>ストレージプール対応</li>
<li>スナップショット機能</li>
<li>チェックサムによる完全性の保証</li>
<li>効率的な増分バックアップ</li>
<li>オンラインデフラグ</li>
</ul>
</li>
<li><code>mkfs.btrfs</code>コマンドを実行して作成する<ul>
<li><code>mkfs.btrfs /dev/sdb1 /dev/sdb2</code><ul>
<li>このように複数の物理ボリュームをまとめた１つの仮想的なボリュームをストレージプールと言う</li>
</ul>
</li>
<li><code>btrfs-convert</code>コマンドを使うと、ext2&#x2F;ext3&#x2F;ext4ファイルシステムをBtrfsに変換できる</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-3-ファイルシステムの管理"><a href="#2-3-ファイルシステムの管理" class="headerlink" title="2.3　ファイルシステムの管理"></a>2.3　ファイルシステムの管理</h3><ul>
<li><p>ext2&#x2F;ext3ファイルシステムはブロック単位で管理されている</p>
</li>
<li><p>ブロックには以下が存在する</p>
<ul>
<li>データブロック</li>
<li>iノードブロック<ul>
<li>どのデータブロックにどんなデータが格納されているかの情報</li>
<li>ファイル・タイプ、アクセス権、所有者、所有グループ、ファイルサイズ</li>
</ul>
</li>
<li>スーパーブロック<ul>
<li>ファイルシステムの全般的な情報（データブロックサイズ、マウント回数、iノードやデータブロックの数など）</li>
<li>スーパーブロックは非常に重要なので、ブロックグループごとにバックアップが作成される</li>
</ul>
</li>
</ul>
</li>
<li><p>TODO: 詳細見れていない・・</p>
</li>
</ul>
<h3 id="2-4-LVM"><a href="#2-4-LVM" class="headerlink" title="2.4　LVM"></a>2.4　LVM</h3><ul>
<li><p>LVM:論理ボリューム管理　Logical Volume Manager</p>
<ul>
<li>ディスクのパーティションを直接操作するのではなく、仮想的なパーティションである論理ボリュームを動的に管理</li>
<li>パーティションを使ったディスク管理に比べて次の制約を回避できる<ul>
<li>一度パーティションを作成するとサイズ変更ができない</li>
<li>別のディスクにパーティションを移動させることができない</li>
<li>ディスクのサイズを超える大きさのパーティションは作成できない</li>
</ul>
</li>
<li>★：PVがPhysical Volume(物理ボリューム)、VGがVolume Group(ボリュームグループ)、LVがLogical Volume(論理ボリューム)の略称であることを覚えておく</li>
</ul>
</li>
<li><p>LVMの作成</p>
<ul>
<li>物理ボリュームを用意して、パーティションタイプを「8e」(Linux LVM)に設定しておく</li>
<li><code>pvcreate</code>: デバイスを物理ボリュームとして初期化</li>
<li><code>vgcreate testvg /dev/sdd1 /dev/sde1</code>: ボリュームグループの作成</li>
<li><code>lvcreate -L 500M -n lv01 testvg</code>: 論理ボリュームの作成</li>
<li><code>lvscan</code>: 論理ボリュームの状態を完結に表示</li>
</ul>
</li>
<li><p>TODO: vg~~コマンドが他にも多数あるが詳細は一旦飛ばす</p>
</li>
</ul>
<h3 id="練習問題-1"><a href="#練習問題-1" class="headerlink" title="練習問題"></a>練習問題</h3><ul>
<li>2.1 カーネルがサポートしているファイルシステムの種類を確認するにはどのコマンドを実行すればよいか<ul>
<li><code>cat /proc/filesystems</code></li>
<li>その他：<ul>
<li><code>/etc/mtab</code>には現在マウントされているファイルシステムについての情報が格納されている</li>
</ul>
</li>
</ul>
</li>
<li>2.2 <code>/etc/fstab</code>で指定できるマウントオプションの説明で適切でないもの<ul>
<li>割愛</li>
</ul>
</li>
<li>2.3 <code>/etc/fstab</code>の書式として適切でないもの</li>
<li>2.4 <code>/mnt</code>ディレクトリにマウント下Btrfsファイルシステムの使用状況を表示したい場合<ul>
<li><code>btrfs filesystem df /mnt</code></li>
</ul>
</li>
<li>2.5 Btrfsファイルシステムのサブボリューム&#x2F;dataのスナップショットを&#x2F;mnt&#x2F;data_snapとして作成<ul>
<li><code>btrfs subvolume snapshot /data /mnt/data_snap</code></li>
</ul>
</li>
<li>2.6 USBメモリを読み取り専用でマウントしたい。マウントポイントは<code>/media/usb</code>、デバイスファイルは<code>/dev/sdb1</code>とする。ファイルシステム地アプは<code>vfat</code><ul>
<li><code>mount -t vfat -o ro /dev/sdb1 /media/usb</code></li>
</ul>
</li>
<li>2.7 現在マウントされているファイルシステムとそのオプションを知るには何というファイルを参照<ul>
<li><code>cat /etc/mtab</code></li>
</ul>
</li>
<li>2.8 ファイルシステムの種類がxfsであるファイルシステムのみをすべてアンマウントするには<ul>
<li><code>unmount -at xfs</code></li>
</ul>
</li>
<li>2.9 <code>unmount /home; mount /home</code>を実行するのと同じことを１コマンドで実行したい場合<ul>
<li><code>mount -o remount /home</code></li>
</ul>
</li>
<li>2.10 スワップ領域を<code>/dev/sda7</code>に作成するコマンドを引数とともに記述してください<ul>
<li><code>mkswap /dev/sda7</code></li>
</ul>
</li>
<li>2.11 アクティブなスワップ領域を表示するには<ul>
<li><code>swapon -s</code></li>
</ul>
</li>
<li>2.12 mkfsコマンドを使ってext4ファイルシステムを作成。その際に、予約ブロックの割合も変更する。不良ブロックのチェックも行う。必要なオプションをすべて選択<ul>
<li><code>-t</code>:タイプを指定</li>
<li><code>-c</code>:不良ブロックのチェック</li>
<li><code>-m</code>:root用の予約領域を指定する</li>
</ul>
</li>
<li>2.13 rootユーザー用予約領域が5%確保されているext4ファイルシステム<code>/dev/sda5</code>がある。この領域を0%に死体<ul>
<li><code>tune2fs -m 0 /dev/sda5</code></li>
</ul>
</li>
<li>2.14 XFSファイルシステムをバックアップするコマンド<ul>
<li><code>xfsdump</code></li>
</ul>
</li>
<li>2.15 <code>/dev/sdb1</code>を物理ボリュームとして初期化したい場合に実行するコマンド<ul>
<li><code>pvcreate /dev/sdb1</code></li>
</ul>
</li>
<li>2.16 <code>testvg</code>という名称のボリュームグループを作成したい場合。ボリュームグループを構成する物理ボリュームデバイスは<code>/dev/sdb1</code>と<code>/dev/sdc1</code><ul>
<li><code>vgcreate -s 32m testvg /dev/sdb1 /dev/sdc1</code></li>
</ul>
</li>
<li>2.17 ボリュームグループtestvg内にサイズが10Gバイトの論理ボリュームlv01を作成しようとする。<ul>
<li><code>lvcreate</code><ul>
<li>-L:サイズ</li>
<li>-n:論理ボリューム名</li>
<li>引数にはボリュームグループ名を指定する</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第3章-ネットワーク構成"><a href="#第3章-ネットワーク構成" class="headerlink" title="第3章　ネットワーク構成"></a>第3章　ネットワーク構成</h2><h3 id="3-1-基本的なネットワーク構成"><a href="#3-1-基本的なネットワーク構成" class="headerlink" title="3.1　基本的なネットワーク構成"></a>3.1　基本的なネットワーク構成</h3><ul>
<li>ネットワークデバイスの操作<ul>
<li>インターフェース名：eth0,eth1,loなどがもともと</li>
<li>最近は、<code>enp0s3</code>などの名前が使われる</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># カーネルが認識しているネットワークデバイスを確認</span></span><br><span class="line">lspci | grep -i eth</span><br><span class="line">journalctl -b | grep -i eth | grep enp</span><br></pre></td></tr></table></figure>

<ul>
<li><code>ip</code>コマンド<ul>
<li>ネットワークインターフェースやルーティングテーブル、ARPテーブルなどを管理するコマンド</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># データリンク層</span></span><br><span class="line">ip link show</span><br><span class="line"><span class="comment"># IPアドレス</span></span><br><span class="line">ip addr show</span><br><span class="line"><span class="comment"># ルーティングテーブル</span></span><br><span class="line">ip route show</span><br><span class="line"><span class="comment"># ARPキャッシュ</span></span><br><span class="line">ip neigh show</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ip -s link show enp0s3</span><br><span class="line"></span><br><span class="line"><span class="comment"># add でパラメータ設定する</span></span><br><span class="line">ip addr add 192.168.11.10/24 dev enp0s3</span><br><span class="line"></span><br><span class="line"><span class="comment">#### ifconfigコマンド</span></span><br><span class="line"><span class="comment"># ipコマンド以前に広く使われていたコマンド</span></span><br><span class="line">ifconfig</span><br><span class="line">ifconfig -a</span><br><span class="line"></span><br><span class="line">ifconfig enp0s3 192.168.120.27 netmask 255.255.255.0</span><br><span class="line">ifconfig enp0s3 up</span><br><span class="line"><span class="comment"># まとめて指定も可能</span></span><br><span class="line">ifconfig enp0s3 192.168.120.27 netmask 255.255.255.0 up</span><br><span class="line"></span><br><span class="line"><span class="comment">#### ARP</span></span><br><span class="line"><span class="comment"># MACアドレスとIPアドレスを変換するプロトコル</span></span><br><span class="line"><span class="comment"># 自分のIPアドレス/MACアドレスと相手のIPアドレスが含まれたパケットをブロードキャストして、指定されたIPアドレスを持つ相手がこのパケットを受け取ると、自分のMACアドレスを返す</span></span><br><span class="line"><span class="comment"># 一度取得した情報は、ARPキャッシュと呼ばれるテーブルに一定期間キャッシュされる</span></span><br></pre></td></tr></table></figure>

<ul>
<li>無線ネットワークの設定</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iwconfig</span><br></pre></td></tr></table></figure>

<h3 id="3-2-高度なネットワーク設定"><a href="#3-2-高度なネットワーク設定" class="headerlink" title="3.2　高度なネットワーク設定"></a>3.2　高度なネットワーク設定</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">route</span><br><span class="line">netstat -r</span><br><span class="line"><span class="comment"># 情報は同じ物が出力される</span></span><br><span class="line"></span><br><span class="line">[root@localhost etc]<span class="comment"># netstat -r</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class="line">default         buffalo.setup   0.0.0.0         UG        0 0          0 enp0s3</span><br><span class="line">192.168.11.0    0.0.0.0         255.255.255.0   U         0 0          0 enp0s3</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 virbr0</span><br><span class="line">[root@localhost etc]<span class="comment"># route</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         buffalo.setup   0.0.0.0         UG    100    0        0 enp0s3</span><br><span class="line">192.168.11.0    0.0.0.0         255.255.255.0   U     100    0        0 enp0s3</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0</span><br></pre></td></tr></table></figure>

<ul>
<li><p>基本的なネットワーク管理コマンド</p>
<ul>
<li>pingコマンド：指定されたホストにICMPパケットを贈り、その反応も表示<ul>
<li>オプション：<ul>
<li>-n:ホスト名を名前解決せずにIPアドレスで表示</li>
<li>-c 回数</li>
<li>-i 間隔：指定した間隔ごとにICMPパケットを送信</li>
</ul>
</li>
</ul>
</li>
<li>ping6コマンド：IPv6用コマンド</li>
<li>tcpdumpコマンド：指定したネットワークインターフェースを監視市、そこに到達したデータをコンソール上に表示</li>
<li>netstatコマンド：ネットワーク機能に関する様々な情報を表示</li>
<li>ssコマンド：netstatコマンドに変わるのがssコマンド</li>
<li>tracerouteコマンド：指定されたホストまでパケットが伝わる経路を表示<ul>
<li>ネットワーク経路上にICMPメッセージに返答しないホストが存在する場合などでは適切な動作は期待できない</li>
</ul>
</li>
<li>ncコマンド：TCP&#x2F;UDPを使ったネットワーク通信を行うシンプルなコマンド<ul>
<li>ポートスキャンを実施したり、通信状態を確認したりといったちょっとした操作に活用できる</li>
<li><code>nc localhost 25</code></li>
</ul>
</li>
</ul>
</li>
<li><p>NetworkManager</p>
<ul>
<li>ネットワークを管理するサブシステムとして、NetworkManagerが導入されている</li>
<li>稼働しているか確認：<code>systemctl status NetworkManager</code></li>
<li><code>nmcli</code>コマンドを使ってネットワークの設定、接続の管理、状態の確認などが可能</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nmcli</span><br><span class="line"></span><br><span class="line"><span class="comment"># NetworkManagerの状態確認</span></span><br><span class="line">nmcli general status</span><br><span class="line"></span><br><span class="line"><span class="comment"># ネットワークインターフェースの設定ファイル</span></span><br><span class="line">cat /etc/sysconfig/network-scripts/ifcfg-enp0s3</span><br></pre></td></tr></table></figure>

<h3 id="3-3-ネットワークの問題解決"><a href="#3-3-ネットワークの問題解決" class="headerlink" title="3.3　ネットワークの問題解決"></a>3.3　ネットワークの問題解決</h3><ul>
<li>ネットワーク設定情報の収集<ul>
<li><code>/etc/hostname</code>: ホスト名を記述</li>
<li><code>/etc/hosts</code>: ホスト名とIPアドレスの対応を記述</li>
<li><code>/etc/networks</code>: ネットワーク名とネットワークアドレスの対応が記述</li>
<li><code>/etc/nsswitch.conf</code>: 名前解決をする際の問い合わせ順を記述</li>
<li><code>/etc/resolv.conf</code>: 問い合わせ先のDNSサーバーやドメイン名を記述</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##### /etc/nsswitch.conf</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/nsswitch.conf</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># /etc/nsswitch.conf</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># An example Name Service Switch config file. This file should be</span></span><br><span class="line"><span class="comment"># sorted with the most-used services at the beginning.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The entry '[NOTFOUND=return]' means that the search for an</span></span><br><span class="line"><span class="comment"># entry should stop if the search in the previous entry turned</span></span><br><span class="line"><span class="comment"># up nothing. Note that if the search failed due to some other reason</span></span><br><span class="line"><span class="comment"># (like no NIS server responding) then the search continues with the</span></span><br><span class="line"><span class="comment"># next entry.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Valid entries include:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#       nisplus                 Use NIS+ (NIS version 3)</span></span><br><span class="line"><span class="comment">#       nis                     Use NIS (NIS version 2), also called YP</span></span><br><span class="line"><span class="comment">#       dns                     Use DNS (Domain Name Service)</span></span><br><span class="line"><span class="comment">#       files                   Use the local files</span></span><br><span class="line"><span class="comment">#       db                      Use the local database (.db) files</span></span><br><span class="line"><span class="comment">#       compat                  Use NIS on compat mode</span></span><br><span class="line"><span class="comment">#       hesiod                  Use Hesiod for user lookups</span></span><br><span class="line"><span class="comment">#       sss                     Use sssd (System Security Services Daemon)</span></span><br><span class="line"><span class="comment">#       [NOTFOUND=return]       Stop searching if not found so far</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># WARNING: Running nscd with a secondary caching service like sssd may lead to</span></span><br><span class="line"><span class="comment">#          unexpected behaviour, especially with how long entries are cached.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To use db, put the "db" in front of "files" for entries you want to be</span></span><br><span class="line"><span class="comment"># looked up first in the databases</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Example:</span></span><br><span class="line"><span class="comment">#passwd:    db files nisplus nis</span></span><br><span class="line"><span class="comment">#shadow:    db files nisplus nis</span></span><br><span class="line"><span class="comment">#group:     db files nisplus nis</span></span><br><span class="line"></span><br><span class="line">passwd:     files sss</span><br><span class="line">shadow:     files sss</span><br><span class="line">group:      files sss</span><br><span class="line"><span class="comment">#initgroups: files sss</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#hosts:     db files nisplus nis dns</span></span><br><span class="line">hosts:      files dns myhostname</span><br><span class="line"></span><br><span class="line"><span class="comment"># Example - obey only what nisplus tells us...</span></span><br><span class="line"><span class="comment">#services:   nisplus [NOTFOUND=return] files</span></span><br><span class="line"><span class="comment">#networks:   nisplus [NOTFOUND=return] files</span></span><br><span class="line"><span class="comment">#protocols:  nisplus [NOTFOUND=return] files</span></span><br><span class="line"><span class="comment">#rpc:        nisplus [NOTFOUND=return] files</span></span><br><span class="line"><span class="comment">#ethers:     nisplus [NOTFOUND=return] files</span></span><br><span class="line"><span class="comment">#netmasks:   nisplus [NOTFOUND=return] files</span></span><br><span class="line"></span><br><span class="line">bootparams: nisplus [NOTFOUND=<span class="built_in">return</span>] files</span><br><span class="line"></span><br><span class="line">ethers:     files</span><br><span class="line">netmasks:   files</span><br><span class="line">networks:   files</span><br><span class="line">protocols:  files</span><br><span class="line">rpc:        files</span><br><span class="line">services:   files sss</span><br><span class="line"></span><br><span class="line">netgroup:   nisplus sss</span><br><span class="line"></span><br><span class="line">publickey:  nisplus</span><br><span class="line"></span><br><span class="line">automount:  files nisplus sss</span><br><span class="line">aliases:    files nisplus</span><br></pre></td></tr></table></figure>

<ul>
<li>ネットワークの通信経路の確認</li>
</ul>
<h3 id="練習問題-2"><a href="#練習問題-2" class="headerlink" title="練習問題"></a>練習問題</h3><ul>
<li><p>3.1 ARPキャッシュを表示したりエントリーを追加したりするときに利用するコマンド</p>
<ul>
<li><code>arp</code></li>
</ul>
</li>
<li><p>3.2 tcpdumpコマンドの出力の一部。適切な説明を選択</p>
<ul>
<li>接続元IPアドレス.ポート番号(サービス名) &gt; 接続先IPアドレス.ポート番号(サービス名)</li>
</ul>
</li>
<li><p>3.3 routeコマンドを実行したときの表示</p>
</li>
<li><p>3.4 routeコマンドの使い方</p>
<ul>
<li><code>route add -net 192.168.100.0 netmask 255.255.255.0 gw 172.16.100.1</code></li>
</ul>
</li>
<li><p>3.5 ルーティングテーブルを表示するコマンド</p>
<ul>
<li><code>route</code></li>
<li><code>ip route show</code></li>
<li><code>netstat -r</code></li>
</ul>
</li>
<li><p>3.6 <code>/etc/resolv.conf</code>の記述</p>
<ul>
<li>nameserver 172.16.0.1</li>
</ul>
</li>
<li><p>3.7 <code>www.example.com</code>に到達するまでに経由するルーター一覧を表示して経路を確認したい場合、役立つコマンド</p>
<ul>
<li><code>traceroute6</code></li>
<li><code>mtr</code></li>
</ul>
</li>
</ul>
<h2 id="第4章-システムの保守と運用管理"><a href="#第4章-システムの保守と運用管理" class="headerlink" title="第4章　システムの保守と運用管理"></a>第4章　システムの保守と運用管理</h2><h3 id="4-1-makeによるソースコードからのビルドとインストール"><a href="#4-1-makeによるソースコードからのビルドとインストール" class="headerlink" title="4.1　makeによるソースコードからのビルドとインストール"></a>4.1　makeによるソースコードからのビルドとインストール</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar cvf</span><br><span class="line">tar xvf</span><br><span class="line">tar tvf</span><br><span class="line">gzip</span><br><span class="line">gunzip</span><br><span class="line">bzip</span><br><span class="line">bunzip</span><br></pre></td></tr></table></figure>

<h3 id="4-2-バックアップ"><a href="#4-2-バックアップ" class="headerlink" title="4.2　バックアップ"></a>4.2　バックアップ</h3><ul>
<li><p>バックアップの種類</p>
<ul>
<li>完全バックアップ：時間がかかり容量も必要</li>
<li>差分バックアップ：復元にはフルバックアップと最新の差分バックアップが必要</li>
<li>増分バックアップ：復元にはフルバックアップとフルバックアップ以降のすべての増分バックアップが必要</li>
</ul>
</li>
<li><p>バックアップデバイス</p>
<ul>
<li>CD-R&#x2F;RW、リムーバブルハードディスク</li>
<li>DVD-R&#x2F;RW</li>
<li>BD-R&#x2F;RE</li>
<li>磁気テープ</li>
<li>ネットワーク</li>
</ul>
</li>
<li><p>ローカルでのバックアップ</p>
<ul>
<li>tar,dd,dump,restoreなどのコマンドでバックアップが可能</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># OP,形式と拡張子</span></span><br><span class="line"><span class="comment"># -j bzip -&gt; bz2</span></span><br><span class="line"><span class="comment"># -z gzip -&gt; gz</span></span><br><span class="line"><span class="comment"># -J xz - xz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># このコマンドをあわせて使う使い方は必要に応じて調べるで良さそう</span></span><br><span class="line">dump</span><br><span class="line">restore</span><br><span class="line"></span><br><span class="line"><span class="comment"># テープドライブを操作するコマンド</span></span><br><span class="line">mt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ネットワーク経由でのバックアップ</span></span><br><span class="line">rsync</span><br></pre></td></tr></table></figure>

<h3 id="4-3-ユーザーへのシステム管理情報の通知"><a href="#4-3-ユーザーへのシステム管理情報の通知" class="headerlink" title="4.3　ユーザーへのシステム管理情報の通知"></a>4.3　ユーザーへのシステム管理情報の通知</h3><ul>
<li><p>ログイン前後のメッセージ</p>
<ul>
<li><code>/etc/issue</code>: 接続前に表示されるメッセージ　telnet接続だと表示される sshだとログイン前メッセージが表示されない（Teratermとコマンドプロンプト）</li>
<li><code>/etc/issue.net</code>: 接続前に表示されるメッセージ　telnet接続だと表示される  sshだとログイン前メッセージが表示されない（Teratermとコマンドプロンプト）</li>
<li><code>/etc/motd</code>: 接続後に表示されるメッセージ</li>
</ul>
</li>
<li><p>ログイン中のユーザへの通知</p>
<ul>
<li><code>wall &quot;message&quot;</code></li>
<li><code>shutdown -k now &quot;message&quot;</code></li>
</ul>
</li>
<li><p><a href="https://qiita.com/montblanc18/items/8b4fd2cf150913c6e1c2">https://qiita.com/montblanc18/items/8b4fd2cf150913c6e1c2</a></p>
<ul>
<li>telnetを有効にする方法で参考</li>
</ul>
</li>
</ul>
<h3 id="4-4-リソース使用状況の把握"><a href="#4-4-リソース使用状況の把握" class="headerlink" title="4.4　リソース使用状況の把握"></a>4.4　リソース使用状況の把握</h3><ul>
<li><p>CPU使用率やメモリの状況など、システムリソースを総合的に確認できるツール</p>
<ul>
<li><code>top</code></li>
<li><code>vmstat</code></li>
</ul>
</li>
<li><p>EPELリポジトリ epelリポジトリを追加方法</p>
<ul>
<li><a href="https://linuc.spa-miz.com/2020/10/13/installing-htop-centos/">https://linuc.spa-miz.com/2020/10/13/installing-htop-centos/</a></li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line">htop</span><br><span class="line">vmstat</span><br><span class="line">iostat</span><br><span class="line">iotop</span><br><span class="line">sar</span><br><span class="line">uptime <span class="comment"># システムの稼働時間やログインユーザー数、平均負荷などが表示される。topコマンドの１行目とほぼ同じ</span></span><br><span class="line">w <span class="comment"># 現在ログインしているユーザと各ユーザのプロセス情報が表示される</span></span><br></pre></td></tr></table></figure>


<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CPU使用率の測定</span></span><br><span class="line">ps</span><br><span class="line">ps aux: システムで使用されているすべてのプロセスを表示</span><br><span class="line"></span><br><span class="line"><span class="comment"># 開いているファイルやポートの確認</span></span><br><span class="line">lsof</span><br><span class="line"><span class="comment"># /var/log/messagesファイルを開いているプロセスを検索</span></span><br><span class="line">[root@localhost top]<span class="comment"># lsof /var/log/messages</span></span><br><span class="line">COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME</span><br><span class="line">abrt-watc  914 root    4r   REG  253,0   718793 10468097 /var/<span class="built_in">log</span>/messages</span><br><span class="line">rsyslogd  1338 root    7w   REG  253,0   718793 10468097 /var/<span class="built_in">log</span>/messages</span><br><span class="line"><span class="comment"># プロセス名が開いているファイルを表示</span></span><br><span class="line">[root@localhost top]<span class="comment"># lsof -p `pidof rsyslogd`</span></span><br><span class="line">COMMAND   PID USER   FD      TYPE             DEVICE SIZE/OFF     NODE NAME</span><br><span class="line">rsyslogd 1338 root  cwd       DIR              253,0      224       64 /</span><br><span class="line">rsyslogd 1338 root  rtd       DIR              253,0      224       64 /</span><br><span class="line">rsyslogd 1338 root  txt       REG              253,0   663976  3172893 /usr/sbin/rsyslogd</span><br><span class="line">rsyslogd 1338 root  mem       REG               0,19  8388608     8307 /run/<span class="built_in">log</span>/journal/4f887155365a419b9cb02e497221d5a4/system.journal</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    68192   176358 /usr/lib64/libbz2.so.1.0.6</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    99944   176516 /usr/lib64/libelf-0.176.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   402384   383771 /usr/lib64/libpcre.so.1.2.0</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    19896   176626 /usr/lib64/libattr.so.1.1.0</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   338672  1300052 /usr/lib64/libdw-0.176.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   109976   383691 /usr/lib64/libresolv-2.17.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    19384   176460 /usr/lib64/libgpg-error.so.0.10.0</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   535064   176472 /usr/lib64/libgcrypt.so.11.8.2</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    61752   270256 /usr/lib64/liblz4.so.1.8.3</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   157424   176353 /usr/lib64/liblzma.so.5.2.2</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   155744   176263 /usr/lib64/libselinux.so.1</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0  1136944   383671 /usr/lib64/libm-2.17.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    20048   176631 /usr/lib64/libcap.so.2.22</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   203688  1300065 /usr/lib64/libsystemd.so.0.6.0</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    25024  5817422 /usr/lib64/rsyslog/imjournal.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    38048  5817429 /usr/lib64/rsyslog/imuxsock.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    24432  5817430 /usr/lib64/rsyslog/lmnet.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0  2156272   383663 /usr/lib64/libc-2.17.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    88720       85 /usr/lib64/libgcc_s-4.8.5-20150702.so.1</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    20064   176270 /usr/lib64/libuuid.so.1.3.0</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    40896  1245966 /usr/lib64/libfastjson.so.4.0.0</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    15424  1299766 /usr/lib64/libestr.so.0.0.0</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    43712   383693 /usr/lib64/librt-2.17.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    19248   383669 /usr/lib64/libdl-2.17.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   142144   383689 /usr/lib64/libpthread-2.17.so</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0    90248   176266 /usr/lib64/libz.so.1.2.7</span><br><span class="line">rsyslogd 1338 root  mem       REG              253,0   163312   383656 /usr/lib64/ld-2.17.so</span><br><span class="line">rsyslogd 1338 root    0r      CHR                1,3      0t0     1028 /dev/null</span><br><span class="line">rsyslogd 1338 root    1w      CHR                1,3      0t0     1028 /dev/null</span><br><span class="line">rsyslogd 1338 root    2w      CHR                1,3      0t0     1028 /dev/null</span><br><span class="line">rsyslogd 1338 root    3r  a_inode               0,10        0     6415 inotify</span><br><span class="line">rsyslogd 1338 root    4u     unix 0xffff8e7135db5940      0t0    23333 socket</span><br><span class="line">rsyslogd 1338 root    5r      REG               0,19  8388608     8307 /run/<span class="built_in">log</span>/journal/4f887155365a419b9cb02e497221d5a4/system.journal</span><br><span class="line">rsyslogd 1338 root    6w      REG              253,0    18803  8671877 /var/<span class="built_in">log</span>/cron</span><br><span class="line">rsyslogd 1338 root    7w      REG              253,0   718793 10468097 /var/<span class="built_in">log</span>/messages</span><br><span class="line">rsyslogd 1338 root    8w      REG              253,0    20795 10468098 /var/<span class="built_in">log</span>/secure</span><br><span class="line">rsyslogd 1338 root    9w      REG              253,0     1639 10468099 /var/<span class="built_in">log</span>/maillog</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### メモリ及びスワップ使用量の測定</span></span><br><span class="line"><span class="comment"># メモリ使用率を測定するには、先に上げたtop,sadc/sarコマンドなどが利用できる他freeコマンドも利用できる</span></span><br><span class="line"><span class="comment"># Linuxは、使われていない物理メモリをできるだけキャッシュに割り当てようとします。</span></span><br><span class="line"><span class="comment"># そのため、Linuxの起動時間が長くなればなるほど、Mem行のfree列の値は小さくなっていきます。</span></span><br><span class="line"><span class="comment"># その値が小さくても、キャッシュに割り当てられているサイズが大きいのであれば、実際にメモリが足りないわけではない、ということに注意してください。</span></span><br><span class="line"><span class="comment"># available列を見ると、おおよその利用可能なメモリ量がわかります。スワップはディスクの一部を仮想的なメモリとして利用する機能です。</span></span><br><span class="line"><span class="comment"># システムの物理メモリが不足するとスワップが行われます。スワップ領域が継続的に使われるようであれば、システムのパフォーマンスが低下します。</span></span><br><span class="line"><span class="comment"># そのため、システムが利用しているメモリ量を把握することは必要です。前記の例ではスワップは利用されていませんが、スワップが頻繁に利用されるようなら、</span></span><br><span class="line"><span class="comment"># 不要なサービスを停止させるか、メモリの増設を検討する必要があります。freeコマンド以上に詳細なメモリの情報を得るには、/proc/meminfoを参照します。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### ディスク使用量の測定</span></span><br><span class="line">df</span><br><span class="line"></span><br><span class="line"><span class="comment">### ネットワークトラフィックの測定</span></span><br><span class="line">netstat -s</span><br><span class="line">ss -s</span><br><span class="line"></span><br><span class="line">netserver</span><br><span class="line">netperf</span><br><span class="line">iptables</span><br><span class="line">iftop</span><br><span class="line"></span><br><span class="line"><span class="comment"># この辺詳細ちょっとおいきれてないので後で振り返り</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-死活監視と運用監視ツール"><a href="#4-5-死活監視と運用監視ツール" class="headerlink" title="4.5　死活監視と運用監視ツール"></a>4.5　死活監視と運用監視ツール</h3><ul>
<li><p>リソースの枯渇</p>
<ul>
<li>スラッシング：アプリが使うメモリ領域が肥大し、空きメモリがなくなるとメモリの一部がスワップ領域に移されその分のメモリが開放される<ul>
<li>さらにメモリ不足が継続すると、スワップ領域への対比が頻発市、システムの動作が大幅に遅くなってしまうこと</li>
</ul>
</li>
</ul>
</li>
<li><p>システムの過負荷</p>
</li>
<li><p>サービスの以上</p>
</li>
<li><p>OOMKiller</p>
<ul>
<li><code>cat /proc/sys/vm/panic_on_oom</code>これが0であればOOM Killerは動作しない、1であれば動作する</li>
<li>真っ先にOOM Killerに強制終了されるプロセスはdstatコマンドで調べることができる</li>
<li><code>dstat --top-oom</code></li>
<li><code>pidof python2</code> dstatコマンドで出力されるのはこの値が最も高いプロセス</li>
<li>強制終了の優先度を変更するには、<code>/proc/PID/oom_adj</code>ファイルに値を書き込む</li>
</ul>
</li>
<li><p>監視作業</p>
<ul>
<li>死活監視</li>
<li>リソース監視</li>
<li>ログ監視<ul>
<li><code>swatch</code>: simple log watcherが古くから使われている</li>
</ul>
</li>
</ul>
</li>
<li><p>SNMP: ネットワーク上のサーバーやネットワーク機器を監視できるプロトコル</p>
<ul>
<li>SNMPマネージャ：監視する側</li>
<li>SNMPエージェント：監視される側</li>
<li>監視の仕組み：<ul>
<li>SNMPマネージャ側からSNMPエージェント側に情報を求める（ポーリング）</li>
<li>SNMPエージェント側からSNMPマネージャ側に通知する<ul>
<li>ポーリングには、SNMPエージェント側のUDP161ポート、SNMPマネージャ側のUDP162ポートが使われる</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>システム運用監視ツール</p>
<ul>
<li>collectd: システムの各種情報を定期的に収集する軽量なデーモン</li>
<li>Nagios</li>
<li>MRTG (Multi Router Traffic Grapher)</li>
<li>Cacti</li>
<li>Icinga2</li>
<li>Zabbix</li>
</ul>
</li>
</ul>
<h3 id="4-6-システム構成ツール"><a href="#4-6-システム構成ツール" class="headerlink" title="4.6　システム構成ツール"></a>4.6　システム構成ツール</h3><ul>
<li><p>Ansibleの概要</p>
<ul>
<li>YAML形式のテキストファイルで設定</li>
<li>Pythonが動けば使える</li>
</ul>
</li>
<li><p>コントロールノードとターゲットノード</p>
<ul>
<li>コントロールノード：システム構成処理の指示を出すホスト</li>
<li>ターゲットノード：コントロールノードによってシステム構成処理が実行されるホスト</li>
</ul>
</li>
<li><p>インベントリとPlaybook</p>
<ul>
<li>インベントリ:<ul>
<li>ターゲットノードのリストが記述される</li>
<li>複数のターゲットノードをまとめたグループも設定できる</li>
</ul>
</li>
<li>Playbook:<ul>
<li>ターゲットノードで実施するシステム構成処理が記述される</li>
</ul>
</li>
</ul>
</li>
<li><p>モジュール: Ansibleの構成管理機能を実現するため、数多くのモジュールが提供されている</p>
</li>
<li><p>Ansibleの基本的な設定</p>
<ul>
<li><code>/etc/ansible/ansible.cfg</code></li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 1340]<span class="comment"># cat /etc/ansible/ansible.cfg</span></span><br><span class="line"><span class="comment"># config file for ansible -- https://ansible.com/</span></span><br><span class="line"><span class="comment"># ===============================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nearly all parameters can be overridden in ansible-playbook</span></span><br><span class="line"><span class="comment"># or with command line flags. ansible will read ANSIBLE_CONFIG,</span></span><br><span class="line"><span class="comment"># ansible.cfg in the current working directory, .ansible.cfg in</span></span><br><span class="line"><span class="comment"># the home directory or /etc/ansible/ansible.cfg, whichever it</span></span><br><span class="line"><span class="comment"># finds first</span></span><br><span class="line"></span><br><span class="line">[defaults]</span><br><span class="line"></span><br><span class="line"><span class="comment"># some basic default values...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#inventory      = /etc/ansible/hosts</span></span><br><span class="line"><span class="comment">#library        = /usr/share/my_modules/</span></span><br><span class="line"><span class="comment">#module_utils   = /usr/share/my_module_utils/</span></span><br><span class="line"><span class="comment">#remote_tmp     = ~/.ansible/tmp</span></span><br><span class="line"><span class="comment">#local_tmp      = ~/.ansible/tmp</span></span><br><span class="line"><span class="comment">#plugin_filters_cfg = /etc/ansible/plugin_filters.yml</span></span><br><span class="line"><span class="comment">#forks          = 5</span></span><br><span class="line"><span class="comment">#poll_interval  = 15</span></span><br><span class="line"><span class="comment">#sudo_user      = root</span></span><br><span class="line"><span class="comment">#ask_sudo_pass = True</span></span><br><span class="line"><span class="comment">#ask_pass      = True</span></span><br><span class="line"><span class="comment">#transport      = smart</span></span><br><span class="line"><span class="comment">#remote_port    = 22</span></span><br><span class="line"><span class="comment">#module_lang    = C</span></span><br><span class="line"><span class="comment">#module_set_locale = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plays will gather facts by default, which contain information about</span></span><br><span class="line"><span class="comment"># the remote system.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># smart - gather by default, but don't regather if already gathered</span></span><br><span class="line"><span class="comment"># implicit - gather by default, turn off with gather_facts: False</span></span><br><span class="line"><span class="comment"># explicit - do not gather by default, must say gather_facts: True</span></span><br><span class="line"><span class="comment">#gathering = implicit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This only affects the gathering done by a play's gather_facts directive,</span></span><br><span class="line"><span class="comment"># by default gathering retrieves all facts subsets</span></span><br><span class="line"><span class="comment"># all - gather all subsets</span></span><br><span class="line"><span class="comment"># network - gather min and network facts</span></span><br><span class="line"><span class="comment"># hardware - gather hardware facts (longest facts to retrieve)</span></span><br><span class="line"><span class="comment"># virtual - gather min and virtual facts</span></span><br><span class="line"><span class="comment"># facter - import facts from facter</span></span><br><span class="line"><span class="comment"># ohai - import facts from ohai</span></span><br><span class="line"><span class="comment"># You can combine them using comma (ex: network,virtual)</span></span><br><span class="line"><span class="comment"># You can negate them using ! (ex: !hardware,!facter,!ohai)</span></span><br><span class="line"><span class="comment"># A minimal set of facts is always gathered.</span></span><br><span class="line"><span class="comment">#gather_subset = all</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># some hardware related facts are collected</span></span><br><span class="line"><span class="comment"># with a maximum timeout of 10 seconds. This</span></span><br><span class="line"><span class="comment"># option lets you increase or decrease that</span></span><br><span class="line"><span class="comment"># timeout to something more suitable for the</span></span><br><span class="line"><span class="comment"># environment.</span></span><br><span class="line"><span class="comment"># gather_timeout = 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ansible facts are available inside the ansible_facts.* dictionary</span></span><br><span class="line"><span class="comment"># namespace. This setting maintains the behaviour which was the default prior</span></span><br><span class="line"><span class="comment"># to 2.5, duplicating these variables into the main namespace, each with a</span></span><br><span class="line"><span class="comment"># prefix of 'ansible_'.</span></span><br><span class="line"><span class="comment"># This variable is set to True by default for backwards compatibility. It</span></span><br><span class="line"><span class="comment"># will be changed to a default of 'False' in a future release.</span></span><br><span class="line"><span class="comment"># ansible_facts.</span></span><br><span class="line"><span class="comment"># inject_facts_as_vars = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># additional paths to search for roles in, colon separated</span></span><br><span class="line"><span class="comment">#roles_path    = /etc/ansible/roles</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># uncomment this to disable SSH key host checking</span></span><br><span class="line"><span class="comment">#host_key_checking = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># change the default callback, you can only have one 'stdout' type  enabled at a time.</span></span><br><span class="line"><span class="comment">#stdout_callback = skippy</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Ansible ships with some plugins that require whitelisting,</span></span><br><span class="line"><span class="comment">## this is done to avoid running all of a type by default.</span></span><br><span class="line"><span class="comment">## These setting lists those that you want enabled for your system.</span></span><br><span class="line"><span class="comment">## Custom plugins should not need this unless plugin author specifies it.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># enable callback plugins, they can output to stdout but cannot be 'stdout' type.</span></span><br><span class="line"><span class="comment">#callback_whitelist = timer, mail</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Determine whether includes in tasks and handlers are "static" by</span></span><br><span class="line"><span class="comment"># default. As of 2.0, includes are dynamic by default. Setting these</span></span><br><span class="line"><span class="comment"># values to True will make includes behave more like they did in the</span></span><br><span class="line"><span class="comment"># 1.x versions.</span></span><br><span class="line"><span class="comment">#task_includes_static = False</span></span><br><span class="line"><span class="comment">#handler_includes_static = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls if a missing handler for a notification event is an error or a warning</span></span><br><span class="line"><span class="comment">#error_on_missing_handler = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># change this for alternative sudo implementations</span></span><br><span class="line"><span class="comment">#sudo_exe = sudo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># What flags to pass to sudo</span></span><br><span class="line"><span class="comment"># WARNING: leaving out the defaults might create unexpected behaviours</span></span><br><span class="line"><span class="comment">#sudo_flags = -H -S -n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SSH timeout</span></span><br><span class="line"><span class="comment">#timeout = 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># default user to use for playbooks if user is not specified</span></span><br><span class="line"><span class="comment"># (/usr/bin/ansible will use current user as default)</span></span><br><span class="line"><span class="comment">#remote_user = root</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># logging is off by default unless this path is defined</span></span><br><span class="line"><span class="comment"># if so defined, consider logrotate</span></span><br><span class="line"><span class="comment">#log_path = /var/log/ansible.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># default module name for /usr/bin/ansible</span></span><br><span class="line"><span class="comment">#module_name = command</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># use this shell for commands executed under sudo</span></span><br><span class="line"><span class="comment"># you may need to change this to bin/bash in rare instances</span></span><br><span class="line"><span class="comment"># if sudo is constrained</span></span><br><span class="line"><span class="comment">#executable = /bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if inventory variables overlap, does the higher precedence one win</span></span><br><span class="line"><span class="comment"># or are hash values merged together?  The default is 'replace' but</span></span><br><span class="line"><span class="comment"># this can also be set to 'merge'.</span></span><br><span class="line"><span class="comment">#hash_behaviour = replace</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default, variables from roles will be visible in the global variable</span></span><br><span class="line"><span class="comment"># scope. To prevent this, the following option can be enabled, and only</span></span><br><span class="line"><span class="comment"># tasks and handlers within the role will see the variables there</span></span><br><span class="line"><span class="comment">#private_role_vars = yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># list any Jinja2 extensions to enable here:</span></span><br><span class="line"><span class="comment">#jinja2_extensions = jinja2.ext.do,jinja2.ext.i18n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if set, always use this private key file for authentication, same as</span></span><br><span class="line"><span class="comment"># if passing --private-key to ansible or ansible-playbook</span></span><br><span class="line"><span class="comment">#private_key_file = /path/to/file</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If set, configures the path to the Vault password file as an alternative to</span></span><br><span class="line"><span class="comment"># specifying --vault-password-file on the command line.</span></span><br><span class="line"><span class="comment">#vault_password_file = /path/to/vault_password_file</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># format of string &#123;&#123; ansible_managed &#125;&#125; available within Jinja2</span></span><br><span class="line"><span class="comment"># templates indicates to users editing templates files will be replaced.</span></span><br><span class="line"><span class="comment"># replacing &#123;file&#125;, &#123;host&#125; and &#123;uid&#125; and strftime codes with proper values.</span></span><br><span class="line"><span class="comment">#ansible_managed = Ansible managed: &#123;file&#125; modified on %Y-%m-%d %H:%M:%S by &#123;uid&#125; on &#123;host&#125;</span></span><br><span class="line"><span class="comment"># &#123;file&#125;, &#123;host&#125;, &#123;uid&#125;, and the timestamp can all interfere with idempotence</span></span><br><span class="line"><span class="comment"># in some situations so the default is a static string:</span></span><br><span class="line"><span class="comment">#ansible_managed = Ansible managed</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default, ansible-playbook will display "Skipping [host]" if it determines a task</span></span><br><span class="line"><span class="comment"># should not be run on a host.  Set this to "False" if you don't want to see these "Skipping"</span></span><br><span class="line"><span class="comment"># messages. <span class="doctag">NOTE:</span> the task header will still be shown regardless of whether or not the</span></span><br><span class="line"><span class="comment"># task is skipped.</span></span><br><span class="line"><span class="comment">#display_skipped_hosts = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default, if a task in a playbook does not include a name: field then</span></span><br><span class="line"><span class="comment"># ansible-playbook will construct a header that includes the task's action but</span></span><br><span class="line"><span class="comment"># not the task's args.  This is a security feature because ansible cannot know</span></span><br><span class="line"><span class="comment"># if the *module* considers an argument to be no_log at the time that the</span></span><br><span class="line"><span class="comment"># header is printed.  If your environment doesn't have a problem securing</span></span><br><span class="line"><span class="comment"># stdout from ansible-playbook (or you have manually specified no_log in your</span></span><br><span class="line"><span class="comment"># playbook on all of the tasks where you have secret information) then you can</span></span><br><span class="line"><span class="comment"># safely set this to True to get more informative messages.</span></span><br><span class="line"><span class="comment">#display_args_to_stdout = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default (as of 1.3), Ansible will raise errors when attempting to dereference</span></span><br><span class="line"><span class="comment"># Jinja2 variables that are not set in templates or action lines. Uncomment this line</span></span><br><span class="line"><span class="comment"># to revert the behavior to pre-1.3.</span></span><br><span class="line"><span class="comment">#error_on_undefined_vars = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default (as of 1.6), Ansible may display warnings based on the configuration of the</span></span><br><span class="line"><span class="comment"># system running ansible itself. This may include warnings about 3rd party packages or</span></span><br><span class="line"><span class="comment"># other conditions that should be resolved if possible.</span></span><br><span class="line"><span class="comment"># to disable these warnings, set the following value to False:</span></span><br><span class="line"><span class="comment">#system_warnings = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default (as of 1.4), Ansible may display deprecation warnings for language</span></span><br><span class="line"><span class="comment"># features that should no longer be used and will be removed in future versions.</span></span><br><span class="line"><span class="comment"># to disable these warnings, set the following value to False:</span></span><br><span class="line"><span class="comment">#deprecation_warnings = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (as of 1.8), Ansible can optionally warn when usage of the shell and</span></span><br><span class="line"><span class="comment"># command module appear to be simplified by using a default Ansible module</span></span><br><span class="line"><span class="comment"># instead.  These warnings can be silenced by adjusting the following</span></span><br><span class="line"><span class="comment"># setting or adding warn=yes or warn=no to the end of the command line</span></span><br><span class="line"><span class="comment"># parameter string.  This will for example suggest using the git module</span></span><br><span class="line"><span class="comment"># instead of shelling out to the git command.</span></span><br><span class="line"><span class="comment"># command_warnings = False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># set plugin path directories here, separate with colons</span></span><br><span class="line"><span class="comment">#action_plugins     = /usr/share/ansible/plugins/action</span></span><br><span class="line"><span class="comment">#become_plugins     = /usr/share/ansible/plugins/become</span></span><br><span class="line"><span class="comment">#cache_plugins      = /usr/share/ansible/plugins/cache</span></span><br><span class="line"><span class="comment">#callback_plugins   = /usr/share/ansible/plugins/callback</span></span><br><span class="line"><span class="comment">#connection_plugins = /usr/share/ansible/plugins/connection</span></span><br><span class="line"><span class="comment">#lookup_plugins     = /usr/share/ansible/plugins/lookup</span></span><br><span class="line"><span class="comment">#inventory_plugins  = /usr/share/ansible/plugins/inventory</span></span><br><span class="line"><span class="comment">#vars_plugins       = /usr/share/ansible/plugins/vars</span></span><br><span class="line"><span class="comment">#filter_plugins     = /usr/share/ansible/plugins/filter</span></span><br><span class="line"><span class="comment">#test_plugins       = /usr/share/ansible/plugins/test</span></span><br><span class="line"><span class="comment">#terminal_plugins   = /usr/share/ansible/plugins/terminal</span></span><br><span class="line"><span class="comment">#strategy_plugins   = /usr/share/ansible/plugins/strategy</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default, ansible will use the 'linear' strategy but you may want to try</span></span><br><span class="line"><span class="comment"># another one</span></span><br><span class="line"><span class="comment">#strategy = free</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default callbacks are not loaded for /bin/ansible, enable this if you</span></span><br><span class="line"><span class="comment"># want, for example, a notification or logging callback to also apply to</span></span><br><span class="line"><span class="comment"># /bin/ansible runs</span></span><br><span class="line"><span class="comment">#bin_ansible_callbacks = False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># don't like cows?  that's unfortunate.</span></span><br><span class="line"><span class="comment"># set to 1 if you don't want cowsay support or export ANSIBLE_NOCOWS=1</span></span><br><span class="line"><span class="comment">#nocows = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># set which cowsay stencil you'd like to use by default. When set to 'random',</span></span><br><span class="line"><span class="comment"># a random stencil will be selected for each task. The selection will be filtered</span></span><br><span class="line"><span class="comment"># against the `cow_whitelist` option below.</span></span><br><span class="line"><span class="comment">#cow_selection = default</span></span><br><span class="line"><span class="comment">#cow_selection = random</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># when using the 'random' option for cowsay, stencils will be restricted to this list.</span></span><br><span class="line"><span class="comment"># it should be formatted as a comma-separated list with no spaces between names.</span></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> line continuations here are for formatting purposes only, as the INI parser</span></span><br><span class="line"><span class="comment">#       in python does not support them.</span></span><br><span class="line"><span class="comment">#cow_whitelist=bud-frogs,bunny,cheese,daemon,default,dragon,elephant-in-snake,elephant,eyes,\</span></span><br><span class="line"><span class="comment">#              hellokitty,kitty,luke-koala,meow,milk,moofasa,moose,ren,sheep,small,stegosaurus,\</span></span><br><span class="line"><span class="comment">#              stimpy,supermilker,three-eyes,turkey,turtle,tux,udder,vader-koala,vader,www</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># don't like colors either?</span></span><br><span class="line"><span class="comment"># set to 1 if you don't want colors, or export ANSIBLE_NOCOLOR=1</span></span><br><span class="line"><span class="comment">#nocolor = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if set to a persistent type (not 'memory', for example 'redis') fact values</span></span><br><span class="line"><span class="comment"># from previous runs in Ansible will be stored.  This may be useful when</span></span><br><span class="line"><span class="comment"># wanting to use, for example, IP information from one group of servers</span></span><br><span class="line"><span class="comment"># without having to talk to them in the same playbook run to get their</span></span><br><span class="line"><span class="comment"># current IP information.</span></span><br><span class="line"><span class="comment">#fact_caching = memory</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#This option tells Ansible where to cache facts. The value is plugin dependent.</span></span><br><span class="line"><span class="comment">#For the jsonfile plugin, it should be a path to a local directory.</span></span><br><span class="line"><span class="comment">#For the redis plugin, the value is a host:port:database triplet: fact_caching_connection = localhost:6379:0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#fact_caching_connection=/tmp</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># retry files</span></span><br><span class="line"><span class="comment"># When a playbook fails a .retry file can be created that will be placed in ~/</span></span><br><span class="line"><span class="comment"># You can enable this feature by setting retry_files_enabled to True</span></span><br><span class="line"><span class="comment"># and you can change the location of the files by setting retry_files_save_path</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#retry_files_enabled = False</span></span><br><span class="line"><span class="comment">#retry_files_save_path = ~/.ansible-retry</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># squash actions</span></span><br><span class="line"><span class="comment"># Ansible can optimise actions that call modules with list parameters</span></span><br><span class="line"><span class="comment"># when looping. Instead of calling the module once per with_ item, the</span></span><br><span class="line"><span class="comment"># module is called once with all items at once. Currently this only works</span></span><br><span class="line"><span class="comment"># under limited circumstances, and only with parameters named 'name'.</span></span><br><span class="line"><span class="comment">#squash_actions = apk,apt,dnf,homebrew,pacman,pkgng,yum,zypper</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># prevents logging of task data, off by default</span></span><br><span class="line"><span class="comment">#no_log = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># prevents logging of tasks, but only on the targets, data is still logged on the master/controller</span></span><br><span class="line"><span class="comment">#no_target_syslog = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># controls whether Ansible will raise an error or warning if a task has no</span></span><br><span class="line"><span class="comment"># choice but to create world readable temporary files to execute a module on</span></span><br><span class="line"><span class="comment"># the remote machine.  This option is False by default for security.  Users may</span></span><br><span class="line"><span class="comment"># turn this on to have behaviour more like Ansible prior to 2.1.x.  See</span></span><br><span class="line"><span class="comment"># https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user</span></span><br><span class="line"><span class="comment"># for more secure ways to fix this than enabling this option.</span></span><br><span class="line"><span class="comment">#allow_world_readable_tmpfiles = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># controls the compression level of variables sent to</span></span><br><span class="line"><span class="comment"># worker processes. At the default of 0, no compression</span></span><br><span class="line"><span class="comment"># is used. This value must be an integer from 0 to 9.</span></span><br><span class="line"><span class="comment">#var_compression_level = 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># controls what compression method is used for new-style ansible modules when</span></span><br><span class="line"><span class="comment"># they are sent to the remote system.  The compression types depend on having</span></span><br><span class="line"><span class="comment"># support compiled into both the controller's python and the client's python.</span></span><br><span class="line"><span class="comment"># The names should match with the python Zipfile compression types:</span></span><br><span class="line"><span class="comment"># * ZIP_STORED (no compression. available everywhere)</span></span><br><span class="line"><span class="comment"># * ZIP_DEFLATED (uses zlib, the default)</span></span><br><span class="line"><span class="comment"># These values may be set per host via the ansible_module_compression inventory</span></span><br><span class="line"><span class="comment"># variable</span></span><br><span class="line"><span class="comment">#module_compression = 'ZIP_DEFLATED'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This controls the cutoff point (in bytes) on --diff for files</span></span><br><span class="line"><span class="comment"># set to 0 for unlimited (RAM may suffer!).</span></span><br><span class="line"><span class="comment">#max_diff_size = 1048576</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This controls how ansible handles multiple --tags and --skip-tags arguments</span></span><br><span class="line"><span class="comment"># on the CLI.  If this is True then multiple arguments are merged together.  If</span></span><br><span class="line"><span class="comment"># it is False, then the last specified argument is used and the others are ignored.</span></span><br><span class="line"><span class="comment"># This option will be removed in 2.8.</span></span><br><span class="line"><span class="comment">#merge_multiple_cli_flags = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls showing custom stats at the end, off by default</span></span><br><span class="line"><span class="comment">#show_custom_stats = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls which files to ignore when using a directory as inventory with</span></span><br><span class="line"><span class="comment"># possibly multiple sources (both static and dynamic)</span></span><br><span class="line"><span class="comment">#inventory_ignore_extensions = ~, .orig, .bak, .ini, .cfg, .retry, .pyc, .pyo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This family of modules use an alternative execution path optimized for network appliances</span></span><br><span class="line"><span class="comment"># only update this setting if you know how this works, otherwise it can break module execution</span></span><br><span class="line"><span class="comment">#network_group_modules=eos, nxos, ios, iosxr, junos, vyos</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># When enabled, this option allows lookups (via variables like &#123;&#123;lookup('foo')&#125;&#125; or when used as</span></span><br><span class="line"><span class="comment"># a loop with `with_foo`) to return data that is not marked "unsafe". This means the data may contain</span></span><br><span class="line"><span class="comment"># jinja2 templating language which will be run through the templating engine.</span></span><br><span class="line"><span class="comment"># ENABLING THIS COULD BE A SECURITY RISK</span></span><br><span class="line"><span class="comment">#allow_unsafe_lookups = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># set default errors for all plays</span></span><br><span class="line"><span class="comment">#any_errors_fatal = False</span></span><br><span class="line"></span><br><span class="line">[inventory]</span><br><span class="line"><span class="comment"># enable inventory plugins, default: 'host_list', 'script', 'auto', 'yaml', 'ini', 'toml'</span></span><br><span class="line"><span class="comment">#enable_plugins = host_list, virtualbox, yaml, constructed</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ignore these extensions when parsing a directory as inventory source</span></span><br><span class="line"><span class="comment">#ignore_extensions = .pyc, .pyo, .swp, .bak, ~, .rpm, .md, .txt, ~, .orig, .ini, .cfg, .retry</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ignore files matching these patterns when parsing a directory as inventory source</span></span><br><span class="line"><span class="comment">#ignore_patterns=</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If 'true' unparsed inventory sources become fatal errors, they are warnings otherwise.</span></span><br><span class="line"><span class="comment">#unparsed_is_failed=False</span></span><br><span class="line"></span><br><span class="line">[privilege_escalation]</span><br><span class="line"><span class="comment">#become=True</span></span><br><span class="line"><span class="comment">#become_method=sudo</span></span><br><span class="line"><span class="comment">#become_user=root</span></span><br><span class="line"><span class="comment">#become_ask_pass=False</span></span><br><span class="line"></span><br><span class="line">[paramiko_connection]</span><br><span class="line"></span><br><span class="line"><span class="comment"># uncomment this line to cause the paramiko connection plugin to not record new host</span></span><br><span class="line"><span class="comment"># keys encountered.  Increases performance on new host additions.  Setting works independently of the</span></span><br><span class="line"><span class="comment"># host key checking setting above.</span></span><br><span class="line"><span class="comment">#record_host_keys=False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by default, Ansible requests a pseudo-terminal for commands executed under sudo. Uncomment this</span></span><br><span class="line"><span class="comment"># line to disable this behaviour.</span></span><br><span class="line"><span class="comment">#pty=False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># paramiko will default to looking for SSH keys initially when trying to</span></span><br><span class="line"><span class="comment"># authenticate to remote devices.  This is a problem for some network devices</span></span><br><span class="line"><span class="comment"># that close the connection after a key failure.  Uncomment this line to</span></span><br><span class="line"><span class="comment"># disable the Paramiko look for keys function</span></span><br><span class="line"><span class="comment">#look_for_keys = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># When using persistent connections with Paramiko, the connection runs in a</span></span><br><span class="line"><span class="comment"># background process.  If the host doesn't already have a valid SSH key, by</span></span><br><span class="line"><span class="comment"># default Ansible will prompt to add the host key.  This will cause connections</span></span><br><span class="line"><span class="comment"># running in background processes to fail.  Uncomment this line to have</span></span><br><span class="line"><span class="comment"># Paramiko automatically add host keys.</span></span><br><span class="line"><span class="comment">#host_key_auto_add = True</span></span><br><span class="line"></span><br><span class="line">[ssh_connection]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ssh arguments to use</span></span><br><span class="line"><span class="comment"># Leaving off ControlPersist will result in poor performance, so use</span></span><br><span class="line"><span class="comment"># paramiko on older platforms rather than removing it, -C controls compression use</span></span><br><span class="line"><span class="comment">#ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The base directory for the ControlPath sockets.</span></span><br><span class="line"><span class="comment"># This is the "%(directory)s" in the control_path option</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Example:</span></span><br><span class="line"><span class="comment"># control_path_dir = /tmp/.ansible/cp</span></span><br><span class="line"><span class="comment">#control_path_dir = ~/.ansible/cp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The path to use for the ControlPath sockets. This defaults to a hashed string of the hostname,</span></span><br><span class="line"><span class="comment"># port and username (empty string in the config). The hash mitigates a common problem users</span></span><br><span class="line"><span class="comment"># found with long hostnames and the conventional %(directory)s/ansible-ssh-%%h-%%p-%%r format.</span></span><br><span class="line"><span class="comment"># In those cases, a "too long for Unix domain socket" ssh error would occur.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Example:</span></span><br><span class="line"><span class="comment"># control_path = %(directory)s/%%h-%%r</span></span><br><span class="line"><span class="comment">#control_path =</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enabling pipelining reduces the number of SSH operations required to</span></span><br><span class="line"><span class="comment"># execute a module on the remote server. This can result in a significant</span></span><br><span class="line"><span class="comment"># performance improvement when enabled, however when using "sudo:" you must</span></span><br><span class="line"><span class="comment"># first disable 'requiretty' in /etc/sudoers</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default, this option is disabled to preserve compatibility with</span></span><br><span class="line"><span class="comment"># sudoers configurations that have requiretty (the default on many distros).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#pipelining = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Control the mechanism for transferring files (old)</span></span><br><span class="line"><span class="comment">#   * smart = try sftp and then try scp [default]</span></span><br><span class="line"><span class="comment">#   * True = use scp only</span></span><br><span class="line"><span class="comment">#   * False = use sftp only</span></span><br><span class="line"><span class="comment">#scp_if_ssh = smart</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Control the mechanism for transferring files (new)</span></span><br><span class="line"><span class="comment"># If set, this will override the scp_if_ssh option</span></span><br><span class="line"><span class="comment">#   * sftp  = use sftp to transfer files</span></span><br><span class="line"><span class="comment">#   * scp   = use scp to transfer files</span></span><br><span class="line"><span class="comment">#   * piped = use 'dd' over SSH to transfer files</span></span><br><span class="line"><span class="comment">#   * smart = try sftp, scp, and piped, in that order [default]</span></span><br><span class="line"><span class="comment">#transfer_method = smart</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if False, sftp will not use batch mode to transfer files. This may cause some</span></span><br><span class="line"><span class="comment"># types of file transfer failures impossible to catch however, and should</span></span><br><span class="line"><span class="comment"># only be disabled if your sftp version has problems with batch mode</span></span><br><span class="line"><span class="comment">#sftp_batch_mode = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The -tt argument is passed to ssh when pipelining is not enabled because sudo</span></span><br><span class="line"><span class="comment"># requires a tty by default.</span></span><br><span class="line"><span class="comment">#usetty = True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of times to retry an SSH connection to a host, in case of UNREACHABLE.</span></span><br><span class="line"><span class="comment"># For each retry attempt, there is an exponential backoff,</span></span><br><span class="line"><span class="comment"># so after the first attempt there is 1s wait, then 2s, 4s etc. up to 30s (max).</span></span><br><span class="line"><span class="comment">#retries = 3</span></span><br><span class="line"></span><br><span class="line">[persistent_connection]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configures the persistent connection timeout value in seconds.  This value is</span></span><br><span class="line"><span class="comment"># how long the persistent connection will remain idle before it is destroyed.</span></span><br><span class="line"><span class="comment"># If the connection doesn't receive a request before the timeout value</span></span><br><span class="line"><span class="comment"># expires, the connection is shutdown. The default value is 30 seconds.</span></span><br><span class="line"><span class="comment">#connect_timeout = 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The command timeout value defines the amount of time to wait for a command</span></span><br><span class="line"><span class="comment"># or RPC call before timing out. The value for the command timeout must</span></span><br><span class="line"><span class="comment"># be less than the value of the persistent connection idle timeout (connect_timeout)</span></span><br><span class="line"><span class="comment"># The default value is 30 second.</span></span><br><span class="line"><span class="comment">#command_timeout = 30</span></span><br><span class="line"></span><br><span class="line">[accelerate]</span><br><span class="line"><span class="comment">#accelerate_port = 5099</span></span><br><span class="line"><span class="comment">#accelerate_timeout = 30</span></span><br><span class="line"><span class="comment">#accelerate_connect_timeout = 5.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The daemon timeout is measured in minutes. This time is measured</span></span><br><span class="line"><span class="comment"># from the last activity to the accelerate daemon.</span></span><br><span class="line"><span class="comment">#accelerate_daemon_timeout = 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If set to yes, accelerate_multi_key will allow multiple</span></span><br><span class="line"><span class="comment"># private keys to be uploaded to it, though each user must</span></span><br><span class="line"><span class="comment"># have access to the system via SSH to add a new key. The default</span></span><br><span class="line"><span class="comment"># is "no".</span></span><br><span class="line"><span class="comment">#accelerate_multi_key = yes</span></span><br><span class="line"></span><br><span class="line">[selinux]</span><br><span class="line"><span class="comment"># file systems that require special treatment when dealing with security context</span></span><br><span class="line"><span class="comment"># the default behaviour that copies the existing context or uses the user default</span></span><br><span class="line"><span class="comment"># needs to be changed to use the file system dependent context.</span></span><br><span class="line"><span class="comment">#special_context_filesystems=nfs,vboxsf,fuse,ramfs,9p,vfat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set this to yes to allow libvirt_lxc connections to work without SELinux.</span></span><br><span class="line"><span class="comment">#libvirt_lxc_noseclabel = yes</span></span><br><span class="line"></span><br><span class="line">[colors]</span><br><span class="line"><span class="comment">#highlight = white</span></span><br><span class="line"><span class="comment">#verbose = blue</span></span><br><span class="line"><span class="comment">#warn = bright purple</span></span><br><span class="line"><span class="comment">#error = red</span></span><br><span class="line"><span class="comment">#debug = dark gray</span></span><br><span class="line"><span class="comment">#deprecate = purple</span></span><br><span class="line"><span class="comment">#skip = cyan</span></span><br><span class="line"><span class="comment">#unreachable = red</span></span><br><span class="line"><span class="comment">#ok = green</span></span><br><span class="line"><span class="comment">#changed = yellow</span></span><br><span class="line"><span class="comment">#diff_add = green</span></span><br><span class="line"><span class="comment">#diff_remove = red</span></span><br><span class="line"><span class="comment">#diff_lines = cyan</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[diff]</span><br><span class="line"><span class="comment"># Always print diff when running ( same as always running with -D/--diff )</span></span><br><span class="line"><span class="comment"># always = no</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set how many context lines to show in diff</span></span><br><span class="line"><span class="comment"># context = 3</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>/etc/ansible/hosts</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 1340]<span class="comment"># cat /etc/ansible/hosts</span></span><br><span class="line"><span class="comment"># This is the default ansible 'hosts' file.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># It should live in /etc/ansible/hosts</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   - Comments begin with the '#' character</span></span><br><span class="line"><span class="comment">#   - Blank lines are ignored</span></span><br><span class="line"><span class="comment">#   - Groups of hosts are delimited by [header] elements</span></span><br><span class="line"><span class="comment">#   - You can enter hostnames or ip addresses</span></span><br><span class="line"><span class="comment">#   - A hostname/ip can be a member of multiple groups</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ex 1: Ungrouped hosts, specify before any group headers.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## green.example.com</span></span><br><span class="line"><span class="comment">## blue.example.com</span></span><br><span class="line"><span class="comment">## 192.168.100.1</span></span><br><span class="line"><span class="comment">## 192.168.100.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ex 2: A collection of hosts belonging to the 'webservers' group</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## [webservers]</span></span><br><span class="line"><span class="comment">## alpha.example.org</span></span><br><span class="line"><span class="comment">## beta.example.org</span></span><br><span class="line"><span class="comment">## 192.168.1.100</span></span><br><span class="line"><span class="comment">## 192.168.1.110</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If you have multiple hosts following a pattern you can specify</span></span><br><span class="line"><span class="comment"># them like this:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## www[001:006].example.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ex 3: A collection of database servers in the 'dbservers' group</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## [dbservers]</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## db01.intranet.mydomain.net</span></span><br><span class="line"><span class="comment">## db02.intranet.mydomain.net</span></span><br><span class="line"><span class="comment">## 10.25.1.56</span></span><br><span class="line"><span class="comment">## 10.25.1.57</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Here's another example of host ranges, this time there are no</span></span><br><span class="line"><span class="comment"># leading 0s:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## db-[99:101]-node.example.com</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Playbook</p>
<ul>
<li>YAML形式で記載する</li>
<li>実行するには<code>ansible-playbook</code>コマンドを使う</li>
</ul>
</li>
<li><p>Ansibleの活用</p>
<ul>
<li>アプリケーションのリリース</li>
<li>仮想サーバー・コンテナの払い出し<ul>
<li>KVMによる仮想マシンや、Dockerコンテナ、コンテナイメージの作成などを自動化できる</li>
</ul>
</li>
<li>ネットワーク機器の管理<ul>
<li>CISCOを始めとするネットワークベンダーの様々なネットワーク機器に対応しており、ネットワーク機器の設定や情報収集に利用できる</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="練習問題-3"><a href="#練習問題-3" class="headerlink" title="練習問題"></a>練習問題</h3><ul>
<li>4.1 gitコマンド<ul>
<li><code>git clone http://github/xxxx</code></li>
</ul>
</li>
<li>4.2 gzファイルを展開する方法<ul>
<li><code>gunzip newsoft.tar.gx ; tar xvf newsoft.tar</code></li>
<li><code>tar zxvf newsoft.tar.gz</code></li>
<li><code>gzip -dc newsoft.tar.gz | tar xvf -</code></li>
</ul>
</li>
<li>4.3 <code>make</code><ul>
<li><code>./configure</code>でMackefileを作成</li>
<li><code>make</code>コマンドでMakefileに基づいてコンパイルを行う</li>
<li><code>make install</code>コマンドでコンパイル済みのファイルをインストール</li>
</ul>
</li>
<li>4.4 パッチの適用を取り消すには？patchコマンドでなんというオプション？<ul>
<li>R</li>
</ul>
</li>
<li>4.5 <code>dd if=/dev/sdb of=/dev/sdc</code></li>
<li>4.6 <code>tar cvf /dev/st0 /home</code><ul>
<li>tar [option] [アーカイブ先] [アーカイブ元]</li>
</ul>
</li>
<li>4.7 &#x2F;dataディレクトリ以下を、ホストjupiterの&#x2F;backupディレクトリにバックアップ<ul>
<li><code>rsync -auvz -e ssh /data/ march@jupiter:/backup</code></li>
<li>TODO: rsyncコマンド使ってみる</li>
</ul>
</li>
<li>4.8 メンテナンス情報を通知する方法</li>
<li>4.9 スワップ領域がどの程度利用されているのか、その容量を計測したい場合のコマンド<ul>
<li><code>vmstat</code>,<code>cat /proc/swaps</code>,<code>free</code></li>
<li><code>swapon</code>,<code>/proc/meminfo</code></li>
</ul>
</li>
<li>4.10 vmstatコマンドで使用率が高いと考えられるリソース<ul>
<li>TODO: vmstatコマンドの見方再確認</li>
</ul>
</li>
<li>4.11 sarで今月の15日の記録を見たい<ul>
<li><code>sar -b -f /var/log/sa/sa15</code></li>
</ul>
</li>
<li>4.12 次のコマンド実行結果の説明<ul>
<li>vmstat 30 50<ul>
<li>30秒間隔で計測結果が50回表示される</li>
<li>使用中のスワップ領域サイズが表示される</li>
<li>バッファキャッシュとページキャッシュの利用状況が表示される</li>
</ul>
</li>
</ul>
</li>
<li>4.13 プロセスごとにメモリ使用量を把握したい<ul>
<li><code>top</code></li>
<li><code>ps aux</code>でもわかる。<code>ps -ex</code>は、Unix98オプションとGNUオプションを続けて指定できないためエラーになる</li>
</ul>
</li>
<li>4.14 物理メモリが枯渇してしまう前にプロセスを強制終了し、そのプロセスが使っていたメモリを開放する仕組み<ul>
<li>OOM Killer</li>
</ul>
</li>
<li>4.15 Ansibleの説明について</li>
<li>4.16 Ansilbeをインストール下ホストで以下のコマンドを実行<ul>
<li><code>ansible-playbook -i localtest test_playbook.yml</code></li>
<li>TODO: ansibleを実際に使ってみる必要ある</li>
</ul>
</li>
</ul>
<h2 id="第5章-仮想化サーバー"><a href="#第5章-仮想化サーバー" class="headerlink" title="第5章　仮想化サーバー"></a>第5章　仮想化サーバー</h2><h3 id="5-1-仮想マシンの仕組みとKVM"><a href="#5-1-仮想マシンの仕組みとKVM" class="headerlink" title="5.1　仮想マシンの仕組みとKVM"></a>5.1　仮想マシンの仕組みとKVM</h3><ul>
<li><p>仮想化</p>
<ul>
<li>ホスト型仮想化：仮想化ソフトウェアをインストールし、仮想化ソフトウェアが作り出した仮想マシン上にOSをインストールする方式<ul>
<li>ホストOSとゲストOSに分けられる</li>
</ul>
</li>
<li>ハイパーバイザー型仮想化：コンピュータ上にハイパーバイザと呼ばれる仮想化管理機構を用意し、その上で仮想マシンを動かす方式<ul>
<li>ホスト型仮想化よりも高いパフォーマンスを期待できる</li>
</ul>
</li>
</ul>
</li>
<li><p>仮想化のメリット・デメリット</p>
<ul>
<li>メリット：<ul>
<li>トータルの運用コストを削減できる</li>
<li>リソースの変化に柔軟に対応できる</li>
</ul>
</li>
<li>デメリット：<ul>
<li>仮想マシンのホストに障害が発生したい場合、複数の仮想マシンが影響</li>
<li>物理サーバとは違った形での運用スキルやセキュリティ対策が必要</li>
<li>ハードウェア上で直接OSを動作させるのに比べてパフォーマンスが低下してしまう<ul>
<li>オーバーヘッドを低減するCPUの仮想化支援機能<ul>
<li>Intel社のCPUに搭載されているVT-x</li>
<li>AMD社のCPUに搭載されているADM-V</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>KVM</p>
<ul>
<li>CPUが仮想化支援機構に対応しているかどうかを確認するコマンド：<ul>
<li><code>lscpu | grep Virtualization</code></li>
<li><code>grep -E &#39;vmx|svm&#39; /proc/cpuinfo</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-2-仮想マシンの作成と管理"><a href="#5-2-仮想マシンの作成と管理" class="headerlink" title="5.2　仮想マシンの作成と管理"></a>5.2　仮想マシンの作成と管理</h3><ul>
<li><p>KVM環境の構築</p>
<ul>
<li>手順<ul>
<li>KVMと関連ツールおよびQEMU(ハードウェアエミュレータ)をインストール<ul>
<li><code>yum install libvirt bridge-utils qemu-kvm virt-manager virt-install</code></li>
<li><code>systemctl start libvirt</code></li>
<li><code>systemctl enable libvirt</code></li>
</ul>
</li>
<li>ブリッジネットワークを設定する<ul>
<li><code>nmcli con add type bridge con-name br0 ifname br0</code></li>
<li><code>nmcli con mod br0 ipv4.method manual ipv4.addresses &quot;192.168.1.80/24&quot; ipv4.gateway &quot;192.168.1.1&quot; ipv4.dns &quot;192.168.1.1&quot;</code></li>
</ul>
</li>
<li>仮想マシンを作成する</li>
</ul>
</li>
</ul>
</li>
<li><p>実際にvirshを使った操作が紹介されているが試す環境ないので割愛</p>
</li>
</ul>
<h3 id="練習問題-4"><a href="#練習問題-4" class="headerlink" title="練習問題"></a>練習問題</h3><ul>
<li>5.1 ホスト型とハイパーバイザ型の問題</li>
<li>5.2 <code>cat /proc/cpuinfo | grep flags | uniq</code><ul>
<li>KVMを利用するには、CPUが仮想化支援機能に対応している必要がある（IntelのVT-xかAMDのAMD-V）</li>
<li>中の文字列に、「vmx」か「svm」がなければ対応しない</li>
</ul>
</li>
<li>5.3 CUI環境でKVM観葉マシンを作成してゲストOSをインストールするには<ul>
<li><code>virt-install</code>コマンドを使う</li>
</ul>
</li>
<li>5.4 KVMを使って仮想マシンを運用したい<ul>
<li><code>systemctl enamble libvirt</code><ul>
<li>libvirtは仮想マシンの制御を抽象化したライブラリ</li>
<li>KVMを使って仮想マシンを運用するには、libvirtサービスを起動しておく必要がある</li>
</ul>
</li>
</ul>
</li>
<li>5.5 KVM仮想マシンを作成してCentOS7をインストールしたい<ul>
<li><code>virt-install</code>コマンド</li>
</ul>
</li>
<li>5.6 コマンドラインからKVM仮想マシン「vm01」に接続してコマンド操作をしようとしています。<ul>
<li><code>virsh console vm01</code></li>
</ul>
</li>
</ul>
<h2 id="第6章-コンテナ"><a href="#第6章-コンテナ" class="headerlink" title="第6章　コンテナ"></a>第6章　コンテナ</h2><h3 id="6-1-コンテナの仕組み"><a href="#6-1-コンテナの仕組み" class="headerlink" title="6.1　コンテナの仕組み"></a>6.1　コンテナの仕組み</h3><p>仮想マシンと並んでよく使われる仮想化技術</p>
<ul>
<li><p>コンテナ型仮想化</p>
<ul>
<li>仮想マシンを動かす技術ではなく、独立下環境でアプリケーションを動かす技術</li>
<li>コンテナ型仮想化ではホストOSとカーネルを共有するので仮想マシンよりもコンテナのほうがシステムリソースの消費が少なくて済む</li>
</ul>
</li>
<li><p>参考</p>
<ul>
<li>特定のサーバープロセスなどアプリケーションのみを実行するコンテナをアプリケーションコンテナ</li>
<li>一連のシステムプロセス群を実行し仮想マシンに近いコンテナをシステムコンテナということがあります。</li>
</ul>
</li>
<li><p>名前空間とcgroup</p>
<ul>
<li>名前空間<ul>
<li>コンテナの隔離に使われているカーネルの機能のこと</li>
</ul>
</li>
<li>cgroup<ul>
<li>プロセスをグループ化して管理する仕組み</li>
<li>グループごとにシステムリソースの利用に制限をかけることができる</li>
<li>管理できるシステムリソースは<code>ls /sys/fs/cgroup/</code>で確認できる</li>
</ul>
</li>
</ul>
</li>
<li><p>Docker</p>
<ul>
<li>コンテナ化する仕組みをDockerエンジンといいます。</li>
</ul>
</li>
</ul>
<h3 id="6-2-Dockerコンテナとコンテナイメージの管理"><a href="#6-2-Dockerコンテナとコンテナイメージの管理" class="headerlink" title="6.2　Dockerコンテナとコンテナイメージの管理"></a>6.2　Dockerコンテナとコンテナイメージの管理</h3><ul>
<li><p>Dockerの導入</p>
<ul>
<li><code>yum install docker</code></li>
<li><code>systemctl start docker.service</code></li>
<li><code>docker version</code></li>
</ul>
</li>
<li><p>dockerコマンド</p>
<ul>
<li>実行するにはroot権限が必要</li>
<li>一般ユーザでも実行させるにはdockerグループに所属させる必要がある</li>
<li><code>groupadd docker</code></li>
<li><code>usermod -aG docker linucuser</code></li>
</ul>
</li>
<li><p>dockerの基本操作</p>
<ul>
<li>コンテナイメージの取得<ul>
<li><code>docker pull centos:8</code></li>
</ul>
</li>
</ul>
</li>
<li><p>ディスク容量不足になったのでvirtualboxの容量増やす</p>
<ul>
<li><a href="https://cream-worker.blog.jp/archives/1077340749.html">https://cream-worker.blog.jp/archives/1077340749.html</a></li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos:8</span><br><span class="line">docker images</span><br><span class="line">docker create --name mycentos8 centos:8</span><br><span class="line">docker start mycentos8</span><br><span class="line"><span class="comment"># dokcer pull/create/start をあわせた動きが docekr runコマンド</span></span><br><span class="line">docker run centos:8 cat /etc/redhat-release</span><br><span class="line">docker ps</span><br><span class="line">docker ps -a</span><br><span class="line">docker rm [コンテナIDorコンテナ名]</span><br><span class="line"></span><br><span class="line"><span class="comment"># コンテナへのログイン</span></span><br><span class="line"><span class="comment"># docker run -it --name コンテナ名 イメージ名:タグ名 シェル</span></span><br><span class="line">docker run -it --name mucentos centos:8 /bin/bash</span><br><span class="line">uname -a <span class="comment"># あくまでホストOSのカーネル情報が見える</span></span><br><span class="line">Ctrl + p, Ctrl + q で抜ける</span><br><span class="line">docker ps <span class="comment"># プロセスが立ち上がっていることを確認</span></span><br><span class="line">docker attach mycentos</span><br><span class="line"><span class="built_in">exit</span> <span class="comment"># exitで抜けるとcontainerが落ちる</span></span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<ul>
<li>仮想ネットワークの利用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name centosA cenots:8 /bin/bash</span><br><span class="line">docker run -itd --name centosB cenots:8 /bin/bash</span><br><span class="line">docker ps</span><br><span class="line">docker <span class="built_in">exec</span> centosA /sbin/ip a</span><br><span class="line">docker <span class="built_in">exec</span> centosB /sbin/ip a</span><br><span class="line"></span><br><span class="line"><span class="comment"># ホストOS側にdocker0というネットワークインターフェースが作成されているのがわかる</span></span><br><span class="line">ip a show docker0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 仮想ネットワークを新しく作成することもできる</span></span><br><span class="line">docker network create mynetwork</span><br><span class="line">docker network connect mynetwork centosA</span><br><span class="line">docker network connect mynetwork centosB</span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> centosA /sbin/ip a</span><br><span class="line">docker <span class="built_in">exec</span> centosB /sbin/ip a</span><br></pre></td></tr></table></figure>

<ul>
<li>dockerイメージの作成</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -it centos:8 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"My Docker Image"</span> &gt;&gt; /root/docker.txt</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">docker commit [コンテナID/コンテナ名] <span class="built_in">test</span>/centos</span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line">docker run <span class="built_in">test</span>/centos cat /root/docker.txt</span><br><span class="line">docker rmi <span class="built_in">test</span>/centos</span><br></pre></td></tr></table></figure>

<ul>
<li>ポート変換</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginxtest -d -p 8080:80 nginx</span><br><span class="line"></span><br><span class="line">docker run --name nginxtest2 -v /home/tomo/html:/usr/share/nginx/html -d -p 8080:80 nginx</span><br><span class="line"><span class="comment"># 権限が足りずうまく行かなかった</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Dcokerfile<ul>
<li>既存のDockerイメージに操作を加えて、新しいDockerイメージを作ることができる</li>
<li>Dockerfileに記述して独自のイメージを作成する</li>
</ul>
</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos:<span class="number">8</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> testimage &lt;linucuser@example.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install httpd</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">EXPOSE 80</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">CMD [<span class="string">"/usr/sbin/httpd"</span>,<span class="string">"-DFOREGROUND"</span>]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker build -t <span class="built_in">local</span>/centos:apache .</span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment"># 作成したDockerイメージからコンテナ名「apachetest」としてコンテナを作成、起動</span></span><br><span class="line">docker run --name apachetest -d -p 8080:80 <span class="built_in">local</span>/centos:apache</span><br></pre></td></tr></table></figure>

<ul>
<li>コンテナの運用・管理コマンド</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># コンテナの状態を詳しく確認できる</span></span><br><span class="line">docker stats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 圧縮アーカイブファイルを取得してDockerイメージを生成</span></span><br><span class="line">docker import http://example.com/exampleimage.tgz</span><br><span class="line"></span><br><span class="line"><span class="comment"># コンテナ内のすべてのプロセスを一時停止/再開</span></span><br><span class="line">docker pause</span><br><span class="line">docker unpause</span><br><span class="line"></span><br><span class="line"><span class="comment"># コンテナ終了</span></span><br><span class="line">docker stop</span><br><span class="line"><span class="comment"># docker stopコマンドで終了できない場合に利用 メインプロセスに対してKILLシグナルを送信してコンテナを終了します。</span></span><br><span class="line">docker <span class="built_in">kill</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># プライベートレジストリの構築</span></span><br><span class="line">docker run -d -p 5000:5000 --name registry registry:2</span><br><span class="line">docker pull ubuntu</span><br><span class="line">docker tag ubuntu:latest localhost:5000/ubuntu</span><br><span class="line">docker push localhost:5000/ubuntu</span><br><span class="line"></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line">docker pull localhost:5000/ubuntu</span><br><span class="line"><span class="comment"># ローカルレジストリ削除</span></span><br><span class="line">docker stop registry &amp;&amp; docker rm -v registry</span><br></pre></td></tr></table></figure>

<h3 id="練習問題-5"><a href="#練習問題-5" class="headerlink" title="練習問題"></a>練習問題</h3><ul>
<li>6.1 仮想マシンと比較した際、コンテナにはどういうメリットがあるか<ul>
<li>カーネルはホストOSのものを利用するのでシステムリソースの消費が少なくて済む</li>
</ul>
</li>
<li>6.2 dockerコマンド<ul>
<li><code>docker pull centos:8</code></li>
<li><code>docker create --name testctl centos:8</code></li>
<li><code>dokcer start testctl</code></li>
</ul>
</li>
<li>6.3 起動中コンテナのシェルに接続<ul>
<li><code>docker attach testct2</code></li>
</ul>
</li>
<li>6.4 改変を加えたコンテナから新しいDockerイメージを作成する際のコマンド<ul>
<li>docker commit</li>
</ul>
</li>
<li>6.5 Dockerfile</li>
</ul>
<h2 id="第7章-201模擬試験"><a href="#第7章-201模擬試験" class="headerlink" title="第7章　201模擬試験"></a>第7章　201模擬試験</h2><ul>
<li>TODO: Q1.<ul>
<li>EFIシステムパーティションはFAT（またはVFAT）でフォーマットされる</li>
<li>BIOSはマザーボード上のフラッシュメモリに保存される</li>
</ul>
</li>
<li>TODO: Q2.GRUB2の設定ファイル<code>/etc/default/grub</code>の変更後は、<code>grub-mkconfig</code>コマンドを実行して<code>/boot/grub/grub.cfg</code>ファイルを生成する必要がある</li>
<li>TODO: Q3.GRUB2ブートローダ</li>
<li>TODO: Q4.GRUBを再インストールするには<ul>
<li><code>grub2-install /dev/sda</code></li>
</ul>
</li>
<li>TODO: Q5.systemdについて<ul>
<li><code>/usr/lib/systemd/system</code>ディレクトリ：デフォルトのUnitファイル</li>
<li><code>/etc/systemd/system</code>ディレクトリ：管理者がカスタマイズするUnitファイル</li>
</ul>
</li>
<li>Q6.systemd postfix.serviceが自動起動するように設定<ul>
<li><code>systemctl enable postfix.service</code></li>
</ul>
</li>
<li>TODO: Q7.システムメンテナンスを行うためレスキューモードに移行<ul>
<li><code>systemctl isolate rescue.target</code></li>
</ul>
</li>
<li>TODO: Q8.<code>/boot</code>ディレクトリ以下にあるファイルのうち、カーネルイメージを選択<ul>
<li><code>/boot/vmlinuz-カーネルバージョン</code>という名前のファイル</li>
<li>自己解凍される圧縮ファイルとなっている</li>
<li><code>/boot/initamfs</code>や<code>/boot/initrd</code>は初期RAMディスクファイル</li>
<li><code>/boot/System.map</code>はシンボルのマッピングファイル</li>
<li>configはカーネルコンフィギュレーションファイル</li>
</ul>
</li>
<li>TODO: Q9.現在利用中のカーネルバージョンを表示することができるコマンド<ul>
<li><code>uname -r</code></li>
<li><code>cat /proc/version</code></li>
</ul>
</li>
<li>TODO: Q10.カーネルのコンフィギュレーションが保存されるファイルのファイル名<ul>
<li><code>/usr/src/linux/.config</code></li>
</ul>
</li>
<li>TODO: Q11.初期RAMディスクの作成ができるコマンド<ul>
<li><code>mkinitrd</code>,<code>mkinitramfs</code>,<code>dracut</code></li>
</ul>
</li>
<li>Q12.systemdを採用したシステムでsshdサービスのログを取得<ul>
<li><code>journalctl -u sshd.service</code></li>
</ul>
</li>
<li>TODO: Q13. udevを使用している場合、<code>.rules</code>ファイルが格納されているデフォルトのディレクトリ<ul>
<li><code>/etc/udev/udev.conf</code></li>
<li><code>/etc/udev/rules.d</code>ディレクトリ</li>
</ul>
</li>
<li>TODO: Q14.PCIデバイスの情報を集めている。1番目のバス、8番目のスロットに関する詳細な情報を表示<ul>
<li><code>lspci -vv -s 0:8</code></li>
</ul>
</li>
<li>TODO: Q15.<code>/etc/fstab</code>ファイルの書式<ul>
<li>ファイルシステムの情報が記載されたファイル</li>
<li>デバイスファイル名またはUUIDまたはラベル　マウントポイント　ファイルシステムの種類　マウントオプション　dumpフラグ　fsckのチェック順</li>
</ul>
</li>
<li>TODO: Q16.現在マウントされているファイルシステムとそのマウントオプションを確認<ul>
<li><code>/etc/mtab</code></li>
<li><code>/proc/mounts</code></li>
</ul>
</li>
<li>TODO: Q17.有効になっているスワップ領域を確認するコマンド<ul>
<li><code>cat /proc/swaps</code></li>
<li><code>swapon -s</code></li>
</ul>
</li>
<li>Q18.ext4ファイルシステムをブロクサイズ4096バイトで作成したい場合<ul>
<li><code>mke2fs -b 4096 -t ext4 /dev/sdb1</code></li>
</ul>
</li>
<li>TODO: Q19.Btrfsを使っている。&#x2F;mntにマウントしているトップレベルのサブボリュームの下に、&#x2F;mnt&#x2F;sub1というボリュームを作ろうとしている。<ul>
<li><code>btrfs subvolume create /mnt/sub1</code></li>
</ul>
</li>
<li>TODO: Q20.&#x2F;dev&#x2F;sda5にはext2ファイルシステムが格納されている。このファイルシステム内のデータに影響を与えずに、ext3ファイルシステムに変換したい場合<ul>
<li><code>tune2fs -j /dev/sda5</code></li>
<li>既存のext2ファイルシステムに影響を与えずにext3ファイルシステムに変換できる<ul>
<li>他のオプションも含めて確認する</li>
</ul>
</li>
</ul>
</li>
<li>Q21.LVMの論理ボリューム&#x2F;dev&#x2F;centos&#x2F;rootｎ構築されたXFSファイルシステムの情報を確認<ul>
<li><code>xfs_info</code>: XFSファイルシステムの情報を確認できる</li>
</ul>
</li>
<li>Q22.パーティションやディスクに対してLVMの物理ボリュームを作成するコマンド<ul>
<li><code>pvcreate</code>:物理ボリュームを作成</li>
<li><code>vgcreate</code>:ボリュームグループを作成</li>
<li><code>lvcreate</code>:論理ボリュームを作成</li>
</ul>
</li>
<li>Q23.ボリュームグループvolgroup1の空き容量が不足してきたので、物理ボリューム&#x2F;dev&#x2F;sdd1をvolgroup1に追加したい<ul>
<li><code>vgextend volgroup1 /dev/sdd1</code></li>
</ul>
</li>
<li>Q24.&#x2F;dev&#x2F;vg01&#x2F;lv01のスナップショットをlv01_snapという名前で作成しようとしている<ul>
<li><code>lvcreate -s -L 500m -n lv01_snap /dev/vg01/lv01</code></li>
<li>スナップショットを作成するには、lvcreateに-sオプションをつける</li>
<li>-Lはサイズの指定、-nはスナップショットの名称を指定</li>
</ul>
</li>
<li>Q25.LAN内に存在するホストをしるために、IPアドレスとMACアドレスとの対応テーブルを作成したい場合実行すべきこと<ul>
<li>LAN内のブロードキャストアドレスに対してpingコマンドを実行し、次にarpコマンドを実行する</li>
</ul>
</li>
<li>Q26.デフォルトゲートウェイを192.168.1.1に設定しようとしている<ul>
<li><code>ip route add default via 192.168.1.1</code></li>
<li><code>route add default gw 192.168.1.1</code></li>
</ul>
</li>
<li>Q27.無線ネットワークに関わるコマンドや説明で適切なもの<ul>
<li>iwconfigコマンドで無線LANインターフェースの状態を表示できる</li>
<li>無線LANのアクセスポイントを識別するIDとしてSSID・ESSIDがある</li>
</ul>
</li>
<li>Q28.ルーティングテーブル系問題</li>
<li>Q29.tcpdumpコマンドの出力結果読み解き問題 クライアントのIPアドレスはどれか</li>
<li>Q30.ルーティングテーブル系問題</li>
<li>Q31.ネットワークに異常がみられるので、ルーティングテーブルを表示しようとしている。<ul>
<li>DNSの問題と切り離すため、名前解決せずに表示させたい場合、routeコマンドにどのオプションをつければよいか<ul>
<li><code>route -n</code></li>
<li><code>netstat -rn</code>でも同じ</li>
</ul>
</li>
</ul>
</li>
<li>Q32.パケットの受信および転送におけるエラーや取りこぼしの状況をネットワークインターフェースごとに表示することができるコマンド<ul>
<li><code>netstat -i</code></li>
</ul>
</li>
<li>Q33.ターゲットホストまでのネットワーク経路を確認<ul>
<li><code>mtr</code></li>
<li><code>traceroute</code></li>
<li><code>tracepath</code></li>
</ul>
</li>
<li>Q34.gitコマンド系<ul>
<li><code>git clone https://github.com/xxxxxx</code></li>
</ul>
</li>
<li>Q35.ソフトウェアをソースコードからコンパイルしてインストールするときの説明<ul>
<li>makeコマンドを利用してもソフトウェア間の依存関係を解消できない</li>
</ul>
</li>
<li>Q36.gccコンパイラがなくてconfigureとmakeでエラー</li>
<li>Q37.ソースコードに適用したパッチを取り消したい場合、patchコマンドでは何というオプションを指定すればいいか<ul>
<li><code>patch -R p0 &lt; patch-2.3.4</code></li>
</ul>
</li>
<li>Q38.バックアップメディアの必要本数問題</li>
<li>Q39.dumpコマンド<ul>
<li>ファイルシステム単位でext2&#x2F;ext3&#x2F;ext4ファイルシステムをバックアップ</li>
</ul>
</li>
<li>Q40.ログインプロンプトの上方に表示されるディストリビューション情報などを編集したい<ul>
<li>編集すべきファイル「<code>/etc/issue</code>」</li>
</ul>
</li>
<li>Q41.ファイルシステムやディスクのI&#x2F;Oを計測できるコマンドを2つ選択してください<ul>
<li><code>iostat</code></li>
<li><code>iotop</code></li>
</ul>
</li>
<li>Q42.vmstatの出力結果<ul>
<li>bi:block in ブロックデバイスから受け取ったブロック数(ブロック数&#x2F;秒)</li>
<li>r: 実行待ちプロセス数</li>
<li>bo: ブロックデバイスに送られたブロック数(ブロック数&#x2F;秒)</li>
<li>wa: 入出力待ち時間</li>
<li>b: 割り込み不可能なスリープ状態にあるプロセス数</li>
</ul>
</li>
<li>Q43.freeコマンドからメモリとスワップ領域の状態について読み取る問題</li>
<li>Q44.vmstatコマンドの実行結果から読み取る問題</li>
<li>Q45.Webブラウザ経由でサーバーのCPU利用率やネットワークのトラフィックを監視したいときに導入すべきソフトウェア<ul>
<li>collectd,Nagios,MRTG,Cacti,Icinga2</li>
</ul>
</li>
<li>Q46.SNMPに関する説明<ul>
<li>SNMPマネージャからSNMPエージェント側に情報を求めることをポーリングという</li>
<li>障害発生時にSNMPマネージャへ通知する異常通知データをTRAPという</li>
<li>SNMPではUDPの161と162が使われる</li>
</ul>
</li>
<li>Q47.Ansibleに関する説明<ul>
<li>インベントリにはシステム構成処理が実行されるホストのリストが記述されている</li>
<li>AnsibleのターゲットノードはLinuxホスト以外にも対応</li>
<li>冪等性とはある操作を何度行っても同じ結果になること</li>
</ul>
</li>
<li>Q48.Ansibleの導入目的として不適切なものを１つ<ul>
<li>サーバーのセキュリティを高める</li>
</ul>
</li>
<li>Q49.playbookを実行するコマンド<ul>
<li><code>ansilbe-playbook -i server.hosts sample_playbook.yml</code></li>
</ul>
</li>
<li>Q50.ハイパーバイザ型仮想化の説明<ul>
<li>1つのハードウェア上で複数のOSを仮想マシン上で実行できる</li>
<li>ホストOSのハードウェア障害は仮想マシンから特定しづらい</li>
<li>CPUの仮想化支援機能を利用できる</li>
</ul>
</li>
<li>Q51.サーバーのCPUがKVMに対応しているかどうかを調べる<ul>
<li><code>cat /proc/cpuinfo | grep flags | uniq</code><ul>
<li>根拠となるフラグ：vmx or svm</li>
</ul>
</li>
</ul>
</li>
<li>Q52.仮想マシンのネットワークインターフェースをホストOSのネットワークインターフェースと同じネットワークに配置する仕組みをなんと呼ぶか？<ul>
<li>ブリッジネットワーク</li>
</ul>
</li>
<li>Q53.GUI環境で仮想マシンを管理：virt-manager</li>
<li>Q54.virsh は仮想マシン操作のためのコマンドラインインターフェース<ul>
<li><code>virsh shutdown vm_centos7</code></li>
</ul>
</li>
<li>Q55.コマンドラインで仮想マシンを作成してOSをインストールするためのコマンド<ul>
<li><code>virt-install</code></li>
</ul>
</li>
<li><h2 id="Q56-コンテナに関する説明で誤っているもの"><a href="#Q56-コンテナに関する説明で誤っているもの" class="headerlink" title="Q56.コンテナに関する説明で誤っているもの"></a>Q56.コンテナに関する説明で誤っているもの</h2></li>
<li>Q57.Dockerの説明としてただしいもの<ul>
<li>ホストOSのディレクトリをコンテナ内からアクセスできるように設定できる</li>
<li>DockerレジストリでDockerイメージを入手できる</li>
<li>DockerではLinuxカーネルの機能であるcgroupが使われる</li>
</ul>
</li>
<li>Q58.<ul>
<li><code>docker run -it alpine:latest /bin/sh</code></li>
</ul>
</li>
<li>Q59.<ul>
<li><code>docker attach [id]</code><ul>
<li>バックグラウンドで起動中のコンテナに入るにはattachを使う</li>
</ul>
</li>
</ul>
</li>
<li>Q60.<ul>
<li><code>docker images</code></li>
</ul>
</li>
</ul>
<h2 id="模擬試験-問題"><a href="#模擬試験-問題" class="headerlink" title="模擬試験 問題"></a>模擬試験 問題</h2><h2 id="模擬試験-解答・解説"><a href="#模擬試験-解答・解説" class="headerlink" title="模擬試験 解答・解説"></a>模擬試験 解答・解説</h2><h2 id="■第2部-202試験（LinuC-Level2-Exam-202）"><a href="#■第2部-202試験（LinuC-Level2-Exam-202）" class="headerlink" title="■第2部　202試験（LinuC Level2 Exam 202）"></a>■第2部　202試験（LinuC Level2 Exam 202）</h2><h2 id="第8章-ネットワーククライアントの管理"><a href="#第8章-ネットワーククライアントの管理" class="headerlink" title="第8章　ネットワーククライアントの管理"></a>第8章　ネットワーククライアントの管理</h2><h3 id="8-1-DHCPの設定"><a href="#8-1-DHCPの設定" class="headerlink" title="8.1　DHCPの設定"></a>8.1　DHCPの設定</h3><h3 id="8-2-PAM認証"><a href="#8-2-PAM認証" class="headerlink" title="8.2　PAM認証"></a>8.2　PAM認証</h3><h3 id="8-3-LDAP"><a href="#8-3-LDAP" class="headerlink" title="8.3　LDAP"></a>8.3　LDAP</h3><h2 id="第9章-ドメインネームサーバー"><a href="#第9章-ドメインネームサーバー" class="headerlink" title="第9章　ドメインネームサーバー"></a>第9章　ドメインネームサーバー</h2><h3 id="9-1-DNSの基本"><a href="#9-1-DNSの基本" class="headerlink" title="9.1　DNSの基本"></a>9.1　DNSの基本</h3><h3 id="9-2-BINDの基本設定"><a href="#9-2-BINDの基本設定" class="headerlink" title="9.2　BINDの基本設定"></a>9.2　BINDの基本設定</h3><h3 id="9-3-ゾーンファイルの管理"><a href="#9-3-ゾーンファイルの管理" class="headerlink" title="9.3　ゾーンファイルの管理"></a>9.3　ゾーンファイルの管理</h3><h3 id="9-4-DNSサーバーのセキュリティ"><a href="#9-4-DNSサーバーのセキュリティ" class="headerlink" title="9.4　DNSサーバーのセキュリティ"></a>9.4　DNSサーバーのセキュリティ</h3><h2 id="第10章-HTTPサーバーとプロキシサーバー"><a href="#第10章-HTTPサーバーとプロキシサーバー" class="headerlink" title="第10章　HTTPサーバーとプロキシサーバー"></a>第10章　HTTPサーバーとプロキシサーバー</h2><h3 id="10-1-Webサーバーの設定"><a href="#10-1-Webサーバーの設定" class="headerlink" title="10.1　Webサーバーの設定"></a>10.1　Webサーバーの設定</h3><h3 id="10-2-Nginx"><a href="#10-2-Nginx" class="headerlink" title="10.2　Nginx"></a>10.2　Nginx</h3><h3 id="10-3-プロキシサーバーの設定"><a href="#10-3-プロキシサーバーの設定" class="headerlink" title="10.3　プロキシサーバーの設定"></a>10.3　プロキシサーバーの設定</h3><h2 id="第11章-電子メールサービス"><a href="#第11章-電子メールサービス" class="headerlink" title="第11章　電子メールサービス"></a>第11章　電子メールサービス</h2><h3 id="11-1-SMTPサーバーの構築"><a href="#11-1-SMTPサーバーの構築" class="headerlink" title="11.1　SMTPサーバーの構築"></a>11.1　SMTPサーバーの構築</h3><h3 id="11-2-Dovecotの利用"><a href="#11-2-Dovecotの利用" class="headerlink" title="11.2　Dovecotの利用"></a>11.2　Dovecotの利用</h3><h2 id="第12章-ファイル共有サービス"><a href="#第12章-ファイル共有サービス" class="headerlink" title="第12章　ファイル共有サービス"></a>第12章　ファイル共有サービス</h2><h3 id="12-1-Microsoftネットワーク"><a href="#12-1-Microsoftネットワーク" class="headerlink" title="12.1　Microsoftネットワーク"></a>12.1　Microsoftネットワーク</h3><h3 id="12-2-Sambaサーバーの構築"><a href="#12-2-Sambaサーバーの構築" class="headerlink" title="12.2　Sambaサーバーの構築"></a>12.2　Sambaサーバーの構築</h3><h3 id="12-3-NFSサーバーの構築"><a href="#12-3-NFSサーバーの構築" class="headerlink" title="12.3　NFSサーバーの構築"></a>12.3　NFSサーバーの構築</h3><h2 id="第13章-システムのセキュリティ"><a href="#第13章-システムのセキュリティ" class="headerlink" title="第13章　システムのセキュリティ"></a>第13章　システムのセキュリティ</h2><h3 id="13-1-パケットフィルタリング"><a href="#13-1-パケットフィルタリング" class="headerlink" title="13.1　パケットフィルタリング"></a>13.1　パケットフィルタリング</h3><h3 id="13-2-OpenSSH"><a href="#13-2-OpenSSH" class="headerlink" title="13.2　OpenSSH"></a>13.2　OpenSSH</h3><h3 id="13-3-OpenVPN"><a href="#13-3-OpenVPN" class="headerlink" title="13.3　OpenVPN"></a>13.3　OpenVPN</h3><h3 id="13-4-セキュリティ業務"><a href="#13-4-セキュリティ業務" class="headerlink" title="13.4　セキュリティ業務"></a>13.4　セキュリティ業務</h3><h2 id="第14章-システムアーキテクチャ"><a href="#第14章-システムアーキテクチャ" class="headerlink" title="第14章　システムアーキテクチャ"></a>第14章　システムアーキテクチャ</h2><h3 id="14-1-高可用システムの実現方法"><a href="#14-1-高可用システムの実現方法" class="headerlink" title="14.1　高可用システムの実現方法"></a>14.1　高可用システムの実現方法</h3><h3 id="14-2-キャパシティプランニングとスケーラビリティの確保"><a href="#14-2-キャパシティプランニングとスケーラビリティの確保" class="headerlink" title="14.2　キャパシティプランニングとスケーラビリティの確保"></a>14.2　キャパシティプランニングとスケーラビリティの確保</h3><h3 id="14-3-クラウドサービス上のシステム構成"><a href="#14-3-クラウドサービス上のシステム構成" class="headerlink" title="14.3　クラウドサービス上のシステム構成"></a>14.3　クラウドサービス上のシステム構成</h3><h3 id="14-4-典型的なシステムアーキテクチャ"><a href="#14-4-典型的なシステムアーキテクチャ" class="headerlink" title="14.4　典型的なシステムアーキテクチャ"></a>14.4　典型的なシステムアーキテクチャ</h3><h2 id="第15章-202模擬試験"><a href="#第15章-202模擬試験" class="headerlink" title="第15章　202模擬試験"></a>第15章　202模擬試験</h2><h2 id="模擬試験-問題-1"><a href="#模擬試験-問題-1" class="headerlink" title="模擬試験 問題"></a>模擬試験 問題</h2><h2 id="模擬試験-解答・解説-1"><a href="#模擬試験-解答・解説-1" class="headerlink" title="模擬試験 解答・解説"></a>模擬試験 解答・解説</h2><h2 id="付録-Linux実習環境の使い方"><a href="#付録-Linux実習環境の使い方" class="headerlink" title="付録　Linux実習環境の使い方"></a>付録　Linux実習環境の使い方</h2><h2 id="Linux実習環境の利用について"><a href="#Linux実習環境の利用について" class="headerlink" title="Linux実習環境の利用について"></a>Linux実習環境の利用について</h2><h2 id="VirtualBoxのインストール"><a href="#VirtualBoxのインストール" class="headerlink" title="VirtualBoxのインストール"></a>VirtualBoxのインストール</h2><h2 id="仮想マシンの使い方"><a href="#仮想マシンの使い方" class="headerlink" title="仮想マシンの使い方"></a>仮想マシンの使い方</h2>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最終更新：<time datetime="2021-11-23T16:02:00.930Z" itemprop="dateUpdated">2021-11-24 01:02:00</time>
</span><br>


        
        thank you for your reading my article!!
        
    </div>
    
    <footer>
        <a href="http://yoursite.com">
            <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png" alt="t-tsutsui">
            t-tsutsui
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="https://tutttuwi.github.io/output-over-there/tags/%E6%95%99%E7%A7%91%E6%9B%B8/" rel="tag">教科書</a></li></ul>


            


        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="https://tutttuwi.github.io/output-over-there/Excel/%E3%83%87%E3%83%BC%E3%82%BF%E5%88%86%E6%9E%90/%E7%B5%B1%E8%A8%88/2023-02_Excel%E3%81%A7%E5%AD%A6%E3%81%B6_%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%83%87%E3%83%BC%E3%82%BF%E5%88%86%E6%9E%90%E3%81%AE%E5%9F%BA%E7%A4%8E/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Excelで学ぶ ビジネスデータ分析の基礎</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="https://tutttuwi.github.io/output-over-there/Security/2020-08_%E5%AE%89%E5%85%A8%E3%81%AAWeb%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9_%E8%84%86%E5%BC%B1%E6%80%A7%E3%81%8C%E7%94%9F%E3%81%BE%E3%82%8C%E3%82%8B%E5%8E%9F%E7%90%86%E3%81%A8%E5%AF%BE%E7%AD%96%E3%81%AE%E5%AE%9F%E8%B7%B5_%E7%AC%AC2%E7%89%88/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">安全なWebアプリケーションの作り方_脆弱性が生まれる原理と対策の実践_第2版</h4>
      </a>
    </div>
  
</nav>



    

















</article>



</div>

        <footer class="footer">
    <div class="top">
<!--        

        <p>
            
                <span><a href="https://tutttuwi.github.io/output-over-there/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>このブログの内容物は<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja">クリエイティブ・コモンズ 表示 - 非営利 - 継承 4.0 国際ライセンスの下に提供されています</a></span>
        </p> -->
    </div>
    <div class="bottom">
        <p><span>t-tsutsui &copy; 2015 - 2023</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: 'https://tutttuwi.github.io/output-over-there/', SHARE: false, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
