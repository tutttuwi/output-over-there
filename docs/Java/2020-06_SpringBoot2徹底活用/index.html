<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>SpringBoot2徹底活用 | OUTPUT*OVER-THERE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#264A2E">
    
    
    <meta name="keywords" content="教科書">
    <meta name="description" content="現場至上主義SpringBoot2徹底活用理解したこと Gradleを使ったビルドができる  書籍情報 著者  廣末 丈士／宮林 岳洋 著、高安 厚思 監修   定価  3,456円（本体価格　3,200円）   発売日  2018年11月30日   ISBN  978-4-8026-1185-5   目次  第1章 Spring Bootの構成 第2章 Webアプリケーションにおける共通処理 第">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot2徹底活用">
<meta property="og:url" content="http://yoursite.com/JAVA/2020-06_SpringBoot2%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8/index.html">
<meta property="og:site_name" content="OUTPUT*OVER-THERE">
<meta property="og:description" content="現場至上主義SpringBoot2徹底活用理解したこと Gradleを使ったビルドができる  書籍情報 著者  廣末 丈士／宮林 岳洋 著、高安 厚思 監修   定価  3,456円（本体価格　3,200円）   発売日  2018年11月30日   ISBN  978-4-8026-1185-5   目次  第1章 Spring Bootの構成 第2章 Webアプリケーションにおける共通処理 第">
<meta property="og:locale" content="ja_JP">
<meta property="article:published_time" content="2020-06-06T15:00:00.000Z">
<meta property="article:modified_time" content="2020-07-14T01:58:04.556Z">
<meta property="article:author" content="t-tsutsui">
<meta property="article:tag" content="教科書">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="OUTPUT*OVER-THERE" href="https://tutttuwi.github.io/output-over-there/atom.xml">
    
    <link rel="shortcut icon" href="https://tutttuwi.github.io/output-over-there/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(https://tutttuwi.github.io/output-over-there/img/brand.png)">
      <div class="brand">
        <a href="https://tutttuwi.github.io/output-over-there/" class="avatar waves-effect waves-circle waves-light">
          <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">t-tsutsui</h5>
          <a href="mailto:t.tsutsui9117@gmail.com" title="t.tsutsui9117@gmail.com" class="mail">t.tsutsui9117@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/about"  >
                <i class="icon icon-lg icon-link"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">SpringBoot2徹底活用</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="検索">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">SpringBoot2徹底活用</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-06-06T15:00:00.000Z" itemprop="datePublished" class="page-time">
  2020-06-07
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/JAVA/">JAVA</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#現場至上主義SpringBoot2徹底活用"><span class="post-toc-number">1.</span> <span class="post-toc-text">現場至上主義SpringBoot2徹底活用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#理解したこと"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">理解したこと</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#書籍情報"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">書籍情報</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第1章-Spring-Bootの構成"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">第1章 Spring Bootの構成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-SpringBootの基礎"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">1.1 SpringBootの基礎</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#スターター"><span class="post-toc-number">1.3.1.1.</span> <span class="post-toc-text">スターター</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ビルドツール"><span class="post-toc-number">1.3.1.2.</span> <span class="post-toc-text">ビルドツール</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#依存関係の管理"><span class="post-toc-number">1.3.1.3.</span> <span class="post-toc-text">依存関係の管理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#コンフィグレーションクラス"><span class="post-toc-number">1.3.1.4.</span> <span class="post-toc-text">コンフィグレーションクラス</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#オートコンフィグレーション"><span class="post-toc-number">1.3.1.5.</span> <span class="post-toc-text">オートコンフィグレーション</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#メインアプリケーションクラス"><span class="post-toc-number">1.3.1.6.</span> <span class="post-toc-text">メインアプリケーションクラス</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#設定ファイル"><span class="post-toc-number">1.3.1.7.</span> <span class="post-toc-text">設定ファイル</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Colum-外部設定ファイルの種類"><span class="post-toc-number">1.3.1.8.</span> <span class="post-toc-text">Colum 外部設定ファイルの種類</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#アプリケーションの起動"><span class="post-toc-number">1.3.1.9.</span> <span class="post-toc-text">アプリケーションの起動</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-Spring-BootによるWebアプリケーション開発"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">1.2 Spring BootによるWebアプリケーション開発</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Restart-vs-Reload"><span class="post-toc-number">1.3.2.1.</span> <span class="post-toc-text">Restart vs Reload</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-サンプルプロジェクトの構成"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">1.3 サンプルプロジェクトの構成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#マルチプロジェクト"><span class="post-toc-number">1.3.3.1.</span> <span class="post-toc-text">マルチプロジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#アプリケーション・アーキテクチャ"><span class="post-toc-number">1.3.3.2.</span> <span class="post-toc-text">アプリケーション・アーキテクチャ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#サンプルプロジェクトのビルドスクリプト"><span class="post-toc-number">1.3.3.3.</span> <span class="post-toc-text">サンプルプロジェクトのビルドスクリプト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Lombokを利用する"><span class="post-toc-number">1.3.3.4.</span> <span class="post-toc-text">Lombokを利用する</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第2章-Webアプリケーションにおける共通処理"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">第2章 Webアプリケーションにおける共通処理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-バリデーション"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">2.1 バリデーション</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#メッセージの設定"><span class="post-toc-number">1.4.1.1.</span> <span class="post-toc-text">メッセージの設定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Colum-メッセージを定義するファイルを分割する"><span class="post-toc-number">1.4.1.2.</span> <span class="post-toc-text">Colum メッセージを定義するファイルを分割する</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#バリデーションの種類"><span class="post-toc-number">1.4.1.3.</span> <span class="post-toc-text">バリデーションの種類</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#単項目チェック"><span class="post-toc-number">1.4.1.4.</span> <span class="post-toc-text">単項目チェック</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Column-PRGパターンについて"><span class="post-toc-number">1.4.1.5.</span> <span class="post-toc-text">Column PRGパターンについて</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#相関項目チェック"><span class="post-toc-number">1.4.1.6.</span> <span class="post-toc-text">相関項目チェック</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-オブジェクトマッピング"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">2.2 オブジェクトマッピング</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-ログ出力"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">2.3 ログ出力</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-ファイルダウンロード"><span class="post-toc-number">1.4.4.</span> <span class="post-toc-text">2.4 ファイルダウンロード</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#PDFファイルのダウンロード"><span class="post-toc-number">1.4.4.1.</span> <span class="post-toc-text">PDFファイルのダウンロード</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#CSVファイルのダウンロード"><span class="post-toc-number">1.4.4.2.</span> <span class="post-toc-text">CSVファイルのダウンロード</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Excelファイルのダウンロード"><span class="post-toc-number">1.4.4.3.</span> <span class="post-toc-text">Excelファイルのダウンロード</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-5-ファイルアップロード"><span class="post-toc-number">1.4.5.</span> <span class="post-toc-text">2.5 ファイルアップロード</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ファイルサイズの設定"><span class="post-toc-number">1.4.5.1.</span> <span class="post-toc-text">ファイルサイズの設定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ファイルの取扱"><span class="post-toc-number">1.4.5.2.</span> <span class="post-toc-text">ファイルの取扱</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ファイルのデータベースへの格納"><span class="post-toc-number">1.4.5.3.</span> <span class="post-toc-text">ファイルのデータベースへの格納</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-6-メール送信"><span class="post-toc-number">1.4.6.</span> <span class="post-toc-text">2.6 メール送信</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第3章-データアクセス"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">第3章 データアクセス</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-スターター"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">3.1 スターター</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-2-Domaの使い方"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">3.2 Domaの使い方</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-エンティティ共通処理"><span class="post-toc-number">1.5.3.</span> <span class="post-toc-text">3.3 エンティティ共通処理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#エンティティ基底クラス"><span class="post-toc-number">1.5.3.1.</span> <span class="post-toc-text">エンティティ基底クラス</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-4-ページング処理"><span class="post-toc-number">1.5.4.</span> <span class="post-toc-text">3.4 ページング処理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-5-排他制御"><span class="post-toc-number">1.5.5.</span> <span class="post-toc-text">3.5 排他制御</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#楽観的排他制御"><span class="post-toc-number">1.5.5.1.</span> <span class="post-toc-text">楽観的排他制御</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#悲観的排他制御"><span class="post-toc-number">1.5.5.2.</span> <span class="post-toc-text">悲観的排他制御</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-6-論理削除"><span class="post-toc-number">1.5.6.</span> <span class="post-toc-text">3.6 論理削除</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#更新機能による実現"><span class="post-toc-number">1.5.6.1.</span> <span class="post-toc-text">更新機能による実現</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#エンティティリスナーによる共通処理"><span class="post-toc-number">1.5.6.2.</span> <span class="post-toc-text">エンティティリスナーによる共通処理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#論理削除レコードの除外"><span class="post-toc-number">1.5.6.3.</span> <span class="post-toc-text">論理削除レコードの除外</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第4章-セキュリティ"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">第4章 セキュリティ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-スターター"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">4.1 スターター</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-認証"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">4.2 認証</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#認証情報の取得"><span class="post-toc-number">1.6.2.1.</span> <span class="post-toc-text">認証情報の取得</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ログイン機能"><span class="post-toc-number">1.6.2.2.</span> <span class="post-toc-text">ログイン機能</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-RememberMe"><span class="post-toc-number">1.6.3.</span> <span class="post-toc-text">4.3 RememberMe</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ログイン記録の永続化"><span class="post-toc-number">1.6.3.1.</span> <span class="post-toc-text">ログイン記録の永続化</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-4-認可"><span class="post-toc-number">1.6.4.</span> <span class="post-toc-text">4.4 認可</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#権限管理データをロード"><span class="post-toc-number">1.6.4.1.</span> <span class="post-toc-text">権限管理データをロード</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#権限とメソッドの紐付け"><span class="post-toc-number">1.6.4.2.</span> <span class="post-toc-text">権限とメソッドの紐付け</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#認可制御のインターセプター"><span class="post-toc-number">1.6.4.3.</span> <span class="post-toc-text">認可制御のインターセプター</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-CSRF対策"><span class="post-toc-number">1.6.5.</span> <span class="post-toc-text">4.5 CSRF対策</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-6-二重送信防止"><span class="post-toc-number">1.6.6.</span> <span class="post-toc-text">4.6 二重送信防止</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第5章-画面開発"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">第5章 画面開発</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-1-Thymeleaf"><span class="post-toc-number">1.7.1.</span> <span class="post-toc-text">5.1 Thymeleaf</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-Formバインディング"><span class="post-toc-number">1.7.2.</span> <span class="post-toc-text">5.2 Formバインディング</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-事前評価"><span class="post-toc-number">1.7.3.</span> <span class="post-toc-text">5.3 事前評価</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#事前評価の実装例"><span class="post-toc-number">1.7.3.1.</span> <span class="post-toc-text">事前評価の実装例</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-テンプレート共有"><span class="post-toc-number">1.7.4.</span> <span class="post-toc-text">5.4 テンプレート共有</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#テンプレートの部品化"><span class="post-toc-number">1.7.4.1.</span> <span class="post-toc-text">テンプレートの部品化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#テンプレートの共通化"><span class="post-toc-number">1.7.4.2.</span> <span class="post-toc-text">テンプレートの共通化</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-5-Thymeleafのその他の機能"><span class="post-toc-number">1.7.5.</span> <span class="post-toc-text">5.5 Thymeleafのその他の機能</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#エスケープなしのテキスト"><span class="post-toc-number">1.7.5.1.</span> <span class="post-toc-text">エスケープなしのテキスト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#日付操作拡張"><span class="post-toc-number">1.7.5.2.</span> <span class="post-toc-text">日付操作拡張</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-6-静的コンテンツ管理"><span class="post-toc-number">1.7.6.</span> <span class="post-toc-text">5.6 静的コンテンツ管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#静的コンテンツの配置場所"><span class="post-toc-number">1.7.6.1.</span> <span class="post-toc-text">静的コンテンツの配置場所</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#キャシュ制御"><span class="post-toc-number">1.7.6.2.</span> <span class="post-toc-text">キャシュ制御</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#アクセス制御"><span class="post-toc-number">1.7.6.3.</span> <span class="post-toc-text">アクセス制御</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#クライアントライブラリの構成管理"><span class="post-toc-number">1.7.6.4.</span> <span class="post-toc-text">クライアントライブラリの構成管理</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第6章-API開発"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">第6章 API開発</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-1-Spring-でのAPI開発"><span class="post-toc-number">1.8.1.</span> <span class="post-toc-text">6.1 Spring でのAPI開発</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#API仕様"><span class="post-toc-number">1.8.1.1.</span> <span class="post-toc-text">API仕様</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#リソース実装"><span class="post-toc-number">1.8.1.2.</span> <span class="post-toc-text">リソース実装</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#コントローラ実装"><span class="post-toc-number">1.8.1.3.</span> <span class="post-toc-text">コントローラ実装</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#エラーハンドリング実装"><span class="post-toc-number">1.8.1.4.</span> <span class="post-toc-text">エラーハンドリング実装</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-SpringでのAPI連携"><span class="post-toc-number">1.8.2.</span> <span class="post-toc-text">6.2 SpringでのAPI連携</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#RestTemplate"><span class="post-toc-number">1.8.2.1.</span> <span class="post-toc-text">RestTemplate</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ユーザー一覧取得APIへの連携"><span class="post-toc-number">1.8.2.2.</span> <span class="post-toc-text">ユーザー一覧取得APIへの連携</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ユーザー作成APIへの連携"><span class="post-toc-number">1.8.2.3.</span> <span class="post-toc-text">ユーザー作成APIへの連携</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-3-API開発効率の最大化"><span class="post-toc-number">1.8.3.</span> <span class="post-toc-text">6.3 API開発効率の最大化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Swaggerとは"><span class="post-toc-number">1.8.3.1.</span> <span class="post-toc-text">Swaggerとは</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Springでの利用-SpringFox"><span class="post-toc-number">1.8.3.2.</span> <span class="post-toc-text">Springでの利用(SpringFox)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Spring-REST-Docs"><span class="post-toc-number">1.8.3.3.</span> <span class="post-toc-text">Spring REST Docs</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第7章-チーム開発"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">第7章 チーム開発</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-1-インフラの構成管理"><span class="post-toc-number">1.9.1.</span> <span class="post-toc-text">7.1 インフラの構成管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Docker"><span class="post-toc-number">1.9.1.1.</span> <span class="post-toc-text">Docker</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-2-データベースの構成管理"><span class="post-toc-number">1.9.2.</span> <span class="post-toc-text">7.2 データベースの構成管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Flywayの利用"><span class="post-toc-number">1.9.2.1.</span> <span class="post-toc-text">Flywayの利用</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-3-メンテナブルなテストコード"><span class="post-toc-number">1.9.3.</span> <span class="post-toc-text">7.3 メンテナブルなテストコード</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Spock"><span class="post-toc-number">1.9.3.1.</span> <span class="post-toc-text">Spock</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-4-ドキュメント生成ツールの活用"><span class="post-toc-number">1.9.4.</span> <span class="post-toc-text">7.4 ドキュメント生成ツールの活用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Sphinx"><span class="post-toc-number">1.9.4.1.</span> <span class="post-toc-text">Sphinx</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-5-ソースジェネレータ"><span class="post-toc-number">1.9.5.</span> <span class="post-toc-text">7.5 ソースジェネレータ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ソースジェネレータプラグインの導入"><span class="post-toc-number">1.9.5.1.</span> <span class="post-toc-text">ソースジェネレータプラグインの導入</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第8章-運用"><span class="post-toc-number">1.10.</span> <span class="post-toc-text">第8章 運用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-1-環境ごとの設定管理"><span class="post-toc-number">1.10.1.</span> <span class="post-toc-text">8.1 環境ごとの設定管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Spring-Profiles"><span class="post-toc-number">1.10.1.1.</span> <span class="post-toc-text">Spring Profiles</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#環境ごとの設定管理"><span class="post-toc-number">1.10.1.2.</span> <span class="post-toc-text">環境ごとの設定管理</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-2-アプリケーションサーバー設定"><span class="post-toc-number">1.10.2.</span> <span class="post-toc-text">8.2 アプリケーションサーバー設定</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#実行可能Jar"><span class="post-toc-number">1.10.2.1.</span> <span class="post-toc-text">実行可能Jar</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#アプリケーションサーバーの設定及びリリース"><span class="post-toc-number">1.10.2.2.</span> <span class="post-toc-text">アプリケーションサーバーの設定及びリリース</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-3-アプリケーションの状態確認"><span class="post-toc-number">1.10.3.</span> <span class="post-toc-text">8.3 アプリケーションの状態確認</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#SpringBootActuator"><span class="post-toc-number">1.10.3.1.</span> <span class="post-toc-text">SpringBootActuator</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#主要なエンドポイント"><span class="post-toc-number">1.10.3.2.</span> <span class="post-toc-text">主要なエンドポイント</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#エルスチェックのカスタマイズ"><span class="post-toc-number">1.10.3.3.</span> <span class="post-toc-text">エルスチェックのカスタマイズ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#SpringBootActuatorのセキュリティ制御"><span class="post-toc-number">1.10.3.4.</span> <span class="post-toc-text">SpringBootActuatorのセキュリティ制御</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-4-アプリケーション監視"><span class="post-toc-number">1.10.4.</span> <span class="post-toc-text">8.4 アプリケーション監視</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Prometheus"><span class="post-toc-number">1.10.4.1.</span> <span class="post-toc-text">Prometheus</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Prometheusの導入"><span class="post-toc-number">1.10.4.2.</span> <span class="post-toc-text">Prometheusの導入</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Prometheusのサービスディスカバリー"><span class="post-toc-number">1.10.4.3.</span> <span class="post-toc-text">Prometheusのサービスディスカバリー</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Springアプリケーションとの連携"><span class="post-toc-number">1.10.4.4.</span> <span class="post-toc-text">Springアプリケーションとの連携</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#メトリクスの可視化"><span class="post-toc-number">1.10.4.5.</span> <span class="post-toc-text">メトリクスの可視化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#アラート通知"><span class="post-toc-number">1.10.4.6.</span> <span class="post-toc-text">アラート通知</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-5-リクエスト追跡"><span class="post-toc-number">1.10.5.</span> <span class="post-toc-text">8.5 リクエスト追跡</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#nginxトレース"><span class="post-toc-number">1.10.5.1.</span> <span class="post-toc-text">nginxトレース</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#nginxとのトレースIDの統合"><span class="post-toc-number">1.10.5.2.</span> <span class="post-toc-text">nginxとのトレースIDの統合</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-6-レイテンシ分析"><span class="post-toc-number">1.10.6.</span> <span class="post-toc-text">8.6 レイテンシ分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Spring-Cloud-Sleuth"><span class="post-toc-number">1.10.6.1.</span> <span class="post-toc-text">Spring Cloud Sleuth</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-7-無停止デプロイ"><span class="post-toc-number">1.10.7.</span> <span class="post-toc-text">8.7 無停止デプロイ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ローリングデプロイ"><span class="post-toc-number">1.10.7.1.</span> <span class="post-toc-text">ローリングデプロイ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ローリングデプロイ作業フロー"><span class="post-toc-number">1.10.7.2.</span> <span class="post-toc-text">ローリングデプロイ作業フロー</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ローリングデプロイ作業手順"><span class="post-toc-number">1.10.7.3.</span> <span class="post-toc-text">ローリングデプロイ作業手順</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-8-コンテナオーケストレーションツールへのデプロイ"><span class="post-toc-number">1.10.8.</span> <span class="post-toc-text">8.8 コンテナオーケストレーションツールへのデプロイ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#コンテナイメージの作成"><span class="post-toc-number">1.10.8.1.</span> <span class="post-toc-text">コンテナイメージの作成</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第9章-（Spring-Bootアプリケーションが想定している）システム構成"><span class="post-toc-number">1.11.</span> <span class="post-toc-text">第9章 （Spring Bootアプリケーションが想定している）システム構成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-システム・アーキテクチャ考察"><span class="post-toc-number">1.11.1.</span> <span class="post-toc-text">9.1 システム・アーキテクチャ考察</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#システムが必要とする要件"><span class="post-toc-number">1.11.1.1.</span> <span class="post-toc-text">システムが必要とする要件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#システム要件の検討"><span class="post-toc-number">1.11.1.2.</span> <span class="post-toc-text">システム要件の検討</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-2-システム・アーキテクチャ案"><span class="post-toc-number">1.11.2.</span> <span class="post-toc-text">9.2 システム・アーキテクチャ案</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#構成要素一覧"><span class="post-toc-number">1.11.2.1.</span> <span class="post-toc-text">構成要素一覧</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#可用性"><span class="post-toc-number">1.11.2.2.</span> <span class="post-toc-text">可用性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#拡張性"><span class="post-toc-number">1.11.2.3.</span> <span class="post-toc-text">拡張性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#コスト"><span class="post-toc-number">1.11.2.4.</span> <span class="post-toc-text">コスト</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-3-構築チュートリアル"><span class="post-toc-number">1.11.3.</span> <span class="post-toc-text">9.3 構築チュートリアル</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第10章-Spring5-x2F-Spring-Boot2の新機能"><span class="post-toc-number">1.12.</span> <span class="post-toc-text">第10章 Spring5&#x2F;Spring Boot2の新機能</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-1-WebFlux"><span class="post-toc-number">1.12.1.</span> <span class="post-toc-text">10.1 WebFlux</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第11章-ローカル開発環境の構築について"><span class="post-toc-number">1.13.</span> <span class="post-toc-text">第11章 ローカル開発環境の構築について</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第12章-サンプルアプリについて"><span class="post-toc-number">1.14.</span> <span class="post-toc-text">第12章 サンプルアプリについて</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-2020-06_SpringBoot2徹底活用"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">SpringBoot2徹底活用</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-06-07 00:00:00" datetime="2020-06-06T15:00:00.000Z"  itemprop="datePublished">2020-06-07</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/JAVA/">JAVA</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="現場至上主義SpringBoot2徹底活用"><a href="#現場至上主義SpringBoot2徹底活用" class="headerlink" title="現場至上主義SpringBoot2徹底活用"></a>現場至上主義SpringBoot2徹底活用</h1><h2 id="理解したこと"><a href="#理解したこと" class="headerlink" title="理解したこと"></a>理解したこと</h2><ul>
<li>Gradleを使ったビルドができる</li>
</ul>
<h2 id="書籍情報"><a href="#書籍情報" class="headerlink" title="書籍情報"></a>書籍情報</h2><ul>
<li><p>著者</p>
<ul>
<li>廣末 丈士／宮林 岳洋 著、高安 厚思 監修</li>
</ul>
</li>
<li><p>定価</p>
<ul>
<li>3,456円（本体価格　3,200円）</li>
</ul>
</li>
<li><p>発売日</p>
<ul>
<li>2018年11月30日</li>
</ul>
</li>
<li><p>ISBN</p>
<ul>
<li>978-4-8026-1185-5</li>
</ul>
</li>
<li><p>目次</p>
<ul>
<li>第1章 Spring Bootの構成</li>
<li>第2章 Webアプリケーションにおける共通処理</li>
<li>第3章 データアクセス</li>
<li>第4章 セキュリティ</li>
<li>第5章 画面開発</li>
<li>第6章 API開発</li>
<li>第7章 チーム開発</li>
<li>第8章 運用</li>
<li>第9章 （Spring Bootアプリケーションが想定している）システム構成</li>
<li>第10章 Spring5&#x2F;Spring Boot2の新機能</li>
<li>第11章 ローカル開発環境の構築について</li>
<li>第12章 サンプルアプリについて</li>
</ul>
</li>
<li><p>サンプルプログラム</p>
<ul>
<li><a href="https://github.com/miyabayt/spring-boot-doma2-sample">https://github.com/miyabayt/spring-boot-doma2-sample</a></li>
</ul>
</li>
</ul>
<h2 id="第1章-Spring-Bootの構成"><a href="#第1章-Spring-Bootの構成" class="headerlink" title="第1章 Spring Bootの構成"></a>第1章 Spring Bootの構成</h2><h3 id="1-1-SpringBootの基礎"><a href="#1-1-SpringBootの基礎" class="headerlink" title="1.1 SpringBootの基礎"></a>1.1 SpringBootの基礎</h3><ul>
<li><p>SpringBootとは「Spring Frameworkベースのアプリケーションを手軽に作成することができるフレームワーク」</p>
<ul>
<li>それ自体で完結するフレームワークではない</li>
<li>Spring MVCやSpring Batchなどの様々なフレームワークを組み合わせて素早く簡潔にアプリケーションを開発する機能を提供</li>
<li>SpringBootの中にTomcatが同梱されており、デフォルトでjarファイルをして、<code>java -jar</code>コマンドで引数に指定すると組み込まれたtomcatが立ち上がり開発したアプリケーションを実行できる</li>
</ul>
</li>
<li><p>代表的な特徴</p>
<ul>
<li>スターター<ul>
<li>依存関係をシンプルに定義するためのモジュール</li>
</ul>
</li>
<li>ビルドツール<ul>
<li>バージョン解決など、開発を効率化するためのプラグイン</li>
</ul>
</li>
<li>コンフィグレーションクラス<ul>
<li>XMLではなく、アノテーションとJavaで設定が書ける</li>
</ul>
</li>
<li>オートコンフィグレーション<ul>
<li>デフォルトのコンフィグレーションが適用されて、必要なところだけを設定すればよくなる</li>
</ul>
</li>
<li>メインアプリケーションクラス<ul>
<li>Javaコマンドで組み込みのTomcatを起動できる</li>
</ul>
</li>
<li>設定ファイル<ul>
<li>プロパティを外部ファイルに定義でき、動作使用を簡単に変更できる</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="スターター"><a href="#スターター" class="headerlink" title="スターター"></a>スターター</h4><ul>
<li><p>一連の依存関係をセットとしてそろえるためのモジュール</p>
</li>
<li><p>必要なライブラリを準備したり、それぞれのバージョンを選定したりする煩わしい作業から解放される</p>
</li>
<li><p>たとえば、<code>spring-boot-starter-web</code>を１つ依存関係に追加するだけで、SpringMVCやTomcatなど、Webアプリケーションに必要なライブラリがセットになって追加される</p>
</li>
<li><p>以下はスターターの例</p>
<ul>
<li><code>spring-boot-starter-web</code> : SpringMVC Tomcatが依存関係に追加される</li>
<li><code>spring-boot-starter-jdbc</code> : SpringJDBC Tomcat JDBC Pool が依存関係に追加される</li>
</ul>
</li>
<li><p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-build-systems.html#using-boot-starter">スターターリファレンスページ</a></p>
</li>
<li><p>自分でスターターを作成する際は、<code>*-spring-boot-starter</code>という命名規則が定められていることに注意</p>
</li>
</ul>
<h4 id="ビルドツール"><a href="#ビルドツール" class="headerlink" title="ビルドツール"></a>ビルドツール</h4><ul>
<li><p>Spring Bootの推奨ビルドツール</p>
<ul>
<li>ApacheMaven</li>
<li>Gradle</li>
</ul>
</li>
<li><p>本書では<code>Gradle</code></p>
<ul>
<li>メリット<ul>
<li>スクリプトを記述するタイプのビルドツールのため、Antのようにタスクを自由に記述することができる</li>
<li>マルチプロジェクト構成の場合は、サブプロジェクトに対して一括設定して、必要に応じて個別に設定することができるため、記述量がMavenよりも少なくなる</li>
<li>Mavenの場合は、特殊な処理が必要になった時に独自プラグインを実装する必要があるのに対し、Gradleはスクリプトを書くだけで対応できる</li>
</ul>
</li>
</ul>
</li>
<li><p>Maven</p>
<ul>
<li>Mavenを利用する場合、<code>spring-boot-starter-parent</code>プロジェクトを親プロジェクトとして継承することで、プラグインのデフォルト設定、依存ライブラリのバージョンの定義、Javaコンパイラー準拠レベル、文字コードを引き継ぐことができる</li>
</ul>
</li>
<li><p>親プロジェクト設定</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Gradle</p>
<ul>
<li>Spring Boot2.0.xはGradle4.0以降に対応している</li>
<li>GradleはMavenと違って、設定を引き継ぐための親プロジェクトが存在しないため、単に、スターターを依存関係として追加します</li>
<li>spring-boot-gradle-pluginというGradleプラグインが用意されており、実行可能なJarファイルを作成するためのタスクを利用できる</li>
</ul>
</li>
<li><p>ビルドスクリプトの処理内容</p>
<ol>
<li>spring-boot-gradle-plugin をビルドスクリプトの依存関係に追加する</li>
<li>spring-boot-gradle-plugin と dependency-management プラグインを利用することを宣言</li>
<li>Javaコンパイラー準拠レベルをデフォルトの1.8から11に変更</li>
<li>文字コードはUTF-8であることを指定する</li>
<li>スターターをアプリケーションの依存関係に追加する</li>
<li>テスト用のスターターをアプリケーションの依存関係に追加する</li>
</ol>
</li>
</ul>
<h4 id="依存関係の管理"><a href="#依存関係の管理" class="headerlink" title="依存関係の管理"></a>依存関係の管理</h4><ul>
<li>すべてのライブラリのバージョンを１つずつ指定するというような作業をする必要はない</li>
<li>依存関係に定義されているライブラリも一緒にバージョンアップする</li>
<li>Spring Bootのバージョンを上げる場合は、Project Wikiに載っているリリースノートを確認すること</li>
</ul>
<h4 id="コンフィグレーションクラス"><a href="#コンフィグレーションクラス" class="headerlink" title="コンフィグレーションクラス"></a>コンフィグレーションクラス</h4><ul>
<li><p>Spring BootはJavaベースのコンフィグレーションが好まれる</p>
</li>
<li><p>従来通りXMLファイルに記述できるが、推奨されるのは<code>@Configuration</code>アノテーションを付与したクラスによるコンフィグレーション</p>
</li>
<li><p>MVCの設定のこと？再度確認する</p>
</li>
</ul>
<h4 id="オートコンフィグレーション"><a href="#オートコンフィグレーション" class="headerlink" title="オートコンフィグレーション"></a>オートコンフィグレーション</h4><ul>
<li>Spring Bootは設定を変更しなければ、あらかじめ敷かれたレールに沿って動作するようになっている</li>
</ul>
<h4 id="メインアプリケーションクラス"><a href="#メインアプリケーションクラス" class="headerlink" title="メインアプリケーションクラス"></a>メインアプリケーションクラス</h4><ul>
<li><p>SpringBootのアプリケーションを起動するメソッドを呼び出すクラス</p>
</li>
<li><p>Javaアプリケーションのエントリポイントとなるmainメソッドの中で、SpringApplicationクラスのrunメソッドを呼び出すと、組み込みのTomcatが立ち上がり、SpringIoCコンテナの初期化が行われる</p>
</li>
<li><p>※再読</p>
</li>
</ul>
<h4 id="設定ファイル"><a href="#設定ファイル" class="headerlink" title="設定ファイル"></a>設定ファイル</h4><ul>
<li><p>アプリケーションを起動すると、次の場所にある<code>application.properties</code>設定ファイルを読み込む</p>
<ol>
<li>カレントディレクトリの<code>/config</code>サブディレクトリ</li>
<li>カレントディレクトリ</li>
<li>クラスパスの<code>/config</code>パッケージ</li>
<li>クラスパスのルート</li>
</ol>
</li>
<li><p>上から順番に優先度が高くなる</p>
</li>
<li><p>プロファイルという単位で別々の設定を持たせることも可能</p>
</li>
<li><p>設定ファイルは<code>yml</code>形式でもOK</p>
</li>
<li><p><code>application.yml</code>を配置することで使用可能</p>
</li>
<li><p>設定ファイルの値を参照するのも簡単</p>
</li>
</ul>
<h4 id="Colum-外部設定ファイルの種類"><a href="#Colum-外部設定ファイルの種類" class="headerlink" title="Colum 外部設定ファイルの種類"></a>Colum 外部設定ファイルの種類</h4><ul>
<li><p>環境変数</p>
</li>
<li><p>システムプロパティ</p>
</li>
<li><p>コマンドライン引数</p>
</li>
<li><p>いろんな渡し方がある</p>
</li>
<li><p>けど、アプリケーションプロパティしか使わないのではと思う</p>
</li>
</ul>
<h4 id="アプリケーションの起動"><a href="#アプリケーションの起動" class="headerlink" title="アプリケーションの起動"></a>アプリケーションの起動</h4><ul>
<li>コマンドラインで起動 <code>gradle bootRun</code></li>
<li>InteliJ IDEAを使って起動する</li>
</ul>
<h3 id="1-2-Spring-BootによるWebアプリケーション開発"><a href="#1-2-Spring-BootによるWebアプリケーション開発" class="headerlink" title="1.2 Spring BootによるWebアプリケーション開発"></a>1.2 Spring BootによるWebアプリケーション開発</h3><ul>
<li><p>Intelij IDEA 起動</p>
<ul>
<li><code>Cntl + Shift + A</code> -&gt; <code>compiler.automake.allow.when.app.running</code> を <code>ON</code> にすることでファイル変更時に自動更新する</li>
</ul>
</li>
<li><p>リソースの除外</p>
<ul>
<li>静的リソースの変更は単に再読み込みするだけで再起動は不要</li>
<li>デフォルト設定では、<ul>
<li><code>/META-INF/maven</code></li>
<li><code>/META-INF/resources</code></li>
<li><code>/resources</code></li>
<li><code>/static</code></li>
<li><code>/public</code></li>
<li><code>templates</code></li>
<li>に含まれるファイルへの変更は再起動がかからないようになっている</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 再起動のトリガーから除外するファイルを設定する</span></span><br><span class="line">spring.devtools.restart.<span class="keyword">exclude</span>=<span class="keyword">static</span><span class="comment">/**,public/**</span></span><br></pre></td></tr></table></figure>

<ul>
<li>LiveReload</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// LiveReloadを無効化する</span></span><br><span class="line">spring.devtools.livereload.enabled=<span class="keyword">false</span></span><br></pre></td></tr></table></figure>

<h4 id="Restart-vs-Reload"><a href="#Restart-vs-Reload" class="headerlink" title="Restart vs Reload"></a>Restart vs Reload</h4><ul>
<li><p>JVM hot-swapping をよりよいものにしたい場合</p>
<ul>
<li><code>JRebel</code>(有償)または、<code>Spring Loaded</code>(無償:Grails2の内部で利用されている) の利用を検討する</li>
</ul>
</li>
<li><p>もう一つの方法として、<code>Dynamic Code Evolution VM(DCEVM)</code> HotSwapAgentを使ったJVM hot-swapping がある</p>
<ul>
<li>JDKにパッチをあててクラスの再定義機能を強化してくれる</li>
<li>Spring Loadedでは対応していないクラス追加に対してもhot-swappingが働く</li>
</ul>
</li>
<li><p>DCEVM + HotSwapAgentの導入方法</p>
<ul>
<li><code>jar</code>ファイルをインストール <a href="http://dcevm.github.io/">http://dcevm.github.io/</a></li>
<li><code>java -jar DCEVM-*-installer.jar</code> 実行</li>
</ul>
</li>
<li><p>Intelij IDEA プラグイン設定</p>
<ul>
<li>HotSwapAgent をインストール</li>
<li>Settingより設定する</li>
</ul>
</li>
</ul>
<h3 id="1-3-サンプルプロジェクトの構成"><a href="#1-3-サンプルプロジェクトの構成" class="headerlink" title="1.3 サンプルプロジェクトの構成"></a>1.3 サンプルプロジェクトの構成</h3><h4 id="マルチプロジェクト"><a href="#マルチプロジェクト" class="headerlink" title="マルチプロジェクト"></a>マルチプロジェクト</h4><ul>
<li>本書で用いるサンプルプロジェクトは複数のモジュールで構成されるマルチプロジェクト</li>
<li>メリット<ul>
<li>ビルドスクリプトを共通化することができるので記述量が減る</li>
<li>ローカル・リモートリポジトリにアーティファクトをアップロードしなくてもソースコードの変更が反映される</li>
<li>それぞれのプロジェクトを関連付けてタスクを実行できる</li>
</ul>
</li>
</ul>
<h4 id="アプリケーション・アーキテクチャ"><a href="#アプリケーション・アーキテクチャ" class="headerlink" title="アプリケーション・アーキテクチャ"></a>アプリケーション・アーキテクチャ</h4><ul>
<li>プレゼンテーション層<ul>
<li>プレゼンテーション層は、入力された値を受け取って、値をチェックしたり、値の変換を行ったりする層</li>
<li>WebモジュールのFormクラス、FormValidatorクラスが該当</li>
</ul>
</li>
<li>アプリケーション層<ul>
<li>プレゼンテーション層から受け取った値をドメイン層に渡す層で、WebモジュールのControllerが該当する</li>
<li>ビジネスロジックは含まれないが、画面遷移先を制御したり、セッションを用いて、次画面に値を渡したりといった処理を行う</li>
</ul>
</li>
<li>ドメイン層<ul>
<li>ドメインオブジェクトを持ち、ビジネスロジックを処理するメインの層で、ドメインモジュールのServiceクラスが該当する</li>
<li>ドメインオブジェクトはすべての層から利用されるが、逆にドメイン層はほかの層に依存してはならない点に注意する！</li>
</ul>
</li>
<li>インフラストラクチャ層<ul>
<li>インフラストラクチャ層では、ドメイン層から渡されたデータを永続化する層</li>
<li>ドメインモジュールのRepositoryクラスが該当する</li>
<li>アプリケーション層の影響を受けないように、汎用的な部品としてつくるようにすること！</li>
</ul>
</li>
</ul>
<h4 id="サンプルプロジェクトのビルドスクリプト"><a href="#サンプルプロジェクトのビルドスクリプト" class="headerlink" title="サンプルプロジェクトのビルドスクリプト"></a>サンプルプロジェクトのビルドスクリプト</h4><ol>
<li>Spring Bootのバージョンを拡張プロパティにセット</li>
<li>テストコードはSpockフレームワークを利用するため、Groovyを扱えるようにする</li>
<li>すべてのサブプロジェクトにおいて spring-boot-gradle-plugin を利用できるようにする</li>
<li>すべてのサブプロジェクトにおいて dependency-management プラグインを利用できるようにする</li>
<li>Javaコンパイラー準拠レベルを１１に変更する</li>
<li><code>src/main/resources</code> をクラスパスに追加して、開発中の変更がすぐに反映されるようにする</li>
<li>リソースファイルの出力先をソースファイルの出力先に変更する</li>
<li>コンパイルの前に、リソースファイルの出力を行うようにする</li>
<li>Domaの依存関係にあるバージョン違いの Spring Boot を除外する</li>
<li>Spring Session モジュールを使ってセッション情報をデータベースに格納する</li>
<li>Gradleのプロジェクトプロパティを bootRun の引数に渡せるようにする</li>
</ol>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// メインアプリケーションクラスを持たないモジュールの場合（build.gradle）</span></span><br><span class="line">bootJar &#123;</span><br><span class="line">  enabled = <span class="keyword">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Lombokを利用する"><a href="#Lombokを利用する" class="headerlink" title="Lombokを利用する"></a>Lombokを利用する</h4><ul>
<li>ボイラープレートコードの削減のため</li>
<li>アプリケーションの実行時には不要なので、スコープはcompileOnlyに設定</li>
<li>型<code>val</code>が使用できる<ul>
<li>MEMO: これを使うと長い型を３文字でかけるよっていうことらしい</li>
</ul>
</li>
</ul>
<h2 id="第2章-Webアプリケーションにおける共通処理"><a href="#第2章-Webアプリケーションにおける共通処理" class="headerlink" title="第2章 Webアプリケーションにおける共通処理"></a>第2章 Webアプリケーションにおける共通処理</h2><ul>
<li>サンプルプロジェクトにおける共通処理、その実装方法について説明</li>
</ul>
<table>
<thead>
<tr>
<th>種別</th>
<th>説明</th>
</tr>
</thead>
<tbody><tr>
<td>バリデーション</td>
<td>単項目・相関チェックを効率よく実施する</td>
</tr>
<tr>
<td>オブジェクトマッピング</td>
<td>入力値を他のエンティティに効率よく詰め替える</td>
</tr>
<tr>
<td>ログ出力</td>
<td>共通的に処理の開始・終了をログ出力する</td>
</tr>
<tr>
<td>ファイルダウンロード</td>
<td>CSV、Excel、PDFなどのファイルをダウンロードする</td>
</tr>
<tr>
<td>ファイルアップロード</td>
<td>アップロードされたファイルを、Domaを使ってデータベースに保存する</td>
</tr>
<tr>
<td>メール送信</td>
<td>本文をテンプレート処理してメールを送信できるようにする</td>
</tr>
</tbody></table>
<h3 id="2-1-バリデーション"><a href="#2-1-バリデーション" class="headerlink" title="2.1 バリデーション"></a>2.1 バリデーション</h3><ul>
<li>Spring MVC では単項目チェックを行うためのBean Validatorが用意されている</li>
<li>相関チェックのためのアノテーションはないので、効率よく相関チェックを行うために共通処理を実装する</li>
<li>Spring Bootでは <code>spring-boot-starter-validation</code>スターターを依存関係に追加することで、Bean Validation 2.0 と Spring Validatorが利用できる</li>
<li>バリデーションのポイント<ul>
<li>メッセージの設定</li>
<li>バリデーションの種類</li>
<li>単項目チェック</li>
<li>相関項目チェック</li>
</ul>
</li>
</ul>
<h4 id="メッセージの設定"><a href="#メッセージの設定" class="headerlink" title="メッセージの設定"></a>メッセージの設定</h4><ul>
<li><p>Bean Validator はメッセージを外部ファイルで管理するためのMessageSourceを内包している</p>
</li>
<li><p>デフォルトでは文字コードが<code>UTF-8</code> になっていないので、エラーメッセージを表示する際に文字化けてしまう</p>
</li>
<li><p><code>application.yml</code></p>
</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 共通の設定を定義する</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  messages:</span></span><br><span class="line">    <span class="comment"># メッセージ定義ファイルのパスを含めて設定する</span></span><br><span class="line"><span class="attr">    basename:</span> <span class="string">messages,ValidationMessages</span></span><br><span class="line"><span class="attr">    cache-duration:</span> <span class="bullet">-1</span></span><br><span class="line"><span class="attr">    encoding:</span> <span class="string">UTF-8</span> <span class="comment"># P40. デフォルトのままだと文字化けするため指定</span></span><br></pre></td></tr></table></figure>

<h4 id="Colum-メッセージを定義するファイルを分割する"><a href="#Colum-メッセージを定義するファイルを分割する" class="headerlink" title="Colum メッセージを定義するファイルを分割する"></a>Colum メッセージを定義するファイルを分割する</h4><ul>
<li><code>application.yml</code>のbasenameにカンマ区切りで複数指定可能<ul>
<li><code>ValidationMessage</code>:バリデーションのエラーメッセージを定義する</li>
<li><code>PropertyNames</code>:エラー項目の項目名を入力フォームごとに定義する</li>
<li><code>messages</code>:バリデーションとは関係ないシステムメッセージなどを定義する</li>
</ul>
</li>
</ul>
<h4 id="バリデーションの種類"><a href="#バリデーションの種類" class="headerlink" title="バリデーションの種類"></a>バリデーションの種類</h4><ul>
<li><p>バリデーションの種類</p>
<ul>
<li>クライアントサイド</li>
<li>サーバーサイド</li>
</ul>
</li>
<li><p>本書はサーバーサイドのバリデーションについて説明</p>
</li>
<li><p>単項目チェック：<code>Bean Validation API</code>で提供されるアノテーションを利用できる</p>
</li>
<li><p>相関項目チェック：<code>org.springframework.validation.Validator</code>インターフェースの実装クラスを作成するか、自作のアノテーションを実装する</p>
</li>
</ul>
<h4 id="単項目チェック"><a href="#単項目チェック" class="headerlink" title="単項目チェック"></a>単項目チェック</h4><ul>
<li><code>javax.validation.constraints</code>パッケージに定義されている</li>
</ul>
<table>
<thead>
<tr>
<th>アノテーション</th>
<th>チェック内容</th>
</tr>
</thead>
<tbody><tr>
<td>Min,DecimalMin</td>
<td>数値の最小値を下回らないこと</td>
</tr>
<tr>
<td>Max,DecimalMax</td>
<td>数値の最大値を超えないこと</td>
</tr>
<tr>
<td>NotNull</td>
<td>NULL値ではないこと</td>
</tr>
<tr>
<td>Pattern</td>
<td>正規表現を満たすこと</td>
</tr>
<tr>
<td>NotBlank</td>
<td>値があること（空白を許さない）</td>
</tr>
<tr>
<td>NotEmpty</td>
<td>値があること（空白を許す）</td>
</tr>
<tr>
<td>Digits</td>
<td>数値であること</td>
</tr>
<tr>
<td>Past</td>
<td>過去であること</td>
</tr>
<tr>
<td>Future</td>
<td>未来であること</td>
</tr>
</tbody></table>
<ul>
<li><code>spring-boot-starter-validation</code>スターターは <code>Bean Validation</code>の実装ライブラリーとして、<code>Hibernate Validator</code>を依存関係に追加しているので、Hibernateで定義されたアノテーションも使うことができる</li>
</ul>
<table>
<thead>
<tr>
<th>アノテーション</th>
<th>チェック内容</th>
</tr>
</thead>
<tbody><tr>
<td>CreditCardNumber</td>
<td>正しいクレジットカード番号であること</td>
</tr>
<tr>
<td>Length</td>
<td>NULL値ではないこと</td>
</tr>
<tr>
<td>Range</td>
<td>範囲内の値であること</td>
</tr>
<tr>
<td>SafeHtml</td>
<td>妥当なHTML書式であること</td>
</tr>
<tr>
<td>URL</td>
<td>正しいURLであること</td>
</tr>
</tbody></table>
<ul>
<li><p>参考URL</p>
<ul>
<li><a href="https://beanvalidation.org/2.0/">https://beanvalidation.org/2.0/</a></li>
</ul>
</li>
<li><p>Formオブジェクトに<code>@NotEmpty</code>などのアノテーション付与</p>
</li>
<li><p><code>Controller</code>の<code>@PostMapping(&quot;/new&quot;)</code>を付与したメソッドの引数に<code>@Validated</code>を付与し、Formオブジェクトを第一引数に指定</p>
</li>
<li><p>チェック結果が、第二引数の<code>BindingResult</code>に入るので結果をチェックする</p>
</li>
</ul>
<h4 id="Column-PRGパターンについて"><a href="#Column-PRGパターンについて" class="headerlink" title="Column PRGパターンについて"></a>Column PRGパターンについて</h4><ul>
<li>PRGパターンでは、Post-Redirect-Getメソッドを組み合わせて、以下の流れで登録処理を行う実装パターン</li>
</ul>
<ol>
<li>保存ボタンを押したとき、POSTメソッドを使い、サーバーにリクエストする（P:Post）</li>
<li>入力値をDBに保存するといった一連の処理を行い、詳細画面にリダイレクトする（R:Redirect）</li>
<li>GETメソッドで詳細画面が表示される（G:Get）</li>
</ol>
<ul>
<li>サンプルプロジェクトはほぼすべての機能において、PRGパターンを適用している</li>
<li>メリット<ul>
<li>ブラウザの戻るボタンを押しても、フォーム再送信のダイアログを表示しないようにすることができる</li>
</ul>
</li>
</ul>
<h4 id="相関項目チェック"><a href="#相関項目チェック" class="headerlink" title="相関項目チェック"></a>相関項目チェック</h4><h3 id="2-2-オブジェクトマッピング"><a href="#2-2-オブジェクトマッピング" class="headerlink" title="2.2 オブジェクトマッピング"></a>2.2 オブジェクトマッピング</h3><ul>
<li><p>ModelMapperを使用した詰め替え例の紹介</p>
</li>
<li><p>Dozerなどもあるのでお好みで使用すること</p>
</li>
<li><p>Strictモードにしないと意図しない詰め替えが発生する可能性があるので注意</p>
</li>
<li><p>MEMO: ここはOrikaを採用することにしたので割愛</p>
</li>
</ul>
<h3 id="2-3-ログ出力"><a href="#2-3-ログ出力" class="headerlink" title="2.3 ログ出力"></a>2.3 ログ出力</h3><ul>
<li><p>MDCを使ってログに値を埋め込む設定</p>
<ul>
<li>コントローラに関数名を返却する処理を埋め込む</li>
<li>リクエストごとに乱数を生成して埋め込む（リクエストトラッキング）</li>
</ul>
</li>
<li><p>ログローテーションの設定について</p>
</li>
</ul>
<h3 id="2-4-ファイルダウンロード"><a href="#2-4-ファイルダウンロード" class="headerlink" title="2.4 ファイルダウンロード"></a>2.4 ファイルダウンロード</h3><p>ファイルの出力処理を共通処理にするとソースコードの記述量を削減市、統一された方法に揃えることで微妙な動作の違いを生まない用にすることができます。</p>
<p>ファイルダウンロード機能は、エンタープライズのアプリケーション開発に限らず、とてもよくある機能の１つ</p>
<p><code>org.springframework.web.servlet.View</code>インターエースを実装することで、汎用的なロジックで様々なファイルダウンロードに対応できる用になる</p>
<h4 id="PDFファイルのダウンロード"><a href="#PDFファイルのダウンロード" class="headerlink" title="PDFファイルのダウンロード"></a>PDFファイルのダウンロード</h4><p>帳票出力の代表的なライブラリとして、JasperReportsがある<br>JasperReportsは、<code>.jrxml</code>という拡張子のXMLファイルで帳票のレイアウトをテンプレートとして定義して帳票を出する際に対象データを引数に渡すことで帳票を出力します。<br>テンプレートファイルはJasperSoftStudioというEclipseベースの帳票デザインツールを使って作成</p>
<p>SpringMVCには、JasperReportsをサポートするViewクラスが提供されていたが、SpringFramework5から機能が除外されている</p>
<p>そのため、JasperReportsライブラリを直接使ってPDF出力するPDFViewクラスを実装して、引数にデータを渡すだけでPDF出力ができるようにします。</p>
<h4 id="CSVファイルのダウンロード"><a href="#CSVファイルのダウンロード" class="headerlink" title="CSVファイルのダウンロード"></a>CSVファイルのダウンロード</h4><p>CSVファイルのダウンロードは、<code>jackson-dataformat-csv</code>を利用するとシンプルに実装することができる</p>
<ul>
<li>CsvViewクラス</li>
<li>Entityクラス</li>
<li>Controllerクラス</li>
</ul>
<h4 id="Excelファイルのダウンロード"><a href="#Excelファイルのダウンロード" class="headerlink" title="Excelファイルのダウンロード"></a>Excelファイルのダウンロード</h4><p>Excelファイルのダウンロードの場合は、<code>org.springframework.web.servlet.view.document.AbstractXlsxView</code>を利用<br>AbstractXlsxViewはApachePOIに依存しているのでバージョンまで指定して依存関係を記述します<br>PDFファイルの場合と同様で、ファイル名に日本語文字が含まれると文字化けが生じてしまうので、子クラスを作成して対応</p>
<h3 id="2-5-ファイルアップロード"><a href="#2-5-ファイルアップロード" class="headerlink" title="2.5 ファイルアップロード"></a>2.5 ファイルアップロード</h3><p>ファイルダウンロードと同様によく実装する機能の１つ</p>
<p>SpringBootでは、アップロードファイルのサイズ上限などの設定を適切に行わないと、オートコンフィグレーションによるデフォルトの動作仕様では要件を満たせないこともありえるので注意が必要<br>SpringBootでは、ServletAPI3.0で利用できる<code>javax.servlet.http.Part</code>を内包するMultipartResolverがオートコンフィグレーションされるので、なにもしなくてもMultipartFileインターフェースを使ってファイルを受け取ることができる</p>
<h4 id="ファイルサイズの設定"><a href="#ファイルサイズの設定" class="headerlink" title="ファイルサイズの設定"></a>ファイルサイズの設定</h4><ul>
<li>１ファイルのサイズ上限は１MBで、１リクエストで受け付ける上限は１０MBになっている</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  servlet:</span></span><br><span class="line"><span class="attr">    multipart:</span></span><br><span class="line"><span class="attr">      max-file-size:</span> <span class="bullet">-1</span> <span class="comment"># デフォルトは1MB　-1だと無制限</span></span><br><span class="line"><span class="attr">      max-request-size:</span> <span class="number">20</span><span class="string">MB</span> <span class="comment"># デフォルトは10MB</span></span><br></pre></td></tr></table></figure>

<h4 id="ファイルの取扱"><a href="#ファイルの取扱" class="headerlink" title="ファイルの取扱"></a>ファイルの取扱</h4><h4 id="ファイルのデータベースへの格納"><a href="#ファイルのデータベースへの格納" class="headerlink" title="ファイルのデータベースへの格納"></a>ファイルのデータベースへの格納</h4><ul>
<li>TODO: 後で画像保存する処理実装する</li>
</ul>
<h3 id="2-6-メール送信"><a href="#2-6-メール送信" class="headerlink" title="2.6 メール送信"></a>2.6 メール送信</h3><ul>
<li>MEMO: 省略</li>
</ul>
<h2 id="第3章-データアクセス"><a href="#第3章-データアクセス" class="headerlink" title="第3章 データアクセス"></a>第3章 データアクセス</h2><p>本chapterでは、O&#x2F;RマッパーとしてDomaを使った実装方法を説明<br>Domaは2way-SQLと呼ばれるSQLテンプレートを利用できるので、SQL分の見通しがよくなるという特徴がある</p>
<p>実行時にSQLテンプレートとJavaソースコードとの不整合を検知して間違いを指摘する機能も備わっていて、とても使い勝手がよいO&#x2F;Rマッパーです</p>
<h3 id="3-1-スターター"><a href="#3-1-スターター" class="headerlink" title="3.1 スターター"></a>3.1 スターター</h3><ul>
<li>2way-SQLとは<ul>
<li>SQLのコメントに条件分岐を記述することで、プログラムのSQLテンプレートとしての利用と、囲うせずにそのままツールでの利用という２通りの使い方が可能になっているSQL文</li>
</ul>
</li>
</ul>
<h3 id="3-2-Domaの使い方"><a href="#3-2-Domaの使い方" class="headerlink" title="3.2 Domaの使い方"></a>3.2 Domaの使い方</h3><h3 id="3-3-エンティティ共通処理"><a href="#3-3-エンティティ共通処理" class="headerlink" title="3.3 エンティティ共通処理"></a>3.3 エンティティ共通処理</h3><p>すべてのエンティティにシステム固有のシステム制御項目（作成者、作成日時、更新者、更新日時、削除者、削除日時）を用いて、エンティティを取り扱うときに、すべてのテーブルに共通のルールを適用する場合の共通処理について説明</p>
<h4 id="エンティティ基底クラス"><a href="#エンティティ基底クラス" class="headerlink" title="エンティティ基底クラス"></a>エンティティ基底クラス</h4><p>エンティティ基底クラスを用意し、共通的に使うフィールドを定義することができる</p>
<p><code>@Entity</code>アノテーションにリスナーを指定すると、更新・登録・削除のタイミングで共通的な処理を実行することができる</p>
<ul>
<li>TODO: 共通項目実装</li>
</ul>
<h3 id="3-4-ページング処理"><a href="#3-4-ページング処理" class="headerlink" title="3.4 ページング処理"></a>3.4 ページング処理</h3><ul>
<li><p>DOMAはページング処理を行うための仕組みとして検索オプションを提供している</p>
</li>
<li><p>TODO: 要実装</p>
</li>
</ul>
<h3 id="3-5-排他制御"><a href="#3-5-排他制御" class="headerlink" title="3.5 排他制御"></a>3.5 排他制御</h3><h4 id="楽観的排他制御"><a href="#楽観的排他制御" class="headerlink" title="楽観的排他制御"></a>楽観的排他制御</h4><p>データ不整合を保険的に防ぐ方法<br>複数人が同じデータを編集してしまった場合に、先に保存したほうの編集内容が後から保存した内容で上書きされてしまうといったことを防ぐことができる</p>
<p>Domaを使って楽観的排他制御を行うには以下の条件を満たす必要がある</p>
<ul>
<li><p>エンティティのフィールドに<code>@Version</code>アノテーションが付与されている</p>
</li>
<li><p>Daoインターフェースに付与したアノテーションのignoreVersionをtrueにしていない</p>
</li>
<li><p>テーブルに数値型の改定番号カラムが定義されている</p>
</li>
<li><p>流れ</p>
<ol>
<li>Formオブジェクト二改定番号のフィールドを定義する</li>
<li>コントローラに<code>@SessionAttribute</code>アノテーションを付与する。</li>
<li>編集画面の初期表示処理で改定番号を含めてデータを取得して、Formオブジェクトに詰め替える</li>
<li>更新処理で、更新対象データを取得して、そのデータをFormオブジェクトの値で上書きする</li>
<li>Daoの更新処理を呼び出す（ここで排他制御がかかる</li>
<li>不要になったFormオブジェクトをセッションからクリアする</li>
</ol>
</li>
<li><p>TODO: 楽観的排他制御について深堀り、実装→悲観的排他制御だけでアプリとしては回せそう</p>
</li>
<li><p>Column セッション情報の格納先について</p>
<ul>
<li>楽観的排他制御の説明の中でSessionAttributeを使ってFormオブジェクトをセッション情報に保存する方法を紹介しました。サンプルプロジェクトでは、SpringSessionモジュールを依存関係に追加しているので、SpringBootによるオートコンフィグレーションが行われます。SpringSessionには、以下の格納先に対するオートコンフィグレーションが用意されています。<ul>
<li>JDBC</li>
<li>Redis</li>
<li>Hazelcast</li>
<li>MongoDB</li>
</ul>
</li>
<li>セッション情報の格納先を変更したい場合は、設定ファイルにリスト3.11を記述することで変更することができます。<ul>
<li>redisにする場合：<code>spring.session.store-type=redis</code></li>
</ul>
</li>
</ul>
</li>
<li><p>TODO: セッションの格納先はREDISにする</p>
</li>
</ul>
<h4 id="悲観的排他制御"><a href="#悲観的排他制御" class="headerlink" title="悲観的排他制御"></a>悲観的排他制御</h4><p>データベースの行ロック機能を使った排他制御で、在庫数のような頻繁に同時更新がかかるようなデータの整合性を担保する方法として利用される</p>
<p>Domaでは、悲観的排他制御を行うための仕組みも用意されていて、ページング処理の説明と同じ用に検索オプションを使う</p>
<p>悲観的排他制御を行うときに注意すべきなのは、検索結果が０件になるような条件で検索すると、行ロックではなくテーブルロックがかかる点です！！！<br>処理時間が長い処理でテーブルロックがかかってしまうと、処理の滞留が発生してしまい、システム全体が不安定な状態二なることもあるので注意する</p>
<h3 id="3-6-論理削除"><a href="#3-6-論理削除" class="headerlink" title="3.6 論理削除"></a>3.6 論理削除</h3><p>DBのレコードを削除するのではなく、削除フラグによってレコードの削除を表すという方法</p>
<h4 id="更新機能による実現"><a href="#更新機能による実現" class="headerlink" title="更新機能による実現"></a>更新機能による実現</h4><ul>
<li><code>@Update(excludeNull = true) // Nullの項目は更新対象にしない</code></li>
</ul>
<h4 id="エンティティリスナーによる共通処理"><a href="#エンティティリスナーによる共通処理" class="headerlink" title="エンティティリスナーによる共通処理"></a>エンティティリスナーによる共通処理</h4><ul>
<li>リスナーの中の<code>preUpdate</code>メソッドの中で、メソッド名が論理削除のメソッド名と一致するかを確認する</li>
</ul>
<h4 id="論理削除レコードの除外"><a href="#論理削除レコードの除外" class="headerlink" title="論理削除レコードの除外"></a>論理削除レコードの除外</h4><ul>
<li><p>論理削除を行うことをアプリケーション内で統一している場合は、データ取得のSQLに、論理削除フラグによる削除データの除外が行われる用にする必要がある</p>
</li>
<li><p>Column 参考文献</p>
<ul>
<li>BLOG.IK.AM <a href="https://blog.ik.am/">https://blog.ik.am/</a><ul>
<li>初めてのSpringBoot著者</li>
</ul>
</li>
<li>SlideShare Toshiaki Maki <a href="https://www.slideshare.net/makingx">https://www.slideshare.net/makingx</a></li>
</ul>
</li>
</ul>
<h2 id="第4章-セキュリティ"><a href="#第4章-セキュリティ" class="headerlink" title="第4章 セキュリティ"></a>第4章 セキュリティ</h2><p>本chapterでは、SpringSecurityを使った認証・認可とそれらにまつわる課題を解決する実装方法を説明</p>
<h3 id="4-1-スターター"><a href="#4-1-スターター" class="headerlink" title="4.1 スターター"></a>4.1 スターター</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.thymeleaf.extras'</span>, name: <span class="string">'thymeleaf-extras-springsecurity5'</span>, version: <span class="string">'3.0.4.RELEASE'</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">'org.springframework.boot:spring-boot-starter-security'</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-認証"><a href="#4-2-認証" class="headerlink" title="4.2 認証"></a>4.2 認証</h3><h4 id="認証情報の取得"><a href="#認証情報の取得" class="headerlink" title="認証情報の取得"></a>認証情報の取得</h4><ul>
<li>UserDetailsServiceをimplementsして実装する方法</li>
<li>TODO: 権限周りが実装できていないので見ておく</li>
</ul>
<h4 id="ログイン機能"><a href="#ログイン機能" class="headerlink" title="ログイン機能"></a>ログイン機能</h4><p>ログイン機能のコントローラを実装します。<br>デフォルトでも組み込みのログイン画面を表示することが可能ですが、ほとんどの場合において画面を変更する必要があるので、Thymeleafテンプレートを使ってログイン画面を表示する用に実装し、それ以降の処理はSpringSecurityと連携するようにします。</p>
<ul>
<li>TODO: タイムアウト処理やログイン成功処理など実装の必要があればサンプルを基に実装する<ul>
<li>&#x2F;authorize　にfowardできなくて、formオブジェクト経由のエラーチェックが実装できなかった</li>
</ul>
</li>
</ul>
<h3 id="4-3-RememberMe"><a href="#4-3-RememberMe" class="headerlink" title="4.3 RememberMe"></a>4.3 RememberMe</h3><p>一般的なWebサービスでは、ログイン画面に「ログインしたままにする」というチェックボックスがあることがしばしばある<br>一定期間内であればセッションがタイムアウトしても自動ログイン処理が行われる機能が提供されるので、何度もログイン画面でパスワードを入力する不便さを解消することができる</p>
<h4 id="ログイン記録の永続化"><a href="#ログイン記録の永続化" class="headerlink" title="ログイン記録の永続化"></a>ログイン記録の永続化</h4><ul>
<li>TODO: 自動ログイン機能は必要になれば実装しておきたい<ul>
<li>合わせて不要なレコードを削除する機能も実装する必要がある</li>
</ul>
</li>
</ul>
<h3 id="4-4-認可"><a href="#4-4-認可" class="headerlink" title="4.4 認可"></a>4.4 認可</h3><p>管理機能を備えたWebアプリケーションにおいては、ログインユーザーごとに権限を付与して、特定のユーザーのみが操作することができるように制御することがよくある<br>このようなアクセス制御を行う場合は、以下の要件が満たされていると汎用的に使えるためとても便利</p>
<ul>
<li><p>要件</p>
<ul>
<li>システムを利用するユーザーは、複数のロール（役割）を持つことができる</li>
<li>特定リソースの操作を識別する単位として権限を定義することができる</li>
<li>ロールは、複数の権限を持つことができる</li>
<li>システムの移動中にロールの持つパーミッションや対象のリソースを変更することができる</li>
</ul>
</li>
<li><p>SpringSecurityを使った認可の実装方法としては、アノテーションを使う方法と、JavaConfigでURLベースの条件式をていk技する方法がある</p>
</li>
<li><p>これらの方法では、システムの稼働中に新たに役割に権限を追加したり、することが困難</p>
</li>
<li><p>認証処理の中でデータベースからロール権限を取得して、コントローラのメソッドレベルでの認可制御を行うようにしている</p>
</li>
</ul>
<h4 id="権限管理データをロード"><a href="#権限管理データをロード" class="headerlink" title="権限管理データをロード"></a>権限管理データをロード</h4><h4 id="権限とメソッドの紐付け"><a href="#権限とメソッドの紐付け" class="headerlink" title="権限とメソッドの紐付け"></a>権限とメソッドの紐付け</h4><h4 id="認可制御のインターセプター"><a href="#認可制御のインターセプター" class="headerlink" title="認可制御のインターセプター"></a>認可制御のインターセプター</h4><ul>
<li>TODO: 権限管理はあとで見直す</li>
</ul>
<h3 id="4-5-CSRF対策"><a href="#4-5-CSRF対策" class="headerlink" title="4.5 CSRF対策"></a>4.5 CSRF対策</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以下を追加するとformにhiddenでcsrfトークンが埋め込まれる</span></span><br><span class="line">http.csrf()</span><br><span class="line">  .csrfTokenRepository(<span class="keyword">new</span> CookieCsrfTokenRepository());</span><br></pre></td></tr></table></figure>

<h3 id="4-6-二重送信防止"><a href="#4-6-二重送信防止" class="headerlink" title="4.6 二重送信防止"></a>4.6 二重送信防止</h3><ul>
<li><p>二重送信防止するためのチェック方法</p>
<ul>
<li>JavaScriptでボタンを連打できないようにする</li>
<li>PostRedirectGetパターンを適用</li>
<li>トークンを使った送信済みチェックをする</li>
</ul>
</li>
<li><p>TODO: ここで紹介されているやり方だと、二重送信防止チェックをするのは、UPDATEが伴う処理のみに限定できる</p>
<ul>
<li>ページ遷移や検索処理で二重送信が行われた場合は除外できるという仕組みになっている</li>
<li>ここの実装方法の方がより現実的なので後で真似る</li>
</ul>
</li>
</ul>
<h2 id="第5章-画面開発"><a href="#第5章-画面開発" class="headerlink" title="第5章 画面開発"></a>第5章 画面開発</h2><h3 id="5-1-Thymeleaf"><a href="#5-1-Thymeleaf" class="headerlink" title="5.1 Thymeleaf"></a>5.1 Thymeleaf</h3><p>SpringMVCといえばJSP一択だったが、HTML5に準拠した形で管理できる方が望ましい</p>
<ul>
<li>メリット<ul>
<li>Spring推奨</li>
<li>HTML5準拠</li>
<li>デザイナとの分業がしやすい</li>
<li>ブラウザで直接参照できる</li>
</ul>
</li>
</ul>
<h3 id="5-2-Formバインディング"><a href="#5-2-Formバインディング" class="headerlink" title="5.2 Formバインディング"></a>5.2 Formバインディング</h3><ul>
<li>FormBeanの定義方法とバリデーション方法</li>
</ul>
<h3 id="5-3-事前評価"><a href="#5-3-事前評価" class="headerlink" title="5.3 事前評価"></a>5.3 事前評価</h3><p>アプリケーションで扱うデータは特定の変換処理をかけたいことがよくある<br>Thymeleafでは事前評価をサポートしている</p>
<h4 id="事前評価の実装例"><a href="#事前評価の実装例" class="headerlink" title="事前評価の実装例"></a>事前評価の実装例</h4><ul>
<li>表示する言語を翻訳する例が紹介されている</li>
<li>FormBeanの値と、実際に表示したい値が異なる場合に有用だと思う</li>
<li><code>&lt;p th:text=&quot;${@myapp.translator.Translator@translateToEnglish(textVar)}&quot;&gt;some text here ...&lt;/p&gt;</code></li>
</ul>
<h3 id="5-4-テンプレート共有"><a href="#5-4-テンプレート共有" class="headerlink" title="5.4 テンプレート共有"></a>5.4 テンプレート共有</h3><h4 id="テンプレートの部品化"><a href="#テンプレートの部品化" class="headerlink" title="テンプレートの部品化"></a>テンプレートの部品化</h4><ul>
<li>includeとreplaceの話</li>
</ul>
<h4 id="テンプレートの共通化"><a href="#テンプレートの共通化" class="headerlink" title="テンプレートの共通化"></a>テンプレートの共通化</h4><p>レイアウトという機能でテンプレートの共通化をサポートします<br>HTMLのレイアウトやJavaScriptおよびCSSのインクルードを一元管理できる<br>本機能を用いてテンプレートの共通化を採用することでソースコードの保守性や品質も向上するため、積極的に導入すべき機能</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span>(<span class="string">'nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect:2.3.0'</span>) &#123;</span><br><span class="line">  <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">"org.codehaus.groovy"</span>, module: <span class="string">"groovy"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> LayoutDialect <span class="title">layoutDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LayoutDialect();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>レイアウト機能を利用するために、<code>xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;</code>を指定する</p>
</li>
<li><p><code>layout:fragment=&quot;任意の文字列&quot;</code>で各ページで差し替えるエリアを指定する</p>
</li>
<li><p>MEMO: Spring徹底入門でも紹介されていたが、画面の全体像がわかりづらくなりやすいためincludeを用いることにする</p>
</li>
</ul>
<h3 id="5-5-Thymeleafのその他の機能"><a href="#5-5-Thymeleafのその他の機能" class="headerlink" title="5.5 Thymeleafのその他の機能"></a>5.5 Thymeleafのその他の機能</h3><h4 id="エスケープなしのテキスト"><a href="#エスケープなしのテキスト" class="headerlink" title="エスケープなしのテキスト"></a>エスケープなしのテキスト</h4><ul>
<li><p>通常、クロスサイトスクリプティング対策のためSpringはタグ文字列をエスケープして表示している</p>
</li>
<li><p>場合によってはエスケープしないで、文字列を表示したいケースがある</p>
</li>
<li><p><code>&lt;p th:utext=&quot;#{home.welcom}&quot;&gt;Welcom to our grocery store!&lt;/p&gt;</code></p>
</li>
<li><p>このutextを利用する場合は、XSSの脆弱性を含まない用に注意が必要</p>
</li>
</ul>
<h4 id="日付操作拡張"><a href="#日付操作拡張" class="headerlink" title="日付操作拡張"></a>日付操作拡張</h4><p>Thymeleafでは、Date&#x2F;TimeAPIをデフォルトでサポートしていないため拡張ライブラリーを使用する必要がある</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://mvnrepository.com/artifact/org.thymeleaf.extras/thymeleaf-extras-java8time</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.thymeleaf.extras'</span>, name: <span class="string">'thymeleaf-extras-java8time'</span>, version: <span class="string">'3.0.4.RELEASE'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"holidayDate"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">th:value</span>=<span class="string">"$&#123;(value != null) ? #temporals.format(value, 'yyyy/MM/dd') : '' &#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>※その他にもThymeleafは各種の拡張機能をサポートしている</p>
<h3 id="5-6-静的コンテンツ管理"><a href="#5-6-静的コンテンツ管理" class="headerlink" title="5.6 静的コンテンツ管理"></a>5.6 静的コンテンツ管理</h3><p>BtoCのアプリケーションを構築する際、UI&#x2F;UXの向上が欠かせないため、クライアントサイドライブラリを有効活用する必要がある<br>JavaScriptやCSSを適切に管理していない状況では、次の問題が発生することがありました。</p>
<ul>
<li><p>JavaScriptやCSSが適切にバージョニングされていないため、ブラウザキャッシュにより、リリース時に古いバージョンが提供されてしまう。</p>
</li>
<li><p>JavaScriptやCSSライブラリが構成管理されていないため、安易な外部ライブラリの利用により障害が発生してしまう</p>
</li>
<li><p>本節では、Webアプリケーションの静的コンテンツについて</p>
<ul>
<li>配置場所</li>
<li>キャッシュ制御</li>
<li>アクセス制御</li>
<li>クライアントライブラリの構成管理方法<ul>
<li>を解説！！</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="静的コンテンツの配置場所"><a href="#静的コンテンツの配置場所" class="headerlink" title="静的コンテンツの配置場所"></a>静的コンテンツの配置場所</h4><p>SpringBootでは、SpringMVCのオートコンフィグレーションに以下の設定がされており、デフォルトでは次の４点のパスに静的コンテンツを配置できる</p>
<ul>
<li>&#x2F;resources&#x2F;</li>
<li>&#x2F;static&#x2F;</li>
<li>&#x2F;public&#x2F;</li>
<li>&#x2F;META-INF&#x2F;resources&#x2F;</li>
</ul>
<h4 id="キャシュ制御"><a href="#キャシュ制御" class="headerlink" title="キャシュ制御"></a>キャシュ制御</h4><p>キャッシュする時間は、application.(properties|yml) や ResourceHandlerRegistryのオーバーラードで調整</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  resources:</span></span><br><span class="line"><span class="comment">#    cache-period: 86400 # 1日間キャッシュさせる</span></span><br><span class="line"><span class="attr">    chain:</span></span><br><span class="line"><span class="attr">      strategy:</span></span><br><span class="line"><span class="attr">        content:</span></span><br><span class="line"><span class="attr">          enabled:</span> <span class="literal">true</span> <span class="comment"># 静的コンテンツのキャッシュ無効設定 MD5ハッシュが計算される バージョン管理戦略と呼ばれるらしい</span></span><br><span class="line"><span class="attr">          paths:</span> <span class="string">/**</span></span><br></pre></td></tr></table></figure>

<ul>
<li>TODO: バージョン管理戦略を実施した場合のキャッシュの挙動を確認しておく</li>
</ul>
<h4 id="アクセス制御"><a href="#アクセス制御" class="headerlink" title="アクセス制御"></a>アクセス制御</h4><p>Faviconなどの画像ファイルやクライアントライブラリは未認証、認証にかかわらずアクセスできる必要がある<br>SpringBootでは、SpringSecurityのオートコンフィグレーションにリストの設定がされており、デフォルトで次の５点のパスはpublicアクセス可能</p>
<p>しかし、SEOに必要なrobots.txtやsitemap.xmlは含まれないため、これらのファイルをPublicアクセス可能とするには、JavaConfigで設定を上書きする必要がある</p>
<ul>
<li><p>デフォルトで許可されている５点</p>
<ul>
<li>&#x2F;css&#x2F;</li>
<li>&#x2F;js&#x2F;</li>
<li>&#x2F;images&#x2F;</li>
<li>&#x2F;webjars&#x2F;</li>
<li>favicon.ico</li>
</ul>
</li>
<li><p>TODO: SEO対策に必要な知識を習得しておく必要がある</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] STATIC_RESOURCES = &#123;</span><br><span class="line">    <span class="string">"/favicon.ico"</span>, <span class="string">"/css/**"</span>, <span class="string">"/js/**"</span>, <span class="string">"/img/**"</span>, <span class="string">"/lib/**"</span>, <span class="string">"/font/**"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(WebSecurity web)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// セキュリティ対策が不要なリソースがある場合、SpringSecurityの処理を適用しないようにする</span></span><br><span class="line">  <span class="comment">//    web.ignoring().antMatchers("/resources/static/**");</span></span><br><span class="line">  web.ignoring().antMatchers(STATIC_RESOURCES);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="クライアントライブラリの構成管理"><a href="#クライアントライブラリの構成管理" class="headerlink" title="クライアントライブラリの構成管理"></a>クライアントライブラリの構成管理</h4><p>サーバサイドエンジニア中心のチーム構成だとフロントライブラリの管理が抜けてしまうことがよくある</p>
<p>本項では、WebJarsを用いてクライントライブラリを管理する方法を紹介</p>
<ul>
<li>Dependenciesの追加方法を説明</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://mvnrepository.com/artifact/org.webjars/webjars-locator-core</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.webjars'</span>, name: <span class="string">'webjars-locator-core'</span>, version: <span class="string">'0.45'</span></span><br></pre></td></tr></table></figure>

<h2 id="第6章-API開発"><a href="#第6章-API開発" class="headerlink" title="第6章 API開発"></a>第6章 API開発</h2><p>金融機関でのAPI公開の動きが急激に加速しているように、APIというキーワードはビジネス領域でもよく目にする用になってきている<br>システム開発でも迅速に機能をリリースしていくためにはAPI連携は書かせず、API連携の重要度は日に日に高まってきている</p>
<h3 id="6-1-Spring-でのAPI開発"><a href="#6-1-Spring-でのAPI開発" class="headerlink" title="6.1 Spring でのAPI開発"></a>6.1 Spring でのAPI開発</h3><p>MSA(Micro Service Architecture)開発やSPA開発ではAPI連携が必須<br>一方小売業界ではオムニチャネルといった言葉が生まれている</p>
<p>チャネルの違いを意識しないようにするには、バックエンドのサービスをAPI化し、PC&#x2F;スマホ&#x2F;他サービスなどの複数のチャネルから透過的に利用できるようにする必要がある</p>
<h4 id="API仕様"><a href="#API仕様" class="headerlink" title="API仕様"></a>API仕様</h4><h4 id="リソース実装"><a href="#リソース実装" class="headerlink" title="リソース実装"></a>リソース実装</h4><h4 id="コントローラ実装"><a href="#コントローラ実装" class="headerlink" title="コントローラ実装"></a>コントローラ実装</h4><h4 id="エラーハンドリング実装"><a href="#エラーハンドリング実装" class="headerlink" title="エラーハンドリング実装"></a>エラーハンドリング実装</h4><p><code>@RestControllerAdvice</code>アノテーションを指定して作成</p>
<h3 id="6-2-SpringでのAPI連携"><a href="#6-2-SpringでのAPI連携" class="headerlink" title="6.2 SpringでのAPI連携"></a>6.2 SpringでのAPI連携</h3><p>現在のシステム開発でアジリティを追求するためにはAPI連携は欠かせません</p>
<h4 id="RestTemplate"><a href="#RestTemplate" class="headerlink" title="RestTemplate"></a>RestTemplate</h4><p>SpringではRestTemplateというRESTクライアントを提供している<br>RestTemplateを用いると、Javaオブジェクトとレスポンスボディの変換も容易に実現できる</p>
<h4 id="ユーザー一覧取得APIへの連携"><a href="#ユーザー一覧取得APIへの連携" class="headerlink" title="ユーザー一覧取得APIへの連携"></a>ユーザー一覧取得APIへの連携</h4><h4 id="ユーザー作成APIへの連携"><a href="#ユーザー作成APIへの連携" class="headerlink" title="ユーザー作成APIへの連携"></a>ユーザー作成APIへの連携</h4><h3 id="6-3-API開発効率の最大化"><a href="#6-3-API開発効率の最大化" class="headerlink" title="6.3 API開発効率の最大化"></a>6.3 API開発効率の最大化</h3><p>API開発でクライアント側でモックを用意して実装をすすめる必要がある</p>
<p>API定義をExcelなどのドキュメントで管理し、Excelなどのドキュメントに基づきクライアント側でモックの準備をすすめると、仕様の認識齟齬が発生することが多くなってしまいます。</p>
<p>またAPIの仕様変更時の連携のオーバーヘッドも大きくなってしまいます。</p>
<p>本節では、現在の開発での必須要素であるAPI連携をより円滑にすすめるためにAPI管理にSwaggerを用い、API開発の効率を上げる方法を説明</p>
<h4 id="Swaggerとは"><a href="#Swaggerとは" class="headerlink" title="Swaggerとは"></a>Swaggerとは</h4><p>OpenAPI仕様に基づくAPI開発ツールのフレームワークであり、APIのライフサイクル全体に渡って、設計から文書の管理、テストおよびデプロイまでを可能にします。</p>
<ul>
<li><p>大きな利点は以下の４つ</p>
<ul>
<li>OpenAPI準拠</li>
<li>YAMLを用いた宣言的な記法</li>
<li>コード自動生成</li>
<li>エコシステムの充実（SwaggerHub）</li>
</ul>
</li>
<li><p>OpenAPI準拠</p>
<ul>
<li>マイクロソフト、Googleなどの大手の企業を含むOpenAPIInitiativeがLinuxFoundationの協力のもとで結成され、APIの記述のために採用したのがSwagger</li>
<li>API管理のデファクトスタンダードと呼ばれるほど普及している</li>
</ul>
</li>
<li><p>YAMLを用いた宣言的な記法</p>
<ul>
<li>SwaggerはAPI定義をYAML(JSON)により宣言的に記載できます。</li>
<li>また、定義したYAMLからSwaggerUIというツールを用いると、HTMLベースの定義書やモックを作成できます。</li>
<li>SwaggerUIを利用し、APIを公開すると、クライアント側は動く仕様としてAPIを参照できるため、API連詠によるコミュニケーションコストを低下させることができます。</li>
</ul>
</li>
<li><p>コード自動生成</p>
<ul>
<li>Swaggerには、Swagger CodegenというSwaggerUIで公開されたAPI仕様を基にコードを自動生成するツールがある</li>
</ul>
</li>
</ul>
<p>TODO: Dockerを用いてSwaggerCodegenを用いたスタブサーバーの起動例　確認しておく</p>
<ul>
<li>エコシステムの充実(SwaggerHub)<ul>
<li>SwaggerCodegenを用いてスタブサーバーを起動し、開発チームで共有する方針も悪くないですが、ホスト環境の管理やAPI仕様の変更の都度、コードの再生成および再起動が必要になります。</li>
<li>Swaggerはエコシステムも充実しており、SwaggerHubというAPI管理のプラットフォームがあります。</li>
<li>SwaggerHubはSwaggerを使ったモックサーバーやテスト環境などAPI管理に関するサービスをまとめて提供しているため、APIの管理工数を下げることが可能です。</li>
<li>SwaggerHubはAPIドキュメントの編集&#x2F;表示、モックサーバーの立ち上げ、SwaggerCodegenの機能などをブラウザベースで提供しています。</li>
</ul>
</li>
</ul>
<p>TODO: SwaggerHubは一回使ってみる必要あり！！！<br>→お金かかるから断念… チーム開発に有用かも？</p>
<h4 id="Springでの利用-SpringFox"><a href="#Springでの利用-SpringFox" class="headerlink" title="Springでの利用(SpringFox)"></a>Springでの利用(SpringFox)</h4><p>SwaggerでのAPI管理がデファクトスタンダードになっていること、Swaggerを利用することのメリットを説明しました。<br>本項では、SwaggerをSpringで利用する方法を説明します。</p>
<p>Springでは、SpringFoxを用いるとAPIドキュメントの自動生成が可能<br>SpringFoxはSwaggerUIの提供もサポートしているため、APIを用いたチーム開発を円滑にすすめることができる<br>次の手順に従い、SpringFoxの利用方法を説明</p>
<ul>
<li>依存関係の設定</li>
<li>共通設定カスタマイズ</li>
<li>個別エンドポイントのカスタマイズ</li>
<li>静的ドキュメント生成</li>
</ul>
<ol>
<li>依存関係の設定</li>
</ol>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://mvnrepository.com/artifact/io.springfox/springfox-swagger2</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'io.springfox'</span>, name: <span class="string">'springfox-swagger2'</span>, version: <span class="string">'2.9.2'</span></span><br><span class="line"><span class="comment">// https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'io.springfox'</span>, name: <span class="string">'springfox-swagger-ui'</span>, version: <span class="string">'2.9.2'</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>共通設定カスタマイズ(JavaConfig)</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import</span>(&#123; ThymeleafConfig.class, <span class="comment">// Thymeleafを使用することを明示</span></span><br><span class="line">    GoogleAutoConfiguration.class &#125;)</span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br></pre></td></tr></table></figure>

<p>APIControllerのみグルーピングする方法を紹介</p>
<ol start="3">
<li>個別エンドポイントのカスタマイズ</li>
</ol>
<p>アノテーションでAPIごとの説明を追加できる</p>
<ol start="4">
<li>静的ドキュメント生成</li>
</ol>
<p>SwaggerUIを動的に生成する方法は、API連携開発の効率を上げてくれるため、開発フェーズでは導入しておくと効果的</p>
<p>しかし本番サービス稼働後に上述の手順を有効化しておくと、SwaggerUIの外部公開制御が必要になります</p>
<p>本項では、別のアプローチとして、SwaggerのAPI定義から静的ドキュメントを生成する方法を紹介</p>
<ul>
<li><p>依存関係の設定</p>
</li>
<li><p>テストクラスの追加</p>
</li>
<li><p>HTML変換</p>
</li>
<li><p>依存関係の設定</p>
<ul>
<li>SwaggerからAsciiDocへの変換をサポートしているSwagger2Markupというライブラリがある</li>
<li>Swagger2MarkupをSpring向けにカスタマイズした、springfox-staticdocsを依存関係に追加する</li>
</ul>
</li>
<li><p>テストクラスの追加</p>
<ul>
<li>テストコードを作成し、CIサイクルに含めておくと、静的なドキュメントのAsciiDocが自動生成される</li>
</ul>
</li>
<li><p>HTML変換</p>
<ul>
<li>HTMLへの変換はasciidoctorを利用する</li>
</ul>
</li>
</ul>
<p>TODO: HTMLへ変換するCI構築する</p>
<h4 id="Spring-REST-Docs"><a href="#Spring-REST-Docs" class="headerlink" title="Spring REST Docs"></a>Spring REST Docs</h4><p>Springでのドキュメント生成の自動化には、Spring REST Docsを採用する方法もある</p>
<ul>
<li><p>利点</p>
<ul>
<li>テストをパスしないドキュメントは作成されないため、「動く仕様書」として信頼できる。</li>
<li>asciidoctorを用いた簡潔な記法</li>
</ul>
</li>
<li><p>手順</p>
<ul>
<li>依存関係の設定</li>
<li>雛形生成</li>
<li>テストコード生成</li>
</ul>
</li>
</ul>
<h2 id="第7章-チーム開発"><a href="#第7章-チーム開発" class="headerlink" title="第7章 チーム開発"></a>第7章 チーム開発</h2><p>システム開発では、１人ですべての作業を簡潔させることはできません。</p>
<p>最近のシステム開発で主流となってきている機能ごとに分割して開発する手法のMSA(MicroServieceArchitecture)開発でも、５～８人でのチーム開発（Two Pizza Team）が良いとされています。</p>
<h3 id="7-1-インフラの構成管理"><a href="#7-1-インフラの構成管理" class="headerlink" title="7.1 インフラの構成管理"></a>7.1 インフラの構成管理</h3><p>ローカルPC、検証環境、本番環境（オンプレミスもしくはクラウド）など、プログラムは様々な環境で動く可能性があります。</p>
<p>本節では、特定の環境にロックインされないようにする方法を紹介<br>旧来のシステム開発では、Excelなどで作成された手順書を用いて、半日～２日かけて開発環境を構築することが当たり前でした<br>しかし最近では、Infrastracture as Code(IaC)やDockerをはじめとするコンテナ技術が広く普及してきたことにより、上述のような方法を採用することはとても効率的とは言えません</p>
<h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><p>「私のローカル環境では再現しません」をなくそう<br>秘伝のたれ的な作業が影響して、このような環境差異によるトラブルが発生しがち</p>
<p>コンテナ技術のDockerを用いて、環境構築手順をコード化してGithubなどにコミットし、環境の使い捨てができる状態にしておくことで、上述のようなトラブルを抑制できる</p>
<ul>
<li><p>メリット</p>
<ul>
<li>インフラ構築手順のコード化（Dockerfile）</li>
<li>環境依存性による問題の排除</li>
<li>廃棄容易姓</li>
</ul>
</li>
<li><p>Column クラウドベースの統合開発環境（AWS Cloud9）</p>
<ul>
<li>ここ数年、ブラウザのみでコードを記述、実行、デバッグできる統合開発環境の利用が活発化している</li>
<li>ブラウザベースの統合開発環境の有名なサービスとして、AWS Cloud9がある</li>
<li>AWS Cloud9を利用すると、開発には非力なマシン（ipadなど）でも、いつでもどこでも開発が可能</li>
</ul>
</li>
<li><p>インフラ構築手順のコード化（Dockerfile）</p>
<ul>
<li>開発に関わる全ての文書は構成管理の対象とすることが望ましい</li>
<li>チーム開発では、アプリケーションプログラムは必然的に構成管理の対象となりますが、設計文書やインフラ構築手順は構成管理の対象外になってしまうことがある</li>
<li>インフラ構築手順のコード（Dockerfile）をSCMにコミットすることで、利用しているディストリビューション、設定ファイルの状態がコードで明確化されるため、インフラに関わるトラブルを抑制できる</li>
</ul>
</li>
<li><p>環境依存性による問題の排除</p>
</li>
<li><p>廃棄容易姓</p>
</li>
<li><p>Column Tweleve-Factor App</p>
<ul>
<li>コンテナ開発が活発になってきているのと同時に、クラウドアプリケーション開発のベストプラクティスの１つとして、The Twelve-Factor Appが取り上げ垂れることが多くなってきています。</li>
<li>The Twelve-Factor Appは、Herokuのプラットフォーム開発での治験をプラクティスに落とし込んだもので、コードベース、依存関係、プロセス、並行性、廃棄容易姓、開発&#x2F;本番一致などの１２の要素から構成されます。</li>
<li>アプリケーションをThe Twelve-Factor Appに適用させることができれば、コンテナベースの開発に適用していることになるため、オンプレミス、クラウドなどの実行環境に関わらずアプリケーションをデプロイできます。</li>
</ul>
</li>
</ul>
<p>TODO: The Twelve-Factor Appについて深堀り</p>
<ul>
<li>Windows10proではHyper-Vを有効化することでDockerを利用できます。</li>
<li>ここでは、Windows10 Pro以外でDockerを利用する方法を紹介します</li>
<li>VagrantとVirtualBoxでDocker環境を構築</li>
</ul>
<p>TODO: VagrantとDockerのコマンドについて説明しているので再度理解した上で読んで見る<br>SpringBootで利用するための設定についても記載があるので組み込んでおく</p>
<h3 id="7-2-データベースの構成管理"><a href="#7-2-データベースの構成管理" class="headerlink" title="7.2 データベースの構成管理"></a>7.2 データベースの構成管理</h3><ul>
<li>データベースの構成管理をするための、OSSのDBマイグレーションツールのFlywayを紹介</li>
</ul>
<h4 id="Flywayの利用"><a href="#Flywayの利用" class="headerlink" title="Flywayの利用"></a>Flywayの利用</h4><ul>
<li>SpringBootで利用するための設定<ul>
<li>依存下院系の設定</li>
<li>プロパティ設定</li>
<li>マイグレーションファイルの準備</li>
</ul>
</li>
</ul>
<h3 id="7-3-メンテナブルなテストコード"><a href="#7-3-メンテナブルなテストコード" class="headerlink" title="7.3 メンテナブルなテストコード"></a>7.3 メンテナブルなテストコード</h3><p>テストコードは重要<br>本節では、GroovyベースのテスティングフレームワークのSpockを用いてテストコードの可読性を上げる方法を紹介</p>
<h4 id="Spock"><a href="#Spock" class="headerlink" title="Spock"></a>Spock</h4><p>言語仕様に、RSpecやScalaなどのよい点を取り入れており、大きく次の３点の利点がある</p>
<ul>
<li>可読性</li>
<li>データ駆動テスト</li>
<li>Power Assertions</li>
</ul>
<p>TODO: SpringでのSpockの利用方法を紹介<br>GroovyやScalaなどをキャッチアップする必要がありそう</p>
<h3 id="7-4-ドキュメント生成ツールの活用"><a href="#7-4-ドキュメント生成ツールの活用" class="headerlink" title="7.4 ドキュメント生成ツールの活用"></a>7.4 ドキュメント生成ツールの活用</h3><ul>
<li><p>設計書が適切に管理できていない例</p>
<ul>
<li>詳細設計書がそもそもない</li>
<li>Textファイル、Excel、Wikiなどにドキュメントが散乱している</li>
<li>Excelなどで納品ドキュメントとして管理されているが、ソースコードと乖離している、および設計書がないプログラムがある</li>
</ul>
</li>
<li><p>本節では、チーム開発で共有するドキュメントについて述べる</p>
</li>
<li><p>ドキュメント管理ツールのSphinxを紹介</p>
</li>
</ul>
<h4 id="Sphinx"><a href="#Sphinx" class="headerlink" title="Sphinx"></a>Sphinx</h4><ul>
<li><p>Sphinxはドキュメントを簡単に作ることができるようにするツール</p>
</li>
<li><p>セットアップ</p>
<ul>
<li>Pythonを利用しているため、Pythonの実行環境が必要</li>
<li>Dockerを用いた方法を紹介</li>
</ul>
</li>
</ul>
<p>TODO: 後ほど実施</p>
<ul>
<li>Sphinxの特徴<ul>
<li>テキスト(MarkDown)形式</li>
<li>CIとの相性がよい</li>
<li>様々な出力形式をサポート</li>
</ul>
</li>
</ul>
<h3 id="7-5-ソースジェネレータ"><a href="#7-5-ソースジェネレータ" class="headerlink" title="7.5 ソースジェネレータ"></a>7.5 ソースジェネレータ</h3><p>SpringMVCに基づいた画面開発では、１つの機能を追加するために、多岐にわたるファイルの作成が必要<br>画面開発のたびに発生するファイル作成作業を効率化することで開発生産性を向上させることができる</p>
<p>通常のプロジェクト開発では多くの画面を開発する必要があり、大規模なプロジェクトだと数百画面もの開発が必要になってくる<br>プロジェクト開発で必要になってくる画面開発にかかる以下のコストを削減することで、開発生産性をさらに向上させることができる</p>
<ul>
<li>開発メンバー参画の際のパッケージ構成のベストプラクティスの共有</li>
<li>新規画面開発の際の必要なソースコード一式の作成作業</li>
</ul>
<p>この方法論は古くから知られており、有名なプロダクトとしては、YEOMANやAngularJSでも同様のツールセットが用意されている<br>  → AngularCliのことか</p>
<p>ここでは、Thymeleafを用いて、Gradleのカスタムプラグインとして、ソースジェネレータを作成する方法を紹介</p>
<h4 id="ソースジェネレータプラグインの導入"><a href="#ソースジェネレータプラグインの導入" class="headerlink" title="ソースジェネレータプラグインの導入"></a>ソースジェネレータプラグインの導入</h4><ul>
<li>次の手順で導入  <ul>
<li>GradlePluginの実装</li>
<li>GradlePluginの利用</li>
</ul>
</li>
</ul>
<p>TODO: 余裕があればソースコード生成の自動化を組めたら</p>
<ul>
<li>メンバー全員に自動生成の仕組みが浸透していない状態で導入すると、ごちゃごちゃするのであまりおすすめできないらしい</li>
</ul>
<h2 id="第8章-運用"><a href="#第8章-運用" class="headerlink" title="第8章 運用"></a>第8章 運用</h2><p>システム開発は、「開発を完了させること」＝「業務やサービスの提供が滞りなく進むこと」ではない<br>システムは、システムトラブルなどの望まない状態を排除・軽減し、利用者に継続的に使われていくことではじめて価値を生んでいきます。<br>IPAによると、運用コストはシステム開発の全体の3&#x2F;4以上のコストを占め、運用の重要性が高まってきている</p>
<h3 id="8-1-環境ごとの設定管理"><a href="#8-1-環境ごとの設定管理" class="headerlink" title="8.1 環境ごとの設定管理"></a>8.1 環境ごとの設定管理</h3><h4 id="Spring-Profiles"><a href="#Spring-Profiles" class="headerlink" title="Spring Profiles"></a>Spring Profiles</h4><p>開発&#x2F;本番環境の柔軟な切り替え</p>
<h4 id="環境ごとの設定管理"><a href="#環境ごとの設定管理" class="headerlink" title="環境ごとの設定管理"></a>環境ごとの設定管理</h4><p>ファイルを分ける方法を記載→理解しているので飛ばす</p>
<h3 id="8-2-アプリケーションサーバー設定"><a href="#8-2-アプリケーションサーバー設定" class="headerlink" title="8.2 アプリケーションサーバー設定"></a>8.2 アプリケーションサーバー設定</h3><p>本設では、SringBootで提供している組み込み型のWebサーバー（Embedded Web Servers）を配備するサーバーの設定方法を紹介</p>
<h4 id="実行可能Jar"><a href="#実行可能Jar" class="headerlink" title="実行可能Jar"></a>実行可能Jar</h4><p>以下を加えることでビルド時に依存下院系のあるライブラリを梱包したJarを容易に作成できる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bootJar &#123;</span><br><span class="line">  launchScript()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="アプリケーションサーバーの設定及びリリース"><a href="#アプリケーションサーバーの設定及びリリース" class="headerlink" title="アプリケーションサーバーの設定及びリリース"></a>アプリケーションサーバーの設定及びリリース</h4><ul>
<li>systemdを用いたアプリケーションサーバーの設定</li>
</ul>
<p>TODO:　jarファイルの生成とDocker組み合わせまでできたらやってみる</p>
<h3 id="8-3-アプリケーションの状態確認"><a href="#8-3-アプリケーションの状態確認" class="headerlink" title="8.3 アプリケーションの状態確認"></a>8.3 アプリケーションの状態確認</h3><p>システム開発では、利用者に見える機能開発や画面デザインが優先されてしまい、SLAの検討が後回しになることが少なくありません。</p>
<p>本設では、SpringBootでのアプリケーションの状態の確認方法について紹介</p>
<h4 id="SpringBootActuator"><a href="#SpringBootActuator" class="headerlink" title="SpringBootActuator"></a>SpringBootActuator</h4><p>SpringBootには、Actuatorという安定運用に寄与する強力な機能があるActuatorを有効にすると、HTTPやJMX経由でアプリケーションの状態を確認でき、自前でヘルスチェックのエンドポイントを実装する必要はなくなる</p>
<ul>
<li>SpringBootActuatorを有効化する</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuator</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.springframework.boot'</span>, name: <span class="string">'spring-boot-starter-actuator'</span>, version: <span class="string">'2.3.0.RELEASE'</span></span><br></pre></td></tr></table></figure>

<p>上記の設定だけで、デフォルトではシャットダウンを除く全てのエンドポイントが有効になります</p>
<h4 id="主要なエンドポイント"><a href="#主要なエンドポイント" class="headerlink" title="主要なエンドポイント"></a>主要なエンドポイント</h4><ul>
<li><p>Beans</p>
<ul>
<li>アプリケーションに登録されたBeanの一覧を取得します。Curlでのリクエスト例を紹介</li>
</ul>
</li>
<li><p>Environment</p>
<ul>
<li>アプリケーションで利用している環境変数の一覧を取得</li>
</ul>
</li>
<li><p>Health</p>
<ul>
<li>アプリケーションのヘルスチェック。AutoConfigurationの状態をもとにデータベース接続やDiskFullのチェックを実施します</li>
</ul>
</li>
<li><p>HeapDump</p>
<ul>
<li>ヒープダンプファイルをHTTPエンドポイントから取得できる</li>
</ul>
</li>
<li><p>Mappings</p>
<ul>
<li>アプリケーションのエンドポイントとリクエストパスのマッピング情報を出力します。SpringFoxなどを導入しなくてもアプリケーションのエンドポイントの詳細な情報が取得できる</li>
</ul>
</li>
<li><p>Metrics</p>
<ul>
<li>アプリケーションの現在の状態を出力</li>
</ul>
</li>
<li><p>Thread Dump</p>
<ul>
<li>スレッドダンプを取得します</li>
</ul>
</li>
<li><p>Prometheus</p>
<ul>
<li>インフラサービス監視ツールのPrometheusへ連携するメトリクスを出力するエンドポイント</li>
<li>2018&#x2F;10現在、Prometheusエンドポイントを有効にするためには、ライブラリを追加する必要があるらしい</li>
</ul>
</li>
<li><p>Column Prometheusとは</p>
<ul>
<li>サーバーやインフラなどのメトリクスを取得できるOSSの統合監視ソリューション</li>
<li>Prometheusはインストールや設定が容易で、かつ十分な機能を持ち管理しやすいという特徴を持ちます。</li>
<li>Go言語で開発されており、バイナリと設定ファイルを用意するだけで利用できる他、Zabbixなどと異なり、データを格納するデータベースを別途用意する必要もありません。</li>
<li>また、DockerやKubernetesといったコンテナ&#x2F;クラスター管理ツールとの連携機能もあり、容易に監視対象を設定できるため、マイクロサービス開発を推進している企業での導入が増加</li>
</ul>
</li>
</ul>
<h4 id="エルスチェックのカスタマイズ"><a href="#エルスチェックのカスタマイズ" class="headerlink" title="エルスチェックのカスタマイズ"></a>エルスチェックのカスタマイズ</h4><p>Actuatorのデフォルトのヘルスチェックも強力ですが、ヘルスチェックをカスタマイズすることも可能</p>
<p>システム独自のチェックをすることができる</p>
<p>HealthIndicatorインターフェースを実装するBeanを登録することで実現できる</p>
<h4 id="SpringBootActuatorのセキュリティ制御"><a href="#SpringBootActuatorのセキュリティ制御" class="headerlink" title="SpringBootActuatorのセキュリティ制御"></a>SpringBootActuatorのセキュリティ制御</h4><p>アプリケーションの機密情報を取得できるため、システム管理者以外からのアクセスは遮断する必要がある</p>
<p>Spring Boot 2系では、&#x2F;info, &#x2F;health以外のエンドポイントはデフォルトで認可ありとなります。<br>認可なしにしつつ、Listenポートの変更及び接続元IPを制限する設定は以下</p>
<h3 id="8-4-アプリケーション監視"><a href="#8-4-アプリケーション監視" class="headerlink" title="8.4 アプリケーション監視"></a>8.4 アプリケーション監視</h3><p>システムを運用していくためには、アプリケーション状態の可視化およびアプリケーション異常を迅速に検知する必要がある</p>
<p>クラウドを用いた開発が普通（ニューノーマル）となった現在では、監視設計についてもクラウドに適したものにしていく必要があります。<br>本設では、システム運用に欠かせないアプリケーション監視について、Prometheusを用いる方法を説明</p>
<h4 id="Prometheus"><a href="#Prometheus" class="headerlink" title="Prometheus"></a>Prometheus</h4><ul>
<li>メリット<ul>
<li>導入の敷居の低さ</li>
<li>クラウドネイティブ時代に適した設計</li>
<li>オープンソース</li>
</ul>
</li>
</ul>
<p>なお、本番環境のトータルの運用コストを見据える場合は、有償の監視サービスのMackerelやDatadogも検討対象にしてみる</p>
<h4 id="Prometheusの導入"><a href="#Prometheusの導入" class="headerlink" title="Prometheusの導入"></a>Prometheusの導入</h4><ul>
<li><p>インストール方法は次の３つ</p>
<ul>
<li>バイナリのダウンロード</li>
<li>Docker</li>
<li>ソースビルド</li>
</ul>
</li>
<li><p>PrometheusのDownloadページよりターゲットOSのファイルをダウンロードし、展開するだけでインストールは完了</p>
</li>
</ul>
<h4 id="Prometheusのサービスディスカバリー"><a href="#Prometheusのサービスディスカバリー" class="headerlink" title="Prometheusのサービスディスカバリー"></a>Prometheusのサービスディスカバリー</h4><p>Prometheusにはサービスディスカバリ機能が備わっており、サービスの拡張に自動で追従します。<br>例えば、AWS EC2を利用している場合、サーバーの増減に自動で追従します</p>
<h4 id="Springアプリケーションとの連携"><a href="#Springアプリケーションとの連携" class="headerlink" title="Springアプリケーションとの連携"></a>Springアプリケーションとの連携</h4><ul>
<li>SpringActuatorとPrometheusは連携できる</li>
<li>設定する方法を記載</li>
</ul>
<h4 id="メトリクスの可視化"><a href="#メトリクスの可視化" class="headerlink" title="メトリクスの可視化"></a>メトリクスの可視化</h4><p>単体でもメトリクスの可視化はできるが、Grafanaと連携すればより強力にビジュアライズできる</p>
<ul>
<li>ダウンロード<ul>
<li>バイナリのダウンロード</li>
<li>パッケージマネージャインストール</li>
</ul>
</li>
</ul>
<h4 id="アラート通知"><a href="#アラート通知" class="headerlink" title="アラート通知"></a>アラート通知</h4><p>Prometheusは複数のコンポーネントで構成されており、アラート通知もオプション構成となっている</p>
<ul>
<li><p>AlertManagerのインストール</p>
<ul>
<li>アラート通知を実現するためには、Prometheus本体のPush通知を処理するAlertManagerのインストールが必要</li>
<li>バイナリファイルをダウンロードして展開する</li>
</ul>
</li>
<li><p>Slack通知設定</p>
<ul>
<li>本書では、Slack通知の設定方法を説明</li>
<li>AlertManagerはメール、HipChatなどの連携をデフォルトでサポートしています</li>
</ul>
</li>
</ul>
<p>TODO:　このあたりは見返して設定していきたい</p>
<h3 id="8-5-リクエスト追跡"><a href="#8-5-リクエスト追跡" class="headerlink" title="8.5 リクエスト追跡"></a>8.5 リクエスト追跡</h3><p>本番環境では、可用性要件を考慮の上、アプリケーションサーバーを冗長化することが多く行われます。<br>また並行性を考慮するとアプリケーションサーバーは状態をNoSQLやRDBに保持させるステートレス構成とし、<br>スケールアウト及びスケールイン構成とすることも多く行われます。</p>
<p>アプリケーションが多層で連携する場合、各層でリクエストを処理するサーバーが不定となるため、ユーザーの行動履歴をトレースするためには、リクエスト追跡の仕掛けを導入する必要があります。本節では、リクエスト追跡の方法としてnginxを用いる方法を紹介</p>
<h4 id="nginxトレース"><a href="#nginxトレース" class="headerlink" title="nginxトレース"></a>nginxトレース</h4><p>静的コンテンツ配信の最適化やプロキシ用途でnginxを導入することは多く行われる</p>
<p>nginxは以下の用に設定すると、リクエストIDがCookieに付与される</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">userid           on;</span><br><span class="line">userid_name      uid;</span><br><span class="line">userid_domain    example.com;</span><br><span class="line">userid_path      &#x2F;;</span><br><span class="line">userid_expires   365d;</span><br></pre></td></tr></table></figure>

<h4 id="nginxとのトレースIDの統合"><a href="#nginxとのトレースIDの統合" class="headerlink" title="nginxとのトレースIDの統合"></a>nginxとのトレースIDの統合</h4><p>前項では、ミドルウェア（nginx）でリクエスト追跡IDを発行する方法を紹介<br>リクエスト追跡を切れ目なく実現するために、nginxとリクエスト追跡IDの統合の方法を紹介</p>
<p>リクエスト追跡機能は横断的関心事（cross-cutting concerns）のため、SpringAOPで実装する方針が望ましいと言えます</p>
<ul>
<li><p><code>RequestTrackingInterceptor.java</code>に実装した内容のことを説明していた</p>
</li>
<li><p>Column ログ集約ソリューション</p>
<ul>
<li>複数台構成のアプリケーションをステートレスにと持つことを望ましい構成とすると、各アプリケーションサーバーにSSH接続してログを確認する方法では運用が大変</li>
<li>上述の課題に対応するためには、ログ集約の仕組みを導入する方法がよい</li>
<li>ログ集約のソリューションとしては、商用のSplunk、DatadogやOSSのFluentd、Logs、AzureではLogAnalyticsなどの仕組みがある。アプリケーションを複数台で運用する際はこれらのソリューションの導入も検討してみて</li>
</ul>
</li>
</ul>
<p>TODO: OSSのFluentdは使ってみたい</p>
<h3 id="8-6-レイテンシ分析"><a href="#8-6-レイテンシ分析" class="headerlink" title="8.6 レイテンシ分析"></a>8.6 レイテンシ分析</h3><p>リクエスト追跡が可能な構成で、かつ応答遅延が発生した場合は、ボトルネック箇所を特定し対応を検討する必要がある<br>また、MSA開発では、多層、多数のサービスが連携するため、サービスのどこがボトルネックであるか特定できる仕組みの導入が望ましいと言えます。</p>
<p>本節では、SpringエコシステムであるSpringCloudプロジェクトのSpringCloudSleuthを用いてレイテンシ分析する方法を紹介</p>
<h4 id="Spring-Cloud-Sleuth"><a href="#Spring-Cloud-Sleuth" class="headerlink" title="Spring Cloud Sleuth"></a>Spring Cloud Sleuth</h4><p>FrontentとBackendで同じIDを出力して処理を追うことができますよっていう説明<br>RestTemplateを使用する必要があるみたい</p>
<p>ここでレイテンシが図られる様子<br>Zipkinで可視化できるみたい</p>
<h3 id="8-7-無停止デプロイ"><a href="#8-7-無停止デプロイ" class="headerlink" title="8.7 無停止デプロイ"></a>8.7 無停止デプロイ</h3><p>BtoCサービス開発の場合、サービスに影響をおよぼさず無停止でアプリケーションをデプロイする必要が多くあります。<br>特に利用者が多い場合は、必須の要件となります。</p>
<p>本節では、オンプレミスの条件付きで、無停止でアプリケーションを更新する方法を紹介</p>
<h4 id="ローリングデプロイ"><a href="#ローリングデプロイ" class="headerlink" title="ローリングデプロイ"></a>ローリングデプロイ</h4><h4 id="ローリングデプロイ作業フロー"><a href="#ローリングデプロイ作業フロー" class="headerlink" title="ローリングデプロイ作業フロー"></a>ローリングデプロイ作業フロー</h4><ul>
<li>Step1. アプリサーバー#1へのデプロイ<ul>
<li>プロキシサーバーからアプリサーバー#1へのリクエスト振り分けを停止</li>
<li>アプリサーバー#1のアプリケーションをデプロイ</li>
</ul>
</li>
</ul>
<h4 id="ローリングデプロイ作業手順"><a href="#ローリングデプロイ作業手順" class="headerlink" title="ローリングデプロイ作業手順"></a>ローリングデプロイ作業手順</h4><p>TODO: nginxの設定ファイルの変更方法も記載しているので後で参考にして設定しておきたい</p>
<h3 id="8-8-コンテナオーケストレーションツールへのデプロイ"><a href="#8-8-コンテナオーケストレーションツールへのデプロイ" class="headerlink" title="8.8 コンテナオーケストレーションツールへのデプロイ"></a>8.8 コンテナオーケストレーションツールへのデプロイ</h3><p>コンテナをデプロイする基盤としてのコンテナオーケストレーションツールは、激しい開発競争が繰り広げられましたが、Kubernetesがデファクトスタンダードとなっている</p>
<p>本節では、SpringBootアプリケーションを、Dockerコンテナを用い、コンテナオーケストレーションツールのKubernetesを用いてデプロイする方法を紹介</p>
<h4 id="コンテナイメージの作成"><a href="#コンテナイメージの作成" class="headerlink" title="コンテナイメージの作成"></a>コンテナイメージの作成</h4><p>TODO: Kubernetesを使ったコンテナ管理…後でDockerを一通り使い倒した後確認する</p>
<h2 id="第9章-（Spring-Bootアプリケーションが想定している）システム構成"><a href="#第9章-（Spring-Bootアプリケーションが想定している）システム構成" class="headerlink" title="第9章 （Spring Bootアプリケーションが想定している）システム構成"></a>第9章 （Spring Bootアプリケーションが想定している）システム構成</h2><p>どんなにアプリケーションコードが優れていても、システム・アーキテクチャ設計が適切でないと安定的にサービスを提供できません。本ChapterではSpringBootで作成したアプリケーションを中心とした本番環境のシステム・アーキテクチャ構成について検討します。</p>
<h3 id="9-1-システム・アーキテクチャ考察"><a href="#9-1-システム・アーキテクチャ考察" class="headerlink" title="9.1 システム・アーキテクチャ考察"></a>9.1 システム・アーキテクチャ考察</h3><p>データベースを用いるSpringBootで作成したアプリケーションの場合、１つの仮想サーバーにアプリケーションおよびデータベースを構築することで、最小限の構成によるサービスの提供は可能</p>
<p>クラウドネイティブが常識となった現在では、クラウドベンダーが提供するマネージドサービスの特性を理解し、適切なアーキテクチャ設計を行う必要があります。</p>
<h4 id="システムが必要とする要件"><a href="#システムが必要とする要件" class="headerlink" title="システムが必要とする要件"></a>システムが必要とする要件</h4><ul>
<li>要件<ul>
<li>可用性：稼働率は99.9%以上を目標とすること</li>
<li>拡張性：スループットの増加に対して、サービスが低下しない性能を維持するための資源の追加が容易に行えること</li>
<li>完全性：データの操作にはACIDを保証し、データの堅牢性を実現すること</li>
</ul>
</li>
</ul>
<h4 id="システム要件の検討"><a href="#システム要件の検討" class="headerlink" title="システム要件の検討"></a>システム要件の検討</h4><ul>
<li><p>可用性</p>
<ul>
<li>システム構築ではSLAが明記されることが普通</li>
<li>サービス品質がSLAの保証値を著しく下回った場合には、ペナルティが発生することもあります。</li>
<li>SLAに可用性99.9%と記載されている場合、数値として年間にして９時間弱、月間にして４４分弱以内の停止しか許さないシステム構成を検討する必要がある</li>
</ul>
</li>
<li><p>拡張性</p>
<ul>
<li>システム構築では、サービス特性によりシステムへの負荷がばらついたり、突発的な高負荷が発生したりすることがあります。</li>
<li>可能な限りシステムリソースのスケールアウト及びスケールインできるように設計することが望ましいと言えます。</li>
</ul>
</li>
<li><p>完全性</p>
<ul>
<li>システム構築では、システムじの状態をRDBなどのデータストアに保管することが普通</li>
<li>システムで保管した情報資産が正当な権利を持たない人により変更されていないことを確実にしておくよう設計する必要があります。また、データの消失を防ぐための対策も実施していく必要があります</li>
</ul>
</li>
<li><p>コスト</p>
<ul>
<li>Capter8で解説したように、運用コストはシステム開発全体の3&#x2F;4以上のコストを締めます。<ul>
<li>システムリソースの運用コスト（ハードウェアコストやライセンスコストなど）</li>
<li>システム運用のコスト（人件費など）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="9-2-システム・アーキテクチャ案"><a href="#9-2-システム・アーキテクチャ案" class="headerlink" title="9.2 システム・アーキテクチャ案"></a>9.2 システム・アーキテクチャ案</h3><p>AWSを利用したアーキテクチャ例を記載している</p>
<h4 id="構成要素一覧"><a href="#構成要素一覧" class="headerlink" title="構成要素一覧"></a>構成要素一覧</h4><h4 id="可用性"><a href="#可用性" class="headerlink" title="可用性"></a>可用性</h4><h4 id="拡張性"><a href="#拡張性" class="headerlink" title="拡張性"></a>拡張性</h4><h4 id="コスト"><a href="#コスト" class="headerlink" title="コスト"></a>コスト</h4><h3 id="9-3-構築チュートリアル"><a href="#9-3-構築チュートリアル" class="headerlink" title="9.3 構築チュートリアル"></a>9.3 構築チュートリアル</h3><p>Teraformを利用した環境構築を紹介している</p>
<h2 id="第10章-Spring5-x2F-Spring-Boot2の新機能"><a href="#第10章-Spring5-x2F-Spring-Boot2の新機能" class="headerlink" title="第10章 Spring5&#x2F;Spring Boot2の新機能"></a>第10章 Spring5&#x2F;Spring Boot2の新機能</h2><p>2017年にリリースされたSpring5,2018年にリリースされたSpringBoot2の新機能のうち、<br>今後重要になると考えられるWebFluxについて説明</p>
<h3 id="10-1-WebFlux"><a href="#10-1-WebFlux" class="headerlink" title="10.1 WebFlux"></a>10.1 WebFlux</h3><p>HTTPを利用したシステムの範囲が拡大し、同時アクセスが増えていくにつれて、Webアプリケーションにおけるコンピュータリソースに対して待ちが多いことがわかってきました。<br>そのため非同期処理を用いたWebアプリケーションが求められる様になりました。その解決案の１つとしてリアクティブプログラミングが選ばれ、Srping5&#x2F;SpringBoot2においてはWebFlux飛ばれるリアクティブプログラミングを用いたWebプログラムを書くことができるようになりました。<br>このプログラムは同期ではないのでブロックされることなく、実施されてI&#x2F;O待ちのような状態にはならず、I&#x2F;Oが発生したタイミングで実施されることになります。</p>
<p>TODO:　実装ハードル高そう。色々考えること多いので後で見返す</p>
<h2 id="第11章-ローカル開発環境の構築について"><a href="#第11章-ローカル開発環境の構築について" class="headerlink" title="第11章 ローカル開発環境の構築について"></a>第11章 ローカル開発環境の構築について</h2><h2 id="第12章-サンプルアプリについて"><a href="#第12章-サンプルアプリについて" class="headerlink" title="第12章 サンプルアプリについて"></a>第12章 サンプルアプリについて</h2>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最終更新：<time datetime="2020-07-14T01:58:04.556Z" itemprop="dateUpdated">2020-07-14 10:58:04</time>
</span><br>


        
        thank you for your reading my article!!
        
    </div>
    
    <footer>
        <a href="http://yoursite.com">
            <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png" alt="t-tsutsui">
            t-tsutsui
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="https://tutttuwi.github.io/output-over-there/tags/%E6%95%99%E7%A7%91%E6%9B%B8/" rel="tag">教科書</a></li></ul>


            


        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="https://tutttuwi.github.io/output-over-there/JAVA/2020-06_Gradle%E5%BE%B9%E5%BA%95%E5%85%A5%E9%96%80_%E6%AC%A1%E4%B8%96%E4%BB%A3%E3%83%93%E3%83%AB%E3%83%89%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AB%E3%82%88%E3%82%8B%E8%87%AA%E5%8B%95%E5%8C%96%E5%9F%BA%E7%9B%A4%E3%81%AE%E6%A7%8B%E7%AF%89/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="https://tutttuwi.github.io/output-over-there/JAVA/2020-05_Spring%E5%BE%B9%E5%BA%95%E5%85%A5%E9%96%80/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Spring徹底入門</h4>
      </a>
    </div>
  
</nav>



    

















</article>



</div>

        <footer class="footer">
    <div class="top">
<!--        

        <p>
            
                <span><a href="https://tutttuwi.github.io/output-over-there/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>このブログの内容物は<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja">クリエイティブ・コモンズ 表示 - 非営利 - 継承 4.0 国際ライセンスの下に提供されています</a></span>
        </p> -->
    </div>
    <div class="bottom">
        <p><span>t-tsutsui &copy; 2015 - 2023</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: 'https://tutttuwi.github.io/output-over-there/', SHARE: false, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
