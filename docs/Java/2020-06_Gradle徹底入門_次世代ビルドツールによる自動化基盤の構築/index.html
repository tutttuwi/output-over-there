<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築 | OUTPUT*OVER-THERE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#264A2E">
    
    
    <meta name="keywords" content="教科書">
    <meta name="description" content="Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築理解したこと書籍情報形式：書籍発売日：2014年11月04日ISBN：9784798136431価格：本体3,800円＋税仕様：B5変・592ページ分類：プログラミング・開発シリーズ：徹底入門 日本語初のGradle解説書、ついに刊行！Groovyベースのビルドツール「Gradle」は、SpringやHibernateなどの著名なOSS">
<meta property="og:type" content="article">
<meta property="og:title" content="Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築">
<meta property="og:url" content="http://yoursite.com/JAVA/2020-06_Gradle%E5%BE%B9%E5%BA%95%E5%85%A5%E9%96%80_%E6%AC%A1%E4%B8%96%E4%BB%A3%E3%83%93%E3%83%AB%E3%83%89%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AB%E3%82%88%E3%82%8B%E8%87%AA%E5%8B%95%E5%8C%96%E5%9F%BA%E7%9B%A4%E3%81%AE%E6%A7%8B%E7%AF%89/index.html">
<meta property="og:site_name" content="OUTPUT*OVER-THERE">
<meta property="og:description" content="Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築理解したこと書籍情報形式：書籍発売日：2014年11月04日ISBN：9784798136431価格：本体3,800円＋税仕様：B5変・592ページ分類：プログラミング・開発シリーズ：徹底入門 日本語初のGradle解説書、ついに刊行！Groovyベースのビルドツール「Gradle」は、SpringやHibernateなどの著名なOSS">
<meta property="og:locale" content="ja_JP">
<meta property="article:published_time" content="2020-06-12T15:00:00.000Z">
<meta property="article:modified_time" content="2020-12-19T10:45:59.592Z">
<meta property="article:author" content="t-tsutsui">
<meta property="article:tag" content="教科書">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="OUTPUT*OVER-THERE" href="https://tutttuwi.github.io/output-over-there/atom.xml">
    
    <link rel="shortcut icon" href="https://tutttuwi.github.io/output-over-there/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(https://tutttuwi.github.io/output-over-there/img/brand.png)">
      <div class="brand">
        <a href="https://tutttuwi.github.io/output-over-there/" target="_blank" rel="noopener" class="avatar waves-effect waves-circle waves-light">
          <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">t-tsutsui</h5>
          <a href="mailto:t.tsutsui9117@gmail.com" title="t.tsutsui9117@gmail.com" class="mail">t.tsutsui9117@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/about" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-link"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/archives" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/tags" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/categories" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="検索">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-06-12T15:00:00.000Z" itemprop="datePublished" class="page-time">
  2020-06-13
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/JAVA/" target="_blank" rel="noopener">JAVA</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Gradle徹底入門-次世代ビルドツールによる自動化基盤の構築"><span class="post-toc-number">1.</span> <span class="post-toc-text">Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#理解したこと"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">理解したこと</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#書籍情報"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">書籍情報</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第1部［導入編］"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">第1部［導入編］</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第1章-Gradle-の世界"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">第1章 Gradle の世界</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-Gradleとは"><span class="post-toc-number">1.3.1.1.</span> <span class="post-toc-text">1.1 Gradleとは</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-1-ビルドツールとは"><span class="post-toc-number">1.3.1.2.</span> <span class="post-toc-text">1.1.1 ビルドツールとは</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-2-ビルドツールの歴史"><span class="post-toc-number">1.3.1.3.</span> <span class="post-toc-text">1.1.2 ビルドツールの歴史</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-3-Gradleの概要"><span class="post-toc-number">1.3.1.4.</span> <span class="post-toc-text">1.1.3 Gradleの概要</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-4-Gradleの事例"><span class="post-toc-number">1.3.1.5.</span> <span class="post-toc-text">1.1.4 Gradleの事例</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-なぜGradleなのか？"><span class="post-toc-number">1.3.1.6.</span> <span class="post-toc-text">1.2 なぜGradleなのか？</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-1-ビルドスクリプトの生産性の高さ"><span class="post-toc-number">1.3.1.7.</span> <span class="post-toc-text">1.2.1 ビルドスクリプトの生産性の高さ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-2-ビルド手順の制御の容易性"><span class="post-toc-number">1.3.1.8.</span> <span class="post-toc-text">1.2.2 ビルド手順の制御の容易性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-3-マルチプロジェクト対応"><span class="post-toc-number">1.3.1.9.</span> <span class="post-toc-text">1.2.3 マルチプロジェクト対応</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-4-部品化の手軽さ"><span class="post-toc-number">1.3.1.10.</span> <span class="post-toc-text">1.2.4 部品化の手軽さ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-5-個別インストール不要"><span class="post-toc-number">1.3.1.11.</span> <span class="post-toc-text">1.2.5 個別インストール不要</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-6-互換性への配慮"><span class="post-toc-number">1.3.1.12.</span> <span class="post-toc-text">1.2.6 互換性への配慮</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-他のビルドツールとの比較"><span class="post-toc-number">1.3.1.13.</span> <span class="post-toc-text">1.3 他のビルドツールとの比較</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-1-Make-vs-Gradle"><span class="post-toc-number">1.3.1.14.</span> <span class="post-toc-text">1.3.1 Make vs Gradle</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-2-Ant-vs-Gradle"><span class="post-toc-number">1.3.1.15.</span> <span class="post-toc-text">1.3.2 Ant vs Gradle</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-3-Maven-vs-Gradle"><span class="post-toc-number">1.3.1.16.</span> <span class="post-toc-text">1.3.3 Maven vs Gradle</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第2章-インストールと設定"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">第2章 インストールと設定</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-1-Gradleのインストール"><span class="post-toc-number">1.3.2.1.</span> <span class="post-toc-text">2.1 Gradleのインストール</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-1-1-前提条件"><span class="post-toc-number">1.3.2.2.</span> <span class="post-toc-text">2.1.1 前提条件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-1-2-GVMによるGradleのインストール"><span class="post-toc-number">1.3.2.3.</span> <span class="post-toc-text">2.1.2 GVMによるGradleのインストール</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-1-3-ZIPファイル展開によるインストール"><span class="post-toc-number">1.3.2.4.</span> <span class="post-toc-text">2.1.3 ZIPファイル展開によるインストール</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-2-基本的な設定と動作確認"><span class="post-toc-number">1.3.2.5.</span> <span class="post-toc-text">2.2 基本的な設定と動作確認</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-2-1-環境変数の設定"><span class="post-toc-number">1.3.2.6.</span> <span class="post-toc-text">2.2.1 環境変数の設定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-2-2-gradleコマンドの実行"><span class="post-toc-number">1.3.2.7.</span> <span class="post-toc-text">2.2.2 gradleコマンドの実行</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第3章-スタートアップGradle"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">第3章 スタートアップGradle</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-1-Groovy特有の文法"><span class="post-toc-number">1.3.3.1.</span> <span class="post-toc-text">3.1 Groovy特有の文法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-1-1-文字列"><span class="post-toc-number">1.3.3.2.</span> <span class="post-toc-text">3.1.1 文字列</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-1-2-メソッド呼び出し時のカッコ省略"><span class="post-toc-number">1.3.3.3.</span> <span class="post-toc-text">3.1.2 メソッド呼び出し時のカッコ省略</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-1-3-defによる型指定の省略"><span class="post-toc-number">1.3.3.4.</span> <span class="post-toc-text">3.1.3 defによる型指定の省略</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-1-4-クロージャ"><span class="post-toc-number">1.3.3.5.</span> <span class="post-toc-text">3.1.4 クロージャ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-2-Hello-Gradle-world"><span class="post-toc-number">1.3.3.6.</span> <span class="post-toc-text">3.2 Hello Gradle world</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-2-1-ビルドスクリプトの作成と実行"><span class="post-toc-number">1.3.3.7.</span> <span class="post-toc-text">3.2.1 ビルドスクリプトの作成と実行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-2-2-ビルドスクリプトと実行結果の解説"><span class="post-toc-number">1.3.3.8.</span> <span class="post-toc-text">3.2.2 ビルドスクリプトと実行結果の解説</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-2-3-組み込みタスク"><span class="post-toc-number">1.3.3.9.</span> <span class="post-toc-text">3.2.3 組み込みタスク</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-2-4-主要なコマンドラインオプション"><span class="post-toc-number">1.3.3.10.</span> <span class="post-toc-text">3.2.4 主要なコマンドラインオプション</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-3-プロジェクト自動生成とビルド"><span class="post-toc-number">1.3.3.11.</span> <span class="post-toc-text">3.3 プロジェクト自動生成とビルド</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-3-1-initタスクによるプロジェクト自動生成"><span class="post-toc-number">1.3.3.12.</span> <span class="post-toc-text">3.3.1 initタスクによるプロジェクト自動生成</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-3-2-ビルド実行と結果確認"><span class="post-toc-number">1.3.3.13.</span> <span class="post-toc-text">3.3.2 ビルド実行と結果確認</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-3-3-テスト実行と結果確認"><span class="post-toc-number">1.3.3.14.</span> <span class="post-toc-text">3.3.3 テスト実行と結果確認</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-4-Webアプリケーションのビルド"><span class="post-toc-number">1.3.3.15.</span> <span class="post-toc-text">3.4 Webアプリケーションのビルド</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-4-1-Webプロジェクトの作成"><span class="post-toc-number">1.3.3.16.</span> <span class="post-toc-text">3.4.1 Webプロジェクトの作成</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-4-3-WARファイルの生成"><span class="post-toc-number">1.3.3.17.</span> <span class="post-toc-text">3.4.3 WARファイルの生成</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-5-Gradleの便利な機能"><span class="post-toc-number">1.3.3.18.</span> <span class="post-toc-text">3.5 Gradleの便利な機能</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-5-1-Gradleデーモン"><span class="post-toc-number">1.3.3.19.</span> <span class="post-toc-text">3.5.1 Gradleデーモン</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-5-2-Gradleラッパー"><span class="post-toc-number">1.3.3.20.</span> <span class="post-toc-text">3.5.2 Gradleラッパー</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第2部［基礎編］"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">第2部［基礎編］</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第4章-Java-プロジェクトのビルド"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">第4章 Java プロジェクトのビルド</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-1-Javaプロジェクトになぜプラグインが必要なのか？"><span class="post-toc-number">1.4.1.1.</span> <span class="post-toc-text">4.1 Javaプロジェクトになぜプラグインが必要なのか？</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-Javaプラグインとは"><span class="post-toc-number">1.4.1.2.</span> <span class="post-toc-text">4.2 Javaプラグインとは</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-1-ソースセット"><span class="post-toc-number">1.4.1.3.</span> <span class="post-toc-text">4.2.1 ソースセット</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-2-タスク"><span class="post-toc-number">1.4.1.4.</span> <span class="post-toc-text">4.2.2 タスク</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-3-規約"><span class="post-toc-number">1.4.1.5.</span> <span class="post-toc-text">4.2.3 規約</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-4-プロパティ"><span class="post-toc-number">1.4.1.6.</span> <span class="post-toc-text">4.2.4 プロパティ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-3-Javaプロジェクトへの適用"><span class="post-toc-number">1.4.1.7.</span> <span class="post-toc-text">4.3 Javaプロジェクトへの適用</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-3-1-基本的なビルドの定義と実行"><span class="post-toc-number">1.4.1.8.</span> <span class="post-toc-text">4.3.1 基本的なビルドの定義と実行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-3-2-テストコードを含むビルドの定義と実行"><span class="post-toc-number">1.4.1.9.</span> <span class="post-toc-text">4.3.2 テストコードを含むビルドの定義と実行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-3-3-その他の作業"><span class="post-toc-number">1.4.1.10.</span> <span class="post-toc-text">4.3.3 その他の作業</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-4-Javaプラグインの詳細"><span class="post-toc-number">1.4.1.11.</span> <span class="post-toc-text">4.4 Javaプラグインの詳細</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-4-1-Javaプラグインのタスクの依存関係"><span class="post-toc-number">1.4.1.12.</span> <span class="post-toc-text">4.4.1 Javaプラグインのタスクの依存関係</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-4-2-つくの詳細"><span class="post-toc-number">1.4.1.13.</span> <span class="post-toc-text">4.4.2 つくの詳細</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-5-規約に合わないプロジェクトへの適用法"><span class="post-toc-number">1.4.1.14.</span> <span class="post-toc-text">4.5 規約に合わないプロジェクトへの適用法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-5-1-ディレクトリ構成の変更"><span class="post-toc-number">1.4.1.15.</span> <span class="post-toc-text">4.5.1 ディレクトリ構成の変更</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-5-2-コンフィグレーションによる依存関係の変更"><span class="post-toc-number">1.4.1.16.</span> <span class="post-toc-text">4.5.2 コンフィグレーションによる依存関係の変更</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-5-3-ソースセットの追加"><span class="post-toc-number">1.4.1.17.</span> <span class="post-toc-text">4.5.3 ソースセットの追加</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-6-Applicationプラグイン"><span class="post-toc-number">1.4.1.18.</span> <span class="post-toc-text">4.6 Applicationプラグイン</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-6-1-Applicationプラグインの利用方法"><span class="post-toc-number">1.4.1.19.</span> <span class="post-toc-text">4.6.1 Applicationプラグインの利用方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-6-2-ビルドスクリプトからのアプリケーション実行"><span class="post-toc-number">1.4.1.20.</span> <span class="post-toc-text">4.6.2 ビルドスクリプトからのアプリケーション実行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-6-3-アプリケーション実行用アーカイブの作成"><span class="post-toc-number">1.4.1.21.</span> <span class="post-toc-text">4.6.3 アプリケーション実行用アーカイブの作成</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-7-Warプラグイン"><span class="post-toc-number">1.4.1.22.</span> <span class="post-toc-text">4.7 Warプラグイン</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-7-1-Warプラグインの挙動"><span class="post-toc-number">1.4.1.23.</span> <span class="post-toc-text">4.7.1 Warプラグインの挙動</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-7-2-プロパティ"><span class="post-toc-number">1.4.1.24.</span> <span class="post-toc-text">4.7.2 プロパティ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-7-3-コンフィグレーション"><span class="post-toc-number">1.4.1.25.</span> <span class="post-toc-text">4.7.3 コンフィグレーション</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-7-4-warタスクの設定"><span class="post-toc-number">1.4.1.26.</span> <span class="post-toc-text">4.7.4 warタスクの設定</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第5章-Gradle-の基礎"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">第5章 Gradle の基礎</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-1-Gradleにおけるビルド"><span class="post-toc-number">1.4.2.1.</span> <span class="post-toc-text">5.1 Gradleにおけるビルド</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-1-1-ビルドとはなにか"><span class="post-toc-number">1.4.2.2.</span> <span class="post-toc-text">5.1.1 ビルドとはなにか</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-1-2-ビルドの入力情報"><span class="post-toc-number">1.4.2.3.</span> <span class="post-toc-text">5.1.2 ビルドの入力情報</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-1-3-ビルドの流れ"><span class="post-toc-number">1.4.2.4.</span> <span class="post-toc-text">5.1.3 ビルドの流れ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-2-アーキテクチャと主要な機能"><span class="post-toc-number">1.4.2.5.</span> <span class="post-toc-text">5.2 アーキテクチャと主要な機能</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-2-1-物理構造"><span class="post-toc-number">1.4.2.6.</span> <span class="post-toc-text">5.2.1 物理構造</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-2-2-実行基盤を支える仕組みと標準機能"><span class="post-toc-number">1.4.2.7.</span> <span class="post-toc-text">5.2.2 実行基盤を支える仕組みと標準機能</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-3-設定の自動ロード"><span class="post-toc-number">1.4.2.8.</span> <span class="post-toc-text">5.3 設定の自動ロード</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-3-1-初期化スクリプトによる設定"><span class="post-toc-number">1.4.2.9.</span> <span class="post-toc-text">5.3.1 初期化スクリプトによる設定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-3-2-プロパティファイルによる設定"><span class="post-toc-number">1.4.2.10.</span> <span class="post-toc-text">5.3.2 プロパティファイルによる設定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-プロジェクトの探索"><span class="post-toc-number">1.4.2.11.</span> <span class="post-toc-text">5.4 プロジェクトの探索</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-1-プロジェクト構成と探索の関係"><span class="post-toc-number">1.4.2.12.</span> <span class="post-toc-text">5.4.1 プロジェクト構成と探索の関係</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-4-2-設定スクリプトに基づいた構成の特定"><span class="post-toc-number">1.4.2.13.</span> <span class="post-toc-text">5.4.2 設定スクリプトに基づいた構成の特定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-5-タスクグラフ"><span class="post-toc-number">1.4.2.14.</span> <span class="post-toc-text">5.5 タスクグラフ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-5-1-タスクグラフの概要"><span class="post-toc-number">1.4.2.15.</span> <span class="post-toc-text">5.5.1 タスクグラフの概要</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-5-2-タスクグラフの制約"><span class="post-toc-number">1.4.2.16.</span> <span class="post-toc-text">5.5.2 タスクグラフの制約</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-ファイル操作"><span class="post-toc-number">1.4.2.17.</span> <span class="post-toc-text">5.6 ファイル操作</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-1-Gradle標準のファイル操作機能"><span class="post-toc-number">1.4.2.18.</span> <span class="post-toc-text">5.6.1 Gradle標準のファイル操作機能</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-2-単一ファイルの参照"><span class="post-toc-number">1.4.2.19.</span> <span class="post-toc-text">5.6.2 単一ファイルの参照</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-3-ファイルコレクションによるファイルの参照"><span class="post-toc-number">1.4.2.20.</span> <span class="post-toc-text">5.6.3 ファイルコレクションによるファイルの参照</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-4-ファイルツリーによるファイルの参照"><span class="post-toc-number">1.4.2.21.</span> <span class="post-toc-text">5.6.4 ファイルツリーによるファイルの参照</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-5-ファイルのコピー"><span class="post-toc-number">1.4.2.22.</span> <span class="post-toc-text">5.6.5 ファイルのコピー</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-6-ファイルの削除"><span class="post-toc-number">1.4.2.23.</span> <span class="post-toc-text">5.6.6 ファイルの削除</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-6-7-ディレクトリの作成"><span class="post-toc-number">1.4.2.24.</span> <span class="post-toc-text">5.6.7 ディレクトリの作成</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-7-ロギング"><span class="post-toc-number">1.4.2.25.</span> <span class="post-toc-text">5.7 ロギング</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-7-1-Gradleでのロギング"><span class="post-toc-number">1.4.2.26.</span> <span class="post-toc-text">5.7.1 Gradleでのロギング</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-7-2-loggerプロパティを使用したロギング"><span class="post-toc-number">1.4.2.27.</span> <span class="post-toc-text">5.7.2 loggerプロパティを使用したロギング</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-7-3-外部ロギングフレームワークとのマッピング"><span class="post-toc-number">1.4.2.28.</span> <span class="post-toc-text">5.7.3 外部ロギングフレームワークとのマッピング</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-7-4-ログレベルマッピングの変更"><span class="post-toc-number">1.4.2.29.</span> <span class="post-toc-text">5.7.4 ログレベルマッピングの変更</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第6章-スクリプトファイルの記述"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">第6章 スクリプトファイルの記述</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-1-スクリプトファイルの構造と共通要素"><span class="post-toc-number">1.4.3.1.</span> <span class="post-toc-text">6.1 スクリプトファイルの構造と共通要素</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-1-1-スクリプトファイルの構造"><span class="post-toc-number">1.4.3.2.</span> <span class="post-toc-text">6.1.1 スクリプトファイルの構造</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-1-2-スクリプトファイルの共通要素"><span class="post-toc-number">1.4.3.3.</span> <span class="post-toc-text">6.1.2 スクリプトファイルの共通要素</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-1-3-スクリプトブロックとドメインオブジェクト"><span class="post-toc-number">1.4.3.4.</span> <span class="post-toc-text">6.1.3 スクリプトブロックとドメインオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-1-4-主要なスクリプトブロック"><span class="post-toc-number">1.4.3.5.</span> <span class="post-toc-text">6.1.4 主要なスクリプトブロック</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-Gradleドメインオブジェクト"><span class="post-toc-number">1.4.3.6.</span> <span class="post-toc-text">6.2 Gradleドメインオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-1-Projectオブジェクト"><span class="post-toc-number">1.4.3.7.</span> <span class="post-toc-text">6.2.1 Projectオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-2-Taskオブジェクト"><span class="post-toc-number">1.4.3.8.</span> <span class="post-toc-text">6.2.2 Taskオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#主要なAPI"><span class="post-toc-number">1.4.3.9.</span> <span class="post-toc-text">主要なAPI</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-3-Gradleオブジェクト"><span class="post-toc-number">1.4.3.10.</span> <span class="post-toc-text">6.2.3 Gradleオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-4-Settingsオブジェクト"><span class="post-toc-number">1.4.3.11.</span> <span class="post-toc-text">6.2.4 Settingsオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-5-ExtensionAwareオブジェクト"><span class="post-toc-number">1.4.3.12.</span> <span class="post-toc-text">6.2.5 ExtensionAwareオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-6-ExtraPropertiesExtensionオブジェクト"><span class="post-toc-number">1.4.3.13.</span> <span class="post-toc-text">6.2.6 ExtraPropertiesExtensionオブジェクト</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-タスクの記述"><span class="post-toc-number">1.4.3.14.</span> <span class="post-toc-text">6.3 タスクの記述</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-1-タスクの定義方法"><span class="post-toc-number">1.4.3.15.</span> <span class="post-toc-text">6.3.1 タスクの定義方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-2-依存関係の定義方法"><span class="post-toc-number">1.4.3.16.</span> <span class="post-toc-text">6.3.2 依存関係の定義方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-3-タスクルールの定義方法"><span class="post-toc-number">1.4.3.17.</span> <span class="post-toc-text">6.3.3 タスクルールの定義方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-4-タスクの制御"><span class="post-toc-number">1.4.3.18.</span> <span class="post-toc-text">6.3.4 タスクの制御</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-5-タスクの上書き"><span class="post-toc-number">1.4.3.19.</span> <span class="post-toc-text">6.3.5 タスクの上書き</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-6-タスクの条件実行"><span class="post-toc-number">1.4.3.20.</span> <span class="post-toc-text">6.3.6 タスクの条件実行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-7-タスクの順序付け"><span class="post-toc-number">1.4.3.21.</span> <span class="post-toc-text">6.3.7 タスクの順序付け</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-8-ファイナライザータスク"><span class="post-toc-number">1.4.3.22.</span> <span class="post-toc-text">6.3.8 ファイナライザータスク</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-プラグインの記述"><span class="post-toc-number">1.4.3.23.</span> <span class="post-toc-text">6.4 プラグインの記述</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-1-Gradleにおけるプラグイン"><span class="post-toc-number">1.4.3.24.</span> <span class="post-toc-text">6.4.1 Gradleにおけるプラグイン</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-2-プラグインの適用方法"><span class="post-toc-number">1.4.3.25.</span> <span class="post-toc-text">6.4.2 プラグインの適用方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-マルチプロジェクトでのスクリプトファイルの記述"><span class="post-toc-number">1.4.3.26.</span> <span class="post-toc-text">6.5 マルチプロジェクトでのスクリプトファイルの記述</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-1-レイアウトと記述方法のバリエーション"><span class="post-toc-number">1.4.3.27.</span> <span class="post-toc-text">6.5.1 レイアウトと記述方法のバリエーション</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第7章-依存関係の管理"><span class="post-toc-number">1.4.4.</span> <span class="post-toc-text">第7章 依存関係の管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-1-依存関係管理の目的"><span class="post-toc-number">1.4.4.1.</span> <span class="post-toc-text">7.1 依存関係管理の目的</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-2-依存関係解決の自動化"><span class="post-toc-number">1.4.4.2.</span> <span class="post-toc-text">7.2 依存関係解決の自動化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-2-1-コンフィグレーション"><span class="post-toc-number">1.4.4.3.</span> <span class="post-toc-text">7.2.1 コンフィグレーション</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-2-2-依存関係の定義"><span class="post-toc-number">1.4.4.4.</span> <span class="post-toc-text">7.2.2 依存関係の定義</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-2-3-コンフィグレーションの継承"><span class="post-toc-number">1.4.4.5.</span> <span class="post-toc-text">7.2.3 コンフィグレーションの継承</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-2-4-リポジトリ定義"><span class="post-toc-number">1.4.4.6.</span> <span class="post-toc-text">7.2.4 リポジトリ定義</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-2-5-動的バージョンと変更性モジュール"><span class="post-toc-number">1.4.4.7.</span> <span class="post-toc-text">7.2.5 動的バージョンと変更性モジュール</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-3-推移的な依存関係の管理"><span class="post-toc-number">1.4.4.8.</span> <span class="post-toc-text">7.3 推移的な依存関係の管理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-3-1-競合の解決"><span class="post-toc-number">1.4.4.9.</span> <span class="post-toc-text">7.3.1 競合の解決</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-3-2-推移的な依存関係の除外設定"><span class="post-toc-number">1.4.4.10.</span> <span class="post-toc-text">7.3.2 推移的な依存関係の除外設定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-3-3-使用するバージョンの強制"><span class="post-toc-number">1.4.4.11.</span> <span class="post-toc-text">7.3.3 使用するバージョンの強制</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#クライアントモジュール依存関係"><span class="post-toc-number">1.4.4.12.</span> <span class="post-toc-text">クライアントモジュール依存関係</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-4-使用しているモジュールの調査"><span class="post-toc-number">1.4.4.13.</span> <span class="post-toc-text">7.4 使用しているモジュールの調査</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-5-キャッシュ制御とオフライン実行"><span class="post-toc-number">1.4.4.14.</span> <span class="post-toc-text">7.5 キャッシュ制御とオフライン実行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-5-1-キャッシュ制御"><span class="post-toc-number">1.4.4.15.</span> <span class="post-toc-text">7.5.1 キャッシュ制御</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-5-2-オフライン実行"><span class="post-toc-number">1.4.4.16.</span> <span class="post-toc-text">7.5.2 オフライン実行</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第3部［実践編］"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">第3部［実践編］</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第8章-Gradle-でのテスト"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">第8章 Gradle でのテスト</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-1-テストの自動化とビルドツール"><span class="post-toc-number">1.5.1.1.</span> <span class="post-toc-text">8.1 テストの自動化とビルドツール</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-1-1-テストを取り巻く状況"><span class="post-toc-number">1.5.1.2.</span> <span class="post-toc-text">8.1.1 テストを取り巻く状況</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-1-2-自動テスト似おけるビルドツールの要件"><span class="post-toc-number">1.5.1.3.</span> <span class="post-toc-text">8.1.2 自動テスト似おけるビルドツールの要件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-2-Gradleによるアプローチ"><span class="post-toc-number">1.5.1.4.</span> <span class="post-toc-text">8.2 Gradleによるアプローチ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-2-1-環境差異の吸収"><span class="post-toc-number">1.5.1.5.</span> <span class="post-toc-text">8.2.1 環境差異の吸収</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-2-2-特定の範囲でテストを実行できること"><span class="post-toc-number">1.5.1.6.</span> <span class="post-toc-text">8.2.2 特定の範囲でテストを実行できること</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-2-3-スローテスト対策"><span class="post-toc-number">1.5.1.7.</span> <span class="post-toc-text">8.2.3 スローテスト対策</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第9章-Android-プロジェクトでの適用"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">第9章 Android プロジェクトでの適用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第10章-統合開発環境（IDE）との連携"><span class="post-toc-number">1.5.3.</span> <span class="post-toc-text">第10章 統合開発環境（IDE）との連携</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第4部発展編"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">第4部発展編</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第11章-Jenkins-との連携"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">第11章 Jenkins との連携</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第12章-アーカイブの作成とファイルの公開"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">第12章 アーカイブの作成とファイルの公開</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第13章-エキスパートへの道"><span class="post-toc-number">1.6.3.</span> <span class="post-toc-text">第13章 エキスパートへの道</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第14章-ほかのビルドツールからの移行"><span class="post-toc-number">1.6.4.</span> <span class="post-toc-text">第14章 ほかのビルドツールからの移行</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#付録-Gradleリファレンス"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">付録 Gradleリファレンス</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-2020-06_Gradle徹底入門_次世代ビルドツールによる自動化基盤の構築"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-06-13 00:00:00" datetime="2020-06-12T15:00:00.000Z"  itemprop="datePublished">2020-06-13</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/JAVA/" target="_blank" rel="noopener">JAVA</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Gradle徹底入門-次世代ビルドツールによる自動化基盤の構築"><a href="#Gradle徹底入門-次世代ビルドツールによる自動化基盤の構築" class="headerlink" title="Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築"></a>Gradle徹底入門 次世代ビルドツールによる自動化基盤の構築</h1><h2 id="理解したこと"><a href="#理解したこと" class="headerlink" title="理解したこと"></a>理解したこと</h2><h2 id="書籍情報"><a href="#書籍情報" class="headerlink" title="書籍情報"></a>書籍情報</h2><p>形式：書籍<br>発売日：2014年11月04日<br>ISBN：9784798136431<br>価格：本体3,800円＋税<br>仕様：B5変・592ページ<br>分類：プログラミング・開発<br>シリーズ：徹底入門</p>
<p>日本語初のGradle解説書、ついに刊行！<br>Groovyベースのビルドツール「Gradle」は、SpringやHibernateなどの著名なOSSで利用されているほか、Androidの公式ビルドツールとして採用されており、これからの開発者やビルド職人には無視することのできないツールのひとつと言えるでしょう。<br>本書は、GradleのインストールからJavaアプリケーションのビルドやテスト、依存関係の管理、ビルド成果物の公開などのGradleの主要な機能の解説に加え、詳細なスクリプトファイルの記述方法からCIツールやIDEとの連携といった実業務で必要となる範囲までをカバーした日本語初のGradleの解説書となります。<br>有識者によるGradle 2.0ベース（1.x系ベースの章や2.1のトピックなどもあります）で書き下ろされた500ページを超える本書は「徹底入門」の名に恥じない内容で、これだけ充実したGradle解説書は、日本語ではもちろん英語でも類を見ません。<br>これからGradleを始める人、Gradleをもっと使いこなしたい人、GradleとJenkinsでCIをやりたい人、AntやMavenからの移行を考えている人…などなど、多くの開発者やビルド職人にお勧めできる一冊です。</p>
<ul>
<li>サンプルコード<ul>
<li><a href="https://www.shoeisha.co.jp/book/download/9784798136431/detail" target="_blank" rel="noopener">https://www.shoeisha.co.jp/book/download/9784798136431/detail</a></li>
</ul>
</li>
</ul>
<h2 id="第1部［導入編］"><a href="#第1部［導入編］" class="headerlink" title="第1部［導入編］"></a>第1部［導入編］</h2><h3 id="第1章-Gradle-の世界"><a href="#第1章-Gradle-の世界" class="headerlink" title="第1章 Gradle の世界"></a>第1章 Gradle の世界</h3><h4 id="1-1-Gradleとは"><a href="#1-1-Gradleとは" class="headerlink" title="1.1 Gradleとは"></a>1.1 Gradleとは</h4><ul>
<li><p>次世代のビルドツールとして注目を集めているオープンソースのプロダクト</p>
</li>
<li><p>Gradleが注目されている理由</p>
<ul>
<li>既存のビルドツールに比べて優れている点が多い</li>
<li>Gradleのビルドスクリプトは非常にシンプルに記述できるという点</li>
<li>具体的には本書を読みすすめると実感できる</li>
</ul>
</li>
<li><p>NOTE</p>
<ul>
<li>特に、肥大したAntのビルドすくリプの保守に苦労された方や、Mavenに入門しようとしたものの敷居の高さに挫折した方にはおすすめ</li>
</ul>
</li>
<li><p>もう１つの利点</p>
<ul>
<li>AntやMaavenといった既存のビルドツールのエコシステムを最大限活用しているという点がある</li>
<li>Gradleは既存のAntタスクやAntビルドスクリプト、さたにMavenリポジトリを利用できるので、過去に蓄積してきた資産は無駄にならない</li>
<li>それらの資産を最大限利用して段階的にGradleに移行していくことが可能</li>
</ul>
</li>
</ul>
<h4 id="1-1-1-ビルドツールとは"><a href="#1-1-1-ビルドツールとは" class="headerlink" title="1.1.1 ビルドツールとは"></a>1.1.1 ビルドツールとは</h4><ul>
<li>ビルドツールとは<ul>
<li>定型的な作業を自動化するためのソフトウェア</li>
</ul>
</li>
</ul>
<h4 id="1-1-2-ビルドツールの歴史"><a href="#1-1-2-ビルドツールの歴史" class="headerlink" title="1.1.2 ビルドツールの歴史"></a>1.1.2 ビルドツールの歴史</h4><ul>
<li><p>ビルドツールの進化は比較的緩やかですが、時代とともに着実に発展しています。</p>
</li>
<li><p>ここでは、その進化の流れをたどってみたいと思います。</p>
</li>
<li><p>元祖ビルドツールMake</p>
<ul>
<li>元祖はUnix系OSにおけるMakeといって差し支えない</li>
</ul>
</li>
<li><p>JavaのためのビルドツールAnt</p>
<ul>
<li>Antは当時流行のJavaとXMLを採用することで、Makeの弱点であったプラットフォーム依存から脱却することに成功</li>
<li>シンプルで使いやすい反面、ちょっと複雑なことをしようとするとビルドスクリプトが長大になる</li>
<li>メンテナンスが困難になる</li>
<li>ライブラリの依存関係を管理する仕組みが無い</li>
</ul>
</li>
<li><p>ビルドツールの革新者Maven</p>
<ul>
<li>JavaとXMLによるプラットフォーム独立のアーキテクチャはAntと同じですが、ビルドツールにビルドライフサイクルとプロジェクトオブジェクトモデル（POM）という概念を持ち込むことで、Antの弱点であったビルドスクリプトの冗長化を解消</li>
<li>また、POMにメタデータをもたせることで、ライブラリの依存関係を自動的に解決する仕組みを構築することに成功</li>
</ul>
</li>
<li><p>そしてGradleへ</p>
</li>
</ul>
<h4 id="1-1-3-Gradleの概要"><a href="#1-1-3-Gradleの概要" class="headerlink" title="1.1.3 Gradleの概要"></a>1.1.3 Gradleの概要</h4><ul>
<li><p>GradleプロジェクトのWebサイトでは、Gradleとは、Build Automation Evolved すなわち、「ビルド自動化ツールの進化系」であると紹介されている</p>
</li>
<li><p>Gradleの特徴</p>
<ul>
<li>拡張可能なGradleビルド言語（GSL）の提供</li>
<li>ビルドの分割や共通部品抽出などの体系化の容易さ</li>
<li>IDEなどと連携するため、Gradleを外部からコントロールするためのAPIを提供</li>
<li>インクリメンタルビルドや並列ビルドなどでビルドを効率化</li>
<li>マルチプロジェクトサポートの柔軟性</li>
<li>Maven&#x2F;Ivyリポジトリからローカルファイルシステムまで多用な依存関係管理手法に対応</li>
<li>Antタスクだけでなく、Antプロジェクト全体とのインテグレーションに対応</li>
<li>ビルドスクリプトの記述言語としてGroovyを利用</li>
<li>GradleラッパーによってGradleがインストールされていない環境でもビルドが実行可能</li>
<li>互換性への配慮</li>
</ul>
</li>
<li><p>Gradle User Guid</p>
<ul>
<li><a href="http://www.gradle.org/documentation" target="_blank" rel="noopener">http://www.gradle.org/documentation</a></li>
</ul>
</li>
<li><p>Gradleユーザーガイド（日本語翻訳版）</p>
<ul>
<li><a href="http://gradle.monochromeroad.com/docs/" target="_blank" rel="noopener">http://gradle.monochromeroad.com/docs/</a></li>
</ul>
</li>
</ul>
<h4 id="1-1-4-Gradleの事例"><a href="#1-1-4-Gradleの事例" class="headerlink" title="1.1.4 Gradleの事例"></a>1.1.4 Gradleの事例</h4><ul>
<li>Gradleが普及している例が紹介されている</li>
<li>AntやMavenと比較するとIDE連携やアプリケーションサーバー連携などが課題らしい</li>
</ul>
<h4 id="1-2-なぜGradleなのか？"><a href="#1-2-なぜGradleなのか？" class="headerlink" title="1.2 なぜGradleなのか？"></a>1.2 なぜGradleなのか？</h4><h4 id="1-2-1-ビルドスクリプトの生産性の高さ"><a href="#1-2-1-ビルドスクリプトの生産性の高さ" class="headerlink" title="1.2.1 ビルドスクリプトの生産性の高さ"></a>1.2.1 ビルドスクリプトの生産性の高さ</h4><ul>
<li><p>GradleはMavenと同じく、規約ベースのビルドというアプローチを採用している</p>
</li>
<li><p>これにより、規約に従ったプロジェクト構造（ディレクトリ構造）を使う限りにおいては、ビルドスクリプトの記述を大幅に省略可能</p>
</li>
<li><p>GradleはJVM言語であるGroovyをベースに構築されている</p>
</li>
<li><p>GroovyはJavaにはない、リストリテラル&#x2F;マップリテラル&#x2F;クロージャといった機能が使える</p>
</li>
<li><p>GradleはたんにGroovyの文法を利用するだけでなく、ビルドスクリプトをより簡潔に記述するための独自の文法（DSL）も提供している</p>
</li>
<li><p>NOTE</p>
<ul>
<li>XMLは静的な構造を表現することは得意ですが、ビルドスクリプトのような手順（手続き）を表現することには適していない</li>
</ul>
</li>
</ul>
<h4 id="1-2-2-ビルド手順の制御の容易性"><a href="#1-2-2-ビルド手順の制御の容易性" class="headerlink" title="1.2.2 ビルド手順の制御の容易性"></a>1.2.2 ビルド手順の制御の容易性</h4><ul>
<li>Mavenの偉大な業績として<ul>
<li>大半のプロジェクトに適用できる標準的なビルド手順</li>
<li>メタデータによるビルド手順の制御<ul>
<li>という考え方を導入し、それを実現する具体的なアイデアとしてPOMを導入したことが挙げられる</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="1-2-3-マルチプロジェクト対応"><a href="#1-2-3-マルチプロジェクト対応" class="headerlink" title="1.2.3 マルチプロジェクト対応"></a>1.2.3 マルチプロジェクト対応</h4><ul>
<li><p>サブプロジェクトに共通するビルドの設定など</p>
<ul>
<li>マルチプロジェクトに含めるサブプロジェクトを定義する機能</li>
<li>サブプロジェクトに共通のビルドスクリプトを集約する機能</li>
<li>サブプロジェクト間の依存関係を定義する機能</li>
<li>依存関係を考慮してインクリメンタルビルドする機能</li>
</ul>
</li>
<li><p>機能を列挙してみるとやや複雑そうな印象を受けますが、実際のビルドスクリプトは非常にシンプル</p>
</li>
<li><p>HibernateがGradleに乗り換えた理由も「マルチプロジェクト対応が優秀だったから」だそう</p>
</li>
</ul>
<h4 id="1-2-4-部品化の手軽さ"><a href="#1-2-4-部品化の手軽さ" class="headerlink" title="1.2.4 部品化の手軽さ"></a>1.2.4 部品化の手軽さ</h4><ul>
<li>部品化も簡単だよーという説明</li>
</ul>
<h4 id="1-2-5-個別インストール不要"><a href="#1-2-5-個別インストール不要" class="headerlink" title="1.2.5 個別インストール不要"></a>1.2.5 個別インストール不要</h4><ul>
<li><p>AntやMavenを使う際には、利用者の環境にインストールしなければならない</p>
</li>
<li><p>ことのあるバージョンを導入してしまう可能性がある</p>
</li>
<li><p>このような問題に対処するために、GradleはGradleラッパーという仕組みを提供している</p>
</li>
<li><p>Gradleラッパーはプロジェクト内にGradleのブートストラップを仕込むことで、指定されたバージョンのGradleを必要に応じて自動的にインストールして実行してくれる機能</p>
</li>
<li><p>使い方は簡単で、あらかじめGradleのwrapperタスクを実行してブートストラップを生成しておくだけです。</p>
</li>
<li><p>それをそのままSubversionやGitなどのバージョン管理システムに登録しておけば、利用者はバージョン管理システムからプロジェクトをチェックアウトし、gradlewコマンドを実行するだけで、Gradleのバイナリがダウンロードされ、ビルドが行われます。</p>
</li>
<li><p>Note</p>
<ul>
<li>このGradleラッパーは優れたアイデアで、最近のビルドツールは同様にインストールレスで使えるようにしているものが増えてきているそう</li>
</ul>
</li>
</ul>
<h4 id="1-2-6-互換性への配慮"><a href="#1-2-6-互換性への配慮" class="headerlink" title="1.2.6 互換性への配慮"></a>1.2.6 互換性への配慮</h4><ul>
<li><p>互換性への方針</p>
<ul>
<li>既存の機能が突然使えなくなるような変更は行わない</li>
<li>機能を除去する場合は、将来的に廃止される可能性を明示して段階的に除去する</li>
<li>新機能は十分なフィードバックを受けて安定してから固定化する</li>
</ul>
</li>
<li><p>ライフサイクル</p>
<ul>
<li>非公開</li>
<li>実験的</li>
<li>公開</li>
<li>廃止</li>
</ul>
</li>
</ul>
<h4 id="1-3-他のビルドツールとの比較"><a href="#1-3-他のビルドツールとの比較" class="headerlink" title="1.3 他のビルドツールとの比較"></a>1.3 他のビルドツールとの比較</h4><h4 id="1-3-1-Make-vs-Gradle"><a href="#1-3-1-Make-vs-Gradle" class="headerlink" title="1.3.1 Make vs Gradle"></a>1.3.1 Make vs Gradle</h4><ul>
<li>優位性<ul>
<li>クロスプラットフォーム対応</li>
<li>依存関係解決の機能</li>
</ul>
</li>
</ul>
<h4 id="1-3-2-Ant-vs-Gradle"><a href="#1-3-2-Ant-vs-Gradle" class="headerlink" title="1.3.2 Ant vs Gradle"></a>1.3.2 Ant vs Gradle</h4><ul>
<li>優位性<ul>
<li>依存関係解決の機能</li>
<li>規約が無いため再利用性が損なわれる</li>
<li>基本機能がシンプルであるがゆえに複雑なことをしようとすると冗長になる</li>
</ul>
</li>
</ul>
<h4 id="1-3-3-Maven-vs-Gradle"><a href="#1-3-3-Maven-vs-Gradle" class="headerlink" title="1.3.3 Maven vs Gradle"></a>1.3.3 Maven vs Gradle</h4><h3 id="第2章-インストールと設定"><a href="#第2章-インストールと設定" class="headerlink" title="第2章 インストールと設定"></a>第2章 インストールと設定</h3><h4 id="2-1-Gradleのインストール"><a href="#2-1-Gradleのインストール" class="headerlink" title="2.1 Gradleのインストール"></a>2.1 Gradleのインストール</h4><h4 id="2-1-1-前提条件"><a href="#2-1-1-前提条件" class="headerlink" title="2.1.1 前提条件"></a>2.1.1 前提条件</h4><p>Gradleを利用するためにはJDK6以上が必要<br>Gradleは内部にGroovyのライブラリをバンドルしているので、別途Groovyをインストールする必要はない</p>
<h4 id="2-1-2-GVMによるGradleのインストール"><a href="#2-1-2-GVMによるGradleのインストール" class="headerlink" title="2.1.2 GVMによるGradleのインストール"></a>2.1.2 GVMによるGradleのインストール</h4><ul>
<li>MacOSXやLinux、CygwinなどでBashが使える環境であれば、</li>
<li>おすすめのインストール方法はGVM（the Groovy enVironment Manager）を利用することです。</li>
<li>GVMとは、GroovyやGrailsなどいわゆるGroovyエコシステムに付随するプロダクトのインストールやアップデートを一元的に行うためのツール</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 事前準備</span><br><span class="line">// curl と unzipは使えること</span><br><span class="line"></span><br><span class="line">// GVMのインストール</span><br><span class="line">curl -s get.gvm.net | bash</span><br><span class="line"></span><br><span class="line">// プロキシ設定されていたら</span><br><span class="line"><span class="built_in">export</span> http_proxy = htpp://&lt;proxyhost&gt;:&lt;port&gt;/</span><br><span class="line"></span><br><span class="line">// インストール後は、 `~/.bashrc`が書き換えられ、GVMが利用可能な状態になるので</span><br><span class="line">// .<span class="built_in">source</span> ~/.gvm/bin/gvm-init.sh を実行して環境設定を更新してください</span><br><span class="line"></span><br><span class="line">// インストールされていることを確認</span><br><span class="line">gvm <span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">// GVMのオフラインモード切り替え</span><br><span class="line">gvm offline <span class="built_in">enable</span></span><br><span class="line">gvm offline <span class="built_in">disable</span></span><br><span class="line"></span><br><span class="line">// Gradleのインストール</span><br><span class="line">gvm install gradle</span><br><span class="line"></span><br><span class="line">// インストール可能なGradleのバージョン確認</span><br><span class="line">gvm list gradle</span><br><span class="line">gvm install gradle &lt;version&gt;</span><br><span class="line"></span><br><span class="line">// 複数のバージョンのGradleをインストールしている場合切り替えることができる</span><br><span class="line">gvm default gradle &lt;version&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-3-ZIPファイル展開によるインストール"><a href="#2-1-3-ZIPファイル展開によるインストール" class="headerlink" title="2.1.3 ZIPファイル展開によるインストール"></a>2.1.3 ZIPファイル展開によるインストール</h4><ul>
<li>Windowsのインストール方法を説明</li>
</ul>
<h4 id="2-2-基本的な設定と動作確認"><a href="#2-2-基本的な設定と動作確認" class="headerlink" title="2.2 基本的な設定と動作確認"></a>2.2 基本的な設定と動作確認</h4><h4 id="2-2-1-環境変数の設定"><a href="#2-2-1-環境変数の設定" class="headerlink" title="2.2.1 環境変数の設定"></a>2.2.1 環境変数の設定</h4><ul>
<li><p>環境設定</p>
<ul>
<li>gradleコマンドへパスが通っていること</li>
<li>java コマンドが実行できること</li>
</ul>
</li>
<li><p>JAVA_OPTS、GRADLE_OPTSの設定についても言及</p>
</li>
</ul>
<h4 id="2-2-2-gradleコマンドの実行"><a href="#2-2-2-gradleコマンドの実行" class="headerlink" title="2.2.2 gradleコマンドの実行"></a>2.2.2 gradleコマンドの実行</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle -v</span><br></pre></td></tr></table></figure>

<h3 id="第3章-スタートアップGradle"><a href="#第3章-スタートアップGradle" class="headerlink" title="第3章 スタートアップGradle"></a>第3章 スタートアップGradle</h3><h4 id="3-1-Groovy特有の文法"><a href="#3-1-Groovy特有の文法" class="headerlink" title="3.1 Groovy特有の文法"></a>3.1 Groovy特有の文法</h4><p>Gradleのビルドスクリプトは、実際にはGroovyのスクリプト<br>しかし、Gradleの提供するDSLのおかげで、Groovyのことはあまり意識せずにビルドスクリプトが記述できるようになっている<br>Groovyの文法はJavaと互換性があるので、Javaを知っていれば文法的に難解な箇所はそれほどないでしょう</p>
<p>とはいえ、Groovy特有の文法を知らないと、Gradleのビルドスクリプトを読み書きするのが難しいのも事実<br>Gradleでよく使われるものに絞って文法を説明</p>
<h4 id="3-1-1-文字列"><a href="#3-1-1-文字列" class="headerlink" title="3.1.1 文字列"></a>3.1.1 文字列</h4><p>文字列の表記方法として大きく２通りの方法が利用できる</p>
<ul>
<li>シングルクォート：Javaの文字列とほぼ同等の利用方法</li>
<li>ダブルクォート：文字列の内部に$記号で動的な内容を埋め込むことができる。内部的には、GroovyのGStringというクラスが使われる</li>
</ul>
<h4 id="3-1-2-メソッド呼び出し時のカッコ省略"><a href="#3-1-2-メソッド呼び出し時のカッコ省略" class="headerlink" title="3.1.2 メソッド呼び出し時のカッコ省略"></a>3.1.2 メソッド呼び出し時のカッコ省略</h4><h4 id="3-1-3-defによる型指定の省略"><a href="#3-1-3-defによる型指定の省略" class="headerlink" title="3.1.3 defによる型指定の省略"></a>3.1.3 defによる型指定の省略</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 型を指定した変数定義</span></span><br><span class="line">String name = <span class="string">'John'</span></span><br><span class="line"><span class="comment">// 型を省略下変数定義</span></span><br><span class="line"><span class="keyword">def</span> name = <span class="string">'John'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Javaにおいて、Object型を指定した場合と同等になる</span></span><br><span class="line"><span class="comment">// ただし、Groovyの場合はダックタイピングの機能があるため、型としてdefを指定した場合でもオブジェクトのメソッドやプロパティは参照できる</span></span><br></pre></td></tr></table></figure>

<h4 id="3-1-4-クロージャ"><a href="#3-1-4-クロージャ" class="headerlink" title="3.1.4 クロージャ"></a>3.1.4 クロージャ</h4><p>Groovyは言語機能としてクロージャを提供している<br>Java8で導入されたラムダや、他のプログラム言語で言うところの関数オブジェクトのようなものと理解しておいて</p>
<p>クロージャは中括弧を利用して定義し、&lt;クロージャ名&gt;.call()または、通常のメソッド呼び出しと同様に&lt;クロージャ名&gt;()で実行できる</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// クロージャ定義</span></span><br><span class="line"><span class="keyword">def</span> clos1 = &#123; mes -&gt; println <span class="string">"Hi, $mes"</span>&#125;</span><br><span class="line"><span class="comment">// 引数と省略した場合は、暗黙引数itを利用</span></span><br><span class="line"><span class="keyword">def</span> clos2 = &#123; println <span class="string">"Hi, $it"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// クロージャ実行</span></span><br><span class="line">clos1.call(<span class="string">'John'</span>)</span><br><span class="line">clos2(<span class="string">'Bob'</span>)</span><br><span class="line"><span class="comment">// メソッド呼び出しと同様にカッコ省略可能</span></span><br><span class="line">clos2 <span class="string">'Alice'</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Gradleはクロージャを多用しており、例えば次のようなタスク定義はクロージャによって実現されている</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task hello &lt;&lt; &#123;</span><br><span class="line">  println <span class="string">'Hello Gradle world!'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上記を個別に定義した場合は下記のようになる</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// タスクへ追加する処理をクロージャとして定義</span></span><br><span class="line"><span class="keyword">def</span> clos = &#123; println <span class="string">'Hello Gradle world!'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// タスクを定義</span></span><br><span class="line">task hello &#123;&#125;</span><br><span class="line"><span class="comment">// タスクにクロージャを追加</span></span><br><span class="line"><span class="comment">// &lt;&lt; は leftShift()の省略形なので以下と等価</span></span><br><span class="line">hello.leftShift(clos)</span><br></pre></td></tr></table></figure>

<h4 id="3-2-Hello-Gradle-world"><a href="#3-2-Hello-Gradle-world" class="headerlink" title="3.2 Hello Gradle world"></a>3.2 Hello Gradle world</h4><h4 id="3-2-1-ビルドスクリプトの作成と実行"><a href="#3-2-1-ビルドスクリプトの作成と実行" class="headerlink" title="3.2.1 ビルドスクリプトの作成と実行"></a>3.2.1 ビルドスクリプトの作成と実行</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> hello <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">println</span> <span class="string">'Hello Gradle world!'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">task</span> hello2 <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">println</span> <span class="string">'Hello Gradle world!(hello2)'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// doLast欠かないとConfigure扱いになって起動時に処理はしるらしい</span></span><br></pre></td></tr></table></figure>

<ul>
<li>MEMO: Gradle3以降ぐらいから、leftShiftが非推奨になりつかなくなった様子<ul>
<li>代わりにdoLastを使うのだとか<a href="https://qiita.com/ossan_pg/items/608134f44ccf4542edf2" target="_blank" rel="noopener">https://qiita.com/ossan_pg/items/608134f44ccf4542edf2</a></li>
</ul>
</li>
</ul>
<h4 id="3-2-2-ビルドスクリプトと実行結果の解説"><a href="#3-2-2-ビルドスクリプトと実行結果の解説" class="headerlink" title="3.2.2 ビルドスクリプトと実行結果の解説"></a>3.2.2 ビルドスクリプトと実行結果の解説</h4><ul>
<li>実行結果について説明しているだけ</li>
</ul>
<h4 id="3-2-3-組み込みタスク"><a href="#3-2-3-組み込みタスク" class="headerlink" title="3.2.3 組み込みタスク"></a>3.2.3 組み込みタスク</h4><p>Gradleはビルドスクリプトで特に何も指定していなくても利用可能なタスクを提供している<br>これらのタスクのことを「組み込みタスク（built-in tasks）」と呼びます<br>タスクの一覧はgradle tasks で確認できる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">E:\XXX_POKET\<span class="number">020</span>_資格・学習\JAVA\<span class="number">20200613</span>_Gradle徹底入門\practice\chap3&gt;gradle tasks</span><br><span class="line"></span><br><span class="line">&gt; <span class="keyword">Task</span> :tasks</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Tasks runnable <span class="keyword">from</span> root <span class="keyword">project</span></span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Build Setup tasks</span><br><span class="line">-----------------</span><br><span class="line">init - Initializes a <span class="keyword">new</span> Gradle build.</span><br><span class="line">wrapper - Generates Gradle wrapper files.</span><br><span class="line"></span><br><span class="line">Help tasks</span><br><span class="line">----------</span><br><span class="line">buildEnvironment - Displays all <span class="keyword">buildscript</span> <span class="keyword">dependencies</span> declared in root <span class="keyword">project</span> <span class="string">'chap3'</span>.</span><br><span class="line">components - Displays the components produced by root <span class="keyword">project</span> <span class="string">'chap3'</span>. [incubating]</span><br><span class="line"><span class="keyword">dependencies</span> - Displays all <span class="keyword">dependencies</span> declared in root <span class="keyword">project</span> <span class="string">'chap3'</span>.</span><br><span class="line">dependencyInsight - Displays the insight <span class="keyword">into</span> a specific dependency in root <span class="keyword">project</span> <span class="string">'chap3'</span>.</span><br><span class="line">dependentComponents - Displays the dependent components of components in root <span class="keyword">project</span> <span class="string">'chap3'</span>. [incubating]</span><br><span class="line">help - Displays a help message.</span><br><span class="line">model - Displays the configuration model of root <span class="keyword">project</span> <span class="string">'chap3'</span>. [incubating]</span><br><span class="line">projects - Displays the sub-projects of root <span class="keyword">project</span> <span class="string">'chap3'</span>.</span><br><span class="line">properties - Displays the properties of root <span class="keyword">project</span> <span class="string">'chap3'</span>.</span><br><span class="line">tasks - Displays the tasks runnable <span class="keyword">from</span> root <span class="keyword">project</span> <span class="string">'chap3'</span>.</span><br><span class="line"></span><br><span class="line">To see all tasks and more detail, run gradle tasks --all</span><br><span class="line"></span><br><span class="line">To see more detail about a <span class="keyword">task</span>, run gradle help --<span class="keyword">task</span> &lt;<span class="keyword">task</span>&gt;</span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL in <span class="number">1</span>s</span><br><span class="line"><span class="number">1</span> actionable <span class="keyword">task</span>: <span class="number">1</span> executed</span><br></pre></td></tr></table></figure>

<ul>
<li>initタスクは「Build Setup tasks」に属しており、ビルドの初期化を行うタスクであるということが読み取れます</li>
<li>プラグインを追加することで利用できるタスクも追加されるので、gradle tasksで利用できるタスクを一覧で見れるということを覚えておく</li>
</ul>
<p>また、よく使う組み込みタスクとして、<code>gradle properties</code>がある<br>これはGradleのビルドスクリプトに定義されているプログラムの一覧を表示するタスク</p>
<h4 id="3-2-4-主要なコマンドラインオプション"><a href="#3-2-4-主要なコマンドラインオプション" class="headerlink" title="3.2.4 主要なコマンドラインオプション"></a>3.2.4 主要なコマンドラインオプション</h4><ul>
<li><p>ログ出力量の少ない順にGradleのコマンドラインオプションを並べると次のようになる</p>
<ul>
<li><code>-i (--info)</code><ul>
<li>ログレベルがINFOになり、ビルドスクリプトのファイル名などの情報が表示されるようになる</li>
</ul>
</li>
<li><code>-s (--stacktrace)</code><ul>
<li>例外発生時にユーザー例外部分のみスタックトレースを表示</li>
</ul>
</li>
<li><code>-S (--full-stacktrace)</code><ul>
<li>例外発生時にすべてのスタックトレースを表示</li>
</ul>
</li>
<li><code>-d (--debug)</code><ul>
<li>ログレベルがDEBUGに設定され、非常に詳細な情報が表示される様になる</li>
</ul>
</li>
</ul>
</li>
<li><p>デフォルトの<code>build.gradle</code>ファイル以外のファイル名のビルドスクリプトを指定する場合</p>
<ul>
<li><code>gradle -b build-new.gradle</code></li>
</ul>
</li>
</ul>
<h4 id="3-3-プロジェクト自動生成とビルド"><a href="#3-3-プロジェクト自動生成とビルド" class="headerlink" title="3.3 プロジェクト自動生成とビルド"></a>3.3 プロジェクト自動生成とビルド</h4><h4 id="3-3-1-initタスクによるプロジェクト自動生成"><a href="#3-3-1-initタスクによるプロジェクト自動生成" class="headerlink" title="3.3.1 initタスクによるプロジェクト自動生成"></a>3.3.1 initタスクによるプロジェクト自動生成</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gradle init --type java-library</span><br><span class="line"><span class="comment">// 生成される</span></span><br><span class="line"><span class="comment">// 途中、使用するDSLなどを聞かれる</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Gradleの規約はMavenに倣って定義されているので、プロダクションコードは、</p>
<ul>
<li>src&#x2F;main&#x2F;java以下</li>
<li>テストコードは<ul>
<li>src&#x2F;test&#x2F;java以下に配置される</li>
</ul>
</li>
</ul>
</li>
<li><p>NOTE</p>
<ul>
<li>Gradleは、規約とは異なる場所にJavaソースを配置することもできる</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * This file was generated by the Gradle 'init' task.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This generated file contains a sample Java Library project to get you started.</span></span><br><span class="line"><span class="comment"> * For more details take a look at the Java Libraries chapter in the Gradle</span></span><br><span class="line"><span class="comment"> * User Manual available at https://docs.gradle.org/5.5.1/userguide/java_library_plugin.html</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">    <span class="comment">// ★Javaプラグインが適用されている</span></span><br><span class="line">    <span class="comment">// これによりjavaプロジェクトに対する規約（プロダクションコードをsrc/main/javaに配置するなど）やJavaプロジェクトのビルドに必要なタスクが追加されます</span></span><br><span class="line">    <span class="comment">// Apply the java-library plugin to add support for Java Library</span></span><br><span class="line">    id <span class="string">'java-library'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 昔の書き方として以下があったらしい</span></span><br><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    <span class="comment">// ★Maven Centralリポジトリを指定</span></span><br><span class="line">    mavenCentral()</span><br><span class="line">    <span class="comment">// Use jcenter for resolving dependencies.</span></span><br><span class="line">    <span class="comment">// You can declare any Maven/Ivy/file repository here.</span></span><br><span class="line">    jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// 'group:name:version'という省略記法でプラグインが記載されている</span></span><br><span class="line">    <span class="comment">// compileやtestCompileというキーワードがありますが、これはJavaプラグインによって定義されているコンフィグレーションを意味している 詳しくは第４章で解説</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This dependency is exported to consumers, that is to say found on their compile classpath.</span></span><br><span class="line">    api <span class="string">'org.apache.commons:commons-math3:3.6.1'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This dependency is used internally, and not exposed to consumers on their own compile classpath.</span></span><br><span class="line">    implementation <span class="string">'com.google.guava:guava:27.1-jre'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use JUnit test framework</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2-ビルド実行と結果確認"><a href="#3-3-2-ビルド実行と結果確認" class="headerlink" title="3.3.2 ビルド実行と結果確認"></a>3.3.2 ビルド実行と結果確認</h4><p>先程自動生成したJavaプロジェクトをそのままビルドしてみましょう</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gradle tasks</span><br><span class="line"><span class="comment">// 様々なタスクが追加されていることを確認</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ビルド実行</span></span><br><span class="line">gradle build</span><br></pre></td></tr></table></figure>

<p>ビルド実行直後再度ビルドすると、[UP-TO-DATE]と判断されて、処理がスキップされる様になっている</p>
<h4 id="3-3-3-テスト実行と結果確認"><a href="#3-3-3-テスト実行と結果確認" class="headerlink" title="3.3.3 テスト実行と結果確認"></a>3.3.3 テスト実行と結果確認</h4><ul>
<li>buildタスクの実行によって、testタスクも実行されている</li>
<li>今回の場合、自動生成されたテストコードがコンパイルされ、テストが実行されている</li>
</ul>
<p>レポートを確認してみる<br>HTML形式レポートが出力されていることを確認</p>
<p>build&#x2F;test-resultsディレクトリ以下を確認してみると、TEST-LibraryTest.xmlというファイルが生成されていることがわかる<br>これはJUnit4が出力するXML形式のテストレポートで、Jenkinsなど他システムとの連携が必要な場合にはこちらを利用することになる</p>
<ul>
<li>NOTE<ul>
<li>じつは、先程確認したHTML形式のテストレポートは、このXML形式のテストレポートをGradleのJavaプラグインが加工して生成したもの</li>
</ul>
</li>
</ul>
<h4 id="3-4-Webアプリケーションのビルド"><a href="#3-4-Webアプリケーションのビルド" class="headerlink" title="3.4 Webアプリケーションのビルド"></a>3.4 Webアプリケーションのビルド</h4><p>WebアプリケーションをビルドしてTomcat上で実行するビルドスクリプトを作成してみる</p>
<ul>
<li>NOTE<ul>
<li>Gradleの標準プラグインにJettyプラグインがあり、そちらを利用して組み込みJettyによるWebアプリケーションのテストを行うことも可能</li>
<li>しかし、このプラグインで起動されるJettyバージョンがJetty6と古く、Servlet3.0など新しいAPIに対応していません。</li>
<li>そのため、ここではサードパーティのプラグインを利用する手順を紹介しています。</li>
</ul>
</li>
</ul>
<h4 id="3-4-1-Webプロジェクトの作成"><a href="#3-4-1-Webプロジェクトの作成" class="headerlink" title="3.4.1 Webプロジェクトの作成"></a>3.4.1 Webプロジェクトの作成</h4><p>前回のjavaプロジェクトの、build.gradleを修正してWebプロジェクトへ発展させる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle init --type java-library</span><br></pre></td></tr></table></figure>

<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * This file was generated by the Gradle 'init' task.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This generated file contains a sample Java Library project to get you started.</span></span><br><span class="line"><span class="comment"> * For more details take a look at the Java Libraries chapter in the Gradle</span></span><br><span class="line"><span class="comment"> * User Manual available at https://docs.gradle.org/5.5.1/userguide/java_library_plugin.html</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// (1) Tomcatプラグイン利用のための設定</span></span><br><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">dependencies</span> &#123;</span><br><span class="line">        <span class="keyword">classpath</span> <span class="string">'com.bmuschko:gradle-tomcat-plugin:2.0'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">    <span class="comment">// Apply the java-library plugin to add support for Java Library</span></span><br><span class="line">    id <span class="string">'java-library'</span></span><br><span class="line">    <span class="comment">// WARプラグイン追加</span></span><br><span class="line">    <span class="comment">// id 'war'</span></span><br><span class="line">    <span class="comment">// Tomcatプラグイン適用</span></span><br><span class="line">    <span class="comment">// id 'com.bmuschko.tomcat'</span></span><br><span class="line">    <span class="comment">// id 'com.bmuschko.tomcat-base'</span></span><br><span class="line">&#125;</span><br><span class="line">apply plugin: <span class="string">'war'</span></span><br><span class="line">apply plugin: <span class="string">'com.bmuschko.tomcat'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    <span class="comment">// セントラルレポジトリ追加</span></span><br><span class="line">    mavenCentral()</span><br><span class="line">    <span class="comment">// Use jcenter for resolving dependencies.</span></span><br><span class="line">    <span class="comment">// You can declare any Maven/Ivy/file repository here.</span></span><br><span class="line">    jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// (4) 依存関係にJava EE 6のAPIを追加</span></span><br><span class="line">    <span class="comment">// ビルド時には参照するが、ビルド生成物からは除外する　用に指定している</span></span><br><span class="line">    providedCompile <span class="string">'javax:javaee-web-api:6.0'</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">'org.slf4j:slf4j-api:1.7.5'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This dependency is exported to consumers, that is to say found on their compile classpath.</span></span><br><span class="line">    api <span class="string">'org.apache.commons:commons-math3:3.6.1'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This dependency is used internally, and not exposed to consumers on their own compile classpath.</span></span><br><span class="line">    implementation <span class="string">'com.google.guava:guava:27.1-jre'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use JUnit test framework</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// (5) Tomcat実行に必要な依存ライブラリの設定</span></span><br><span class="line">    <span class="keyword">def</span> tomcatVersion = <span class="string">'7.0.52'</span></span><br><span class="line">      tomcat <span class="string">"org.apache.tomcat.embed:tomcat-embed-core:$&#123;tomcatVersion&#125;"</span>,</span><br><span class="line">             <span class="string">"org.apache.tomcat.embed:tomcat-embed-logging-juli:$&#123;tomcatVersion&#125;"</span></span><br><span class="line">      tomcat(<span class="string">"org.apache.tomcat.embed:tomcat-embed-jasper:$&#123;tomcatVersion&#125;"</span>) &#123;</span><br><span class="line">        <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">'org.eclipse.jdt.core.compiler'</span>, module: <span class="string">'ecj'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gradle tomcatRunWar</span><br><span class="line">gradle tRW</span><br></pre></td></tr></table></figure>

<p>Buildエラーは出力されるが、アクセスできた<a href="http://localhost:8080/chap3-java-web/" target="_blank" rel="noopener">http://localhost:8080/chap3-java-web/</a></p>
<h4 id="3-4-3-WARファイルの生成"><a href="#3-4-3-WARファイルの生成" class="headerlink" title="3.4.3 WARファイルの生成"></a>3.4.3 WARファイルの生成</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle war</span><br></pre></td></tr></table></figure>

<h4 id="3-5-Gradleの便利な機能"><a href="#3-5-Gradleの便利な機能" class="headerlink" title="3.5 Gradleの便利な機能"></a>3.5 Gradleの便利な機能</h4><p>Gradleを使うにあたって知っておくと便利な機能を本章の最後に紹介</p>
<h4 id="3-5-1-Gradleデーモン"><a href="#3-5-1-Gradleデーモン" class="headerlink" title="3.5.1 Gradleデーモン"></a>3.5.1 Gradleデーモン</h4><p>Gradleを本格的に使い始めると、まず気になるところが、gradleコマンドの起動に時間がかかること</p>
<p>この起動時間を解消するために、Gradleは「Gradleデーモン」という機能を提供している<br>Gradleデーモンを利用すると、毎回JavaVMを起動&#x2F;停止するのではなく、JavaVMを常駐させておくことができる</p>
<p>gradleコマンドを事項してGradleデーモン(JavaVMプロセス)を常駐させてしまえば<br>2度目以降のビルドは非常に高速に実行される用になります。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gradle --daemon hello</span><br><span class="line"></span><br><span class="line"><span class="comment">// デフォルトでデーモンを有効にしたい場合</span></span><br><span class="line"><span class="comment">// GRADLE_OPTSに追加する</span></span><br><span class="line">GRADLE_OPS=<span class="string">"-Dorg.gradle.daemon=true"</span></span><br><span class="line"><span class="comment">// gradle.propertiesに追加する</span></span><br><span class="line">org.gradle.daemon=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// デーモンは一定時間で停止されるが、明示的に停止する場合以下を実行</span></span><br><span class="line">gradle --stop</span><br></pre></td></tr></table></figure>

<h4 id="3-5-2-Gradleラッパー"><a href="#3-5-2-Gradleラッパー" class="headerlink" title="3.5.2 Gradleラッパー"></a>3.5.2 Gradleラッパー</h4><p>新しいツールを現在進行中のプロジェクトに適用したい場合、以下の試練がある</p>
<ul>
<li>Gradleの良さを紹介する</li>
<li>インストール方法を説明する</li>
<li>使い方を説明する</li>
<li>慣れるまでサポートする</li>
</ul>
<p>この問題はGradleラッパーで解消できる</p>
<ul>
<li>このメリット<ul>
<li>利用するGradleのバージョンを固定できる</li>
<li>JenkinsなどのCIツールを実行する環境にGradleをインストールしなくてよい</li>
</ul>
</li>
</ul>
<h2 id="第2部［基礎編］"><a href="#第2部［基礎編］" class="headerlink" title="第2部［基礎編］"></a>第2部［基礎編］</h2><h3 id="第4章-Java-プロジェクトのビルド"><a href="#第4章-Java-プロジェクトのビルド" class="headerlink" title="第4章 Java プロジェクトのビルド"></a>第4章 Java プロジェクトのビルド</h3><h4 id="4-1-Javaプロジェクトになぜプラグインが必要なのか？"><a href="#4-1-Javaプロジェクトになぜプラグインが必要なのか？" class="headerlink" title="4.1 Javaプロジェクトになぜプラグインが必要なのか？"></a>4.1 Javaプロジェクトになぜプラグインが必要なのか？</h4><p>標準機能だけでJavaプロジェクトのビルドもできないの？と疑問に思われるかもしれない<br>実は、Gradleのコア機能は次の２つのみで構成されている</p>
<ul>
<li>定型的に繰り返し行う作業を自動化するための仕組み</li>
<li>自動化された処理を実行するための部品</li>
</ul>
<p>Gradleの看板機能であるビルド例外ではなく、自動化の対象となる具体的な作業はすべてプラグインとして実装されており、コア機能からは分離されている<br>厳密に言えば、Gradleは「ビルドツール」ではなく、「拡張可能な自動化ツール」と呼ぶのが適切なのだと思います。</p>
<p>このように、JavaプロジェクトのビルドにJavaプラグインが必要である背景には、Gradleのアーキテクチャに起因する理由がある</p>
<h4 id="4-2-Javaプラグインとは"><a href="#4-2-Javaプラグインとは" class="headerlink" title="4.2 Javaプラグインとは"></a>4.2 Javaプラグインとは</h4><p>Javaプラグインがどのようなものかを見ていきましょう</p>
<ul>
<li>Javaプラグイン<ul>
<li>タスク：Javaのビルドに必要</li>
<li>規約：設定を簡略化する</li>
<li>プロパティ</li>
<li>ソースセット<ul>
<li>がパッケージングされたビルド機能のコンポーネント</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-2-1-ソースセット"><a href="#4-2-1-ソースセット" class="headerlink" title="4.2.1 ソースセット"></a>4.2.1 ソースセット</h4><p>最も重要なソースセットについて説明</p>
<p>ビルド対象となるソースの種類として、<br>・プロダクションコード<br>・テストコード<br>　・ユニットテスト<br>　・インテグレーションテスト<br>と、様々ある</p>
<p>このような構成に対応するためにソースセットという仕組みを提供している</p>
<ul>
<li>特徴<ul>
<li>ビルドスクリプト内に自由に追加できる</li>
<li>ユニークな名前を持つ</li>
<li>コンパイルの入力となるJavaソースおよびリソースのセットが指定できる</li>
<li>コンパイルの出力（クラスファイルなど）を生成するパスが指定できる</li>
<li>コンパイル時のクラスパス、及び実行時のクラスパスが指定できる</li>
<li>ソースセットごとに専用のタスクを提供する</li>
<li>ソースセットごとに専用のプロパティを提供する</li>
</ul>
</li>
</ul>
<p>例えば、テストコードのコンパイルを行う前にプロダクションコードをコンパイルしておく必要がある場合、<br>テストコードに対応するソースセットのコンパイルタスクの依存関係にプロダクションコードのコンパイルタスクを設定するだけで済みます</p>
<p>Javaプラグインにはあらかじめmainとtestという２つのソースセットが定義されている<br>２種類のソースセットだけで対応可能なJavaプロジェクトであれば、独自にソースセットを追加する必要はない</p>
<h4 id="4-2-2-タスク"><a href="#4-2-2-タスク" class="headerlink" title="4.2.2 タスク"></a>4.2.2 タスク</h4><ul>
<li><p>ビルドに必要な作業</p>
<ul>
<li>ソースファイルのコンパイル</li>
<li>テスト</li>
<li>Javadocの生成</li>
<li>JARファイルなどへのアーカイブ</li>
</ul>
</li>
<li><p>GradleのJavaプラグインには、そのすべての機能がタスクとして定義されている</p>
</li>
<li><p>主要なタスク</p>
<ul>
<li>clean</li>
<li>build</li>
<li>javadoc</li>
<li>jar</li>
</ul>
</li>
</ul>
<h4 id="4-2-3-規約"><a href="#4-2-3-規約" class="headerlink" title="4.2.3 規約"></a>4.2.3 規約</h4><p>規約＝約束事</p>
<ul>
<li><p>Javaプラグイン規約</p>
<ul>
<li>プロダクションコードのソース・ファイルは<code>src/main/java</code>ディレクトリ配下に配置していること</li>
<li>プロダクションコードのリソースは<code>src/main/resources</code>ディレクトリ配下に配置していること</li>
<li>テストコードのソースファイルは<code>src/test/java</code>ディレクトリ配下に配置していること</li>
<li>テストコードのリソースは<code>src/test/resources</code>ディレクトリ配下に配置していること</li>
</ul>
</li>
<li><p>Mavenを使ったことのある人には馴染みの深いもの</p>
</li>
<li><p>規約に関してはMavenという先輩の知恵を有効活用している</p>
</li>
</ul>
<h4 id="4-2-4-プロパティ"><a href="#4-2-4-プロパティ" class="headerlink" title="4.2.4 プロパティ"></a>4.2.4 プロパティ</h4><ul>
<li>多くのプロパティにはデフォルト値が設定されている</li>
</ul>
<h4 id="4-3-Javaプロジェクトへの適用"><a href="#4-3-Javaプロジェクトへの適用" class="headerlink" title="4.3 Javaプロジェクトへの適用"></a>4.3 Javaプロジェクトへの適用</h4><p>本章ではJavaプラグインの仕組みを理解するために、あえて手作業で作成</p>
<h4 id="4-3-1-基本的なビルドの定義と実行"><a href="#4-3-1-基本的なビルドの定義と実行" class="headerlink" title="4.3.1 基本的なビルドの定義と実行"></a>4.3.1 基本的なビルドの定義と実行</h4><h4 id="4-3-2-テストコードを含むビルドの定義と実行"><a href="#4-3-2-テストコードを含むビルドの定義と実行" class="headerlink" title="4.3.2 テストコードを含むビルドの定義と実行"></a>4.3.2 テストコードを含むビルドの定義と実行</h4><h4 id="4-3-3-その他の作業"><a href="#4-3-3-その他の作業" class="headerlink" title="4.3.3 その他の作業"></a>4.3.3 その他の作業</h4><ul>
<li>コンパイルオプションの設定<ul>
<li>compileJavaタスクやtestCompileJavaタスクなどのJavaCompile型のタスクに対しては、optionsプロパティを利用して詳細なコンパイルオプションを設定できます。</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">compileJava &#123;</span><br><span class="line">  <span class="comment">// forkした別プロセスでコンパイルを行う</span></span><br><span class="line">  <span class="keyword">options</span>.fork = <span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// lint を無効化する</span></span><br><span class="line">  <span class="keyword">options</span>.compilerArgs &lt;&lt; <span class="string">'-Xdlint:unchecked'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>JARファイルの設定</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">jar &#123;</span><br><span class="line">  baseName = <span class="string">'example'</span></span><br><span class="line">  appendix = <span class="string">'bin'</span></span><br><span class="line">  version = <span class="string">'0.1'</span></span><br><span class="line">  classifier = <span class="string">'jdk17'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接指定する場合</span></span><br><span class="line">jar &#123;</span><br><span class="line">  archiveName = <span class="string">'example.jar'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>MANIFEST.MFのカスタマイズ</p>
</li>
<li><p>Javadoc生成</p>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">javadoc &#123;</span><br><span class="line">  <span class="keyword">destinationDir</span> = <span class="keyword">file</span>(<span class="string">"$&#123;buildDir/dist/javadoc&#125;"</span>)</span><br><span class="line">  title = <span class="string">'example library V0.1'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @linkタグでJava標準APIのJavadocへリンクする場合など、外部のJavadocへのリンクを生成したい場合は次の用にする</span></span><br><span class="line">javadoc &#123;</span><br><span class="line">  <span class="keyword">options</span>.links &lt;&lt; <span class="string">'http://docs.oracle.com/javase/jp/7/api/'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ビルド出力のクリーンアップ<ul>
<li>削除したい場合</li>
<li>Javadocのみ削除したい場合、gradle cleanJavadocを実行</li>
</ul>
</li>
</ul>
<h4 id="4-4-Javaプラグインの詳細"><a href="#4-4-Javaプラグインの詳細" class="headerlink" title="4.4 Javaプラグインの詳細"></a>4.4 Javaプラグインの詳細</h4><p>Gradleの規約に適合していれば、そこまで深くJavaのプラグインを知らなくてもよいが、<br>適合していない場合、独自のタスクを組み込んだりカスタマイズしていかなくてはならない</p>
<h4 id="4-4-1-Javaプラグインのタスクの依存関係"><a href="#4-4-1-Javaプラグインのタスクの依存関係" class="headerlink" title="4.4.1 Javaプラグインのタスクの依存関係"></a>4.4.1 Javaプラグインのタスクの依存関係</h4><ul>
<li>タスクはそれぞれ依存関係を持っている<ul>
<li><a href="http://gradle.monochromeroad.com/docs/userguide/java_plugin.html" target="_blank" rel="noopener">http://gradle.monochromeroad.com/docs/userguide/java_plugin.html</a></li>
</ul>
</li>
<li>dependsで指定されている</li>
</ul>
<h4 id="4-4-2-つくの詳細"><a href="#4-4-2-つくの詳細" class="headerlink" title="4.4.2 つくの詳細"></a>4.4.2 つくの詳細</h4><p>Javaプラグインが提供するタスクのうち、重要なものについて説明</p>
<p>テストに関連するタスクは第８章、アーティファクトの公開に関連するタスクは第１２章で詳しく説明しているのでここでは割愛</p>
<ul>
<li><p>compileJavaタスク&#x2F;compileTestJavaタスク</p>
<ul>
<li>JavaCompile型のタスク</li>
<li>javacコマンドによりJavaソースをコンパイルし、クラスファイルを生成します。</li>
<li>対象<ul>
<li>compileJavaタスク<ul>
<li>ソースセットmainのjava.srcDirsプロパティで指定したディレクトリに含まれるJavaソース</li>
</ul>
</li>
<li>compileTestJavaタスク<ul>
<li>ソースセットtestのjava.srcDirsプロパティで指定したディレクトリに含まれるJavaソース</li>
</ul>
</li>
</ul>
</li>
<li>拡張子が.javaのファイルのみがコンパイル対象となる</li>
</ul>
</li>
<li><p>processResourcesタスク&#x2F;processTestResourcesタスク</p>
<ul>
<li>Copy型のタスク</li>
<li>プロダクションコードのリソース(.propertiesなど)をクラス出力先にコピーする</li>
<li>対象<ul>
<li>processResourcesタスク<ul>
<li>ソースセットmainのresources.srcDisプロパティで指定したディレクトリに含まれるファイル</li>
</ul>
</li>
<li>processTestResourcesタスク<ul>
<li>ソースセットtestのresources.srcDisプロパティで指定したディレクトリに含まれるファイル</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>jarタスク</p>
<ul>
<li>Jar型のタスク</li>
<li>JARファイルを生成します</li>
<li>dフォルトではアーカイブ対象はソースセットmainのoutputプロパティ、すなわちcompileJavaタスクとprocessResourcesタスクの出力です。</li>
</ul>
</li>
<li><p>javadocタスク</p>
<ul>
<li>Javadoc型のタスク</li>
<li>Javadocを生成します</li>
</ul>
</li>
</ul>
<h4 id="4-5-規約に合わないプロジェクトへの適用法"><a href="#4-5-規約に合わないプロジェクトへの適用法" class="headerlink" title="4.5 規約に合わないプロジェクトへの適用法"></a>4.5 規約に合わないプロジェクトへの適用法</h4><p>新規で作成するプロジェクトはできるだけGradleの規約に合わせることをおすすめします。<br>既存のプロジェクトにGradleを適用する場合や、プロジェクト特有の事情によってGradleの規約に合わせることができない場合に対応する方法を説明</p>
<h4 id="4-5-1-ディレクトリ構成の変更"><a href="#4-5-1-ディレクトリ構成の変更" class="headerlink" title="4.5.1 ディレクトリ構成の変更"></a>4.5.1 ディレクトリ構成の変更</h4><ul>
<li>src&#x2F;main&#x2F;java以下にxmlやpropertiesなどを配置している場合</li>
</ul>
<p>TODO: 処理の意味が理解できていないので再確認<br>なぜこれで実現できるのか腑に落ちない</p>
<h4 id="4-5-2-コンフィグレーションによる依存関係の変更"><a href="#4-5-2-コンフィグレーションによる依存関係の変更" class="headerlink" title="4.5.2 コンフィグレーションによる依存関係の変更"></a>4.5.2 コンフィグレーションによる依存関係の変更</h4><p>Gradleには依存関係をグループ化して分類するコンフィグレーションという仕組みがある<br>依存ライブラリによってはコンパイル時のみ必要で実行時には不要であるものがある<br>このような状況に対応するための仕組みがコンフィグレーションです</p>
<ul>
<li><p>Javaプラグイン標準コンフィグレーション</p>
<ul>
<li>compile: ソースセットmainのコンパイル時クラスパス。compileJavaタスクが参照</li>
<li>runtime: ソースセットmainの実行時クラスパス。デフォルトではコンフィグレーションcompileと同内容が設定</li>
<li>testCompile: ソースセットtestのコンパイル時のクラスパス</li>
<li>testRuntime: ソースセットtestの実行時クラスパス。</li>
<li>archives: このプロジェクトのアーティファクトを表すコンフィグレーション</li>
<li>default このプロジェクトに依存するプロジェクトが利用するデフォルトのクラスパス</li>
</ul>
</li>
<li><p>MEMO: implementationとかの説明がない..</p>
</li>
</ul>
<h4 id="4-5-3-ソースセットの追加"><a href="#4-5-3-ソースセットの追加" class="headerlink" title="4.5.3 ソースセットの追加"></a>4.5.3 ソースセットの追加</h4><p>Javaプラグインは標準でmainとtestの２つのソースセットを提供している<br>この２つだけでは足りない場合新しく追加できる<br>インテグレーションテスト用のソースセットがほしいと仮定して作成してみる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sourceSets</span> &#123;</span><br><span class="line">  integrationTest</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Javaプラグインの規約ではソースセットごとのプロパティにもデフォルト値が定義されている</p>
<ul>
<li>Javaソースの配置先はsrc&#x2F;integrationTest&#x2F;javaディレクトリ</li>
<li>リソースの配置先はsrc&#x2F;integrationTest&#x2F;resourcesディレクトリ</li>
</ul>
<p>作成すると勝手に上記のような規約に沿った形で定義されるみたい<br>規約に合わない場合は以下の用に定義して対応する</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sourceSets</span> &#123;</span><br><span class="line">  integrationTest &#123;</span><br><span class="line">    java.srcDir <span class="keyword">file</span>(<span class="string">'src/intTest/java'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TODO: 残りは、IntegrationテストとUnitテストを明確に分けたい場合参照すべし</p>
<h4 id="4-6-Applicationプラグイン"><a href="#4-6-Applicationプラグイン" class="headerlink" title="4.6 Applicationプラグイン"></a>4.6 Applicationプラグイン</h4><p>ApplicationプラグインはJavaアプリケーションを実行したり、配布したりするためのプラグインで、Javaプラグインを拡張して作られている</p>
<ul>
<li>用途<ul>
<li>ビルドスクリプト内でメインクラスを指定し、Gradleからアプリケーションを実行する</li>
<li>アプリケーションを実行環境に配布するためのアーカイブ(ZIPファイル)を作成する</li>
</ul>
</li>
</ul>
<h4 id="4-6-1-Applicationプラグインの利用方法"><a href="#4-6-1-Applicationプラグインの利用方法" class="headerlink" title="4.6.1 Applicationプラグインの利用方法"></a>4.6.1 Applicationプラグインの利用方法</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// applicationプラグインを適用する</span></span><br><span class="line">apply plugin: <span class="string">'application'</span></span><br><span class="line"><span class="comment">// メインクラスのFQCN名(完全修飾名)を指定する</span></span><br><span class="line">mainClassName = <span class="string">'com.example.cli.SimpleCalc'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line">apply plugin: <span class="string">'application'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> defaultEncoding = <span class="string">'UTF-8'</span></span><br><span class="line">compileJava.<span class="keyword">options</span>.encoding = defaultEncoding</span><br><span class="line"></span><br><span class="line"><span class="keyword">sourceCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"><span class="keyword">targetCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"></span><br><span class="line">mainClassName = <span class="string">'com.example.cli.SimpleCalc'</span></span><br><span class="line">applicationName = <span class="string">'SimpleCalc'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">	mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  <span class="keyword">compile</span> <span class="string">'commons-cli:commons-cli:1.2'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run &#123;</span><br><span class="line">  standardInput = System.in</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">javadoc &#123;</span><br><span class="line">  <span class="keyword">options</span>.links &lt;&lt; <span class="string">'http://docs.oracle.com/javase/jp/7/api/'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>runブロックの内容について<ul>
<li>実行するアプリケーションが標準入力を必要とする場合は必須</li>
<li>ビルド実行中はGradleが標準入力を処理しているため、アプリケーションに標準入力を渡すために、このようなおまじないが必要になります。</li>
</ul>
</li>
</ul>
<h4 id="4-6-2-ビルドスクリプトからのアプリケーション実行"><a href="#4-6-2-ビルドスクリプトからのアプリケーション実行" class="headerlink" title="4.6.2 ビルドスクリプトからのアプリケーション実行"></a>4.6.2 ビルドスクリプトからのアプリケーション実行</h4><ul>
<li>Applicationプラグインを適用することで、runタスクが加わります</li>
<li>このタスクを実行するとGradleによって指定したアプリケーションが実行されます。</li>
</ul>
<h4 id="4-6-3-アプリケーション実行用アーカイブの作成"><a href="#4-6-3-アプリケーション実行用アーカイブの作成" class="headerlink" title="4.6.3 アプリケーション実行用アーカイブの作成"></a>4.6.3 アプリケーション実行用アーカイブの作成</h4><p>アプリケーション実行用アーカイブを作成<br>この機能もApplication プラグインによって提供される<br>アーカイブにドキュメントを追加したい場合は、プロジェクトのsrc&#x2F;distディレクトリに、それらを配置しておけば自動的にアーカイブに含まれる</p>
<p>gradle distZipを実行する</p>
<ul>
<li>build&#x2F;libsディレクトリ<ul>
<li>JARファイルが生成される（実際にJARファイルを生成しているのは</li>
</ul>
</li>
<li>build&#x2F;scriptsディレクトリ<ul>
<li>アプリケーション実行用のシェルスクリプトとバッチファイルが生成される</li>
<li>distZipタスクと連動して実行した、startScriptsタスクが生成</li>
</ul>
</li>
<li>build&#x2F;distributionsディレクトリ<ul>
<li>build&#x2F;libsディレクトリやbuild&#x2F;scriptsディレクトリの出力を含んだアーカイブが作成される</li>
</ul>
</li>
</ul>
<p>後は、アーカイブを配ってバッチ叩けば実行できるというもの<br>GUIアプリとか配ると便利そう<br>ローカルで起動する系のWEBアプリもこれで配れそう</p>
<ul>
<li>必要な依存ライブラリを添えろ得て配布物に含める</li>
<li>環境変数や、JavaVMオプションなどを設定するための起動スクリプトを準備する</li>
</ul>
<p>これらの手間がなくなるのでApplication プラグインは便利</p>
<h4 id="4-7-Warプラグイン"><a href="#4-7-Warプラグイン" class="headerlink" title="4.7 Warプラグイン"></a>4.7 Warプラグイン</h4><p>WarプラグインはJavaベースのWebアプリケーションのビルドを行うためのプラグインで、Application プラグインと同じ句、Javaプラグインを拡張して作られています</p>
<h4 id="4-7-1-Warプラグインの挙動"><a href="#4-7-1-Warプラグインの挙動" class="headerlink" title="4.7.1 Warプラグインの挙動"></a>4.7.1 Warプラグインの挙動</h4><p>Warプラグインの主な機能はWARファイルを生成すること<br>warタスクが実際にwarファイルを生成する</p>
<p>warタスクはJavaプラグインのjarタスクに相当しますが、次のような違いがある</p>
<ul>
<li>ソースセットmainのコンパイル結果（クラスファイル）をWARファイルのWEB-INF&#x2F;classesに配置する</li>
<li>コンフィグレーションruntimeに設定されている依存ライブラリ（JARファイル）をWARファイルのWEB-INF&#x2F;libに配置する</li>
<li>webAppDirNameプロパティに設定されているディレクトリ以下をWARファイルの&#x2F;に展開する<ul>
<li>このプロパティに指定するディレクトリは、HTMLファイルやCSSファイルといったWebリソースの置き場を指す</li>
</ul>
</li>
</ul>
<h4 id="4-7-2-プロパティ"><a href="#4-7-2-プロパティ" class="headerlink" title="4.7.2 プロパティ"></a>4.7.2 プロパティ</h4><p>Warプラグインが提供するプロパティは次の２つ</p>
<ul>
<li>webAppDirName<ul>
<li>HTMLファイルやJSPファイルなどのWebアプリケーションコンテンツの配置先を、プロジェクトのルートから相対パスで指定</li>
</ul>
</li>
<li>webAppDir<ul>
<li>前述のwebAppDirNameの設定に基づき、絶対パスが設定される（参照専用）</li>
</ul>
</li>
</ul>
<h4 id="4-7-3-コンフィグレーション"><a href="#4-7-3-コンフィグレーション" class="headerlink" title="4.7.3 コンフィグレーション"></a>4.7.3 コンフィグレーション</h4><p>Warプラグインが提供するコンフィグレーションは次の２つ</p>
<ul>
<li>providedCompile<ul>
<li>ソースセットmainのコンパイル時クラスパスのうち、WARファイルへのコピー対象外としたいもの</li>
</ul>
</li>
<li>providedRuntime<ul>
<li>ソースセットmainの実行時クラスパスのうち、WARファイルへのコピー対象外としたいもの</li>
</ul>
</li>
</ul>
<p>これらのコンフィグレーションは、WARファイルの実行環境が提供している依存ライブラリを指定するときに使う<br>典型的な利用方法は、ServletAPIなどアプリケーションサーバーに含まれる依存ライブラリをビルド時のみ参照にし、WARファイルからは除外するという使い方</p>
<h4 id="4-7-4-warタスクの設定"><a href="#4-7-4-warタスクの設定" class="headerlink" title="4.7.4 warタスクの設定"></a>4.7.4 warタスクの設定</h4><p>ビルドスクリプトにwarブロックを追加して、warタスクの挙動をカスタマイズできる</p>
<p>例えば、web.xmlを別名で用意しておき、ビルド時にweb.xmlとしてWARファイルにコピーする場合</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> env = <span class="string">'dev'</span></span><br><span class="line">war &#123;</span><br><span class="line">  webXml = <span class="keyword">file</span>(<span class="string">"src/web-$&#123;env&#125;.xml"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Eclipse WTPプラグイン<ul>
<li>Warプラグインを適用したプロジェクトをEclipseで開く場合、Eclipseプラグインを適用して、gradle eclipseでEclipseプロジェクトを作っただけではEclipseのWTPプロジェクトとして認識されない</li>
<li>この場合、Eclipseプラグインを使うのではなく、EclipseWTPプラグインを利用してください</li>
</ul>
</li>
</ul>
<h3 id="第5章-Gradle-の基礎"><a href="#第5章-Gradle-の基礎" class="headerlink" title="第5章 Gradle の基礎"></a>第5章 Gradle の基礎</h3><p>本章では、Gradleのアーキテクチャや主要な機能など、理解しておくべきGradleの基礎について解説</p>
<h4 id="5-1-Gradleにおけるビルド"><a href="#5-1-Gradleにおけるビルド" class="headerlink" title="5.1 Gradleにおけるビルド"></a>5.1 Gradleにおけるビルド</h4><p>Gradleでのビルドが何なのかについては明らかにしていませんでした<br>Gradleのビルドが何を指し、どのように実行されるのかを説明する</p>
<h4 id="5-1-1-ビルドとはなにか"><a href="#5-1-1-ビルドとはなにか" class="headerlink" title="5.1.1 ビルドとはなにか"></a>5.1.1 ビルドとはなにか</h4><ul>
<li>wiki<ul>
<li>ソフトウェアのビルドは、ソースコードファイルを独立したソフトウェア成果物に変換するコンピュータ上で実行されるプロセス、またはその結果を指す。</li>
</ul>
</li>
</ul>
<p>なにかしらのアクションを実行すること、それがビルドツールにおけるビルドであると言える</p>
<ul>
<li>Gradleでは実行する処理の単位をタスクと呼び、このタスクを実行することがGradleにとってのビルドであり、ビルドを実行するための仕組みがGradleの根幹</li>
</ul>
<h4 id="5-1-2-ビルドの入力情報"><a href="#5-1-2-ビルドの入力情報" class="headerlink" title="5.1.2 ビルドの入力情報"></a>5.1.2 ビルドの入力情報</h4><p>ビルド実行時に、Gradleが参照するファイルやディレクトリ、パラメータにどのようなものがあり、<br>それらがどのような役割を果たしているかを理解しておきましょう</p>
<ul>
<li>初期化スクリプト<ul>
<li>ビルドの最初で実行されるGroovyスクリプト</li>
<li>デフォルトのファイル名はinit.gradleになる</li>
<li>主にユーザー情報や実行環境などの初期設定を行うために使う</li>
<li>初期スクリプトはいくつか指定方法があり、複数のスクリプトファイルを使い分けることができる</li>
</ul>
</li>
<li>設定スクリプト<ul>
<li>ビルド対象のプロジェクトの設定を行うGroovyスクリプト</li>
<li>デフォルトのファイル名はsettings.gradleとなります</li>
<li>主にビルドに参加するプロジェクトを定義する用途で使用</li>
<li>マルチプロジェクトでは必須のスクリプトファイル</li>
</ul>
</li>
<li>ビルドスクリプト<ul>
<li>ビルドの入力情報の中で一番大切な「ビルドの定義」を記述するGroovyスクリプト</li>
<li>デフォルトのファイル名はbuild.gradleになります</li>
<li>当該プロジェクトの依存関係やタスク定義などをするのが主な用途で、通常のビルドであればこのファイルだけで事足ります。</li>
</ul>
</li>
<li>プロパティファイル<ul>
<li>Gradleが標準で参照するプロパティファイルで、ファイル名はgradle.propertiesとなる</li>
</ul>
</li>
<li>環境変数&#x2F;コマンドライン引数</li>
<li>buildSrcプロジェクト</li>
</ul>
<p>これらのうち、以下の３つのスクリプトファイルは特に重要<br>記述した内容がビルド実行時にGradle固有のドメインオブジェクトに移譲される</p>
<table>
<thead>
<tr>
<th>スクリプトファイル</th>
<th>Gradleドメインオブジェクト</th>
</tr>
</thead>
<tbody><tr>
<td>初期化スクリプト</td>
<td>Gradleオブジェクト</td>
</tr>
<tr>
<td>設定スクリプト</td>
<td>Settingsオブジェクト</td>
</tr>
<tr>
<td>ビルドスクリプト</td>
<td>Projectオブジェクト</td>
</tr>
</tbody></table>
<h4 id="5-1-3-ビルドの流れ"><a href="#5-1-3-ビルドの流れ" class="headerlink" title="5.1.3 ビルドの流れ"></a>5.1.3 ビルドの流れ</h4><p>コマンドラインからgreetタスクを実行するときの処理の流れについて見ていく</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> greet <span class="keyword">doLast</span> &#123; <span class="keyword">println</span> <span class="string">'hello,'</span> + user &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle -Puser=kotetsu greet</span><br></pre></td></tr></table></figure>

<ul>
<li>Gradleビルドの流れ<ul>
<li>コマンドの解析：</li>
<li>スクリプトファイルの初期化：初期化フェーズ</li>
<li>プロジェクトの設定：設定フェーズ</li>
<li>タスクの実行：実行フェーズ</li>
</ul>
</li>
</ul>
<h4 id="5-2-アーキテクチャと主要な機能"><a href="#5-2-アーキテクチャと主要な機能" class="headerlink" title="5.2 アーキテクチャと主要な機能"></a>5.2 アーキテクチャと主要な機能</h4><h4 id="5-2-1-物理構造"><a href="#5-2-1-物理構造" class="headerlink" title="5.2.1 物理構造"></a>5.2.1 物理構造</h4><p>Gradleは40近くのJARファイルで構成されるが、大きく分類するとGradle本体、プラグインの２つに分けられる</p>
<p>スクリプトファイルの中で適用されない限りは、基本的にGradleにプラグインはロードされない<br>プラグインを取り除いてスリムにしたGradleを使用することもできる</p>
<p>このプラグイン機構はGradleの特徴の１つと言える</p>
<h4 id="5-2-2-実行基盤を支える仕組みと標準機能"><a href="#5-2-2-実行基盤を支える仕組みと標準機能" class="headerlink" title="5.2.2 実行基盤を支える仕組みと標準機能"></a>5.2.2 実行基盤を支える仕組みと標準機能</h4><p>ビルドで実行する処理の主体はプラグイン側にある<br>Gradle本体が提供するのは、ビルドの実行基盤を支えるための仕組みと標準的な機能になる</p>
<ul>
<li>実行基盤を支える仕組み<ul>
<li>設定の自動ロード</li>
<li>プロジェクトの探索</li>
<li>タスクグラフ</li>
</ul>
</li>
<li>Gradleの標準機能<ul>
<li>ファイル操作：コンパイル後のファイルの出力先ディレクトリを作成したり、ビルド中の中間ファイルを削除したりとファイルシステムの操作をよく行う</li>
<li>ロギング：ビルドの実行中の状態を知るには、処理状態や処理中に起きた問題について出力する機能が必要<ul>
<li>Gradleではロギングフレームワークを内包した独自のロギング機能により、ログの出力を制御できる</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-3-設定の自動ロード"><a href="#5-3-設定の自動ロード" class="headerlink" title="5.3 設定の自動ロード"></a>5.3 設定の自動ロード</h4><h4 id="5-3-1-初期化スクリプトによる設定"><a href="#5-3-1-初期化スクリプトによる設定" class="headerlink" title="5.3.1 初期化スクリプトによる設定"></a>5.3.1 初期化スクリプトによる設定</h4><p>初期化スクリプトはビルドライフサイクルの初期化フェーズの先頭でロードされるため、ビルド実行時に環境設定を行うのに適している</p>
<p>例えばMavenCentralリポジトリを参照する設定を初期化スクリプトに定義して、実行ユーザーのホームディレクトリの.gradleに配置しておくと、同ユーザーが実行するすべてのGradleのビルドでMaven Centralリポジトリを参照できるようになります。</p>
<ul>
<li>初期化スクリプトの規約<ul>
<li>コマンドライン引数 -I (–init-script)で指定する</li>
<li><code>&lt;HOME&gt;</code>&#x2F;.gradleディレクトリに配置：init.gradleが対象</li>
<li><code>&lt;HOME&gt;</code>&#x2F;.gradle&#x2F;init.dディレクトリに配置：.gradleが対象</li>
<li><code>&lt;GRADLE_HOME&gt;</code>&#x2F;.gradle&#x2F;init.dディレクトリに配置：gradleが対象</li>
</ul>
</li>
</ul>
<h4 id="5-3-2-プロパティファイルによる設定"><a href="#5-3-2-プロパティファイルによる設定" class="headerlink" title="5.3.2 プロパティファイルによる設定"></a>5.3.2 プロパティファイルによる設定</h4><p>Gradleが自動的にロードするプロパティファイルは、環境に関する設定を記述する場合に適している<br>gradle.propertiesファイルに記述しておくと、初期化フェーズでロードされ、記述したプロパティが適用される</p>
<ul>
<li>プロパティファイル<ul>
<li><code>&lt;PROJECT_HOME&gt;</code>ディレクトリに配置する：gradle.propertiesが対象</li>
<li><code>&lt;HOME&gt;</code>&#x2F;.gradleディレクトリに配置する：gradle.propertiesが対象</li>
<li>コマンドライン引数-D(–system-prop)で指定する：規約なし</li>
</ul>
</li>
</ul>
<h4 id="5-4-プロジェクトの探索"><a href="#5-4-プロジェクトの探索" class="headerlink" title="5.4 プロジェクトの探索"></a>5.4 プロジェクトの探索</h4><h4 id="5-4-1-プロジェクト構成と探索の関係"><a href="#5-4-1-プロジェクト構成と探索の関係" class="headerlink" title="5.4.1 プロジェクト構成と探索の関係"></a>5.4.1 プロジェクト構成と探索の関係</h4><p>Gradleはビルドを実行する際にプロジェクトと言う概念で対象領域を特定する<br>通常、gradleコマンドを実行するカレントディレクトリがビルド対象のプロジェクト（カレントのプロジェクト）となる</p>
<p>Gradleはシングルプロジェクトとマルチプロジェクトをサポートしていることもあり、ビルドを実行する前に、カレントのプロジェクトがシングルプロジェクトなのかマルチプロジェクトなのか探索する必要がある<br>このプロジェクトの判定は設定スクリプト（settings.gradle）を利用して行う<br>この設定スクリプトはプロジェクトを特定する上で重要な役割を担っている</p>
<ul>
<li>設定スクリプトの決まり<ul>
<li>設定スクリプトはルートプロジェクトの直下に配置しなければならない</li>
<li>マルチプロジェクトの場合には、必ず設定スクリプトを容易しなければならない</li>
</ul>
</li>
</ul>
<h4 id="5-4-2-設定スクリプトに基づいた構成の特定"><a href="#5-4-2-設定スクリプトに基づいた構成の特定" class="headerlink" title="5.4.2 設定スクリプトに基づいた構成の特定"></a>5.4.2 設定スクリプトに基づいた構成の特定</h4><p>プロジェクトを探索するためには設定スクリプトの有無が最初のポイント</p>
<ul>
<li>読み込み方法<ul>
<li>コマンドライン引数の-c(–settings-file)オプションで、ファイルを指定する<ul>
<li>引数で指定された場所にあれば読み込む</li>
</ul>
</li>
<li>Gradleの規約に従った場所に配置する<ul>
<li>1.カレントディレクトリにsettings.gradleがあれば読み込む</li>
<li>2.カレントディレクトリの親ディレクトリにsettings.gradleがあれば、それを設定スクリプトとみなす</li>
<li>3.カレントディレクトリと同じ階層にmasterディレクトリがあり、その配下にsettings.gradleがあればそれを設定スクリプトとみなす<ul>
<li>※ただし、コマンドライン引数に-u(–no-search-upward)オプションが含まれていた場合、2,3は行われない</li>
<li>カレントディレクトリに設定ファイルが存在しなければシングルプロジェクトとして扱う</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-5-タスクグラフ"><a href="#5-5-タスクグラフ" class="headerlink" title="5.5 タスクグラフ"></a>5.5 タスクグラフ</h4><h4 id="5-5-1-タスクグラフの概要"><a href="#5-5-1-タスクグラフの概要" class="headerlink" title="5.5.1 タスクグラフの概要"></a>5.5.1 タスクグラフの概要</h4><p>Gradleのタスクグラフは、グラフ理論の無閉路有効グラフの考えに基づいて設計されている</p>
<h4 id="5-5-2-タスクグラフの制約"><a href="#5-5-2-タスクグラフの制約" class="headerlink" title="5.5.2 タスクグラフの制約"></a>5.5.2 タスクグラフの制約</h4><p>タスクグラフは基本的に指定されたタスクとそのタスクの依存関係によって構築されますが、依存関係以外にも次の制約によりタスクグラフが制御される場合がある</p>
<ul>
<li><p>同一のタスクが実行対象タスクとして指定された場合</p>
</li>
<li><p>タスクが順序付けられている場合</p>
</li>
<li><p>ファイナライザータスクが設定されている場合</p>
</li>
<li><p>同一のタスクが実行対象タスクとして指定された場合</p>
<ul>
<li>Gradleでは、１つのタスクは１回しか実行されないことが保証されている</li>
<li>同じタスクを複数指定していたり、複数のタスクから依存されているタスクがあったりしても、タスクグラフには１つしか存在しないように制御される</li>
<li>例えば、greetタスクを２回実行する用にしても１回しか実行されない</li>
<li><code>gradle greet greet</code></li>
</ul>
</li>
<li><p>タスクが順序付けられている場合</p>
<ul>
<li>明示的に実行対象として指定された場合のみ有効になる</li>
<li>タスクの順序付けについては次章で説明</li>
</ul>
</li>
<li><p>ファイナライザータスクが設定されている場合</p>
<ul>
<li>順序付けのほかに、ファイナライザータスクという指定されたタスクの後に自動で必ず実行される特殊なタスクを定義できる</li>
<li>ファイナライザータスクを設定しているタスクを実行した場合には、タスクグラフの構築の際にファイナライザータスクも自動的に追加されることになります。</li>
</ul>
</li>
</ul>
<h4 id="5-6-ファイル操作"><a href="#5-6-ファイル操作" class="headerlink" title="5.6 ファイル操作"></a>5.6 ファイル操作</h4><h4 id="5-6-1-Gradle標準のファイル操作機能"><a href="#5-6-1-Gradle標準のファイル操作機能" class="headerlink" title="5.6.1 Gradle標準のファイル操作機能"></a>5.6.1 Gradle標準のファイル操作機能</h4><ul>
<li>Gradleのファイルシステムの操作として次の機能を提供<ul>
<li>ファイルの参照</li>
<li>ファイルのコピー</li>
<li>ファイルの削除</li>
<li>ディレクトリの作成</li>
</ul>
</li>
</ul>
<p>このうち、ファイルの参照とコピーに関しては提供されているAPIも多く、使い勝手がいい</p>
<h4 id="5-6-2-単一ファイルの参照"><a href="#5-6-2-単一ファイルの参照" class="headerlink" title="5.6.2 単一ファイルの参照"></a>5.6.2 単一ファイルの参照</h4><p><code>file()</code>を使用する<br>通常はルートプロジェクトのディレクトリを起点とした相対パスか、Fileオブジェクトを指定する</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">File</span> javaFile = <span class="keyword">file</span>(<span class="string">'src/main/java/Main.java'</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>ファイルパス以外からのファイル参照<ul>
<li>file()はファイルパス以外にも、URL&#x2F;URIオブジェクト、Callableインターフェースやクロージャなどを引数として、ファイルへの参照を取得できる</li>
</ul>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">File index = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">URL url = <span class="keyword">new</span> URL(<span class="string">'file:/index.html'</span>)</span><br><span class="line">index = file(url)</span><br><span class="line"></span><br><span class="line">URI uri = <span class="keyword">new</span> URI(<span class="string">'file:/index.html'</span>)</span><br><span class="line">index = file(uri)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable</span><br><span class="line"></span><br><span class="line">index = file(<span class="keyword">new</span> Callable&lt;String&gt;() &#123;</span><br><span class="line">  String call() &#123;</span><br><span class="line">    <span class="string">'/index.html'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">index = file &#123; <span class="string">'/index.html'</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>PathValidationによるファイルの検証</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File existDir = file(<span class="string">'src/main/existDir'</span>, PathValidation.DIRECTORY)</span><br></pre></td></tr></table></figure>

<p>PathValidationには、DIRECTORY,FILE,EXISTS,NONEが定義されている<br>指定しない場合はNONEが設定されている</p>
<h4 id="5-6-3-ファイルコレクションによるファイルの参照"><a href="#5-6-3-ファイルコレクションによるファイルの参照" class="headerlink" title="5.6.3 ファイルコレクションによるファイルの参照"></a>5.6.3 ファイルコレクションによるファイルの参照</h4><p>複数のファイルを扱う場合には、files()を使用する<br>ビルドスクリプトからfiles()を呼ぶことで、Fileの集合であるファイルコレクションを取得できる</p>
<p>ファイルコレクションはConfigurableFileCollectionインターフェースを実装していますが、操作するためのAPIは親のFileCollectionインターフェースで定義されていることから、このFileCollection インターフェースを中心に説明</p>
<ul>
<li><p>FileCollection</p>
<ul>
<li>Gradleには、ビルドスクリプト上の記述を簡潔にするためのインターフェースがいくつか用意されている</li>
<li>FileCollection はそのインターフェースの一つで、これによりファイルのコレクション操作を簡潔に行える</li>
<li>使用頻度の高いと思われるものを中心に紹介</li>
</ul>
</li>
<li><p>ファイルコレクションの取得</p>
<ul>
<li>files()の引数はfile()が許容する型のオブジェクトを複数渡すようなかたちになります。</li>
<li>引数に渡すパラメータには、ファイルパスのおじ列、File、URL、URIなどを組み合わせることもできる</li>
</ul>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FileCollection collection = files(<span class="string">'file1.txt'</span>, <span class="string">'file2.txt'</span>)</span><br><span class="line"></span><br><span class="line">collection = files(<span class="string">'file1.txt'</span>, <span class="keyword">new</span> File(<span class="string">'file2.txt'</span>), <span class="keyword">new</span> URL(<span class="string">'file:/index.html'</span>))</span><br><span class="line"></span><br><span class="line">List fileList = [<span class="keyword">new</span> File(<span class="string">'file1.txt'</span>), <span class="keyword">new</span> File(<span class="string">'file2.txt'</span>)]</span><br><span class="line"></span><br><span class="line">collections = files(fileList)</span><br><span class="line">collections = files(fileList <span class="keyword">as</span> File[])</span><br></pre></td></tr></table></figure>

<ul>
<li>ファイルコレクションの変換</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">FileCollection collections = files(<span class="string">'file1.txt'</span>, <span class="string">'file2.txt'</span>, <span class="string">'file3.txt'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// as 演算子による変換</span></span><br><span class="line">List list = collections <span class="keyword">as</span> List</span><br><span class="line">Set set1  = collections <span class="keyword">as</span> Set</span><br><span class="line">File[] array = collections <span class="keyword">as</span> File[]</span><br><span class="line"></span><br><span class="line"><span class="comment">// getFiles() のGroovy簡略記法</span></span><br><span class="line">Set set2 = collections.files</span><br><span class="line"></span><br><span class="line"><span class="comment">// ファイルコレクションに含まれるファイルが１つの場合は、getSingleFile()が使える</span></span><br><span class="line"></span><br><span class="line">File file = collections.singleFile</span><br></pre></td></tr></table></figure>

<ul>
<li><p>遅延評価によるファイルコレクションの取得</p>
<ul>
<li>Callableの場合遅延評価されます→実際に参照されたときに実行されるということ</li>
</ul>
</li>
<li><p>ファイルコレクションの演算</p>
<ul>
<li>ファイルコレクションの操作に加算と原産が利用できるらしい</li>
</ul>
</li>
<li><p>ファイルコレクションのフィルタリング</p>
<ul>
<li>ファイルコレクションに条件を指定することで、条件に一致したファイルだけにフィルタリングをすることができる</li>
<li>フィルタリングはfilter()にクロージャを渡します</li>
</ul>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FileCollection collections = files(<span class="string">'file1.txt'</span>,<span class="string">'file2.txt'</span>,<span class="keyword">new</span> URL(<span class="string">'file:/index.html'</span>))</span><br><span class="line">FileCollection textFiles = collections.filter&#123; collectionFile -&gt; </span><br><span class="line">  collectionFile.name.endsWith .txt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> textFiles.files.size() == <span class="number">2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>その他の機能<ul>
<li>getAsPath() : ファイルコレクションに含まれているファイルのパスを取得できる<ul>
<li>このメソッドはファイルごとのパス環境に応じたパス区切り文字で連携つして出力するため、javaコマンドにクラスパス形式でJARファイルのパスを渡すような場合に便利</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-6-4-ファイルツリーによるファイルの参照"><a href="#5-6-4-ファイルツリーによるファイルの参照" class="headerlink" title="5.6.4 ファイルツリーによるファイルの参照"></a>5.6.4 ファイルツリーによるファイルの参照</h4><p>複数のファイルを木構造のファイルツリーとして扱う場合にはfileTree()を使用</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FileTree sourceTree = fileTree(<span class="string">'src'</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>FileTreeとは</p>
<ul>
<li>FileTreeインターフェースもファイルコレクションを簡潔に操作するためのインターフェースの１つ</li>
<li>FileTreeインターフェースはFileCollectionインターフェースを継承しており、階層的にファイルを巡って処理するような機能が拡張されている</li>
</ul>
</li>
<li><p>ファイルのマッチング</p>
</li>
<li><p>クロージャによるファイルツリーの取得</p>
</li>
<li><p>マップによるファイルツリーの取得</p>
</li>
<li><p>条件に一致するファイルツリーの取得</p>
</li>
<li><p>ファイルツリーの探索</p>
</li>
</ul>
<p>TODO: あとで纏める すぐ使える用にスニペットにする？</p>
<h4 id="5-6-5-ファイルのコピー"><a href="#5-6-5-ファイルのコピー" class="headerlink" title="5.6.5 ファイルのコピー"></a>5.6.5 ファイルのコピー</h4><p>ファイルをコピーするには、デフォルトで提供しているCopy型タスクから、独自のタスクを作成する方法と、ビルドスクリプト上でcopy()を使う方法の２通りある</p>
<p>ここでは後者のcopy()を使用したファイルのコピーについて述べる<br>copy()はクロージャを引数としていますが、実際のコピーに関する記述はクロージャ内でCopySpecというインターフェースを使用して行います</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">copy &#123;</span><br><span class="line">  <span class="comment">// CopySpec インターフェースのメソッドを使用する</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>CopySpecとは<ul>
<li>ファイルのコピーに特化したGradleが提供するインターフェースの１つ</li>
<li>Copyタスクを始めとする、ファイル操作を行うタスクの内部ではCopySpecインターフェースを使用しており、ファイルのコピーを伴うタスクではこのインターフェースを通じて処理が行われる</li>
</ul>
</li>
</ul>
<p>TODO: 使用する際に詳細見直す テンプレートはクラス自動生成時に有用だと思った</p>
<h4 id="5-6-6-ファイルの削除"><a href="#5-6-6-ファイルの削除" class="headerlink" title="5.6.6 ファイルの削除"></a>5.6.6 ファイルの削除</h4><p>ファイルの削除jは、デフォルトで提供しているDelete型のタスクを使って独自のタスクを作成する方法と、ビルドファイル上でdelete()を使う方法の２通りがある</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">delete <span class="string">'target.txt'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可変長なので複数指定できる</span></span><br><span class="line">delete <span class="string">'target1.txt'</span>,<span class="string">'target2.txt'</span>,<span class="string">'target3.txt'</span></span><br></pre></td></tr></table></figure>

<h4 id="5-6-7-ディレクトリの作成"><a href="#5-6-7-ディレクトリの作成" class="headerlink" title="5.6.7 ディレクトリの作成"></a>5.6.7 ディレクトリの作成</h4><p>ディレクトリを作成するにはビルドスクリプト上でmkdir()を使用する</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="string">'parent/child/grandchild'</span></span><br><span class="line">mkdir <span class="string">'../outOfTheProject'</span></span><br><span class="line">mkdir <span class="string">'/gradle-book/absolutePathDir'</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Gradleでのファイルの作成方法<ul>
<li>Gradleにはファイル作成のメソッドはありません。</li>
<li>Groovyによって拡張されたFileクラスで作成する</li>
</ul>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">File newFile = file(<span class="string">'newFile.txt'</span>)</span><br><span class="line">newFile.write(<span class="string">'ビルドスクリプトからファイルの生成を行います'</span>,<span class="string">'UTF-8'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="5-7-ロギング"><a href="#5-7-ロギング" class="headerlink" title="5.7 ロギング"></a>5.7 ロギング</h4><h4 id="5-7-1-Gradleでのロギング"><a href="#5-7-1-Gradleでのロギング" class="headerlink" title="5.7.1 Gradleでのロギング"></a>5.7.1 Gradleでのロギング</h4><p>GradleはSLF4Jを拡張したロガーを包含しています。<br>通常、Gradleを実行した際に出力されるログはこれによるもの</p>
<p>TODO: Gradle用に、QUIETとLIFECYCLEというログレベルが追加されているらしい。時間があるときに抑える</p>
<h4 id="5-7-2-loggerプロパティを使用したロギング"><a href="#5-7-2-loggerプロパティを使用したロギング" class="headerlink" title="5.7.2 loggerプロパティを使用したロギング"></a>5.7.2 loggerプロパティを使用したロギング</h4><p>ビルドスクリプトでログ出力を定義する場合には、loggerプロパティを使用</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">logger.error = <span class="string">''</span></span><br><span class="line">logger.quiet = <span class="string">''</span></span><br><span class="line">logger.warn = <span class="string">''</span></span><br><span class="line">logger.lifecycle = <span class="string">''</span></span><br><span class="line">logger.info = <span class="string">''</span></span><br><span class="line">logger.debug = <span class="string">''</span></span><br></pre></td></tr></table></figure>

<ul>
<li>標準出力とloggerプロパティの使い分け<ul>
<li>標準出力は一時的に局所のログを出力したい場合にとどめ、</li>
<li>恒久的にログを出力する場合はloggerプロパティを利用することをおすすめ</li>
</ul>
</li>
</ul>
<h4 id="5-7-3-外部ロギングフレームワークとのマッピング"><a href="#5-7-3-外部ロギングフレームワークとのマッピング" class="headerlink" title="5.7.3 外部ロギングフレームワークとのマッピング"></a>5.7.3 外部ロギングフレームワークとのマッピング</h4><p>TODO: 他のロギングAPIとの対比表を掲載。時間があればみる</p>
<h4 id="5-7-4-ログレベルマッピングの変更"><a href="#5-7-4-ログレベルマッピングの変更" class="headerlink" title="5.7.4 ログレベルマッピングの変更"></a>5.7.4 ログレベルマッピングの変更</h4><p>標準エラーは通常GradleではERRORレベルにマッピングされていますが、運用上の都合からERRORではなくINFOレベルに引き下げて出力させたいといった場合に対応する方法</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logging.captureStandardError LogLevel.INFO</span><br><span class="line">println <span class="string">'標準出力'</span></span><br><span class="line">System.err.println <span class="string">'標準エラー'</span></span><br></pre></td></tr></table></figure>

<p>MEMO: あまり使わないかも</p>
<h3 id="第6章-スクリプトファイルの記述"><a href="#第6章-スクリプトファイルの記述" class="headerlink" title="第6章 スクリプトファイルの記述"></a>第6章 スクリプトファイルの記述</h3><p>Gradleのスクリプトファイルに記述された内容は実行時にGradleドメインオブジェクトに移譲される<br>記述したものが内部でどのクラスに異常されてどのように振る舞うのかを知っていると、<br>スクリプトファイルもより理解しやすくなります。<br>また、実際のプロジェクトでの多用な要求に対応するためには、タスクの詳細やマルチプロジェクトでのビルドスクリプト記述方法などについても知って置かなければなりません</p>
<h4 id="6-1-スクリプトファイルの構造と共通要素"><a href="#6-1-スクリプトファイルの構造と共通要素" class="headerlink" title="6.1 スクリプトファイルの構造と共通要素"></a>6.1 スクリプトファイルの構造と共通要素</h4><h4 id="6-1-1-スクリプトファイルの構造"><a href="#6-1-1-スクリプトファイルの構造" class="headerlink" title="6.1.1 スクリプトファイルの構造"></a>6.1.1 スクリプトファイルの構造</h4><ul>
<li><p>Gradleのスクリプトファイル</p>
<ul>
<li>ステートメント</li>
<li>スクリプトブロック</li>
</ul>
</li>
<li><p>ステートメント</p>
<ul>
<li>ローカル変数やプロパティの設定、メソッドの実行など、</li>
<li>一般的なプログラミングでのステートメントと同じ意味合いのもの</li>
</ul>
</li>
<li><p>スクリプトブロック</p>
<ul>
<li>Gradle独自の概念で、ある設定をおこなナウための領域を示すもの</li>
<li>実際にはたんにクロージャを引数とするメソッドであり、そんなに難しいものではない</li>
</ul>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ステートメント</span></span><br><span class="line">xxx = <span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// スクリプトブロック</span></span><br><span class="line">設定 &#123;</span><br><span class="line">  <span class="comment">// 設定のための領域</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Groovyスクリプトがベースで有ることには変わりませんので、<br>通常のGroovyスクリプトと同様にクラスやクロージャを定義することもできる</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Descriptor</span> &#123;</span></span><br><span class="line">  String show() &#123;</span><br><span class="line">    <span class="string">'*** これはGroovyスクリプトです。 ***'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">println <span class="keyword">new</span> Descriptor().show()</span><br></pre></td></tr></table></figure>

<h4 id="6-1-2-スクリプトファイルの共通要素"><a href="#6-1-2-スクリプトファイルの共通要素" class="headerlink" title="6.1.2 スクリプトファイルの共通要素"></a>6.1.2 スクリプトファイルの共通要素</h4><p>変数は欠かせない共通要素<br>Gradleにはプロパティが手軽に使える仕組みが用意されているので、さまざまな場面で重宝するでしょう</p>
<p>4つの変数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>概要</th>
<th>使用可能なスクリプトファイル</th>
</tr>
</thead>
<tbody><tr>
<td>ローカル変数</td>
<td>宣言されたスコープで有効な変数</td>
<td>すべてのスクリプトファイル</td>
</tr>
<tr>
<td>システムプロパティ</td>
<td>システムの情報を保持するためのプロパティ</td>
<td>すべてのスクリプトファイル</td>
</tr>
<tr>
<td>拡張プロパティ</td>
<td>ドメインオブジェクトを拡張するためのプロパティ</td>
<td>すべてのスクリプトファイル</td>
</tr>
<tr>
<td>プロジェクトプロパティ</td>
<td>プロジェクトで使用するためのプロパティ</td>
<td>ビルドスクリプト</td>
</tr>
</tbody></table>
<ul>
<li>ローカル変数</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> message = <span class="string">'ローカル変数'</span></span><br><span class="line">String stringMessage = <span class="string">'ローカル変数'</span></span><br><span class="line"><span class="comment">// def でも 型指定でもいいよ</span></span><br></pre></td></tr></table></figure>

<p>型宣言の無いものはGradleでは変数ではなく、移譲されるドメインオブジェクトのプロパティとみなす<br>変数として宣言するのではなく、オブジェクトにプロパティとして追加したい場合は、後述する拡張プロパティを使用する必要がある<br>→ここイマイチ腑に落ちない</p>
<ul>
<li>システムプロパティ<ul>
<li>システムプロパティをコマンドライン引数で指定する場合は-D(–system-prop)を使用する</li>
<li>これだけならJavaと同じ</li>
<li>Gradleには他の指定方法もある</li>
<li>Gradleのプロパティファイル（gradle.properties）にsystemPropをプレフィックスとしてつけてプロパティを記述すると、システムプロパティとして識別される</li>
</ul>
</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gradle.properties</span></span><br><span class="line"><span class="meta">systemProp.message</span>=<span class="string">Hello</span></span><br></pre></td></tr></table></figure>

<ul>
<li>拡張プロパティ<ul>
<li>Gradleには、スクリプトファイル上からドメインオブジェクトのプロパティを追加する仕組みとして、</li>
<li>拡張プロパティというものがある</li>
<li>拡張プロパティはextという名前で暗黙的に定義されており、使用にあたって特別な制約はない</li>
<li>詳細は後述のGradleドメインオブジェクトExtraPropertiesExtensionで説明</li>
<li>基本的に通常のキーバリュー方式でプロパティの追加と取得ができる</li>
</ul>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">  key1 = <span class="string">'value1'</span></span><br><span class="line">  key2 = <span class="string">'value2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>プロジェクトプロパティ<ul>
<li>もう1つGradle固有のプロパティとして、プロジェクトプロパティというものがあります。</li>
<li>プロジェクトプロパティはビルドスクリプトで使用可能</li>
<li>ビルド対象のプロジェクトのプロパティとして利用</li>
<li>拡張プロパティの仕組みを使用しているので、内部的には拡張プロパティとの違いはありません</li>
<li>拡張プロパティと違うところは設定方法で、<ul>
<li>プロジェクトプロパティはプロパティファイル、環境変数、コマンドライン引数のどれでも設定できる</li>
</ul>
</li>
<li>プロパティファイルの場合は、<code>&lt;プロパティ名&gt;=&lt;値&gt;</code>と定義するだけで追加される</li>
<li>環境変数の場合は、<code>ORG_GRADLE_PROJECT_&lt;プロパティ名&gt;=&lt;値&gt;</code>という形式で設定できる</li>
<li>コマンドライン引数の場合は、<code>-P&lt;プロパティ名&gt;=&lt;値&gt;</code>または、<code>--project-prop &lt;プロパティ名&gt;=&lt;値&gt;</code>で設定</li>
<li>システムプロパティの場合は、<code>org.gradle.project.</code>をプレフィクスでつけることで設定できる</li>
</ul>
</li>
</ul>
<p>TODO: プロジェクトプロパティのロード順を記載してくれている</p>
<h4 id="6-1-3-スクリプトブロックとドメインオブジェクト"><a href="#6-1-3-スクリプトブロックとドメインオブジェクト" class="headerlink" title="6.1.3 スクリプトブロックとドメインオブジェクト"></a>6.1.3 スクリプトブロックとドメインオブジェクト</h4><p>スクリプトブロックはクロージャを引数とするメソッド</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">println <span class="string">'デフォルトの依存関係：'</span></span><br><span class="line">repositories.each &#123; println it.name &#125;</span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">  mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">println <span class="string">'リポジトリ追加後：'</span></span><br><span class="line">repositories.each &#123; println it.name &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// このリポジトリブロックをGroovyのプログラム風に記述すると</span></span><br><span class="line"><span class="keyword">def</span> closure = &#123; mavenCentral() &#125;</span><br><span class="line"><span class="keyword">this</span>.reporitories(closure)</span><br></pre></td></tr></table></figure>

<p>スクリプトファイルはGradleのドメインオブジェクトに移譲されています<br>thisはまさにその移譲されたドメインオブジェクトを表しており、この例で言えば、thisはドメインオブジェクトであるProjectオブジェクトになる</p>
<h4 id="6-1-4-主要なスクリプトブロック"><a href="#6-1-4-主要なスクリプトブロック" class="headerlink" title="6.1.4 主要なスクリプトブロック"></a>6.1.4 主要なスクリプトブロック</h4><p>スクリプトファイルに記述するスクリプトブロックがドメインオブジェクトと関係していることがわかったと思いますので、<br>主要なスクリプトブロックと移譲されるドメインオブジェクトを列挙しておきます</p>
<table>
<thead>
<tr>
<th>スクリプトブロック</th>
<th>概要</th>
<th>ドメインオブジェクト</th>
</tr>
</thead>
<tbody><tr>
<td>initscript</td>
<td>初期化スクリプトのクラスパスの設定を記述する</td>
<td>ScriptHandler</td>
</tr>
<tr>
<td>buildscript</td>
<td>ビルドスクリプトのクラスパスの設定を記述する</td>
<td>ScriptHandler</td>
</tr>
<tr>
<td>allprojects</td>
<td>当該プロジェクトとそのすべてのサブプロジェクトに関する設定を記述する</td>
<td>Project</td>
</tr>
<tr>
<td>subprojects</td>
<td>当該プロジェクトのサブプロジェクトに対する設定を記述する</td>
<td>Project</td>
</tr>
<tr>
<td>configurations</td>
<td>コンフィグレーションの設定を記述する</td>
<td>ConfigurationContainer</td>
</tr>
<tr>
<td>dependencies</td>
<td>依存関係の解決のための設定を記述する</td>
<td>DependencyHandler</td>
</tr>
<tr>
<td>repositories</td>
<td>リポジトリの設定を記述する</td>
<td>RepositoryHandler</td>
</tr>
<tr>
<td>artifacts</td>
<td>ビルド成果物（アーティファクト）を公開するための設定を記述</td>
<td>ArtifactHandler</td>
</tr>
</tbody></table>
<h4 id="6-2-Gradleドメインオブジェクト"><a href="#6-2-Gradleドメインオブジェクト" class="headerlink" title="6.2 Gradleドメインオブジェクト"></a>6.2 Gradleドメインオブジェクト</h4><ul>
<li>重要なドメインオブジェクトについて<ul>
<li>Project</li>
<li>Task</li>
<li>Gradle</li>
<li>Settings</li>
<li>ExtensionAware</li>
<li>ExtraPropertiesExtension</li>
</ul>
</li>
</ul>
<h4 id="6-2-1-Projectオブジェクト"><a href="#6-2-1-Projectオブジェクト" class="headerlink" title="6.2.1 Projectオブジェクト"></a>6.2.1 Projectオブジェクト</h4><p>ProjectオブジェクトはGradleでの処理対象となる１つの領域を表すドメインオブジェクト<br>ビルドスクリプトからProjectオブジェクトに移譲される</p>
<p>Projectオブジェクトはビルドスクリプト上のすべてのドメインを統括する、Gradleのなかで最も重要なドメインオブジェクト</p>
<ul>
<li><p>Projectオブジェクトの構造</p>
<ul>
<li>Gradleでなにかを自動化するときには、プロジェクトが必ず１つは存在する</li>
<li>マルチプロジェクトを扱うためにはコンポジットな構造である必要があるため、自分自身の親プロジェクト、起点となるルートプロジェクト、自分の下にぶら下がっているプロジェクトのリストを保持する用になっている</li>
</ul>
</li>
<li><p>プロパティ</p>
<ul>
<li>Projectオブジェクトはビルドに必要なすべての情報にアクセスできなければなりません。</li>
<li>そのためプロパティも多数存在する</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>プロパティ</th>
<th>概要</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>プロジェクト名。論理名のため物理的なディレクトリと異なる場合もある</td>
</tr>
<tr>
<td>description</td>
<td>プロジェクトの説明</td>
</tr>
<tr>
<td>group</td>
<td></td>
</tr>
<tr>
<td>path</td>
<td></td>
</tr>
<tr>
<td>projectrDir</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td></td>
</tr>
<tr>
<td>state</td>
<td></td>
</tr>
<tr>
<td>version</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>プロジェクト参照属性<ul>
<li>自分に該当するプロジェクトや、自身が属しているルートプロジェクトなど、プロジェクトを参照するためのプロパティ</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>プロパティ</th>
<th>概要</th>
</tr>
</thead>
<tbody><tr>
<td>project</td>
<td>当該プロジェクトの参照を保持する</td>
</tr>
<tr>
<td>rootProject</td>
<td>ルートプロジェクト参照を保持する。</td>
</tr>
<tr>
<td>parent</td>
<td>上位プロジェクトの参照</td>
</tr>
<tr>
<td>childProjects</td>
<td>子プロジェクトの参照をMapコレクションで保持</td>
</tr>
<tr>
<td>allprojects</td>
<td>当該プロジェクトに含まれるすべてのプロジェクトの参照をSetコレクションで保持</td>
</tr>
<tr>
<td>subprojects</td>
<td>当該プロジェクト配下のすべての参照をSetコレクションで保持</td>
</tr>
</tbody></table>
<p>rootProjectはシングルプロジェクトの場合は自分自身、マルチプロジェクトの場合は、settings.gradleが置かれたディレクトリのプロジェクトとなる</p>
<ul>
<li><p>コンテナタイプ属性</p>
<ul>
<li>コンテナタイプのプロパティには、repositoriesやtasksなどビルドスクリプトで定義されたドメインを管理するためのものがある</li>
<li>これらの多くはスクリプトブロックが用意されており、スクリプトブロックによって設定を記述する</li>
</ul>
</li>
<li><p>defaultTasksプロパティ</p>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">defaultTasks <span class="string">'showProjectName'</span></span><br><span class="line">project.description = <span class="string">'デフォルトタスクの説明のためのプロジェクトです。'</span></span><br><span class="line">task showProjectName doLast &#123;</span><br><span class="line">  println project.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task showDescription doLast &#123;</span><br><span class="line">  println project.description</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 実行タスクが指定された場合は、デフォルトタスクは実行されない</span></span><br><span class="line"><span class="comment">// 複数のタスクを指定する場合は、</span></span><br><span class="line">defaultTasks = [<span class="string">'showProjectName'</span>,<span class="string">'showProjectDescription'</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>主要なAPI</p>
<ul>
<li>ビルドスクリプトを記述する際には、ProjectオブジェクトのAPIは欠かせません</li>
<li>プロパティと同様にAPIも用意されているので使用頻度の高いAPIに絞って紹介</li>
</ul>
</li>
<li><p>プロジェクト参照API</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def childInstance &#x3D; project(&#39;:child&#39;)</span><br><span class="line">childInstance.description &#x3D; &#39;子プロジェクトの説明を設定&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; パスとクロージャを引数とするオーバーロードメソッドを使用した場合</span><br><span class="line">project(&#39;:child&#39;) &#123;</span><br><span class="line">  description &#x3D; &#39;子プロジェクトの説明を設定&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>タスク定義API<ul>
<li>タスクを定義する際のAPIはtask()です</li>
<li>task()はオーバーロードメソッドになっていますが、よく利用されるのはタスク名を引数とするもので、これは本書ですでに何度も登場しています</li>
</ul>
</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task hello doLast &#123;</span><br><span class="line">  println <span class="string">'hello gradle world!'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>コールバックAPI</p>
<ul>
<li>Gradleがビルド処理を実行している最中にビルドフェーズ内からコールバックされるAPIとして、<code>beforeEvaluate()</code>と<code>afterEvaluate()</code>の２つがある</li>
<li>beforeEvaluate()はプロジェクトの評価前ににコールバックされるため、ビルドスクリプトに記述した処理は参できない<ul>
<li>→よって、プロジェクトの評価前に独自の処理を割り込ませるには、初期化スクリプトもしくは設定スクリプトに記述しておく必要がある</li>
</ul>
</li>
</ul>
</li>
<li><p>TODO: イマイチ使いみちがわからなかった</p>
</li>
<li><p>その他のAPI</p>
<ul>
<li>javaexec(): Javaのメインクラスを実行する</li>
<li>exec(): 外部のOSコマンドを実行する</li>
<li>tarTree(): 指定されたTARファイルを基にしてFileTreeを生成する</li>
<li>zipTree(): 指定されたZIPファイルを基にしてFileTreeを生成する</li>
</ul>
</li>
<li><p>この他にも５章で紹介したファイル操作やロギングAPIもあるし他にもある</p>
</li>
</ul>
<h4 id="6-2-2-Taskオブジェクト"><a href="#6-2-2-Taskオブジェクト" class="headerlink" title="6.2.2 Taskオブジェクト"></a>6.2.2 Taskオブジェクト</h4><ul>
<li><p>TaskオブジェクトはGradleでの対象作業を表すドメインオブジェクトで、ビルドスクリプトで記述されたタスクの定義がProjectオブジェクトを通じてTaskオブジェクトに移譲される</p>
</li>
<li><p>つまり、ビルドスクリプトでのタスクに関する記述は、Taskオブジェクトのプロパティへの設定やAPIの呼び出しになるということになります。</p>
</li>
<li><p>プロパティ</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>プロパティ</th>
<th>概要</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>タスク名。定義名がそのまま設定される</td>
</tr>
<tr>
<td>description</td>
<td>タスクの説明。tasksタスクで説明が表示される</td>
</tr>
<tr>
<td>group</td>
<td>タスクが属するグループ。tasksタスクの出力時のタスクのグルーピングに使用される</td>
</tr>
<tr>
<td>path</td>
<td>タスクのパス。プロジェクトも含めた場合は「：」がセパレータとなる</td>
</tr>
</tbody></table>
<p>nameとpathはタスク定義の際に自動的に決まるが、descriptionとgroupは名自適に設定する必要がある</p>
<p>その他のプロパティ</p>
<table>
<thead>
<tr>
<th>プロパティ</th>
<th>概要</th>
</tr>
</thead>
<tbody><tr>
<td>enabled</td>
<td>タスクの実行可否情報を保持する</td>
</tr>
<tr>
<td>state</td>
<td>タスクの実行ステータスを保持する</td>
</tr>
<tr>
<td>inputs</td>
<td>このタスクの入力情報を保持する</td>
</tr>
<tr>
<td>outputs</td>
<td>このタスクの出力情報を保持する</td>
</tr>
<tr>
<td>dependsOn</td>
<td>このタスクが依存するタスクを保持する</td>
</tr>
<tr>
<td>mustRunAfter</td>
<td>必ず先に実行されなければならないタスクを保持する</td>
</tr>
<tr>
<td>shouldRunAfter</td>
<td>先に実行されなければならないタスクを保持する</td>
</tr>
<tr>
<td>finalizedBy</td>
<td>このタスクの後に実行されるファイナライザータスクを保持する</td>
</tr>
</tbody></table>
<p>これらのプロパティを使用することで、タスクの実行順を制御したり、状態によって実行をスキップさせたりできる</p>
<p>他に、直接プロパティを操作することはないが、acrionsという重要なプロパティがあるので触れておく<br>acrionsプロパティは、Gradle内部での最小処理単位であるActionオブジェクトのリストになっており、タスクの定義で記述された作業をActionオブジェクトとして保持している<br>このactionsプロパティ内のActionオブジェクトを順次実行することでタスクの処理は行われている</p>
<h4 id="主要なAPI"><a href="#主要なAPI" class="headerlink" title="主要なAPI"></a>主要なAPI</h4><ul>
<li>TaskオブジェクトのAPIは<ul>
<li>タスクの処理のためのもの</li>
<li>タスクの実行に関するもの</li>
<li>プロパティのアクセサー<ul>
<li>の３種類で占めている</li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>API</th>
<th>概要</th>
</tr>
</thead>
<tbody><tr>
<td>doFirst()</td>
<td>タスク処理をActionオブジェクトとしてactionsの先頭に追加</td>
</tr>
<tr>
<td>doLast()</td>
<td>タスク処理をActionオブジェクトとしてactionsの最後に追加</td>
</tr>
<tr>
<td>leftShift()</td>
<td>タスク処理をActionオブジェクトとしてactionsの最後に追加</td>
</tr>
<tr>
<td>deleteAllActions()</td>
<td>actions内のActionオブジェクトを削除</td>
</tr>
</tbody></table>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> myActionTask &#123;</span><br><span class="line">  <span class="keyword">doFirst</span> &#123;</span><br><span class="line">    <span class="keyword">println</span> <span class="string">'First'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// これらはGradleのDSL記法で</span></span><br><span class="line"><span class="comment">// Groovyで書くと以下になる</span></span><br></pre></td></tr></table></figure>

<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Action&gt; actions = <span class="keyword">new</span> ArrayList&lt;Action&gt;()</span><br><span class="line"></span><br><span class="line">Closure doFirstAction = &#123; println <span class="string">'First'</span> &#125;</span><br><span class="line">actions.add(<span class="number">0</span>,doFirstAction)</span><br><span class="line"></span><br><span class="line">Closure doLastAction = &#123; println <span class="string">'Last'</span> &#125;</span><br><span class="line">actions.add(doLastAction)</span><br><span class="line"></span><br><span class="line">actions.each&#123; action -&gt;</span><br><span class="line">  actions.execute()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-2-3-Gradleオブジェクト"><a href="#6-2-3-Gradleオブジェクト" class="headerlink" title="6.2.3 Gradleオブジェクト"></a>6.2.3 Gradleオブジェクト</h4><p>実行環境であるGradleを表すドメインオブジェクトで、初期化スクリプトから移譲される<br>他にも後述するProjectオブジェクトやSettingsオブジェクトがプロパティとして保持しており、すべてのスクリプトファイルからアクセスできる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">println</span> gradle.gradleVersion</span><br></pre></td></tr></table></figure>

<ul>
<li>プロパティ</li>
</ul>
<table>
<thead>
<tr>
<th>プロパティ</th>
<th>概要</th>
</tr>
</thead>
<tbody><tr>
<td>gradleHomeDir</td>
<td>Gradleホームディレクトリを保持する</td>
</tr>
<tr>
<td>gradleUserHomeDir</td>
<td>ホームディレクトリを保持する</td>
</tr>
<tr>
<td>gradleVersion</td>
<td>実行するGradleのバージョンを保持する</td>
</tr>
<tr>
<td>rootProject</td>
<td>ルートプロジェクトを保持する</td>
</tr>
<tr>
<td>startParameter</td>
<td>ビルド実行時のパラメータを保持する</td>
</tr>
<tr>
<td>taskGraph</td>
<td>当該ビルドのタスクグラフを保持する</td>
</tr>
</tbody></table>
<ul>
<li>主要なAPI<ul>
<li>イベントリスナーについて紹介</li>
<li>TODO: 処理順などまとめる</li>
</ul>
</li>
</ul>
<h4 id="6-2-4-Settingsオブジェクト"><a href="#6-2-4-Settingsオブジェクト" class="headerlink" title="6.2.4 Settingsオブジェクト"></a>6.2.4 Settingsオブジェクト</h4><p>Settingsオブジェクトは設定スクリプトを表すドメインオブジェクトで、設定スクリプトから移譲される<br>設定スクリプトはマルチプロジェクトのためだけのものではない</p>
<ul>
<li>プロパティ<ul>
<li>Settingsオブジェクトは設定フェーズで生成されて使用されますが、</li>
<li>その段階で扱える情報は自分自身の情報を除くと、Gradleオブジェクトとルートプロジェクトの情報ぐらい</li>
</ul>
</li>
</ul>
<p>TODO: マルチプロジェクト作成時に再度確認しておく</p>
<h4 id="6-2-5-ExtensionAwareオブジェクト"><a href="#6-2-5-ExtensionAwareオブジェクト" class="headerlink" title="6.2.5 ExtensionAwareオブジェクト"></a>6.2.5 ExtensionAwareオブジェクト</h4><p>ビルド実行時にGradleドメインオブジェクトを他のオブジェクトで拡張可能にするためのドメインオブジェクト</p>
<p>ExtensionAwareオブジェクトには、extensionsという拡張プロパティを格納するためのコンテナがあり、<br>Projectオブジェクト、TaskオブジェクトなどのGradleドメインオブジェクトの多くは、これに独自のプロパティ追加できる</p>
<p>TODO: メリットがいまいちつかめなかった</p>
<h4 id="6-2-6-ExtraPropertiesExtensionオブジェクト"><a href="#6-2-6-ExtraPropertiesExtensionオブジェクト" class="headerlink" title="6.2.6 ExtraPropertiesExtensionオブジェクト"></a>6.2.6 ExtraPropertiesExtensionオブジェクト</h4><p>ProjectオブジェクトやTaskオブジェクトなどで、extの名前で定義されている拡張プロパティの実態クラス<br>ExtraPropertiesExtensionオブジェクトをはpropertiesというプロパティを持ち、そこにキーとバリューで任意のオブジェクトを保持<br>そして、has(),set(),get()の３つのAPIを提供し、propertiesに指定のキーが存在するかの確認、キーと値の設定や取得ができる</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">project.ext.property = <span class="string">'extに追加下プロパティです。'</span></span><br><span class="line">println <span class="string">'拡張プロパティの値 :'</span> + project.property</span><br><span class="line"></span><br><span class="line">project.ext[<span class="string">'property'</span>] = <span class="string">'extに追加したプロパティです。'</span></span><br><span class="line">println <span class="string">'拡張プロパティの値:'</span> + project.ext[<span class="string">'property'</span>]</span><br><span class="line"></span><br><span class="line">project.ext &#123;</span><br><span class="line">  prop1 = <span class="string">'aaa'</span></span><br><span class="line">  prop2 = <span class="string">'bbb'</span></span><br><span class="line">&#125;</span><br><span class="line">println project.ext.prop1 + project.ext.prop2</span><br></pre></td></tr></table></figure>

<h4 id="6-3-タスクの記述"><a href="#6-3-タスクの記述" class="headerlink" title="6.3 タスクの記述"></a>6.3 タスクの記述</h4><h4 id="6-3-1-タスクの定義方法"><a href="#6-3-1-タスクの定義方法" class="headerlink" title="6.3.1 タスクの定義方法"></a>6.3.1 タスクの定義方法</h4><ul>
<li>ビルドフェーズ<ul>
<li>初期化フェーズ</li>
<li>設定フェーズ</li>
<li>実行フェーズ</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> hello <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">println</span> name + <span class="string">': Hello Gradle World!'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 設定のためのブロックとなるため設定フェーズで実行される</span></span><br><span class="line"><span class="keyword">task</span> hello2 &#123;</span><br><span class="line">  <span class="keyword">println</span> name + <span class="string">': Hello Gradle World!'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// descriptionプロパティを出力する例</span></span><br><span class="line"></span><br><span class="line">showDescription <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">println</span> <span class="keyword">description</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">task</span> showDescription.<span class="keyword">description</span> = <span class="string">'showDescriptionタスクです。'</span></span><br><span class="line"><span class="comment">// 順序に違和感があるかもしれないがこの順番で記述しないと行けない</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Task型を使用した定義<ul>
<li>Gradleにはあらかじめ特定のアクションを行うための汎用のタスクが数多く用意されている</li>
<li>それらは独自のタスクを定義する際に利用できる</li>
<li>汎用タスクはGradle本体が提供する標準のものと、</li>
<li>プラグインを適用することで追加されるおのがある</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>タスク型</th>
<th>概要</th>
</tr>
</thead>
<tbody><tr>
<td>Copy</td>
<td>ターゲットとするディレクトリにファイルをコピーする</td>
</tr>
<tr>
<td>Delete</td>
<td>指定されたファイルまたはディレクトリを削除する</td>
</tr>
<tr>
<td>Exec</td>
<td></td>
</tr>
<tr>
<td>JavaExec</td>
<td></td>
</tr>
<tr>
<td>Sync</td>
<td></td>
</tr>
<tr>
<td>Tar</td>
<td></td>
</tr>
<tr>
<td>Zip</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// これはmyCopyというタスクをCopy型で定義するという記述</span></span><br><span class="line"><span class="keyword">task</span> myCopy(type: <span class="keyword">Copy</span>) &#123;</span><br><span class="line">  <span class="keyword">from</span> <span class="string">'original'</span></span><br><span class="line">  to <span class="string">'target'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> myCopyExtension(type: <span class="keyword">Copy</span>)&#123;</span><br><span class="line">  <span class="keyword">from</span> <span class="string">'original'</span></span><br><span class="line">  to <span class="string">'target'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">File</span> newFile = <span class="keyword">file</span>(<span class="string">'original/newFile.txt'</span>)</span><br><span class="line">  <span class="keyword">doFirst</span> &#123;</span><br><span class="line">    <span class="keyword">println</span> <span class="string">'コピー元のファイルに書き込みします'</span></span><br><span class="line">    newFile.<span class="keyword">write</span>(<span class="string">'コピー用のファイルです。'</span>,<span class="string">'UTF-8'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">doLast</span> &#123;</span><br><span class="line">    <span class="keyword">File</span> copied = <span class="keyword">file</span>(<span class="string">'original/newFile_copied.txt'</span>)</span><br><span class="line">    <span class="keyword">if</span> (newFile.renameTo(copied)) &#123;</span><br><span class="line">      <span class="keyword">println</span> <span class="string">'コピーが完了しました。'</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">println</span> <span class="string">'コピーできませんでした。'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>動的なタスクの定義<ul>
<li>複数のサーバーインスタンスをしよいうしている場合に、サーバーごとにIPアドレスを出力するタスクを作成したい場合</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> instances = [<span class="string">'AppServer'</span>:<span class="string">'192.0.2.10'</span>,<span class="string">'DBServer'</span>:<span class="string">'192.0.2.20'</span>,<span class="string">'MailServer'</span>:<span class="string">'192.0.2.30'</span>]</span><br><span class="line"></span><br><span class="line">instances.<span class="keyword">each</span> &#123; serverType, ipAddress -&gt;</span><br><span class="line">  <span class="keyword">task</span> <span class="string">"show$&#123;serverType&#125;"</span> <span class="keyword">doLast</span> &#123;</span><br><span class="line">    <span class="keyword">println</span> ipAddress</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 便利な記載方法だが、Groovyの書き方なれてないと理解出来なさそう</span></span><br></pre></td></tr></table></figure>

<h4 id="6-3-2-依存関係の定義方法"><a href="#6-3-2-依存関係の定義方法" class="headerlink" title="6.3.2 依存関係の定義方法"></a>6.3.2 依存関係の定義方法</h4><p>dependsOnというプロパティを使って定義ができる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">doing.dependsOn todo</span><br><span class="line">done.dependsOn doing</span><br><span class="line"></span><br><span class="line">done.dependsOn doing, reviewing</span><br><span class="line"></span><br><span class="line">done.dependsOn &#123;</span><br><span class="line">  tasks.<span class="keyword">findAll</span> &#123; <span class="keyword">task</span> -&gt; <span class="keyword">task</span>.name ==~ <span class="regexp">/.*ing/</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-3-タスクルールの定義方法"><a href="#6-3-3-タスクルールの定義方法" class="headerlink" title="6.3.3 タスクルールの定義方法"></a>6.3.3 タスクルールの定義方法</h4><p>異なる設定やパラメータに対して同じような処理を指せる場合には、似た名前のタスクを必要な数だけ作成する必要がある<br>そのような場合はタスクにルールをもたせることで簡潔に記述できる</p>
<p>javaのCleanの例</p>
<p><code>gradle cleanTest</code><br><code>gradle cleanJar</code><br>などと指定すると、それぞれのディレクトリのみ削除できる</p>
<p>これは、clean&lt;タスク名&gt;というルールを定義することで実現している</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tasks.addRule(<span class="string">'Pattern: show&lt;TASKS_NAME&gt;: Show task name.'</span>) &#123; taskName -&gt;</span><br><span class="line">  <span class="keyword">if</span> (taskName.startsWith(<span class="string">'show'</span>)) &#123;</span><br><span class="line">    <span class="keyword">task</span>(taskName) <span class="keyword">doLast</span> &#123;</span><br><span class="line">      <span class="keyword">println</span> <span class="string">'*** '</span> + taskName + <span class="string">' ***'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定型的な処理はこのようなルールを作成して定義しておくとよい！！<br>MEMO: これは便利だと思う</p>
<h4 id="6-3-4-タスクの制御"><a href="#6-3-4-タスクの制御" class="headerlink" title="6.3.4 タスクの制御"></a>6.3.4 タスクの制御</h4><ul>
<li>タスクの制御方法<ul>
<li>処理内容の制御：組み込みタスクの処理内容は、タスクを再定義して処理を上書くことで既存の処理内容を変更できる</li>
<li>実行可否の制御：タスクの事項条件を判定し、タスクの実行可否を制御できる</li>
<li>実行順の制御：依存関係以外にも順序付けやファイナライザータスクの指定などで、タスクの実行順を制御できる</li>
</ul>
</li>
</ul>
<h4 id="6-3-5-タスクの上書き"><a href="#6-3-5-タスクの上書き" class="headerlink" title="6.3.5 タスクの上書き"></a>6.3.5 タスクの上書き</h4><p>タスクを上書きする場合、同じタスク名でoverwriteプロパティを有効にして処理を定義するだけ</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> assemble(overwrite: <span class="keyword">true</span>) <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">println</span> <span class="string">'上書きしました。'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-6-タスクの条件実行"><a href="#6-3-6-タスクの条件実行" class="headerlink" title="6.3.6 タスクの条件実行"></a>6.3.6 タスクの条件実行</h4><p>条件によって実行するかしないか制御したい場合</p>
<p>onlyIf()を使用する</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> specialTask <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">println</span> <span class="string">'特別な処理を実行'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">specialTask.onlyIf &#123;</span><br><span class="line">  buildType == <span class="string">'partial-build'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>gradle -PbuildType=partial-build specialTask</code></p>
<h4 id="6-3-7-タスクの順序付け"><a href="#6-3-7-タスクの順序付け" class="headerlink" title="6.3.7 タスクの順序付け"></a>6.3.7 タスクの順序付け</h4><p>mustRunAfterとshouldRunAfterの使い方<br>MEMO: あまり意識することなさそうなので割愛</p>
<h4 id="6-3-8-ファイナライザータスク"><a href="#6-3-8-ファイナライザータスク" class="headerlink" title="6.3.8 ファイナライザータスク"></a>6.3.8 ファイナライザータスク</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例外が起きても実行される</span></span><br><span class="line">normalTask.finalizedBy finalizerTask</span><br></pre></td></tr></table></figure>

<h4 id="6-4-プラグインの記述"><a href="#6-4-プラグインの記述" class="headerlink" title="6.4 プラグインの記述"></a>6.4 プラグインの記述</h4><h4 id="6-4-1-Gradleにおけるプラグイン"><a href="#6-4-1-Gradleにおけるプラグイン" class="headerlink" title="6.4.1 Gradleにおけるプラグイン"></a>6.4.1 Gradleにおけるプラグイン</h4><p>apply()を呼ぶことでプラグインが提供するタスクやプロパティが当該のビルド処理で利用できるようになる</p>
<h4 id="6-4-2-プラグインの適用方法"><a href="#6-4-2-プラグインの適用方法" class="headerlink" title="6.4.2 プラグインの適用方法"></a>6.4.2 プラグインの適用方法</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>.apply(plugin:<span class="string">'java'</span>)</span><br></pre></td></tr></table></figure>

<p>このように記述すると「このビルドスクリプトのProjectオブジェクトにJavaプラグインを適用させている」ということがわかる<br>‘java’はプラグインIDと呼ばれるもの<br>万が一プラグインIDがなければ、Pluginインターフェースを実装下クラスを指定することで、そのプラグインを適用できる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: org.gradle.api.plugins.JavaPlugin</span><br></pre></td></tr></table></figure>

<p>プラグインにはGradle標準以外にも、GithubやMaven Centralリポジトリなどで公開されているものがあります<br>Gradleからみて外部にあるプラグインを利用するには、そのプラグインをダウンロードして読み込む必要があり、プラグインの適用方法も異なります</p>
<p>外部のプラグインを適用する場合は、buildscriptスクリプトブロックにプラグインのある場所とプラグインへの依存関係を設定し、通常のapply()でプラグインを適用</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">  <span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">classpath</span> <span class="string">'org.hidetake: gradle-ssh-plugin:0.1.10'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply plugin: <span class="string">'ssh'</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Gradle2.1 のプラグイン適用方法<ul>
<li>今後はこれが主流になるので覚えておきましょう</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Javaプラグイン</span></span><br><span class="line">plugins &#123;</span><br><span class="line">  id <span class="string">'java'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">  id <span class="string">'org.gradle.java'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">  id <span class="string">'com.example.exampleplugin'</span> version: <span class="string">'1.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-5-マルチプロジェクトでのスクリプトファイルの記述"><a href="#6-5-マルチプロジェクトでのスクリプトファイルの記述" class="headerlink" title="6.5 マルチプロジェクトでのスクリプトファイルの記述"></a>6.5 マルチプロジェクトでのスクリプトファイルの記述</h4><h4 id="6-5-1-レイアウトと記述方法のバリエーション"><a href="#6-5-1-レイアウトと記述方法のバリエーション" class="headerlink" title="6.5.1 レイアウトと記述方法のバリエーション"></a>6.5.1 レイアウトと記述方法のバリエーション</h4><p>TODO: 直近使わないので一旦飛ばす</p>
<h3 id="第7章-依存関係の管理"><a href="#第7章-依存関係の管理" class="headerlink" title="第7章 依存関係の管理"></a>第7章 依存関係の管理</h3><h4 id="7-1-依存関係管理の目的"><a href="#7-1-依存関係管理の目的" class="headerlink" title="7.1 依存関係管理の目的"></a>7.1 依存関係管理の目的</h4><p>Gradleを始めとする多くのビルドツールや統合開発環境において、依存関係とは、「そのビルドの外で作成された成果物への参照」のことを指す</p>
<ul>
<li>依存関係解決の自動化<ul>
<li>設定を書いておくと、任意の場所から必要なファイルをダウンロードまたはコピーしてきてプロジェクトに取り込んでくれる</li>
</ul>
</li>
<li>推移的な依存関係の管理<ul>
<li>必要な外部ファイルが、さらに別の外部ファイルを必要としていないか把握したり、管理したりできる</li>
</ul>
</li>
<li>依存関係の可視化<ul>
<li>プロジェクトがどの外部ファイルのどのバージョンに依存しているか、かんたんに表示できる</li>
</ul>
</li>
</ul>
<p>これら３つの目的を達成するのが本章のテーマ</p>
<h4 id="7-2-依存関係解決の自動化"><a href="#7-2-依存関係解決の自動化" class="headerlink" title="7.2 依存関係解決の自動化"></a>7.2 依存関係解決の自動化</h4><ul>
<li>これら順を追って、ビルドスクリプトの依存関係の設定で使っている<ul>
<li>configrations</li>
<li>dependencies<ul>
<li>といった設定項目について紹介</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="7-2-1-コンフィグレーション"><a href="#7-2-1-コンフィグレーション" class="headerlink" title="7.2.1 コンフィグレーション"></a>7.2.1 コンフィグレーション</h4><p>多くのビルドツールでは依存関係をグループに分けて設定しており、Gradleもグループの概念がある</p>
<p>Mavenにはスコープという概念があり、すべての依存関係はcmpileスコープ、runtimeスコープといったグループに属すように定義することになっている<br>GradleにはMavenのようにあらかじめ定義されているグループはないので、まずどのようなグループが必要化をビルドスクリプトで定義しなければいけない</p>
<p>この依存関係を分類するグループをGradleではコンフィグレーションと呼びます<br>これを使って、依存関係を分類します。<br>これはMavenのスコープとほぼ同義です</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">  conf1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-2-2-依存関係の定義"><a href="#7-2-2-依存関係の定義" class="headerlink" title="7.2.2 依存関係の定義"></a>7.2.2 依存関係の定義</h4><p>コンフィグレーションを定義しｔら、次はそのコンフィグレーションに割り当てる依存関係を定義</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  conf1 files(<span class="string">"libs/sample-lib.jar"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>依存関係の指定方法</p>
<ul>
<li>外部モジュール依存関係<ul>
<li>インターネット上のMavenリポジトリなどからファイルをダウンロードする。リポジトリの定義が別途必要</li>
</ul>
</li>
<li>ファイル依存関係<ul>
<li>ファイルシステム上のファイルを参照</li>
</ul>
</li>
<li>プロジェクト依存関係<ul>
<li>あるプロジェクトから別のプロジェクトの成果物を参照</li>
</ul>
</li>
<li>GradleAPI依存関係<ul>
<li>現在使用しているGradleのAPIが含まれるライブラリファイルへの依存関係</li>
</ul>
</li>
<li>ローカルGroovy依存関係<ul>
<li>現在使用しているGradleが同梱しているGroovyへの依存関係</li>
</ul>
</li>
</ul>
</li>
<li><p>外部モジュール依存関係</p>
<ul>
<li>おおよそ理解できているので割愛</li>
</ul>
</li>
<li><p>ファイル依存関係</p>
<ul>
<li>おおよそ理解できているので割愛</li>
</ul>
</li>
<li><p>プロジェクト依存関係</p>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  <span class="keyword">compile</span> <span class="keyword">project</span>(<span class="string">':shared'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ルートプロジェクトの直下にあるsharedプロジェクトへの依存関係を宣言している<br>プロジェクト階層は:区切り</p>
<ul>
<li>GradleAPI依存関係<ul>
<li>ビルドに使用しているGradleのAPIを参照するための依存関係</li>
<li>Gradleのプラグインやタスクを作成するときなど、Gradle自体を拡張するときに使う</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  conf1 gradleApi()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> showDeps <span class="keyword">doLast</span> &#123;</span><br><span class="line">  configuration.conf1.<span class="keyword">each</span> &#123;</span><br><span class="line">    <span class="keyword">println</span> it.absolutePath</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ローカルGroovy依存関係<ul>
<li>ビルド似使用しているGradle似同梱されているGroovyを参照するための依存関係で、次の用にlocalGroovyを呼び出して指定</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  conf1 localGroovy()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> showDeps <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">configurations</span>.conf1.<span class="keyword">each</span> &#123;</span><br><span class="line">    <span class="keyword">println</span> it.absolutePath</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-2-3-コンフィグレーションの継承"><a href="#7-2-3-コンフィグレーションの継承" class="headerlink" title="7.2.3 コンフィグレーションの継承"></a>7.2.3 コンフィグレーションの継承</h4><p>依存関係のコンフィグレーションは、ほかのコンフィグレーションを継承できる</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">  conf1</span><br><span class="line">  testConf1.extendsFrom conf1 <span class="comment">// testConf1はconf1の依存関係も含む</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  conf1 <span class="keyword">group</span>: <span class="string">'org.codehaus.groovy'</span>, name: <span class="string">'groovy-all'</span>, version: <span class="string">'2.3.1'</span></span><br><span class="line">  testConf1 <span class="keyword">group</span>: <span class="string">'junit'</span>, name: <span class="string">'junit'</span>, version: <span class="string">'4.11'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> showDeps <span class="keyword">doLast</span> &#123;</span><br><span class="line">  <span class="keyword">configurations</span>.testConf1.<span class="keyword">each</span> &#123;</span><br><span class="line">    <span class="keyword">println</span> it.absolutePath</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>★用途<ul>
<li>テスト用のコンフィグレーションにプロダクト用のコンフィグレーションも含めたい<ul>
<li>といった用途によく利用される</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="7-2-4-リポジトリ定義"><a href="#7-2-4-リポジトリ定義" class="headerlink" title="7.2.4 リポジトリ定義"></a>7.2.4 リポジトリ定義</h4><p>外部モジュールの依存関係は、依存関係を取得する外部リポジトリを設定しなくてはいけない</p>
<ul>
<li>Mavenリポジトリ</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">  maven &#123;</span><br><span class="line">    url <span class="string">'http://'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Maven Central リポ維持鳥<ul>
<li>よく利用される一部のリポジトリについては、URLを指定しなくてもリポジトリを指定できる</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">  mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ローカルリポジトリも以下の様に記載できる</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">  mavenLocal()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// jcenter mavenリポジトリも</span></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">  jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ivyリポジトリも</span></span><br><span class="line"><span class="comment">// 使う予定はあまりないので一旦割愛</span></span><br></pre></td></tr></table></figure>

<ul>
<li>パスワードで保護されたリポジトリ</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">  maven &#123;</span><br><span class="line">    url <span class="string">'http://xxxx'</span></span><br><span class="line">  &#125;</span><br><span class="line">  credentials &#123;</span><br><span class="line">    username <span class="string">'user'</span></span><br><span class="line">    password <span class="string">'pass'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>セキュリティ上、認証情報はビルドスクリプトに直書きするのではなく、どこかバージョン管理システム似コミットされない外部ファイルに記述してそれを参照するのがいい</p>
<p>gradle.propertiesに記述例を紹介</p>
<ul>
<li>フラとディレクトリリポジトリ<ul>
<li>ローカルファイルシステム上の単純なディレクトリをリポジトリとして指定できる</li>
<li>ファイルシステムで共有している場合だったり、ライブラリをバージョン管理システムにあげている場合だったり</li>
</ul>
</li>
</ul>
<h4 id="7-2-5-動的バージョンと変更性モジュール"><a href="#7-2-5-動的バージョンと変更性モジュール" class="headerlink" title="7.2.5 動的バージョンと変更性モジュール"></a>7.2.5 動的バージョンと変更性モジュール</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">  conf1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  conf1 <span class="string">'org.slf4j:slf4j-api:1.7.+'</span> <span class="comment">// 1.7系のうち最新版を取得</span></span><br><span class="line">  conf1 <span class="string">'commons-cli:commons-cli:latest.integration'</span> <span class="comment">// 不安定版も含めて最新版を取得</span></span><br><span class="line">  conf1 <span class="string">'junit:junit:latest.release'</span> <span class="comment">// 不安定版の最新版を取得</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-推移的な依存関係の管理"><a href="#7-3-推移的な依存関係の管理" class="headerlink" title="7.3 推移的な依存関係の管理"></a>7.3 推移的な依存関係の管理</h4><p>依存関係に指定したJARファイルなどが更に別のファイルを必要としている場合について<br>名自適に指定した依存関係から依存関係が再帰的に派生することを「推移的な依存関係」とよびます</p>
<h4 id="7-3-1-競合の解決"><a href="#7-3-1-競合の解決" class="headerlink" title="7.3.1 競合の解決"></a>7.3.1 競合の解決</h4><p>推移的な依存関係を管理する場合、避けて通れない問題が、依存関係のバージョン競合</p>
<ul>
<li><p>同じ依存のあるモジュールのバージョン違いをどのように解消するか</p>
</li>
<li><p>２つ解決策がある</p>
<ul>
<li>Newest戦略（デフォルト）<ul>
<li>取得した依存関係のバージョンが競合した場合、最も新しいバージョンの依存関係を使用</li>
</ul>
</li>
<li>Fail戦略<ul>
<li>競合した場合は例外を発行してビルドを失敗させる</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fail戦略を使う場合</span></span><br><span class="line"><span class="keyword">configurations</span>.testConf1 &#123;</span><br><span class="line">  resolutionStrategy &#123;</span><br><span class="line">    failOnVersionConflict() <span class="comment">// Fail戦略を採用する</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-2-推移的な依存関係の除外設定"><a href="#7-3-2-推移的な依存関係の除外設定" class="headerlink" title="7.3.2 推移的な依存関係の除外設定"></a>7.3.2 推移的な依存関係の除外設定</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fail戦略を使う場合</span></span><br><span class="line"><span class="keyword">configurations</span>.testConf1 &#123;</span><br><span class="line">  resolutionStrategy &#123;</span><br><span class="line">    failOnVersionConflict() <span class="comment">// Fail戦略を採用する</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  conf1 <span class="keyword">group</span>: <span class="string">''</span></span><br><span class="line">  testConf1(<span class="keyword">group</span>: <span class="string">''</span>,name: <span class="string">''</span>,version:<span class="string">''</span>)&#123;</span><br><span class="line">    <span class="keyword">exclude</span> module: <span class="string">'groovy-all'</span> <span class="comment">// 依存関係から除外する！</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-3-使用するバージョンの強制"><a href="#7-3-3-使用するバージョンの強制" class="headerlink" title="7.3.3 使用するバージョンの強制"></a>7.3.3 使用するバージョンの強制</h4><ul>
<li><p>バージョン指定して記載するってこと</p>
</li>
<li><p>forceで強制している？</p>
</li>
<li><p>TODO: 必要になった際に再確認</p>
</li>
</ul>
<h4 id="クライアントモジュール依存関係"><a href="#クライアントモジュール依存関係" class="headerlink" title="クライアントモジュール依存関係"></a>クライアントモジュール依存関係</h4><ul>
<li><p>用途</p>
<ul>
<li>依存しているモジュールのメタデータが誤っていたので上書きたい</li>
<li>導入したモジュールに依存している別のライブラリがあった</li>
</ul>
</li>
<li><p>あまり使わないとおもったので割愛</p>
</li>
</ul>
<h4 id="7-4-使用しているモジュールの調査"><a href="#7-4-使用しているモジュールの調査" class="headerlink" title="7.4 使用しているモジュールの調査"></a>7.4 使用しているモジュールの調査</h4><p>ここでは、さらに依存関係を管理する目的の一つ、使用しているモジュールの調査方法を紹介</p>
<p>具体的には、Gradleが用意している依存関係のレポート用タスク、dependenciesタスクが本節のテーマ</p>
<p><code>gradel dependencies</code> で実行できる</p>
<p>依存関係をグラフ化して表示することができる</p>
<h4 id="7-5-キャッシュ制御とオフライン実行"><a href="#7-5-キャッシュ制御とオフライン実行" class="headerlink" title="7.5 キャッシュ制御とオフライン実行"></a>7.5 キャッシュ制御とオフライン実行</h4><h4 id="7-5-1-キャッシュ制御"><a href="#7-5-1-キャッシュ制御" class="headerlink" title="7.5.1 キャッシュ制御"></a>7.5.1 キャッシュ制御</h4><p>ビルドツールでは、一般的に一度解決した依存関係を再利用できるよう、ローカルマシンに依存関係をキャッシュする<br>ただGradleのキャシュ管理は他のビルドツールに比べて複雑</p>
<ul>
<li>次に該当する場合、ネットワークへのアクセスが派生する場合がある<ul>
<li>repositoriesブロックで、ネットワーク上にあるリポジトリが定義されている</li>
<li>依存関係のうち、「外部モジュール依存関係」が使用されている</li>
</ul>
</li>
</ul>
<p>できるだけネットワークアクセスを削減できるように、チェックサムと一致するファイルがキャッシュにあれば、それを使用するような仕組みになっている</p>
<h4 id="7-5-2-オフライン実行"><a href="#7-5-2-オフライン実行" class="headerlink" title="7.5.2 オフライン実行"></a>7.5.2 オフライン実行</h4><p><code>gradle --offline showDeps</code><br>オフラインで、キャッシュを使ってビルドする<br>キャッシュをつかってビルドできなければ、失敗する</p>
<ul>
<li>外部ネットワークとつながらない状態でビルドすることもできる</li>
<li>イントラネット内にリポジトリサーバーを立てる方法紹介</li>
</ul>
<h2 id="第3部［実践編］"><a href="#第3部［実践編］" class="headerlink" title="第3部［実践編］"></a>第3部［実践編］</h2><h3 id="第8章-Gradle-でのテスト"><a href="#第8章-Gradle-でのテスト" class="headerlink" title="第8章 Gradle でのテスト"></a>第8章 Gradle でのテスト</h3><p>Gradleのビルドタスクはプロダクションコードのコンパイルだけでなく、テストコードの粉ピルとテストの実行も行う<br>Gradleを導入してビルドを行うだけで、テストを自動化できる環境が手に入ることになる<br>テストを自動化するにあたって、どのような要件があり、Gradleでどう解決できるかを把握しておく必要がある</p>
<h4 id="8-1-テストの自動化とビルドツール"><a href="#8-1-テストの自動化とビルドツール" class="headerlink" title="8.1 テストの自動化とビルドツール"></a>8.1 テストの自動化とビルドツール</h4><h4 id="8-1-1-テストを取り巻く状況"><a href="#8-1-1-テストを取り巻く状況" class="headerlink" title="8.1.1 テストを取り巻く状況"></a>8.1.1 テストを取り巻く状況</h4><h4 id="8-1-2-自動テスト似おけるビルドツールの要件"><a href="#8-1-2-自動テスト似おけるビルドツールの要件" class="headerlink" title="8.1.2 自動テスト似おけるビルドツールの要件"></a>8.1.2 自動テスト似おけるビルドツールの要件</h4><p>CI導入が一般的になったことで今やCIツールとの親和性は必須の要件</p>
<ul>
<li>特に以下の３点は重要<ul>
<li>環境の差異が吸収できること</li>
<li>特定の範囲でテストを実行できること</li>
<li>スローテストを軽減できる仕組みをもっていること<ul>
<li>実行に非常に時間がかかるテストは「スローテスト」と呼ばれ、</li>
<li>開発プロジェクトを妨げる問題として、しばしば取り上げられるようになった</li>
<li>ビルドツールがあれば暫定対応が容易にできるでしょう</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="8-2-Gradleによるアプローチ"><a href="#8-2-Gradleによるアプローチ" class="headerlink" title="8.2 Gradleによるアプローチ"></a>8.2 Gradleによるアプローチ</h4><p>Gradleは前述のビルドツールの要件をすべて満たしている<br>かんたんにかけるので紹介します</p>
<h4 id="8-2-1-環境差異の吸収"><a href="#8-2-1-環境差異の吸収" class="headerlink" title="8.2.1 環境差異の吸収"></a>8.2.1 環境差異の吸収</h4><ul>
<li><p>ビルドツールなら環境差異を吸収する仕組みを持っていることはあたりまえだが、</p>
</li>
<li><p>Gradleならシンプルにかける</p>
</li>
<li><p>方法は２つ</p>
<ul>
<li>環境ごとにファイルを用意する</li>
<li>１ファイル内でグループ化して切り替える</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// dev</span></span><br><span class="line">ext.app_url = <span class="string">'localhost'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pro</span></span><br><span class="line">ext.app_url = <span class="string">'xxx.xxx.xxx.xxx'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">apply <span class="keyword">from</span>: <span class="string">"environments/$&#123;env&#125;/env.gradle"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> showURL &lt;&lt; &#123;</span><br><span class="line">  <span class="keyword">println</span> <span class="string">"App Server: $&#123;app_url&#125;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// env.conf</span></span><br><span class="line">environments &#123;</span><br><span class="line">  dev &#123;</span><br><span class="line">    app_url = <span class="string">'localhost'</span></span><br><span class="line">  &#125;</span><br><span class="line">  production &#123;</span><br><span class="line">    app_url = <span class="string">'xxx.xxx.xxx.xxx'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line"><span class="keyword">task</span> showURL &lt;&lt; &#123;</span><br><span class="line">  <span class="keyword">def</span> url = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">'config/env.conf'</span>).toURL()</span><br><span class="line">  <span class="keyword">def</span> config = <span class="keyword">new</span> ConfigSlurper(<span class="string">"$env"</span>).parse(url)</span><br><span class="line">  <span class="keyword">println</span> <span class="string">'App Server: '</span> + config.app_url</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-2-2-特定の範囲でテストを実行できること"><a href="#8-2-2-特定の範囲でテストを実行できること" class="headerlink" title="8.2.2 特定の範囲でテストを実行できること"></a>8.2.2 特定の範囲でテストを実行できること</h4><ul>
<li>種類<ul>
<li>パターンマッチングで特定して実行する</li>
<li>テスティングフレームワークの機能を利用して実行する</li>
<li>ソースセット単位で実行する</li>
</ul>
</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">sourceCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"><span class="keyword">targetCompatibility</span> = <span class="number">1.7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> defaultEncoding = <span class="string">'UTF-8'</span></span><br><span class="line">[compileJava, compileTestJava]*.<span class="keyword">options</span>*.encoding = defaultEncoding</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    testCompile <span class="string">'junit:junit:4.11'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test &#123;</span><br><span class="line">	filter &#123;</span><br><span class="line">		includeTestsMatching <span class="string">'*UT'</span></span><br><span class="line">	&#125;</span><br><span class="line">	reports.html.destination = <span class="keyword">file</span>(<span class="string">"$&#123;reports.html.destination&#125;/unit"</span>)</span><br><span class="line">	reports.junitXml.destination = <span class="keyword">file</span>(<span class="string">"$&#123;reports.junitXml.destination&#125;/unit"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> integrationTest(type: Test) &#123;</span><br><span class="line">	filter &#123;</span><br><span class="line">		includeTestsMatching <span class="string">'*IT'</span></span><br><span class="line">	&#125;</span><br><span class="line">	reports.html.destination = <span class="keyword">file</span>(<span class="string">"$&#123;reports.html.destination&#125;/integration"</span>)</span><br><span class="line">	reports.junitXml.destination = <span class="keyword">file</span>(<span class="string">"$&#123;reports.junitXml.destination&#125;/integration"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TODO: 残りの説明割愛、必要になったら見返す</p>
<h4 id="8-2-3-スローテスト対策"><a href="#8-2-3-スローテスト対策" class="headerlink" title="8.2.3 スローテスト対策"></a>8.2.3 スローテスト対策</h4><h3 id="第9章-Android-プロジェクトでの適用"><a href="#第9章-Android-プロジェクトでの適用" class="headerlink" title="第9章 Android プロジェクトでの適用"></a>第9章 Android プロジェクトでの適用</h3><h3 id="第10章-統合開発環境（IDE）との連携"><a href="#第10章-統合開発環境（IDE）との連携" class="headerlink" title="第10章 統合開発環境（IDE）との連携"></a>第10章 統合開発環境（IDE）との連携</h3><h2 id="第4部発展編"><a href="#第4部発展編" class="headerlink" title="第4部発展編"></a>第4部発展編</h2><h3 id="第11章-Jenkins-との連携"><a href="#第11章-Jenkins-との連携" class="headerlink" title="第11章 Jenkins との連携"></a>第11章 Jenkins との連携</h3><h3 id="第12章-アーカイブの作成とファイルの公開"><a href="#第12章-アーカイブの作成とファイルの公開" class="headerlink" title="第12章 アーカイブの作成とファイルの公開"></a>第12章 アーカイブの作成とファイルの公開</h3><h3 id="第13章-エキスパートへの道"><a href="#第13章-エキスパートへの道" class="headerlink" title="第13章 エキスパートへの道"></a>第13章 エキスパートへの道</h3><h3 id="第14章-ほかのビルドツールからの移行"><a href="#第14章-ほかのビルドツールからの移行" class="headerlink" title="第14章 ほかのビルドツールからの移行"></a>第14章 ほかのビルドツールからの移行</h3><h2 id="付録-Gradleリファレンス"><a href="#付録-Gradleリファレンス" class="headerlink" title="付録 Gradleリファレンス"></a>付録 Gradleリファレンス</h2>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最終更新：<time datetime="2020-12-19T10:45:59.592Z" itemprop="dateUpdated">2020-12-19 19:45:59</time>
</span><br>


        
        thank you for your reading my article!!
        
    </div>
    
    <footer>
        <a href="http://yoursite.com">
            <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png" alt="t-tsutsui">
            t-tsutsui
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="https://tutttuwi.github.io/output-over-there/tags/%E6%95%99%E7%A7%91%E6%9B%B8/" target="_blank" rel="tag noopener">教科書</a></li></ul>


            


        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="https://tutttuwi.github.io/output-over-there/Ruby/2021-03_%E7%8F%BE%E5%A0%B4%E3%81%A7%E4%BD%BF%E3%81%88%E3%82%8B%20Ruby%20on%20Rails%205%E9%80%9F%E7%BF%92%E5%AE%9F%E8%B7%B5%E3%82%AC%E3%82%A4%E3%83%89/" target="_blank" rel="noopener" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">現場で使える Ruby on Rails 5速習実践ガイド</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="https://tutttuwi.github.io/output-over-there/JAVA/2020-06_SpringBoot2%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8/" target="_blank" rel="noopener" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">SpringBoot2徹底活用</h4>
      </a>
    </div>
  
</nav>



    

















</article>



</div>

        <footer class="footer">
    <div class="top">
<!--        

        <p>
            
                <span><a href="https://tutttuwi.github.io/output-over-there/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>このブログの内容物は<a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja" target="_blank">クリエイティブ・コモンズ 表示 - 非営利 - 継承 4.0 国際ライセンスの下に提供されています</a></span>
        </p> -->
    </div>
    <div class="bottom">
        <p><span>t-tsutsui &copy; 2015 - 2023</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: 'https://tutttuwi.github.io/output-over-there/', SHARE: false, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
