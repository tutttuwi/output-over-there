<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>現場で使える Ruby on Rails 5速習実践ガイド | OUTPUT*OVER-THERE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#264A2E">
    
    
    <meta name="keywords" content="教科書">
    <meta name="description" content="現場で使える Ruby on Rails 5速習実践ガイド（ISBN978-4-8399-6222-7）理解したこと書籍サイトhttps:&#x2F;&#x2F;book.mynavi.jp&#x2F;ec&#x2F;products&#x2F;detail&#x2F;id&#x3D;93905 サポートサイトhttps:&#x2F;&#x2F;book.mynavi.jp&#x2F;supportsite&#x2F;detail&#x2F;9784839962227.html 書籍情報Railsアプリの基本から実">
<meta property="og:type" content="article">
<meta property="og:title" content="現場で使える Ruby on Rails 5速習実践ガイド">
<meta property="og:url" content="http://yoursite.com/Ruby/2021-03_%E7%8F%BE%E5%A0%B4%E3%81%A7%E4%BD%BF%E3%81%88%E3%82%8B%20Ruby%20on%20Rails%205%E9%80%9F%E7%BF%92%E5%AE%9F%E8%B7%B5%E3%82%AC%E3%82%A4%E3%83%89/index.html">
<meta property="og:site_name" content="OUTPUT*OVER-THERE">
<meta property="og:description" content="現場で使える Ruby on Rails 5速習実践ガイド（ISBN978-4-8399-6222-7）理解したこと書籍サイトhttps:&#x2F;&#x2F;book.mynavi.jp&#x2F;ec&#x2F;products&#x2F;detail&#x2F;id&#x3D;93905 サポートサイトhttps:&#x2F;&#x2F;book.mynavi.jp&#x2F;supportsite&#x2F;detail&#x2F;9784839962227.html 書籍情報Railsアプリの基本から実">
<meta property="og:locale" content="ja_JP">
<meta property="og:image" content="http://yoursite.com/hexo/source/img/2021-03-28-15-05-16.png">
<meta property="article:published_time" content="2020-08-19T15:00:00.000Z">
<meta property="article:modified_time" content="2021-03-28T16:08:23.003Z">
<meta property="article:author" content="t-tsutsui">
<meta property="article:tag" content="教科書">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/hexo/source/img/2021-03-28-15-05-16.png">
    
        <link rel="alternate" type="application/atom+xml" title="OUTPUT*OVER-THERE" href="https://tutttuwi.github.io/output-over-there/atom.xml">
    
    <link rel="shortcut icon" href="https://tutttuwi.github.io/output-over-there/favicon.ico">
    <link rel="stylesheet" href="https://tutttuwi.github.io/output-over-there/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(https://tutttuwi.github.io/output-over-there/img/brand.png)">
      <div class="brand">
        <a href="https://tutttuwi.github.io/output-over-there/" class="avatar waves-effect waves-circle waves-light">
          <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">t-tsutsui</h5>
          <a href="mailto:t.tsutsui9117@gmail.com" title="t.tsutsui9117@gmail.com" class="mail">t.tsutsui9117@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/about"  >
                <i class="icon icon-lg icon-link"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://tutttuwi.github.io/output-over-there/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">現場で使える Ruby on Rails 5速習実践ガイド</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="検索">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">現場で使える Ruby on Rails 5速習実践ガイド</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-08-19T15:00:00.000Z" itemprop="datePublished" class="page-time">
  2020-08-20
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/Ruby/">Ruby</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#現場で使える-Ruby-on-Rails-5速習実践ガイド（ISBN978-4-8399-6222-7）"><span class="post-toc-number">1.</span> <span class="post-toc-text">現場で使える Ruby on Rails 5速習実践ガイド（ISBN978-4-8399-6222-7）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#理解したこと"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">理解したこと</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#書籍サイト"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">書籍サイト</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#サポートサイト"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">サポートサイト</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#書籍情報"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">書籍情報</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#＜入門編＞"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">＜入門編＞</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter-1-RailsのためのRuby入門"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">Chapter 1 RailsのためのRuby入門</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-1-オブジェクトを理解しよう"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">1-1 オブジェクトを理解しよう</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-1-万物がオブジェクト"><span class="post-toc-number">1.7.1.</span> <span class="post-toc-text">1-1-1 万物がオブジェクト</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-2-irb"><span class="post-toc-number">1.7.2.</span> <span class="post-toc-text">1-1-2 irb</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-3-文字列"><span class="post-toc-number">1.7.3.</span> <span class="post-toc-text">1-1-3 文字列</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-4-数値"><span class="post-toc-number">1.7.4.</span> <span class="post-toc-text">1-1-4 数値</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-5-オブジェクトに、自分が何者かを聞いてみる"><span class="post-toc-number">1.7.5.</span> <span class="post-toc-text">1-1-5 オブジェクトに、自分が何者かを聞いてみる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-6-クラスとインスタンス"><span class="post-toc-number">1.7.6.</span> <span class="post-toc-text">1-1-6 クラスとインスタンス</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-7-オブジェクトの機能はクラスで決まる"><span class="post-toc-number">1.7.7.</span> <span class="post-toc-text">1-1-7 オブジェクトの機能はクラスで決まる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-8-変数"><span class="post-toc-number">1.7.8.</span> <span class="post-toc-text">1-1-8 変数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-9-コメント"><span class="post-toc-number">1.7.9.</span> <span class="post-toc-text">1-1-9 コメント</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-10-メソッド"><span class="post-toc-number">1.7.10.</span> <span class="post-toc-text">1-1-10 メソッド</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-2-自分でクラスを作ってみよう"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">1-2 自分でクラスを作ってみよう</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-1-クラスを作る"><span class="post-toc-number">1.8.1.</span> <span class="post-toc-text">1-2-1 クラスを作る</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-2-Userクラスを作る"><span class="post-toc-number">1.8.2.</span> <span class="post-toc-text">1-2-2 Userクラスを作る</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-3-Userクラスにメソッドを定義する"><span class="post-toc-number">1.8.3.</span> <span class="post-toc-text">1-2-3 Userクラスにメソッドを定義する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-4-インスタンス変数"><span class="post-toc-number">1.8.4.</span> <span class="post-toc-text">1-2-4 インスタンス変数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-5-ローカル変数とインスタンス変数の違い"><span class="post-toc-number">1.8.5.</span> <span class="post-toc-text">1-2-5 ローカル変数とインスタンス変数の違い</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-6-属性"><span class="post-toc-number">1.8.6.</span> <span class="post-toc-text">1-2-6 属性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-7-ゲッターやセッターを簡単に定義する"><span class="post-toc-number">1.8.7.</span> <span class="post-toc-text">1-2-7 ゲッターやセッターを簡単に定義する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-8-住んでいる場所やEメールアドレスを持たせる"><span class="post-toc-number">1.8.8.</span> <span class="post-toc-text">1-2-8 住んでいる場所やEメールアドレスを持たせる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-9-メソッドからメソッドを使う"><span class="post-toc-number">1.8.9.</span> <span class="post-toc-text">1-2-9 メソッドからメソッドを使う</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-10-まとめ-オブジェクトの振る舞いとデータ"><span class="post-toc-number">1.8.10.</span> <span class="post-toc-text">1-2-10 まとめ - オブジェクトの振る舞いとデータ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-3-Rubyプログラムの基礎知識"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">1-3 Rubyプログラムの基礎知識</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-1-演算子"><span class="post-toc-number">1.9.1.</span> <span class="post-toc-text">1-3-1 演算子</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-2-nil"><span class="post-toc-number">1.9.2.</span> <span class="post-toc-text">1-3-2 nil</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-3-真偽"><span class="post-toc-number">1.9.3.</span> <span class="post-toc-text">1-3-3 真偽</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-4-条件分岐"><span class="post-toc-number">1.9.4.</span> <span class="post-toc-text">1-3-4 条件分岐</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-5-配列"><span class="post-toc-number">1.9.5.</span> <span class="post-toc-text">1-3-5 配列</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-6-ハッシュ"><span class="post-toc-number">1.9.6.</span> <span class="post-toc-text">1-3-6 ハッシュ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-4-少し高度なテクニック"><span class="post-toc-number">1.10.</span> <span class="post-toc-text">1-4 少し高度なテクニック</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-4-1-initialize"><span class="post-toc-number">1.10.1.</span> <span class="post-toc-text">1-4-1 initialize</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-4-2-メソッドの呼び出しに制限をかける"><span class="post-toc-number">1.10.2.</span> <span class="post-toc-text">1-4-2 メソッドの呼び出しに制限をかける</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-4-3-引数にデフォルト値を指定する"><span class="post-toc-number">1.10.3.</span> <span class="post-toc-text">1-4-3 引数にデフォルト値を指定する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-4-4-キーワード引数"><span class="post-toc-number">1.10.4.</span> <span class="post-toc-text">1-4-4 キーワード引数</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-5-似たところのあるクラスを作りたいとき"><span class="post-toc-number">1.11.</span> <span class="post-toc-text">1-5 似たところのあるクラスを作りたいとき</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-5-1-継承"><span class="post-toc-number">1.11.1.</span> <span class="post-toc-text">1-5-1 継承</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-5-2-モジュールによる共通化（Mix-in）"><span class="post-toc-number">1.11.2.</span> <span class="post-toc-text">1-5-2 モジュールによる共通化（Mix-in）</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-クラスメソッド"><span class="post-toc-number">1.12.</span> <span class="post-toc-text">Column クラスメソッド</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-6-プログラムの異常を検知しよう（例外捕捉）"><span class="post-toc-number">1.13.</span> <span class="post-toc-text">1-6 プログラムの異常を検知しよう（例外捕捉）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-7-読めると便利！Rubyっぽい書き方"><span class="post-toc-number">1.14.</span> <span class="post-toc-text">1-7 読めると便利！Rubyっぽい書き方</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-7-1-nil-ガード"><span class="post-toc-number">1.14.1.</span> <span class="post-toc-text">1-7-1 nil ガード</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-7-2-ぼっち演算子-amp"><span class="post-toc-number">1.14.2.</span> <span class="post-toc-text">1-7-2 ぼっち演算子 &amp;.</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-7-3-記法"><span class="post-toc-number">1.14.3.</span> <span class="post-toc-text">1-7-3 %記法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-7-4-配列の各要素から特定の属性だけを取り出す"><span class="post-toc-number">1.14.4.</span> <span class="post-toc-text">1-7-4 配列の各要素から特定の属性だけを取り出す</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter2-Railsアプリケーションをのぞいてみよう"><span class="post-toc-number">1.15.</span> <span class="post-toc-text">Chapter2 Railsアプリケーションをのぞいてみよう</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-1-コマンド実行環境を準備しよう"><span class="post-toc-number">1.16.</span> <span class="post-toc-text">2-1 コマンド実行環境を準備しよう</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-1-Windowsでコマンド実行環境を用意する"><span class="post-toc-number">1.16.1.</span> <span class="post-toc-text">2-1-1 Windowsでコマンド実行環境を用意する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-2-rbenvをインストールしよう"><span class="post-toc-number">1.17.</span> <span class="post-toc-text">2-2 rbenvをインストールしよう</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-1-macOSでrbnevをインストール"><span class="post-toc-number">1.17.1.</span> <span class="post-toc-text">2-2-1 macOSでrbnevをインストール</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-2-Windows（WSL）でrbenvをインストール"><span class="post-toc-number">1.17.2.</span> <span class="post-toc-text">2-2-2 Windows（WSL）でrbenvをインストール</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-3-Rubyのインストール"><span class="post-toc-number">1.18.</span> <span class="post-toc-text">2-3 Rubyのインストール</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-1-Rubyのパッケージ管理ツール「RubyGems」"><span class="post-toc-number">1.18.1.</span> <span class="post-toc-text">2-3-1 Rubyのパッケージ管理ツール「RubyGems」</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-2-Bundlerのインストール"><span class="post-toc-number">1.18.2.</span> <span class="post-toc-text">2-3-2 Bundlerのインストール</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-4-Railsのインストール"><span class="post-toc-number">1.19.</span> <span class="post-toc-text">2-4 Railsのインストール</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-1-Node-jsのインストール"><span class="post-toc-number">1.19.1.</span> <span class="post-toc-text">2-4-1 Node.jsのインストール</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-5-データベースのインストールとセットアップ"><span class="post-toc-number">1.20.</span> <span class="post-toc-text">2-5 データベースのインストールとセットアップ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-5-1-macOSの場合"><span class="post-toc-number">1.20.1.</span> <span class="post-toc-text">2-5-1 macOSの場合</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-5-2-Windows（WSL）の場合"><span class="post-toc-number">1.20.2.</span> <span class="post-toc-text">2-5-2 Windows（WSL）の場合</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-5-3-トラブルシューティング：RailsでPG-ConnectionBadというエラーになるとき"><span class="post-toc-number">1.20.3.</span> <span class="post-toc-text">2-5-3 トラブルシューティング：RailsでPG::ConnectionBadというエラーになるとき</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-6-Railsに触れてみよう"><span class="post-toc-number">1.21.</span> <span class="post-toc-text">2-6 Railsに触れてみよう</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-6-1-実際にアプリケーションを動かしてみよう"><span class="post-toc-number">1.21.1.</span> <span class="post-toc-text">2-6-1 実際にアプリケーションを動かしてみよう</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-6-1-2-ユーザ管理画面の雛形を作る"><span class="post-toc-number">1.21.1.1.</span> <span class="post-toc-text">2-6-1-2 ユーザ管理画面の雛形を作る</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-6-1-4-コードの通り道"><span class="post-toc-number">1.21.1.2.</span> <span class="post-toc-text">2-6-1-4 コードの通り道</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-6-1-5-ディレクトリ構成"><span class="post-toc-number">1.21.1.3.</span> <span class="post-toc-text">2-6-1-5 ディレクトリ構成</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-YAMLの基本"><span class="post-toc-number">1.22.</span> <span class="post-toc-text">Column YAMLの基本</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-6-2-RailsのMVC"><span class="post-toc-number">1.22.1.</span> <span class="post-toc-text">2-6-2 RailsのMVC</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter3-タスク管理アプリケーションを作ろう"><span class="post-toc-number">1.23.</span> <span class="post-toc-text">Chapter3 タスク管理アプリケーションを作ろう</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-1-アプリケーション作成の準備をしよう"><span class="post-toc-number">1.24.</span> <span class="post-toc-text">3-1 アプリケーション作成の準備をしよう</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-1-作成するアプリケーションの内容を考える"><span class="post-toc-number">1.24.1.</span> <span class="post-toc-text">3-1-1 作成するアプリケーションの内容を考える</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-2-アプリケーションの名前を決める"><span class="post-toc-number">1.24.2.</span> <span class="post-toc-text">3-1-2 アプリケーションの名前を決める</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-3-アプリケーションのひな形を作成する"><span class="post-toc-number">1.24.3.</span> <span class="post-toc-text">3-1-3 アプリケーションのひな形を作成する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-4-データベースの環境ごとの使い分け"><span class="post-toc-number">1.24.4.</span> <span class="post-toc-text">3-1-4 データベースの環境ごとの使い分け</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-5-ビュー層を効率良く書くためにSlimを使えるようにする"><span class="post-toc-number">1.24.5.</span> <span class="post-toc-text">3-1-5 ビュー層を効率良く書くためにSlimを使えるようにする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-6-アプリケーションの見栄えを良くするためにBootstrapを導入する"><span class="post-toc-number">1.24.6.</span> <span class="post-toc-text">3-1-6 アプリケーションの見栄えを良くするためにBootstrapを導入する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-7-Railsのエラーメッセージなどを日本語で出せるようにする"><span class="post-toc-number">1.24.7.</span> <span class="post-toc-text">3-1-7 Railsのエラーメッセージなどを日本語で出せるようにする</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-2-タスクモデルを作成する"><span class="post-toc-number">1.25.</span> <span class="post-toc-text">3-2 タスクモデルを作成する</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-2-1-タスクモデルの属性を設計する"><span class="post-toc-number">1.25.1.</span> <span class="post-toc-text">3-2-1 タスクモデルの属性を設計する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-2-2-タスクモデルのひな形を作成する"><span class="post-toc-number">1.25.2.</span> <span class="post-toc-text">3-2-2 タスクモデルのひな形を作成する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-2-3-マイグレーションでデータベースにテーブルを追加する"><span class="post-toc-number">1.25.3.</span> <span class="post-toc-text">3-2-3 マイグレーションでデータベースにテーブルを追加する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-3-コントローラとビュー"><span class="post-toc-number">1.26.</span> <span class="post-toc-text">3-3 コントローラとビュー</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-1-新規登録機能を実装する"><span class="post-toc-number">1.26.1.</span> <span class="post-toc-text">3-3-1 新規登録機能を実装する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-2-一覧表示機能を実装する"><span class="post-toc-number">1.26.2.</span> <span class="post-toc-text">3-3-2 一覧表示機能を実装する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-3-詳細表示機能を実装する"><span class="post-toc-number">1.26.3.</span> <span class="post-toc-text">3-3-3 詳細表示機能を実装する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-4-編集機能を実装する"><span class="post-toc-number">1.26.4.</span> <span class="post-toc-text">3-3-4 編集機能を実装する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-5-削除機能を実装する"><span class="post-toc-number">1.26.5.</span> <span class="post-toc-text">3-3-5 削除機能を実装する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-6-シンプルなCRUD機能の完成"><span class="post-toc-number">1.26.6.</span> <span class="post-toc-text">3-3-6 シンプルなCRUD機能の完成</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#＜レベルアップ編＞"><span class="post-toc-number">1.27.</span> <span class="post-toc-text">＜レベルアップ編＞</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter4-現実の複雑さに対応する"><span class="post-toc-number">1.28.</span> <span class="post-toc-text">Chapter4 現実の複雑さに対応する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-1-さまざまなマイグレーション操作を使いこなす"><span class="post-toc-number">1.29.</span> <span class="post-toc-text">4-1 さまざまなマイグレーション操作を使いこなす</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-1-マイグレーションの適用を理解しよう"><span class="post-toc-number">1.29.1.</span> <span class="post-toc-text">4-1-1 マイグレーションの適用を理解しよう</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-2-マイグレーションではバージョンの上げ下げ両方を意識しよう"><span class="post-toc-number">1.29.2.</span> <span class="post-toc-text">4-1-2 マイグレーションではバージョンの上げ下げ両方を意識しよう</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-3-マイグレーションの名前の付け方に注意する"><span class="post-toc-number">1.29.3.</span> <span class="post-toc-text">4-1-3 マイグレーションの名前の付け方に注意する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-4-schema-rb"><span class="post-toc-number">1.29.4.</span> <span class="post-toc-text">4-1-4 schema.rb</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-5-マイグレーションに関する主なコマンド"><span class="post-toc-number">1.29.5.</span> <span class="post-toc-text">4-1-5 マイグレーションに関する主なコマンド</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-6-マイグレーションの適用中にエラーが出たときは"><span class="post-toc-number">1.29.6.</span> <span class="post-toc-text">4-1-6 マイグレーションの適用中にエラーが出たときは</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-2-データの内容を制限する"><span class="post-toc-number">1.30.</span> <span class="post-toc-text">4-2 データの内容を制限する</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-1-データ型"><span class="post-toc-number">1.30.1.</span> <span class="post-toc-text">4-2-1 データ型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-2-NOT-NULL制約"><span class="post-toc-number">1.30.2.</span> <span class="post-toc-text">4-2-2 NOT NULL制約</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-3-文字列カラムの長さを指定する"><span class="post-toc-number">1.30.3.</span> <span class="post-toc-text">4-2-3 文字列カラムの長さを指定する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-4-ユニークインデックスを作成する"><span class="post-toc-number">1.30.4.</span> <span class="post-toc-text">4-2-4 ユニークインデックスを作成する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-3-モデルの「検証」を使う"><span class="post-toc-number">1.31.</span> <span class="post-toc-text">4-3 モデルの「検証」を使う</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-1-モデルの検証の仕組み"><span class="post-toc-number">1.31.1.</span> <span class="post-toc-text">4-3-1 モデルの検証の仕組み</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-2-検証の書き方"><span class="post-toc-number">1.31.2.</span> <span class="post-toc-text">4-3-2 検証の書き方</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-3-必須かどうかの検証を追加する"><span class="post-toc-number">1.31.3.</span> <span class="post-toc-text">4-3-3 必須かどうかの検証を追加する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-4-コントローラとビューで検証エラーに対応する"><span class="post-toc-number">1.31.4.</span> <span class="post-toc-text">4-3-4 コントローラとビューで検証エラーに対応する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-5-文字列長の検証を追加する"><span class="post-toc-number">1.31.5.</span> <span class="post-toc-text">4-3-5 文字列長の検証を追加する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-6-オリジナルの検証コードを書く"><span class="post-toc-number">1.31.6.</span> <span class="post-toc-text">4-3-6 オリジナルの検証コードを書く</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-7-検証が行われない登録・更新操作もある"><span class="post-toc-number">1.31.7.</span> <span class="post-toc-text">4-3-7 検証が行われない登録・更新操作もある</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-4-モデルの状態を自動的に制御する―「コールバック」"><span class="post-toc-number">1.32.</span> <span class="post-toc-text">4-4 モデルの状態を自動的に制御する―「コールバック」</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-4-1-コールバックの仕組み"><span class="post-toc-number">1.32.1.</span> <span class="post-toc-text">4-4-1 コールバックの仕組み</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-4-2-コールバックの実装"><span class="post-toc-number">1.32.2.</span> <span class="post-toc-text">4-4-2 コールバックの実装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-4-3-トランザクション"><span class="post-toc-number">1.32.3.</span> <span class="post-toc-text">4-4-3 トランザクション</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-5-ログイン機能を作る"><span class="post-toc-number">1.33.</span> <span class="post-toc-text">4-5 ログイン機能を作る</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-1-セッションとCookie"><span class="post-toc-number">1.33.1.</span> <span class="post-toc-text">4-5-1 セッションとCookie</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-2-User-モデルを作る"><span class="post-toc-number">1.33.2.</span> <span class="post-toc-text">4-5-2 User モデルを作る</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-3-パスワードを受け付けてdigestを保存する"><span class="post-toc-number">1.33.3.</span> <span class="post-toc-text">4-5-3 パスワードを受け付けてdigestを保存する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-4-ユーザー管理機能一式を追加する"><span class="post-toc-number">1.33.4.</span> <span class="post-toc-text">4-5-4 ユーザー管理機能一式を追加する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-5-ログイン機能を実装する"><span class="post-toc-number">1.33.5.</span> <span class="post-toc-text">4-5-5 ログイン機能を実装する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-6-ログインのフォームを表示する"><span class="post-toc-number">1.33.6.</span> <span class="post-toc-text">4-5-6 ログインのフォームを表示する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-7-ログインの実行"><span class="post-toc-number">1.33.7.</span> <span class="post-toc-text">4-5-7 ログインの実行</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-8-ログイン状態の取得を簡単にする"><span class="post-toc-number">1.33.8.</span> <span class="post-toc-text">4-5-8 ログイン状態の取得を簡単にする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-9-ログアウト機能を実装する"><span class="post-toc-number">1.33.9.</span> <span class="post-toc-text">4-5-9 ログアウト機能を実装する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-10-ログインしていなければタスク管理を利用できなくする"><span class="post-toc-number">1.33.10.</span> <span class="post-toc-text">4-5-10 ログインしていなければタスク管理を利用できなくする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-11-ログインしているユーザーのデータだけを扱えるようにする"><span class="post-toc-number">1.33.11.</span> <span class="post-toc-text">4-5-11 ログインしているユーザーのデータだけを扱えるようにする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-12-管理機能を管理者ユーザーだけに利用させるようにする"><span class="post-toc-number">1.33.12.</span> <span class="post-toc-text">4-5-12 管理機能を管理者ユーザーだけに利用させるようにする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-5-13-最初の管理者ユーザーを作る"><span class="post-toc-number">1.33.13.</span> <span class="post-toc-text">4-5-13 最初の管理者ユーザーを作る</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-6-データを絞り込む"><span class="post-toc-number">1.34.</span> <span class="post-toc-text">4-6 データを絞り込む</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-6-1-絞り込みの起点"><span class="post-toc-number">1.34.1.</span> <span class="post-toc-text">4-6-1 絞り込みの起点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-6-2-絞り込み条件"><span class="post-toc-number">1.34.2.</span> <span class="post-toc-text">4-6-2 絞り込み条件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-6-3-実行部分"><span class="post-toc-number">1.34.3.</span> <span class="post-toc-text">4-6-3 実行部分</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-7-タスク一覧を作成日時の新しい順に表示する"><span class="post-toc-number">1.35.</span> <span class="post-toc-text">4-7 タスク一覧を作成日時の新しい順に表示する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-8-scopeを活用する"><span class="post-toc-number">1.36.</span> <span class="post-toc-text">4-8 scopeを活用する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-9-フィルタを使い重複を避ける"><span class="post-toc-number">1.37.</span> <span class="post-toc-text">4-9 フィルタを使い重複を避ける</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-10-詳しい説明に含まれるURLをリンクとして表示する"><span class="post-toc-number">1.37.1.</span> <span class="post-toc-text">4-10 詳しい説明に含まれるURLをリンクとして表示する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-10-1-まとめ"><span class="post-toc-number">1.37.2.</span> <span class="post-toc-text">4-10-1 まとめ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter5-テストをはじめよう"><span class="post-toc-number">1.38.</span> <span class="post-toc-text">Chapter5 テストをはじめよう</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-1-テストについて"><span class="post-toc-number">1.39.</span> <span class="post-toc-text">5-1 テストについて</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-2-テストを書くことのメリット"><span class="post-toc-number">1.40.</span> <span class="post-toc-text">5-2 テストを書くことのメリット</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-1-テスト全体にかかるコストの削減"><span class="post-toc-number">1.40.1.</span> <span class="post-toc-text">5-2-1 テスト全体にかかるコストの削減</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-2-変更をフットワーク軽く行えるようになる"><span class="post-toc-number">1.40.2.</span> <span class="post-toc-text">5-2-2 変更をフットワーク軽く行えるようになる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-3-環境のバージョンアップやリファクタリングの必須条件"><span class="post-toc-number">1.40.3.</span> <span class="post-toc-text">5-2-3 環境のバージョンアップやリファクタリングの必須条件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-4-仕様変更の影響の大きさを簡単に把握することができる"><span class="post-toc-number">1.40.4.</span> <span class="post-toc-text">5-2-4 仕様変更の影響の大きさを簡単に把握することができる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-5-仕様を記述したドキュメントとしても機能する"><span class="post-toc-number">1.40.5.</span> <span class="post-toc-text">5-2-5 仕様を記述したドキュメントとしても機能する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-6-仕様やインターフェイスを深く考えるきっかけとして役立つ"><span class="post-toc-number">1.40.6.</span> <span class="post-toc-text">5-2-6 仕様やインターフェイスを深く考えるきっかけとして役立つ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-7-適切な粒度のコードになりやすい"><span class="post-toc-number">1.40.7.</span> <span class="post-toc-text">5-2-7 適切な粒度のコードになりやすい</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-8-確実性を高めることで開発効率を上げる"><span class="post-toc-number">1.40.8.</span> <span class="post-toc-text">5-2-8 確実性を高めることで開発効率を上げる</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-3-本章で利用するテスト用ライブラリ"><span class="post-toc-number">1.41.</span> <span class="post-toc-text">5-3 本章で利用するテスト用ライブラリ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-1-RSpec"><span class="post-toc-number">1.41.1.</span> <span class="post-toc-text">5-3-1 RSpec</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-2-Capybara"><span class="post-toc-number">1.41.2.</span> <span class="post-toc-text">5-3-2 Capybara</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-3-FactoryBot"><span class="post-toc-number">1.41.3.</span> <span class="post-toc-text">5-3-3 FactoryBot</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-4-本章で記述するテストの種類"><span class="post-toc-number">1.42.</span> <span class="post-toc-text">5-4 本章で記述するテストの種類</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-1-モデルのテスト"><span class="post-toc-number">1.42.1.</span> <span class="post-toc-text">5-4-1 モデルのテスト</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-2-結合テスト"><span class="post-toc-number">1.42.2.</span> <span class="post-toc-text">5-4-2 結合テスト</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-3-ルーティング、メーラー、ジョブのテスト"><span class="post-toc-number">1.42.3.</span> <span class="post-toc-text">5-4-3 ルーティング、メーラー、ジョブのテスト</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-4-あまり利用しないテスト"><span class="post-toc-number">1.42.4.</span> <span class="post-toc-text">5-4-4 あまり利用しないテスト</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-System-Specとは？"><span class="post-toc-number">1.43.</span> <span class="post-toc-text">Column System Specとは？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-5-System-Specを書くための準備"><span class="post-toc-number">1.44.</span> <span class="post-toc-text">5-5 System Specを書くための準備</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-5-1-RSpecのインストールと初期準備"><span class="post-toc-number">1.44.1.</span> <span class="post-toc-text">5-5-1 RSpecのインストールと初期準備</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-5-2-Capybaraの初期準備"><span class="post-toc-number">1.44.2.</span> <span class="post-toc-text">5-5-2 Capybaraの初期準備</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-5-3-FactoryBotのインストール"><span class="post-toc-number">1.44.3.</span> <span class="post-toc-text">5-5-3 FactoryBotのインストール</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-6-RSpecの基本形"><span class="post-toc-number">1.45.</span> <span class="post-toc-text">5-6 RSpecの基本形</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-7-FactoryBotでテストデータを作成できるように準備する"><span class="post-toc-number">1.46.</span> <span class="post-toc-text">5-7 FactoryBotでテストデータを作成できるように準備する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-8-タスクの一覧表示機能のSystem-Spec"><span class="post-toc-number">1.47.</span> <span class="post-toc-text">5-8 タスクの一覧表示機能のSystem Spec</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-8-1-ユーザーAを作成しておく"><span class="post-toc-number">1.47.1.</span> <span class="post-toc-text">5-8-1 ユーザーAを作成しておく</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-8-2-作成者がユーザーAであるタスクを作成しておく"><span class="post-toc-number">1.47.2.</span> <span class="post-toc-text">5-8-2 作成者がユーザーAであるタスクを作成しておく</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-8-3-ユーザーAでログインする"><span class="post-toc-number">1.47.3.</span> <span class="post-toc-text">5-8-3 ユーザーAでログインする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-8-4-作成済みのタスクの名称が画面上に表示されていることを確認"><span class="post-toc-number">1.47.4.</span> <span class="post-toc-text">5-8-4 作成済みのタスクの名称が画面上に表示されていることを確認</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-9-他のユーザーが作成したタスクが表示されないことの確認"><span class="post-toc-number">1.48.</span> <span class="post-toc-text">5-9 他のユーザーが作成したタスクが表示されないことの確認</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-10-beforeを利用した共通化"><span class="post-toc-number">1.48.1.</span> <span class="post-toc-text">5-10 beforeを利用した共通化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-11-letを利用した共通化"><span class="post-toc-number">1.48.2.</span> <span class="post-toc-text">5-11 letを利用した共通化</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-letとlet"><span class="post-toc-number">1.49.</span> <span class="post-toc-text">Column letとlet!</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-12-詳細表示機能のSpecを追加する"><span class="post-toc-number">1.49.1.</span> <span class="post-toc-text">5-12 詳細表示機能のSpecを追加する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-13-shared-examplesを利用する"><span class="post-toc-number">1.49.2.</span> <span class="post-toc-text">5-13 shared_examplesを利用する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-14-新規作成機能のSystem-Spec"><span class="post-toc-number">1.49.3.</span> <span class="post-toc-text">5-14 新規作成機能のSystem Spec</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-15-letの上書き"><span class="post-toc-number">1.49.4.</span> <span class="post-toc-text">5-15 letの上書き</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-16-Specが失敗したときの調査方法"><span class="post-toc-number">1.49.5.</span> <span class="post-toc-text">5-16 Specが失敗したときの調査方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-16-1-Specが失敗するとき"><span class="post-toc-number">1.49.6.</span> <span class="post-toc-text">5-16-1 Specが失敗するとき</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-16-2-Specが失敗したときに確認すべき情報"><span class="post-toc-number">1.49.7.</span> <span class="post-toc-text">5-16-2 Specが失敗したときに確認すべき情報</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-16-3-失敗場所とエラーメッセージを手がかりに原因を探す"><span class="post-toc-number">1.49.8.</span> <span class="post-toc-text">5-16-3 失敗場所とエラーメッセージを手がかりに原因を探す</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-16-4-コンソールを使って調査する"><span class="post-toc-number">1.49.9.</span> <span class="post-toc-text">5-16-4 コンソールを使って調査する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-16-5-スクリーンショットを活用する"><span class="post-toc-number">1.49.10.</span> <span class="post-toc-text">5-16-5 スクリーンショットを活用する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter6-Railsの全体像を理解する"><span class="post-toc-number">1.50.</span> <span class="post-toc-text">Chapter6 Railsの全体像を理解する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-1-Railsを取り巻く世界"><span class="post-toc-number">1.51.</span> <span class="post-toc-text">6-1 Railsを取り巻く世界</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-2-ルーティング"><span class="post-toc-number">1.52.</span> <span class="post-toc-text">6-2 ルーティング</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-1-「-ルート」を構成する5つの要素"><span class="post-toc-number">1.52.1.</span> <span class="post-toc-text">6-2-1 「 ルート」を構成する5つの要素</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-2-1つのルートを定義する"><span class="post-toc-number">1.52.2.</span> <span class="post-toc-text">6-2-2 1つのルートを定義する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-URLヘルパーメソッドは使わなくてはダメ？"><span class="post-toc-number">1.53.</span> <span class="post-toc-text">Column URLヘルパーメソッドは使わなくてはダメ？</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-3-「-RESTful」の概要をつかんでおこう"><span class="post-toc-number">1.53.1.</span> <span class="post-toc-text">6-2-3 「 RESTful」の概要をつかんでおこう</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-4-RESTfulにするための-Railsの流儀"><span class="post-toc-number">1.53.2.</span> <span class="post-toc-text">6-2-4 RESTfulにするための Railsの流儀</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-RESTfulはどの程度追求すべき？"><span class="post-toc-number">1.54.</span> <span class="post-toc-text">Column RESTfulはどの程度追求すべき？</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-5-resourcesでCRUDのルート一式を定義する"><span class="post-toc-number">1.54.1.</span> <span class="post-toc-text">6-2-5 resourcesでCRUDのルート一式を定義する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-6-routes-rbの構造化"><span class="post-toc-number">1.54.2.</span> <span class="post-toc-text">6-2-6 routes.rbの構造化</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-routes-rbの整理のコツ"><span class="post-toc-number">1.55.</span> <span class="post-toc-text">Column routes.rbの整理のコツ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-3-国際化"><span class="post-toc-number">1.56.</span> <span class="post-toc-text">6-3 国際化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-3-1-ユーザーごとに言語を切り替える"><span class="post-toc-number">1.56.1.</span> <span class="post-toc-text">6-3-1 ユーザーごとに言語を切り替える</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-3-2-翻訳ファイルの扱い方"><span class="post-toc-number">1.56.2.</span> <span class="post-toc-text">6-3-2 翻訳ファイルの扱い方</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-4-日時の扱い方"><span class="post-toc-number">1.57.</span> <span class="post-toc-text">6-4 日時の扱い方</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-4-1-日時の扱い方に関する設定"><span class="post-toc-number">1.57.1.</span> <span class="post-toc-text">6-4-1 日時の扱い方に関する設定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-4-2-taskleafアプリケーションのデフォルトのタイムゾーンを日本時間にする"><span class="post-toc-number">1.57.2.</span> <span class="post-toc-text">6-4-2 taskleafアプリケーションのデフォルトのタイムゾーンを日本時間にする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-4-3-Time-currentやDate-currentを利用する"><span class="post-toc-number">1.57.3.</span> <span class="post-toc-text">6-4-3 Time.currentやDate.currentを利用する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-5-エラー処理のカスタマイズ"><span class="post-toc-number">1.58.</span> <span class="post-toc-text">6-5 エラー処理のカスタマイズ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-5-1-Railsのエラー処理の概要"><span class="post-toc-number">1.58.1.</span> <span class="post-toc-text">6-5-1 Railsのエラー処理の概要</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-5-2-デバッグ用-x2F-本番用のエラー画面の切り分け"><span class="post-toc-number">1.58.2.</span> <span class="post-toc-text">6-5-2 デバッグ用&#x2F;本番用のエラー画面の切り分け</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-5-3-Railsの本番用エラー画面のカスタマイズ"><span class="post-toc-number">1.58.3.</span> <span class="post-toc-text">6-5-3 Railsの本番用エラー画面のカスタマイズ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-5-4-アプリケーション固有のエラー処理の追加"><span class="post-toc-number">1.58.4.</span> <span class="post-toc-text">6-5-4 アプリケーション固有のエラー処理の追加</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-6-Railsのログ"><span class="post-toc-number">1.59.</span> <span class="post-toc-text">6-6 Railsのログ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-6-1-ログの利用方法"><span class="post-toc-number">1.59.1.</span> <span class="post-toc-text">6-6-1 ログの利用方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-6-2-ログ（ロガー）の設定"><span class="post-toc-number">1.59.2.</span> <span class="post-toc-text">6-6-2 ログ（ロガー）の設定</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-7-セキュリティを強化する"><span class="post-toc-number">1.60.</span> <span class="post-toc-text">6-7 セキュリティを強化する</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-7-1-意図しないパラメータを弾く「Strong-Parameters」"><span class="post-toc-number">1.60.1.</span> <span class="post-toc-text">6-7-1 意図しないパラメータを弾く「Strong Parameters」</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-7-2-CSRF対策を利用する"><span class="post-toc-number">1.60.2.</span> <span class="post-toc-text">6-7-2 CSRF対策を利用する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-7-3-インジェクションに注意する"><span class="post-toc-number">1.60.3.</span> <span class="post-toc-text">6-7-3 インジェクションに注意する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-7-4-Content-Security-Policy（CSP）を設定する"><span class="post-toc-number">1.60.4.</span> <span class="post-toc-text">6-7-4 Content Security Policy（CSP）を設定する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-8-アセットパイプライン"><span class="post-toc-number">1.61.</span> <span class="post-toc-text">6-8 アセットパイプライン</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-8-1-環境による挙動の違い"><span class="post-toc-number">1.61.1.</span> <span class="post-toc-text">6-8-1 環境による挙動の違い</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-8-2-ブラウザにアセットを読み込ませる"><span class="post-toc-number">1.61.2.</span> <span class="post-toc-text">6-8-2 ブラウザにアセットを読み込ませる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-8-3-連結結果のファイルをどうやって生成するか"><span class="post-toc-number">1.61.3.</span> <span class="post-toc-text">6-8-3 連結結果のファイルをどうやって生成するか</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-8-4-マニフェストファイルを記述する"><span class="post-toc-number">1.61.4.</span> <span class="post-toc-text">6-8-4 マニフェストファイルを記述する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-8-5-アセットの探索パス"><span class="post-toc-number">1.61.5.</span> <span class="post-toc-text">6-8-5 アセットの探索パス</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-8-6-アセット関連の設定"><span class="post-toc-number">1.61.6.</span> <span class="post-toc-text">6-8-6 アセット関連の設定</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-9-production環境でアプリケーションを立ち上げる"><span class="post-toc-number">1.62.</span> <span class="post-toc-text">6-9 production環境でアプリケーションを立ち上げる</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-9-1-アセットのプリコンパイル"><span class="post-toc-number">1.62.1.</span> <span class="post-toc-text">6-9-1 アセットのプリコンパイル</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-9-2-静的ファイルの配信サーバを設定する"><span class="post-toc-number">1.62.2.</span> <span class="post-toc-text">6-9-2 静的ファイルの配信サーバを設定する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-9-3-production環境用のデータベースを作成する"><span class="post-toc-number">1.62.3.</span> <span class="post-toc-text">6-9-3 production環境用のデータベースを作成する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-9-4-config-x2F-master-key-が存在することを確認する"><span class="post-toc-number">1.62.4.</span> <span class="post-toc-text">6-9-4 config&#x2F;master.key が存在することを確認する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-9-5-productionモードでサーバを起動する"><span class="post-toc-number">1.62.5.</span> <span class="post-toc-text">6-9-5 productionモードでサーバを起動する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-9-6-production環境用の秘密情報の管理"><span class="post-toc-number">1.62.6.</span> <span class="post-toc-text">6-9-6 production環境用の秘密情報の管理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-9-7-秘密情報の暗号化・復号"><span class="post-toc-number">1.62.7.</span> <span class="post-toc-text">6-9-7 秘密情報の暗号化・復号</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-secret-key-base"><span class="post-toc-number">1.63.</span> <span class="post-toc-text">Column secret_key_base</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-カスタム暗号化ファイル（Encrypted）"><span class="post-toc-number">1.64.</span> <span class="post-toc-text">Column カスタム暗号化ファイル（Encrypted）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter7-機能を追加してみよう"><span class="post-toc-number">1.65.</span> <span class="post-toc-text">Chapter7 機能を追加してみよう</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-1-登録や編集の実行前に確認画面をはさむ"><span class="post-toc-number">1.66.</span> <span class="post-toc-text">7-1 登録や編集の実行前に確認画面をはさむ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-1-1-確認画面を表示するアクションを追加する"><span class="post-toc-number">1.66.1.</span> <span class="post-toc-text">7-1-1 確認画面を表示するアクションを追加する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-1-2-新規登録画面からの遷移先を変える"><span class="post-toc-number">1.66.2.</span> <span class="post-toc-text">7-1-2 新規登録画面からの遷移先を変える</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-1-3-登録アクションで「戻る」ボタンからの遷移に対応する"><span class="post-toc-number">1.66.3.</span> <span class="post-toc-text">7-1-3 登録アクションで「戻る」ボタンからの遷移に対応する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-確認画面があるほうが良いとは限らない"><span class="post-toc-number">1.67.</span> <span class="post-toc-text">Column 確認画面があるほうが良いとは限らない</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-2-一覧画面に検索機能を追加する"><span class="post-toc-number">1.68.</span> <span class="post-toc-text">7-2 一覧画面に検索機能を追加する</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-2-1-Ransackのインストール"><span class="post-toc-number">1.68.1.</span> <span class="post-toc-text">7-2-1 Ransackのインストール</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-2-2-名称による検索"><span class="post-toc-number">1.68.2.</span> <span class="post-toc-text">7-2-2 名称による検索</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-2-3-検索時のSQLの確認と検索マッチャー"><span class="post-toc-number">1.68.3.</span> <span class="post-toc-text">7-2-3 検索時のSQLの確認と検索マッチャー</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-2-4-登録日時による検索"><span class="post-toc-number">1.68.4.</span> <span class="post-toc-text">7-2-4 登録日時による検索</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-2-5-検索条件を絞る"><span class="post-toc-number">1.68.5.</span> <span class="post-toc-text">7-2-5 検索条件を絞る</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-3-一覧画面にソート機能を追加する"><span class="post-toc-number">1.69.</span> <span class="post-toc-text">7-3 一覧画面にソート機能を追加する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-4-メールを送る"><span class="post-toc-number">1.70.</span> <span class="post-toc-text">7-4 メールを送る</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-4-1-メイラーの実装"><span class="post-toc-number">1.70.1.</span> <span class="post-toc-text">7-4-1 メイラーの実装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-4-2-テンプレートの実装"><span class="post-toc-number">1.70.2.</span> <span class="post-toc-text">7-4-2 テンプレートの実装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-4-3-メール送信処理"><span class="post-toc-number">1.70.3.</span> <span class="post-toc-text">7-4-3 メール送信処理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-4-4-動作確認"><span class="post-toc-number">1.70.4.</span> <span class="post-toc-text">7-4-4 動作確認</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-4-5-メイラーのテスト"><span class="post-toc-number">1.70.5.</span> <span class="post-toc-text">7-4-5 メイラーのテスト</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-5-ファイルをアップロードしてモデルに添付する"><span class="post-toc-number">1.71.</span> <span class="post-toc-text">7-5 ファイルをアップロードしてモデルに添付する</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-5-1-タスクに画像ファイルを添付する"><span class="post-toc-number">1.71.1.</span> <span class="post-toc-text">7-5-1 タスクに画像ファイルを添付する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-5-2-Active-Storage"><span class="post-toc-number">1.71.2.</span> <span class="post-toc-text">7-5-2 Active Storage</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-5-3-Active-Storageの準備"><span class="post-toc-number">1.71.3.</span> <span class="post-toc-text">7-5-3 Active Storageの準備</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-5-4-タスクモデルに画像を添付できるようにする"><span class="post-toc-number">1.71.4.</span> <span class="post-toc-text">7-5-4 タスクモデルに画像を添付できるようにする</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-6-CSV形式のファイルのインポート-x2F-エクスポート"><span class="post-toc-number">1.72.</span> <span class="post-toc-text">7-6 CSV形式のファイルのインポート&#x2F;エクスポート</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-6-1-タスクをCSV出力（エクスポート）する"><span class="post-toc-number">1.72.1.</span> <span class="post-toc-text">7-6-1 タスクをCSV出力（エクスポート）する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-6-2-CSVデータを入力（インポート）する"><span class="post-toc-number">1.72.2.</span> <span class="post-toc-text">7-6-2 CSVデータを入力（インポート）する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-7-ページネーション"><span class="post-toc-number">1.73.</span> <span class="post-toc-text">7-7 ページネーション</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-7-1-kaminariのインストール"><span class="post-toc-number">1.73.1.</span> <span class="post-toc-text">7-7-1 kaminariのインストール</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-7-2-ページ番号に対応する範囲のデータを検索するようにする"><span class="post-toc-number">1.73.2.</span> <span class="post-toc-text">7-7-2 ページ番号に対応する範囲のデータを検索するようにする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-7-3-ビューにページネーションのための情報を表示する"><span class="post-toc-number">1.73.3.</span> <span class="post-toc-text">7-7-3 ビューにページネーションのための情報を表示する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-7-4-動作確認"><span class="post-toc-number">1.73.4.</span> <span class="post-toc-text">7-7-4 動作確認</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-7-5-デザインの調整"><span class="post-toc-number">1.73.5.</span> <span class="post-toc-text">7-7-5 デザインの調整</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-7-6-表示件数を変更したいとき"><span class="post-toc-number">1.73.6.</span> <span class="post-toc-text">7-7-6 表示件数を変更したいとき</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-8-非同期処理や定期実行を行う（Jobスケジューリング）"><span class="post-toc-number">1.74.</span> <span class="post-toc-text">7-8 非同期処理や定期実行を行う（Jobスケジューリング）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-8-1-非同期処理ツールの導入"><span class="post-toc-number">1.74.1.</span> <span class="post-toc-text">7-8-1 非同期処理ツールの導入</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-8-2-ジョブの作成、実行"><span class="post-toc-number">1.74.2.</span> <span class="post-toc-text">7-8-2 ジョブの作成、実行</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-8-3-実行日時指定"><span class="post-toc-number">1.74.3.</span> <span class="post-toc-text">7-8-3 実行日時指定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-8-4-７章の終わりに"><span class="post-toc-number">1.74.4.</span> <span class="post-toc-text">7-8-4 ７章の終わりに</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#＜発展編＞"><span class="post-toc-number">1.75.</span> <span class="post-toc-text">＜発展編＞</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter8-RailsとJavaScript"><span class="post-toc-number">1.76.</span> <span class="post-toc-text">Chapter8 RailsとJavaScript</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-1-JavaScriptでページに変化をつける"><span class="post-toc-number">1.77.</span> <span class="post-toc-text">8-1 JavaScriptでページに変化をつける</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-2-AjaxでRailsサーバと通信する"><span class="post-toc-number">1.78.</span> <span class="post-toc-text">8-2 AjaxでRailsサーバと通信する</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-2-1-Ajaxでタスクを削除する"><span class="post-toc-number">1.78.1.</span> <span class="post-toc-text">8-2-1 Ajaxでタスクを削除する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-2-2-rails-ujsの果たしている役割"><span class="post-toc-number">1.78.2.</span> <span class="post-toc-text">8-2-2 rails-ujsの果たしている役割</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-2-3-コントローラからJavaScriptを返して実行する（SJR）"><span class="post-toc-number">1.78.3.</span> <span class="post-toc-text">8-2-3 コントローラからJavaScriptを返して実行する（SJR）</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-CoffeeScriptは使わないことも検討する"><span class="post-toc-number">1.79.</span> <span class="post-toc-text">Column CoffeeScriptは使わないことも検討する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-jQuery"><span class="post-toc-number">1.80.</span> <span class="post-toc-text">Column jQuery</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-3-Turbolinks"><span class="post-toc-number">1.81.</span> <span class="post-toc-text">8-3 Turbolinks</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-3-1-Turbolinksの発行するイベント"><span class="post-toc-number">1.81.1.</span> <span class="post-toc-text">8-3-1 Turbolinksの発行するイベント</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-3-3-Turbolinksが有効な環境での注意点"><span class="post-toc-number">1.81.2.</span> <span class="post-toc-text">8-3-3 Turbolinksが有効な環境での注意点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-3-4-Turbolinksを無効化するには"><span class="post-toc-number">1.81.3.</span> <span class="post-toc-text">8-3-4 Turbolinksを無効化するには</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-4-モダンなJavaScript管理を行う"><span class="post-toc-number">1.82.</span> <span class="post-toc-text">8-4 モダンなJavaScript管理を行う</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-4-1-Yarn"><span class="post-toc-number">1.82.1.</span> <span class="post-toc-text">8-4-1 Yarn</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-4-2-Webpacker"><span class="post-toc-number">1.82.2.</span> <span class="post-toc-text">8-4-2 Webpacker</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-5-taskleafにReactを導入してみる"><span class="post-toc-number">1.83.</span> <span class="post-toc-text">8-5 taskleafにReactを導入してみる</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-Webpackerのメリット・デメリット"><span class="post-toc-number">1.84.</span> <span class="post-toc-text">Column Webpackerのメリット・デメリット</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter9-複数人でRailsアプリケーションを開発する"><span class="post-toc-number">1.85.</span> <span class="post-toc-text">Chapter9 複数人でRailsアプリケーションを開発する</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-1-チーム開発の風景（導入編）"><span class="post-toc-number">1.86.</span> <span class="post-toc-text">9-1 チーム開発の風景（導入編）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-1-ソースコードの変更を管理する"><span class="post-toc-number">1.86.1.</span> <span class="post-toc-text">9-1-1 ソースコードの変更を管理する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-2-GitHubなどの開発プラットフォームを使う"><span class="post-toc-number">1.86.2.</span> <span class="post-toc-text">9-1-2 GitHubなどの開発プラットフォームを使う</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-3-GitHubを使うには？"><span class="post-toc-number">1.86.3.</span> <span class="post-toc-text">9-1-3 GitHubを使うには？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-4-Pull-Requestベースの開発"><span class="post-toc-number">1.86.4.</span> <span class="post-toc-text">9-1-4 Pull Requestベースの開発</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-5-Gitに入れるファイル、入れないファイル"><span class="post-toc-number">1.86.5.</span> <span class="post-toc-text">9-1-5 Gitに入れるファイル、入れないファイル</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-database-ymlとセキュリティ"><span class="post-toc-number">1.87.</span> <span class="post-toc-text">Column database.ymlとセキュリティ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-6-Pull-Requestの変更差分を最新状態との比較にする"><span class="post-toc-number">1.87.1.</span> <span class="post-toc-text">9-1-6 Pull Requestの変更差分を最新状態との比較にする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-7-Gitのpush-fに気をつける"><span class="post-toc-number">1.87.2.</span> <span class="post-toc-text">9-1-7 Gitのpush -fに気をつける</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-8-GitHubとチャットツールを連携させる"><span class="post-toc-number">1.87.3.</span> <span class="post-toc-text">9-1-8 GitHubとチャットツールを連携させる</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-2-チーム開発の風景（コードレビュー編）"><span class="post-toc-number">1.88.</span> <span class="post-toc-text">9-2 チーム開発の風景（コードレビュー編）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-2-1-コードレビューではどんな点を見て、何をコメントする？"><span class="post-toc-number">1.88.1.</span> <span class="post-toc-text">9-2-1 コードレビューではどんな点を見て、何をコメントする？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-2-2-コーディング規約"><span class="post-toc-number">1.88.2.</span> <span class="post-toc-text">9-2-2 コーディング規約</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-コーディング規約との付き合い方"><span class="post-toc-number">1.89.</span> <span class="post-toc-text">Column コーディング規約との付き合い方</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-2-3-Lintツールの活用"><span class="post-toc-number">1.89.1.</span> <span class="post-toc-text">9-2-3 Lintツールの活用</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-コードレビューは素晴らしい、だが万能ではない"><span class="post-toc-number">1.90.</span> <span class="post-toc-text">Column コードレビューは素晴らしい、だが万能ではない</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-2-4-CIツールとGitHubを連動させる"><span class="post-toc-number">1.90.1.</span> <span class="post-toc-text">9-2-4 CIツールとGitHubを連動させる</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-3-チーム開発の風景（分担編）"><span class="post-toc-number">1.91.</span> <span class="post-toc-text">9-3 チーム開発の風景（分担編）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-3-1-チームで開発するときの分担の仕方"><span class="post-toc-number">1.91.1.</span> <span class="post-toc-text">9-3-1 チームで開発するときの分担の仕方</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-4-開発環境の構築方法をわかりやすくしておく"><span class="post-toc-number">1.92.</span> <span class="post-toc-text">9-4 開発環境の構築方法をわかりやすくしておく</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-4-1-誰でも簡単にセットアップできるようにする"><span class="post-toc-number">1.92.1.</span> <span class="post-toc-text">9-4-1 誰でも簡単にセットアップできるようにする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-4-2-仮想化環境を利用する"><span class="post-toc-number">1.92.2.</span> <span class="post-toc-text">9-4-2 仮想化環境を利用する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-4-3-初期データ・テスト用データの共有"><span class="post-toc-number">1.92.3.</span> <span class="post-toc-text">9-4-3 初期データ・テスト用データの共有</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-5-マイグレーションに注意する"><span class="post-toc-number">1.93.</span> <span class="post-toc-text">9-5 マイグレーションに注意する</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-5-1-ロールバックできることを確認しよう"><span class="post-toc-number">1.93.1.</span> <span class="post-toc-text">9-5-1 ロールバックできることを確認しよう</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-5-2-「redo」を習慣にしよう"><span class="post-toc-number">1.93.2.</span> <span class="post-toc-text">9-5-2 「redo」を習慣にしよう</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-5-3-完全なロールバックができないとき"><span class="post-toc-number">1.93.3.</span> <span class="post-toc-text">9-5-3 完全なロールバックができないとき</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-5-4-過去のマイグレーションファイルの変更には慎重になろう"><span class="post-toc-number">1.93.4.</span> <span class="post-toc-text">9-5-4 過去のマイグレーションファイルの変更には慎重になろう</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-「きれいなマイグレーション」を追求しない"><span class="post-toc-number">1.94.</span> <span class="post-toc-text">Column 「きれいなマイグレーション」を追求しない</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-5-5-マイグレーションファイルが多くなってきたら"><span class="post-toc-number">1.94.1.</span> <span class="post-toc-text">9-5-5 マイグレーションファイルが多くなってきたら</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-5-6-直接DBを変更したら必ずマイグレーションファイルも追加しておこう"><span class="post-toc-number">1.94.2.</span> <span class="post-toc-text">9-5-6 直接DBを変更したら必ずマイグレーションファイルも追加しておこう</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-5-7-データメンテナンス"><span class="post-toc-number">1.94.3.</span> <span class="post-toc-text">9-5-7 データメンテナンス</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-Rakeタスクでのデータメンテナンス"><span class="post-toc-number">1.95.</span> <span class="post-toc-text">Column Rakeタスクでのデータメンテナンス</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Chapter10-Railsアプリケーションと長く付き合うために"><span class="post-toc-number">1.96.</span> <span class="post-toc-text">Chapter10 Railsアプリケーションと長く付き合うために</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-1-バージョンアップにどう取り組むか"><span class="post-toc-number">1.96.1.</span> <span class="post-toc-text">10-1 バージョンアップにどう取り組むか</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-2-小さなバージョンアップ"><span class="post-toc-number">1.96.2.</span> <span class="post-toc-text">10-2 小さなバージョンアップ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-2-1-bundle-updateとは"><span class="post-toc-number">1.96.3.</span> <span class="post-toc-text">10-2-1 bundle updateとは</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-2-2-bundle-updateの際に行うべきこと"><span class="post-toc-number">1.96.4.</span> <span class="post-toc-text">10-2-2 bundle updateの際に行うべきこと</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-3-bundle-update-はチーム全体で行う"><span class="post-toc-number">1.96.5.</span> <span class="post-toc-text">10-3 bundle update はチーム全体で行う</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-4-bundle-updateを自動化でサポートする"><span class="post-toc-number">1.96.6.</span> <span class="post-toc-text">10-4 bundle updateを自動化でサポートする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-5-大きなバージョンアップを行う際に気をつけること"><span class="post-toc-number">1.96.7.</span> <span class="post-toc-text">10-5 大きなバージョンアップを行う際に気をつけること</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-6-アプリケーションの複雑性に立ち向かう"><span class="post-toc-number">1.96.8.</span> <span class="post-toc-text">10-6 アプリケーションの複雑性に立ち向かう</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-7-第一の鍵─しかるべきところにコードを書く"><span class="post-toc-number">1.96.9.</span> <span class="post-toc-text">10-7 第一の鍵─しかるべきところにコードを書く</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-7-1-コントローラに入り込む複雑さ"><span class="post-toc-number">1.96.10.</span> <span class="post-toc-text">10-7-1 コントローラに入り込む複雑さ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-7-2-モデルに書くべきコードをモデルに寄せる"><span class="post-toc-number">1.96.11.</span> <span class="post-toc-text">10-7-2 モデルに書くべきコードをモデルに寄せる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-7-3-ビューに入り込んだビジネスロジックをモデルに寄せる"><span class="post-toc-number">1.96.12.</span> <span class="post-toc-text">10-7-3 ビューに入り込んだビジネスロジックをモデルに寄せる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-7-4-Decoratorパターンでモデル固有の表示ロジックを分離する"><span class="post-toc-number">1.96.13.</span> <span class="post-toc-text">10-7-4 Decoratorパターンでモデル固有の表示ロジックを分離する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-8-第二の鍵─上手に共通化する"><span class="post-toc-number">1.96.14.</span> <span class="post-toc-text">10-8 第二の鍵─上手に共通化する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-9-モデルの共通化"><span class="post-toc-number">1.96.15.</span> <span class="post-toc-text">10-9 モデルの共通化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-9-1-共通機能のモジュールを複数のモデルクラスにMix-inする"><span class="post-toc-number">1.96.16.</span> <span class="post-toc-text">10-9-1 共通機能のモジュールを複数のモデルクラスにMix-inする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-9-2-STI（単一テーブル継承）で共通機能を基底クラスに持たせる"><span class="post-toc-number">1.96.17.</span> <span class="post-toc-text">10-9-2 STI（単一テーブル継承）で共通機能を基底クラスに持たせる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-9-3-全モデルクラスに共通の処理をApplicationRecordに書く"><span class="post-toc-number">1.96.18.</span> <span class="post-toc-text">10-9-3 全モデルクラスに共通の処理をApplicationRecordに書く</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-9-3-ApplicationRecordとモデルクラスの間に抽象的なクラスを挟む"><span class="post-toc-number">1.96.19.</span> <span class="post-toc-text">10-9-3 ApplicationRecordとモデルクラスの間に抽象的なクラスを挟む</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-10-コントローラの共通化"><span class="post-toc-number">1.96.20.</span> <span class="post-toc-text">10-10 コントローラの共通化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-10-1-共通機能のモジュールを複数のコントローラクラスにMix-inする"><span class="post-toc-number">1.96.21.</span> <span class="post-toc-text">10-10-1 共通機能のモジュールを複数のコントローラクラスにMix-inする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-10-2-基底クラスを追加して共通機能を持たせる"><span class="post-toc-number">1.96.22.</span> <span class="post-toc-text">10-10-2 基底クラスを追加して共通機能を持たせる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-10-3-ApplicationControllerに共通機能を記述する"><span class="post-toc-number">1.96.23.</span> <span class="post-toc-text">10-10-3 ApplicationControllerに共通機能を記述する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-10-4-第一の鍵を使わない状態で第二の鍵を使ってはいけない"><span class="post-toc-number">1.96.24.</span> <span class="post-toc-text">10-10-4 第一の鍵を使わない状態で第二の鍵を使ってはいけない</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-11-ビュー（プレゼンテーション）の共通化"><span class="post-toc-number">1.96.25.</span> <span class="post-toc-text">10-11 ビュー（プレゼンテーション）の共通化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-11-1-パーシャルテンプレートで画面の一部を共通化する"><span class="post-toc-number">1.96.26.</span> <span class="post-toc-text">10-11-1 パーシャルテンプレートで画面の一部を共通化する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-11-2-レイアウトで画面の大枠を共通化する"><span class="post-toc-number">1.96.27.</span> <span class="post-toc-text">10-11-2 レイアウトで画面の大枠を共通化する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-11-3-カスタムヘルパーに共通処理を記述する"><span class="post-toc-number">1.96.28.</span> <span class="post-toc-text">10-11-3 カスタムヘルパーに共通処理を記述する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-11-4-カスタムヘルパーは小さく作る"><span class="post-toc-number">1.96.29.</span> <span class="post-toc-text">10-11-4 カスタムヘルパーは小さく作る</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-11-5-特定のモデルに依存する処理をカスタムヘルパーに含めない"><span class="post-toc-number">1.96.30.</span> <span class="post-toc-text">10-11-5 特定のモデルに依存する処理をカスタムヘルパーに含めない</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-12-第三の鍵─新しい構造を追加して役割を分担する"><span class="post-toc-number">1.96.31.</span> <span class="post-toc-text">10-12 第三の鍵─新しい構造を追加して役割を分担する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-12-1-ActiveModel"><span class="post-toc-number">1.96.32.</span> <span class="post-toc-text">10-12-1 ActiveModel</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-12-2-共通処理を担当するオブジェクトを別につくって連携させる"><span class="post-toc-number">1.96.33.</span> <span class="post-toc-text">10-12-2 共通処理を担当するオブジェクトを別につくって連携させる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-12-3-意味のあるパラメータの集合からクラスを生み出す"><span class="post-toc-number">1.96.34.</span> <span class="post-toc-text">10-12-3 意味のあるパラメータの集合からクラスを生み出す</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-12-4-外部サービスのロジックを閉じ込める"><span class="post-toc-number">1.96.35.</span> <span class="post-toc-text">10-12-4 外部サービスのロジックを閉じ込める</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-12-5-複数のモデルが絡む特定処理の専門家を作る"><span class="post-toc-number">1.96.36.</span> <span class="post-toc-text">10-12-5 複数のモデルが絡む特定処理の専門家を作る</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-12-6-サブリソース単位でコントローラを分割する"><span class="post-toc-number">1.96.37.</span> <span class="post-toc-text">10-12-6 サブリソース単位でコントローラを分割する</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Column-何でも屋のアクションを実装しない"><span class="post-toc-number">1.97.</span> <span class="post-toc-text">Column 何でも屋のアクションを実装しない</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-13-モジュールを上手に利用するために"><span class="post-toc-number">1.97.1.</span> <span class="post-toc-text">10-13 モジュールを上手に利用するために</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-13-1-構造として分かりやすい意味を持たせる"><span class="post-toc-number">1.97.2.</span> <span class="post-toc-text">10-13-1 構造として分かりやすい意味を持たせる</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-13-2-利用元クラスの一部として違和感がないかを検討する"><span class="post-toc-number">1.97.3.</span> <span class="post-toc-text">10-13-2 利用元クラスの一部として違和感がないかを検討する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-13-3-利用元クラスと内部データを共有していることを意識する"><span class="post-toc-number">1.97.4.</span> <span class="post-toc-text">10-13-3 利用元クラスと内部データを共有していることを意識する</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-13-4-独立的にして利用条件を分かりやすくする"><span class="post-toc-number">1.97.5.</span> <span class="post-toc-text">10-13-4 独立的にして利用条件を分かりやすくする</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-13-5-追加部品であるという節度を守る"><span class="post-toc-number">1.97.6.</span> <span class="post-toc-text">10-13-5 追加部品であるという節度を守る</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-14-おわりに"><span class="post-toc-number">1.97.7.</span> <span class="post-toc-text">10-14 おわりに</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Appendix"><span class="post-toc-number">1.98.</span> <span class="post-toc-text">Appendix</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Index"><span class="post-toc-number">1.99.</span> <span class="post-toc-text">Index</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-2021-03_現場で使える Ruby on Rails 5速習実践ガイド"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">現場で使える Ruby on Rails 5速習実践ガイド</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-08-20 00:00:00" datetime="2020-08-19T15:00:00.000Z"  itemprop="datePublished">2020-08-20</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://tutttuwi.github.io/output-over-there/categories/Ruby/">Ruby</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="現場で使える-Ruby-on-Rails-5速習実践ガイド（ISBN978-4-8399-6222-7）"><a href="#現場で使える-Ruby-on-Rails-5速習実践ガイド（ISBN978-4-8399-6222-7）" class="headerlink" title="現場で使える Ruby on Rails 5速習実践ガイド（ISBN978-4-8399-6222-7）"></a>現場で使える Ruby on Rails 5速習実践ガイド（ISBN978-4-8399-6222-7）</h1><h2 id="理解したこと"><a href="#理解したこと" class="headerlink" title="理解したこと"></a>理解したこと</h2><h2 id="書籍サイト"><a href="#書籍サイト" class="headerlink" title="書籍サイト"></a>書籍サイト</h2><p><a href="https://book.mynavi.jp/ec/products/detail/id=93905">https://book.mynavi.jp/ec/products/detail/id=93905</a></p>
<h2 id="サポートサイト"><a href="#サポートサイト" class="headerlink" title="サポートサイト"></a>サポートサイト</h2><p><a href="https://book.mynavi.jp/supportsite/detail/9784839962227.html">https://book.mynavi.jp/supportsite/detail/9784839962227.html</a></p>
<h2 id="書籍情報"><a href="#書籍情報" class="headerlink" title="書籍情報"></a>書籍情報</h2><p>Railsアプリの基本から実践的なノウハウまでこの1冊で！本書は、Ruby on Rails（以下Rails）を使ってWebアプリケーションを開発するための解説書です。</p>
<p>RailsでどのようにWebアプリケーションを作るのかという基本的なところから、現場のニーズに合わせてどのように機能を追加していくのか、テストはどのように行うのか、複数人で開発していく場合の方法といった実践的なトピックまで、幅広くカバーしています。</p>
<p>本書を読んだ方が単にRailsでWebアプリケーションを作れるようになるだけでなく、「Railsらしいアプリケーションコード」を書けるようになり、そして開発チームの仲間とともに実現したいことを実現できるように、という視点で必要な情報をまとめた1冊です。</p>
<p>なお、本書の対応バージョンはRuby 2.5／Rails5.2です。Rails5.2から導入されたActive Storageやcredentials.yml.encについても解説しています。macOS／Windows 10（64ビット版）対応。</p>
<p>■読者対象について</p>
<p>Ruby以外の言語でのWebアプリケーションの開発や、オブジェクト指向プログラミングについては知識・経験があるものの、RubyやRailsについては初めて学ぶ方を主な対象にしています。</p>
<p>ただし、Webアプリケーションやオブジェクト指向が初めての方にも理解しやすいように説明するように努めています。</p>
<p>■構成と内容について</p>
<p>本書の構成は以下の通りです。</p>
<p>＜入門編＞<br>Chapter 1 RailsのためのRuby入門<br>Chapter 2 Railsアプリケーションをのぞいてみよう<br>Chapter 3 タスク管理アプリケーションを作ろう</p>
<p>＜レベルアップ編＞<br>Chapter 4 現実の複雑さに対応する<br>Chapter 5 テストをはじめよう<br>Chapter 6 Railsの全体像を理解する<br>Chapter 7 機能を追加してみよう</p>
<p>＜発展編＞<br>Chapter 8 RailsとJavaScript<br>Chapter 9 複数人でRailsアプリケーションを開発する<br>Chapter 10 Railsアプリケーションと長く付き合うために</p>
<p>章ごとの内容は以下の通りです。</p>
<p>Chapter1では、Railsのアプリケーションのコードを読み書きするために最低限必要となるようなRubyの基礎知識を解説していきます。</p>
<p>Chapter2では、RubyやRailsが動作する環境を構築するとともに、簡単なサンプルアプリケーションを作成し、中身の構成を解説していきます。</p>
<p>Chapter3では、シンプルなタスク管理アプリケーションの作成を通じて、CRUDと呼ばれるソフトウェアの基本的な機能をRailsで実装する方法について学んでいきます。</p>
<p>Chapter4では、Chapter3で作成したアプリケーションに、いくつかの機能を追加していきます。具体的には「データ内容の制限」「検証」「コールバック」「フィルタ」「ログイン機能の追加」「関連」「検索」について解説していきます。</p>
<p>Chapter5では、Railsにあらかじめ用意されている「自動テスト」という仕組みについて、利用方法や注意事項を解説します。</p>
<p>Chapter6では、Railsの備える機能や、Railsを取り巻く世界の全体像を改めて一望し、これまで取り上げる機会のなかったいくつかの重要な要素について解説していきます。</p>
<p>Chapter7では、Railsアプリケーションで比較的よくある具体的な機能を実現するやり方を、Chapter4までで作成したアプリケーションへの機能追加という形で紹介していきます。</p>
<p>Chapter8では、Railsを利用する際のJavaScriptの扱い方について解説していきます。モダンなJavaScriptについても扱っています。</p>
<p>Chapter9では、複数人で開発を行う場合に重要になってくる知識や、注意すべきポイントについて解説していきます。</p>
<p>Chapter10では、Railsアプリケーションと長く付き合っていくために特に重要なテーマとして、「バージョンアップに対してどのように取り組むべきか」「Railsアプリケーションコードが複雑になっていくことにどうに立ち向かい、メンテナンスしやすい状態の維持を図るのか」について扱います。</p>
<h2 id="＜入門編＞"><a href="#＜入門編＞" class="headerlink" title="＜入門編＞"></a>＜入門編＞</h2><h2 id="Chapter-1-RailsのためのRuby入門"><a href="#Chapter-1-RailsのためのRuby入門" class="headerlink" title="Chapter 1 RailsのためのRuby入門"></a>Chapter 1 RailsのためのRuby入門</h2><h2 id="1-1-オブジェクトを理解しよう"><a href="#1-1-オブジェクトを理解しよう" class="headerlink" title="1-1 オブジェクトを理解しよう"></a>1-1 オブジェクトを理解しよう</h2><h3 id="1-1-1-万物がオブジェクト"><a href="#1-1-1-万物がオブジェクト" class="headerlink" title="1-1-1 万物がオブジェクト"></a>1-1-1 万物がオブジェクト</h3><ul>
<li>オブジェクトという存在になれましょう<ul>
<li>※詳細割愛</li>
</ul>
</li>
</ul>
<h3 id="1-1-2-irb"><a href="#1-1-2-irb" class="headerlink" title="1-1-2 irb"></a>1-1-2 irb</h3><ul>
<li><p>Rubyには、<code>irb(アイアールビー)</code>という、対話的な実行環境が付属している</p>
</li>
<li><p>オブジェクトがどういうものかを体験していただくために操作しながら読みすすめる</p>
</li>
<li><p>以下から実行環境を取得しておいた</p>
<ul>
<li><a href="https://rubyinstaller.org/">https://rubyinstaller.org/</a></li>
</ul>
</li>
</ul>
<h3 id="1-1-3-文字列"><a href="#1-1-3-文字列" class="headerlink" title="1-1-3 文字列"></a>1-1-3 文字列</h3><ul>
<li>ダウブルクォーテーションかシングルクォーテーションで文字列を囲む<ul>
<li>違い：<a href="https://qiita.com/ryosuketter/items/ddad508cb0124e4fe378">https://qiita.com/ryosuketter/items/ddad508cb0124e4fe378</a></li>
</ul>
</li>
</ul>
<h3 id="1-1-4-数値"><a href="#1-1-4-数値" class="headerlink" title="1-1-4 数値"></a>1-1-4 数値</h3><h3 id="1-1-5-オブジェクトに、自分が何者かを聞いてみる"><a href="#1-1-5-オブジェクトに、自分が何者かを聞いてみる" class="headerlink" title="1-1-5 オブジェクトに、自分が何者かを聞いてみる"></a>1-1-5 オブジェクトに、自分が何者かを聞いてみる</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):006:0&gt;</span> <span class="string">"氏名"</span>.class</span><br><span class="line">=&gt; String</span><br><span class="line"><span class="meta">irb(main):007:0&gt;</span> <span class="number">1</span>.class</span><br><span class="line">=&gt; Integer</span><br><span class="line"><span class="meta">irb(main):008:0&gt;</span> <span class="number">1.1</span>.class</span><br><span class="line">=&gt; Float</span><br><span class="line"><span class="meta">irb(main):009:0&gt;</span> true.class</span><br><span class="line">=&gt; TrueClass</span><br><span class="line"><span class="meta">irb(main):010:0&gt;</span> false.class</span><br><span class="line">=&gt; FalseClass</span><br><span class="line"><span class="meta">irb(main):013:0&gt;</span> <span class="string">"氏名"</span>.object_id</span><br><span class="line">=&gt; <span class="number">300</span></span><br><span class="line"><span class="meta">irb(main):014:0&gt;</span> <span class="string">"氏名"</span>.object_id</span><br><span class="line">=&gt; <span class="number">320</span></span><br><span class="line"><span class="meta">irb(main):015:0&gt;</span> <span class="string">"氏名"</span>.object_id</span><br><span class="line">=&gt; <span class="number">340</span></span><br><span class="line"><span class="meta">irb(main):016:0&gt;</span> <span class="number">1</span>.object_id</span><br><span class="line">=&gt; <span class="number">3</span></span><br><span class="line"><span class="meta">irb(main):017:0&gt;</span> <span class="number">1</span>.object_id</span><br><span class="line">=&gt; <span class="number">3</span></span><br><span class="line">/<span class="regexp">/ 数値は同じオブジェクトIDを取るが、文字列は異なるオブジェクトIDを取る</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ この辺はJavaのプリミティブ型、参照型と同じ概念のよう</span></span><br></pre></td></tr></table></figure>

<h3 id="1-1-6-クラスとインスタンス"><a href="#1-1-6-クラスとインスタンス" class="headerlink" title="1-1-6 クラスとインスタンス"></a>1-1-6 クラスとインスタンス</h3><ul>
<li>「オブジェクトXのクラスがAであるとき、XはAのインスタンス（オブジェクト）である」といいます。</li>
</ul>
<h3 id="1-1-7-オブジェクトの機能はクラスで決まる"><a href="#1-1-7-オブジェクトの機能はクラスで決まる" class="headerlink" title="1-1-7 オブジェクトの機能はクラスで決まる"></a>1-1-7 オブジェクトの機能はクラスで決まる</h3><ul>
<li>オブジェクトの種類により、プロパティなどが異なりますよという説明</li>
</ul>
<h3 id="1-1-8-変数"><a href="#1-1-8-変数" class="headerlink" title="1-1-8 変数"></a>1-1-8 変数</h3><ul>
<li><p>ローカル変数の記載</p>
<ul>
<li>スネークケースで先頭は小文字か<code>_(アンダースコア)</code>で記載されるのでこれに習おう<ul>
<li>sample_message</li>
<li>part2</li>
<li>_user</li>
</ul>
</li>
</ul>
</li>
<li><p>定数は大文字で始まる名前にすること。</p>
</li>
</ul>
<h3 id="1-1-9-コメント"><a href="#1-1-9-コメント" class="headerlink" title="1-1-9 コメント"></a>1-1-9 コメント</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># １行をコメントアウト</span></span><br><span class="line">name = <span class="string">"氏名"</span> <span class="comment"># 途中からも可能</span></span><br></pre></td></tr></table></figure>

<h3 id="1-1-10-メソッド"><a href="#1-1-10-メソッド" class="headerlink" title="1-1-10 メソッド"></a>1-1-10 メソッド</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cat</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(ネズミ)</span></span></span><br><span class="line">    puts <span class="string">"一生懸命 <span class="subst">#&#123;ネズミ&#125;</span> を追いかけた..."</span> <span class="comment"># 画面にメッセージを出力します</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">タマ = cat.new</span><br></pre></td></tr></table></figure>

<ul>
<li>メソッドの基本的な説明</li>
<li>メソッドを呼び出すときにかっこを省略できる</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):066:0&gt;</span> message1 = <span class="string">"こんにちは"</span></span><br><span class="line">=&gt; <span class="string">"こんにちは"</span></span><br><span class="line"><span class="meta">irb(main):067:0&gt;</span> message2 = <span class="string">"こんばんは"</span></span><br><span class="line">=&gt; <span class="string">"こんばんは"</span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">06</span>8<span class="symbol">:</span><span class="number">0</span>* split = ^C</span><br><span class="line"><span class="meta">irb(main):068:0&gt;</span> split = <span class="string">"｜"</span></span><br><span class="line">=&gt; <span class="string">"｜"</span></span><br><span class="line"><span class="meta">irb(main):069:0&gt;</span> message3 = <span class="string">"あいさつ！"</span></span><br><span class="line">=&gt; <span class="string">"あいさつ！"</span></span><br><span class="line"><span class="meta">irb(main):070:0&gt;</span> message3.concat message1, message2</span><br><span class="line">=&gt; <span class="string">"あいさつ！こんにちはこんばんは"</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-自分でクラスを作ってみよう"><a href="#1-2-自分でクラスを作ってみよう" class="headerlink" title="1-2 自分でクラスを作ってみよう"></a>1-2 自分でクラスを作ってみよう</h2><h3 id="1-2-1-クラスを作る"><a href="#1-2-1-クラスを作る" class="headerlink" title="1-2-1 クラスを作る"></a>1-2-1 クラスを作る</h3><h3 id="1-2-2-Userクラスを作る"><a href="#1-2-2-Userクラスを作る" class="headerlink" title="1-2-2 Userクラスを作る"></a>1-2-2 Userクラスを作る</h3><h3 id="1-2-3-Userクラスにメソッドを定義する"><a href="#1-2-3-Userクラスにメソッドを定義する" class="headerlink" title="1-2-3 Userクラスにメソッドを定義する"></a>1-2-3 Userクラスにメソッドを定義する</h3><h3 id="1-2-4-インスタンス変数"><a href="#1-2-4-インスタンス変数" class="headerlink" title="1-2-4 インスタンス変数"></a>1-2-4 インスタンス変数</h3><ul>
<li>インスタンス変数：オブジェクトが抱えている変数</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">name=</span><span class="params">(name)</span></span></span><br><span class="line">    @name = name</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">name</span></span></span><br><span class="line">    @name</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-5-ローカル変数とインスタンス変数の違い"><a href="#1-2-5-ローカル変数とインスタンス変数の違い" class="headerlink" title="1-2-5 ローカル変数とインスタンス変数の違い"></a>1-2-5 ローカル変数とインスタンス変数の違い</h3><h3 id="1-2-6-属性"><a href="#1-2-6-属性" class="headerlink" title="1-2-6 属性"></a>1-2-6 属性</h3><ul>
<li>一般的にオブジェクトが抱えるデータのことを「属性（Attribute）」</li>
<li>属性とインスタンス変数はよく似た概念と言える</li>
</ul>
<h3 id="1-2-7-ゲッターやセッターを簡単に定義する"><a href="#1-2-7-ゲッターやセッターを簡単に定義する" class="headerlink" title="1-2-7 ゲッターやセッターを簡単に定義する"></a>1-2-7 ゲッターやセッターを簡単に定義する</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line">  <span class="comment">#attr_accessor :name</span></span><br><span class="line">  <span class="comment">#attr_reader :name</span></span><br><span class="line">  <span class="comment">#attr_writer :name</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-8-住んでいる場所やEメールアドレスを持たせる"><a href="#1-2-8-住んでいる場所やEメールアドレスを持たせる" class="headerlink" title="1-2-8 住んでいる場所やEメールアドレスを持たせる"></a>1-2-8 住んでいる場所やEメールアドレスを持たせる</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line">  <span class="keyword">attr_accessor</span> <span class="symbol">:name</span>, <span class="symbol">:address</span>, <span class="symbol">:email</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-9-メソッドからメソッドを使う"><a href="#1-2-9-メソッドからメソッドを使う" class="headerlink" title="1-2-9 メソッドからメソッドを使う"></a>1-2-9 メソッドからメソッドを使う</h3><h3 id="1-2-10-まとめ-オブジェクトの振る舞いとデータ"><a href="#1-2-10-まとめ-オブジェクトの振る舞いとデータ" class="headerlink" title="1-2-10 まとめ - オブジェクトの振る舞いとデータ"></a>1-2-10 まとめ - オブジェクトの振る舞いとデータ</h3><h2 id="1-3-Rubyプログラムの基礎知識"><a href="#1-3-Rubyプログラムの基礎知識" class="headerlink" title="1-3 Rubyプログラムの基礎知識"></a>1-3 Rubyプログラムの基礎知識</h2><h3 id="1-3-1-演算子"><a href="#1-3-1-演算子" class="headerlink" title="1-3-1 演算子"></a>1-3-1 演算子</h3><ul>
<li>目新しい演算子はないので割愛</li>
</ul>
<h3 id="1-3-2-nil"><a href="#1-3-2-nil" class="headerlink" title="1-3-2 nil"></a>1-3-2 nil</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nilにする</span></span><br><span class="line">value = <span class="literal">nil</span></span><br><span class="line"><span class="comment"># nilかどうか確かめる</span></span><br><span class="line">value.<span class="literal">nil</span>?</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-真偽"><a href="#1-3-3-真偽" class="headerlink" title="1-3-3 真偽"></a>1-3-3 真偽</h3><ul>
<li>Rubyでは0も真になるので注意！</li>
</ul>
<h3 id="1-3-4-条件分岐"><a href="#1-3-4-条件分岐" class="headerlink" title="1-3-4 条件分岐"></a>1-3-4 条件分岐</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">number = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> number == <span class="number">1</span></span><br><span class="line">  puts <span class="string">'数値は1です'</span></span><br><span class="line"><span class="keyword">elsif</span> number == <span class="number">2</span></span><br><span class="line">  puts <span class="string">'数値は2です'</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">'数値は1や2以外です'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ifは評価結果を返すことを抑えておく</span></span><br><span class="line">number = <span class="number">100</span></span><br><span class="line">message = <span class="keyword">if</span> number &gt; <span class="number">50</span></span><br><span class="line">            <span class="string">"numberは50より大きいです"</span></span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">            <span class="string">"numberは50以下です"</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line"><span class="comment"># elseがなくどのオブジェクトにも当てはまらない場合はnilオブジェクト</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当てはまらない場合に分岐する unless</span></span><br><span class="line"><span class="comment"># ifの裏返しを表現する方法</span></span><br><span class="line"><span class="comment"># これは使わなくても良さそう わかりにくくなる</span></span><br><span class="line">age = <span class="number">16</span></span><br><span class="line"><span class="keyword">unless</span> age &gt;= <span class="number">20</span></span><br><span class="line">  puts <span class="string">"未成年者には酒類を提供できません！"</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 後置if</span></span><br><span class="line">puts <span class="string">'おはようございます'</span> <span class="keyword">if</span> <span class="literal">true</span></span><br><span class="line">puts <span class="string">'お疲れ様でした'</span> <span class="keyword">if</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-5-配列"><a href="#1-3-5-配列" class="headerlink" title="1-3-5 配列"></a>1-3-5 配列</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># eachメソッド</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">a.each <span class="keyword">do</span> <span class="params">|element|</span></span><br><span class="line">  puts element</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># forでもかける</span></span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> a</span><br><span class="line">  puts element</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Rubyに慣れている人は、<strong>For文よりもeachを好んで使うとのこと</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配列に要素を追加する場合は&lt;&lt;を使う</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">a &lt;&lt; <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><a href="https://qiita.com/may88seiji/items/ce9396a4c267a3d449ae">https://qiita.com/may88seiji/items/ce9396a4c267a3d449ae</a></p>
<h3 id="1-3-6-ハッシュ"><a href="#1-3-6-ハッシュ" class="headerlink" title="1-3-6 ハッシュ"></a>1-3-6 ハッシュ</h3><ul>
<li>内部的にデータをキーと対応づけて格納しておくデータ構造</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pref = &#123; <span class="symbol">tokyo:</span> <span class="number">13636222</span>, <span class="symbol">kanagawa:</span> <span class="number">9144572</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">irb(main):060:0&gt;</span> pref</span><br><span class="line">=&gt; &#123;<span class="symbol">:tokyo=&gt;</span><span class="number">13636222</span>, <span class="symbol">:kanagawa=&gt;</span><span class="number">9144572</span>&#125;</span><br><span class="line"><span class="meta">irb(main):061:0&gt;</span> pref[<span class="symbol">:tokyo</span>]</span><br><span class="line">=&gt; <span class="number">13636222</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-少し高度なテクニック"><a href="#1-4-少し高度なテクニック" class="headerlink" title="1-4 少し高度なテクニック"></a>1-4 少し高度なテクニック</h2><h3 id="1-4-1-initialize"><a href="#1-4-1-initialize" class="headerlink" title="1-4-1 initialize"></a>1-4-1 initialize</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line">  <span class="keyword">attr_reader</span> <span class="symbol">:name</span>, <span class="symbol">:address</span>, <span class="symbol">:email</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(name, address, email)</span></span></span><br><span class="line">    @name = name</span><br><span class="line">    @address = address</span><br><span class="line">    @email = email</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">user = User.new(<span class="string">"田中太郎"</span>,<span class="string">"東京都"</span>,<span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-4-2-メソッドの呼び出しに制限をかける"><a href="#1-4-2-メソッドの呼び出しに制限をかける" class="headerlink" title="1-4-2 メソッドの呼び出しに制限をかける"></a>1-4-2 メソッドの呼び出しに制限をかける</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(money)</span></span></span><br><span class="line">    @money = money</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">billionaire?</span></span></span><br><span class="line">    money &gt;= <span class="number">1000000000</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># privateキーワード以降のメソッドはプライベートメソッドとなる</span></span><br><span class="line">  <span class="comment"># initializeメソッドはprivate指定しなくても自動的にプライベートになる</span></span><br><span class="line">  private</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">money</span></span></span><br><span class="line">    @money</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">person = Person.new(<span class="number">1000000000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># privateなのでエラーになる！</span></span><br><span class="line">person.money</span><br></pre></td></tr></table></figure>

<h3 id="1-4-3-引数にデフォルト値を指定する"><a href="#1-4-3-引数にデフォルト値を指定する" class="headerlink" title="1-4-3 引数にデフォルト値を指定する"></a>1-4-3 引数にデフォルト値を指定する</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># デフォルト値を指定することができる</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(full = <span class="literal">true</span>, with_age = <span class="literal">true</span>)</span></span></span><br><span class="line">  n = <span class="keyword">if</span> full</span><br><span class="line">        <span class="string">"<span class="subst">#&#123;given_name&#125;</span> <span class="subst">#&#123;family_name&#125;</span>"</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        given_name</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">  n &lt;&lt; <span class="string">"(<span class="subst">#&#123;age&#125;</span>)"</span> <span class="keyword">if</span> with_age</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-4-キーワード引数"><a href="#1-4-4-キーワード引数" class="headerlink" title="1-4-4 キーワード引数"></a>1-4-4 キーワード引数</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># キーワード引数の定義</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(<span class="symbol">full:</span> <span class="literal">true</span>, <span class="symbol">with_age:</span> <span class="literal">true</span>)</span></span></span><br><span class="line">  n = <span class="keyword">if</span> full</span><br><span class="line">        <span class="string">"<span class="subst">#&#123;given_name&#125;</span> <span class="subst">#&#123;family_name&#125;</span>"</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        given_name</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">  n &lt;&lt; <span class="string">"(<span class="subst">#&#123;age&#125;</span>)"</span> <span class="keyword">if</span> with_age</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># デフォルト値の省略も可能</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(<span class="symbol">full:</span> <span class="literal">true</span>, <span class="symbol">with_age:</span>)</span></span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># どんな順序で呼び出してもいい</span></span><br><span class="line">person.name(<span class="symbol">full:</span> <span class="literal">true</span>, <span class="symbol">with_age:</span> <span class="literal">false</span>)</span><br><span class="line">person.name(<span class="symbol">with_age:</span> <span class="literal">false</span>, <span class="symbol">full:</span> <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<h2 id="1-5-似たところのあるクラスを作りたいとき"><a href="#1-5-似たところのあるクラスを作りたいとき" class="headerlink" title="1-5 似たところのあるクラスを作りたいとき"></a>1-5 似たところのあるクラスを作りたいとき</h2><h3 id="1-5-1-継承"><a href="#1-5-1-継承" class="headerlink" title="1-5-1 継承"></a>1-5-1 継承</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &lt; で継承ができる</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">title</span></span></span><br><span class="line">    <span class="string">'本のタイトル'</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Magazine</span> &lt; Book</span></span><br><span class="line">  <span class="comment"># オーバーライド</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">title</span></span></span><br><span class="line">    <span class="string">'雑誌のタイトル'</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="1-5-2-モジュールによる共通化（Mix-in）"><a href="#1-5-2-モジュールによる共通化（Mix-in）" class="headerlink" title="1-5-2 モジュールによる共通化（Mix-in）"></a>1-5-2 モジュールによる共通化（Mix-in）</h3><ul>
<li>Rubyの基本単位のオブジェクトであり、オブジェクトの設計図としてクラスがある</li>
<li>ある一連の振る舞いの設計図を一箇所にまとめた存在として「モジュール(Module)」という概念がある</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">Chatting</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">chat</span></span></span><br><span class="line">    <span class="string">"hello"</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span></span></span><br><span class="line">  <span class="keyword">include</span> Chatting</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>モジュールをクラスに取り込んで振る舞いを追加することをRubyでは、「Mix-in」(ミックスイン)と呼びます</p>
<h2 id="Column-クラスメソッド"><a href="#Column-クラスメソッド" class="headerlink" title="Column クラスメソッド"></a>Column クラスメソッド</h2><ul>
<li>クラスに対して呼び出せるクラスメソッドという概念が存在する</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tax</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">rate</span></span></span><br><span class="line">    <span class="number">1.08</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="1-6-プログラムの異常を検知しよう（例外捕捉）"><a href="#1-6-プログラムの異常を検知しよう（例外捕捉）" class="headerlink" title="1-6 プログラムの異常を検知しよう（例外捕捉）"></a>1-6 プログラムの異常を検知しよう（例外捕捉）</h2><ul>
<li>独自例外を作成するときはStandardErrorを継承して作成する</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">rescue</span></span><br><span class="line"><span class="keyword">ensure</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># メソッド内の例外処理なら以下のようにかける</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">method</span></span></span><br><span class="line">  <span class="keyword">rescue</span></span><br><span class="line">  <span class="comment"># 例外に対応するコード</span></span><br><span class="line">  <span class="keyword">ensure</span></span><br><span class="line">  <span class="comment"># 例外が発生してもしなくても必ず実行したいコード</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  do_something</span><br><span class="line"><span class="keyword">rescue</span> SomeSpecialError =&gt; e</span><br><span class="line">  <span class="comment"># エラーオブジェクトを変数として受け取る方法</span></span><br><span class="line">  puts <span class="string">"<span class="subst">#&#123;e.<span class="keyword">class</span>&#125;</span> (<span class="subst">#&#123;e.message&#125;</span>)が発生しました。処理を続行します。"</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="1-7-読めると便利！Rubyっぽい書き方"><a href="#1-7-読めると便利！Rubyっぽい書き方" class="headerlink" title="1-7 読めると便利！Rubyっぽい書き方"></a>1-7 読めると便利！Rubyっぽい書き方</h2><h3 id="1-7-1-nil-ガード"><a href="#1-7-1-nil-ガード" class="headerlink" title="1-7-1 nil ガード"></a>1-7-1 nil ガード</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">number <span class="params">||</span>= <span class="number">10</span></span><br><span class="line">number <span class="params">||</span> (number = <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">children</span></span></span><br><span class="line">  @children <span class="params">||</span>= []</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># childrenがnilの状態であっても必ず配列で初期化されるので安心</span></span><br></pre></td></tr></table></figure>

<h3 id="1-7-2-ぼっち演算子-amp"><a href="#1-7-2-ぼっち演算子-amp" class="headerlink" title="1-7-2 ぼっち演算子 &amp;."></a>1-7-2 ぼっち演算子 &amp;.</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user = User.new</span><br><span class="line">user.name</span><br><span class="line"></span><br><span class="line">object = <span class="literal">nil</span></span><br><span class="line">object&amp;.name</span><br><span class="line"><span class="comment"># =&gt; ここでエラーにならない</span></span><br></pre></td></tr></table></figure>

<h3 id="1-7-3-記法"><a href="#1-7-3-記法" class="headerlink" title="1-7-3 %記法"></a>1-7-3 %記法</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># すべての要素が文字列である配列は、通常の配列記法の他に、「%w」というキーワードを使って書くことができる</span></span><br><span class="line">ary1 = [<span class="string">'apple'</span>,<span class="string">'banana'</span>,<span class="string">'orange'</span>]</span><br><span class="line">puts ary1</span><br><span class="line"><span class="comment"># irb(main):001:0&gt; ary1 = ['apple','banana','orange']</span></span><br><span class="line"><span class="comment"># =&gt; ["apple", "banana", "orange"]</span></span><br><span class="line"><span class="comment"># irb(main):002:0&gt; puts ary1</span></span><br><span class="line"><span class="comment"># apple</span></span><br><span class="line"><span class="comment"># banana</span></span><br><span class="line"><span class="comment"># orange</span></span><br><span class="line"><span class="comment"># =&gt; nil</span></span><br><span class="line"></span><br><span class="line"><span class="meta">irb(main):003:0&gt;</span> ary2 = <span class="string">%w(apple banana orange)</span></span><br><span class="line">=&gt; [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"orange"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># すべての要素がシンボルの場合は、「%i」というキーワードを使ってかける</span></span><br><span class="line"><span class="meta">irb(main):004:0&gt;</span> ary2 = %i(apple banana orange)</span><br><span class="line">=&gt; [<span class="symbol">:apple</span>, <span class="symbol">:banana</span>, <span class="symbol">:orange</span>]</span><br></pre></td></tr></table></figure>

<h3 id="1-7-4-配列の各要素から特定の属性だけを取り出す"><a href="#1-7-4-配列の各要素から特定の属性だけを取り出す" class="headerlink" title="1-7-4 配列の各要素から特定の属性だけを取り出す"></a>1-7-4 配列の各要素から特定の属性だけを取り出す</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line">  <span class="keyword">attr_accessor</span> <span class="symbol">:name</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">user1 = User.new</span><br><span class="line">user1.name = <span class="string">'テスト１'</span></span><br><span class="line">user2 = User.new</span><br><span class="line">user2.name = <span class="string">'テスト２'</span></span><br><span class="line">user3 = User.new</span><br><span class="line">user3.name = <span class="string">'テスト３'</span></span><br><span class="line"></span><br><span class="line">users = [user1, user2, user3]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------ 名前だけが入った配列を求める方法１ --------</span></span><br><span class="line"></span><br><span class="line">names = []</span><br><span class="line">user.each <span class="keyword">do</span> <span class="params">|user|</span></span><br><span class="line">  names &lt;&lt; user.name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p names</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------ 名前だけが入った配列を求める方法２ --------</span></span><br><span class="line"></span><br><span class="line">names = users.map <span class="keyword">do</span> <span class="params">|user|</span></span><br><span class="line">  user.name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------ 名前だけが入った配列を求める方法３ --------</span></span><br><span class="line"></span><br><span class="line">names = users.map &#123; <span class="params">|user|</span> user.name &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------ 名前だけが入った配列を求める方４ -------- ※これが一番簡潔！</span></span><br><span class="line"></span><br><span class="line">nemes = users.map(&amp;<span class="symbol">:name</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>※なれないとわからない書き方だと思った</li>
</ul>
<h2 id="Chapter2-Railsアプリケーションをのぞいてみよう"><a href="#Chapter2-Railsアプリケーションをのぞいてみよう" class="headerlink" title="Chapter2 Railsアプリケーションをのぞいてみよう"></a>Chapter2 Railsアプリケーションをのぞいてみよう</h2><h2 id="2-1-コマンド実行環境を準備しよう"><a href="#2-1-コマンド実行環境を準備しよう" class="headerlink" title="2-1 コマンド実行環境を準備しよう"></a>2-1 コマンド実行環境を準備しよう</h2><h3 id="2-1-1-Windowsでコマンド実行環境を用意する"><a href="#2-1-1-Windowsでコマンド実行環境を用意する" class="headerlink" title="2-1-1 Windowsでコマンド実行環境を用意する"></a>2-1-1 Windowsでコマンド実行環境を用意する</h3><p>windows環境のWSLでubuntuを動かしてそこにRubyを入れる<br><code>wsl -u root</code><br>wslにログインしてupdate打つ際に管理者権限が必要なのだが、<br>Windowsユーザだとパスワード通らなかったのでrootではいって更新コマンド売った</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cドライブ直下</span></span><br><span class="line">ls /mnt/c</span><br></pre></td></tr></table></figure>

<h2 id="2-2-rbenvをインストールしよう"><a href="#2-2-rbenvをインストールしよう" class="headerlink" title="2-2 rbenvをインストールしよう"></a>2-2 rbenvをインストールしよう</h2><h3 id="2-2-1-macOSでrbnevをインストール"><a href="#2-2-1-macOSでrbnevをインストール" class="headerlink" title="2-2-1 macOSでrbnevをインストール"></a>2-2-1 macOSでrbnevをインストール</h3><h3 id="2-2-2-Windows（WSL）でrbenvをインストール"><a href="#2-2-2-Windows（WSL）でrbenvをインストール" class="headerlink" title="2-2-2 Windows（WSL）でrbenvをインストール"></a>2-2-2 Windows（WSL）でrbenvをインストール</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/rbenv.git ~/.rbenv</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH="$HOME/.rbenv/bin:$PATH"'</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'eval "$&#123;rbenv init -&#125;"'</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 再度ログイン</span></span><br><span class="line">wsl -u root</span><br><span class="line"></span><br><span class="line">rbenv -v</span><br><span class="line"><span class="comment"># =&gt; バージョンが表示されること</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># rbenvでのRubyのインストールを簡単にするプラグイン、ruby-buildをセットアップ</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/rbenv/ruby-build.git <span class="string">"<span class="variable">$(rbenv root)</span>"</span>/plugins/ruby-build</span><br><span class="line"></span><br><span class="line"><span class="comment"># こちらのコマンドはhttps://github.com/rbenv/ruby-build/wiki を参照</span></span><br><span class="line">sudo apt-get install autoconf bison build-essential libssl-dev libyaml-dev libreadline-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm-dev libdb-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># libgdbm6 このパッケージが見つからなかった</span></span><br><span class="line"><span class="comment"># sudo apt-get install autoconf bison build-essential libssl-dev libyaml-dev libreadline-dev # zlib1g-dev libncurses5-dev libffi-dev libgdbm libgdbm-dev libdb-dev</span></span><br><span class="line"><span class="comment"># Reading package lists... Done</span></span><br><span class="line"><span class="comment"># Building dependency tree</span></span><br><span class="line"><span class="comment"># Reading state information... Done</span></span><br><span class="line"><span class="comment"># E: Unable to locate package libgdbm</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-Rubyのインストール"><a href="#2-3-Rubyのインストール" class="headerlink" title="2-3 Rubyのインストール"></a>2-3 Rubyのインストール</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rbenv install <span class="number">2.5</span>.<span class="number">1</span></span><br><span class="line">rbenv global <span class="number">2.5</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line">ruby -v</span><br><span class="line">which ruby</span><br><span class="line"></span><br><span class="line"><span class="comment"># うまく行かなかったので以下を参照して設定した</span></span><br><span class="line"><span class="comment"># &lt;https://qiita.com/yuma-ito-bd/items/00f89ca0c04909c7c467&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-1-Rubyのパッケージ管理ツール「RubyGems」"><a href="#2-3-1-Rubyのパッケージ管理ツール「RubyGems」" class="headerlink" title="2-3-1 Rubyのパッケージ管理ツール「RubyGems」"></a>2-3-1 Rubyのパッケージ管理ツール「RubyGems」</h3><ul>
<li>Rubyは本体だけでも動作するが、公開されているサードパーティのライブラリを利用することで素早く生産的にプログラミング可能</li>
<li>これらのライブラリは「gem」という形式でパッケージ化されている</li>
<li>本書で取り扱っていくRailsもgemの１つ</li>
<li>Rubygemsと呼ばれるパッケージ管理ツールがgemのインストールや管理を簡単にしてくれる</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gem update --system</span><br><span class="line"></span><br><span class="line">gem -v</span><br><span class="line"></span><br><span class="line">gem list</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-Bundlerのインストール"><a href="#2-3-2-Bundlerのインストール" class="headerlink" title="2-3-2 Bundlerのインストール"></a>2-3-2 Bundlerのインストール</h3><ul>
<li>Bundler：gemをどのバージョンで利用するのかを管理する仕組み</li>
<li>プロジェクトのディレクトリに<code>Gemfile</code>という名前のファイルを作成し、gemの名前を記載しておくとそのとおりにインストールしたり、それらのgemをRubyから利用したりすることができるようになる</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install bundler</span><br></pre></td></tr></table></figure>

<ul>
<li><code>bundle install</code>: Gemfileに記述したgemをインストールする</li>
<li><code>bundle exec [コマンド]</code>: Bundlerが管理するgemを利用できる状態でコマンドを実行する</li>
<li><code>bundle init</code></li>
<li><code>bundle update</code></li>
</ul>
<h2 id="2-4-Railsのインストール"><a href="#2-4-Railsのインストール" class="headerlink" title="2-4 Railsのインストール"></a>2-4 Railsのインストール</h2><ul>
<li><code>gem install rails -v 5.2.1</code></li>
<li><code>rails -v</code></li>
</ul>
<h3 id="2-4-1-Node-jsのインストール"><a href="#2-4-1-Node-jsのインストール" class="headerlink" title="2-4-1 Node.jsのインストール"></a>2-4-1 Node.jsのインストール</h3><p>Javascriptランタイムとしてnodejsをインストールする</p>
<p><code>curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</code><br>sudo apt install nodejs</p>
<p>nodebrewインストール参考<br><code>&lt;https://www.kimoton.com/entry/20190215/1550166179&gt;</code></p>
<h2 id="2-5-データベースのインストールとセットアップ"><a href="#2-5-データベースのインストールとセットアップ" class="headerlink" title="2-5 データベースのインストールとセットアップ"></a>2-5 データベースのインストールとセットアップ</h2><h3 id="2-5-1-macOSの場合"><a href="#2-5-1-macOSの場合" class="headerlink" title="2-5-1 macOSの場合"></a>2-5-1 macOSの場合</h3><h3 id="2-5-2-Windows（WSL）の場合"><a href="#2-5-2-Windows（WSL）の場合" class="headerlink" title="2-5-2 Windows（WSL）の場合"></a>2-5-2 Windows（WSL）の場合</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c <span class="string">'echo "deb http://apt.postgresql.org/pub/repos/apt/$&#123;lsb_release -cs&#125;-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'</span></span><br><span class="line">wget --quiet -P - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install postgresql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 資料に記載の手順でpostgresqlインストールできなさそうだったので以下の手順で実施</span></span><br><span class="line"><span class="comment"># 参考）&lt;https://www.digitalocean.com/community/tutorials/how-to-install-postgresql-on-ubuntu-20-04-quickstart-ja&gt;</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install postgresql postgresql-contrib</span><br><span class="line"><span class="comment"># サービスが起動しているか確認し起動していなければ立ち上げる</span></span><br><span class="line">service postgresql status</span><br><span class="line">service postgresql start</span><br></pre></td></tr></table></figure>

<h3 id="2-5-3-トラブルシューティング：RailsでPG-ConnectionBadというエラーになるとき"><a href="#2-5-3-トラブルシューティング：RailsでPG-ConnectionBadというエラーになるとき" class="headerlink" title="2-5-3 トラブルシューティング：RailsでPG::ConnectionBadというエラーになるとき"></a>2-5-3 トラブルシューティング：RailsでPG::ConnectionBadというエラーになるとき</h3><h2 id="2-6-Railsに触れてみよう"><a href="#2-6-Railsに触れてみよう" class="headerlink" title="2-6 Railsに触れてみよう"></a>2-6 Railsに触れてみよう</h2><h3 id="2-6-1-実際にアプリケーションを動かしてみよう"><a href="#2-6-1-実際にアプリケーションを動かしてみよう" class="headerlink" title="2-6-1 実際にアプリケーションを動かしてみよう"></a>2-6-1 実際にアプリケーションを動かしてみよう</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 雛形生成</span></span><br><span class="line">rails new scaffold_app -d postgresql</span><br><span class="line"><span class="comment"># 確認</span></span><br><span class="line"><span class="built_in">cd</span> scaffold_app</span><br><span class="line">ls</span><br><span class="line"><span class="comment"># データベース作成</span></span><br><span class="line"><span class="comment"># railsコマンドではなく、bin/railsコマンドを利用する</span></span><br><span class="line"><span class="comment"># このスクリプトだと、bundle exec railsとして実行したときと同様に、Gemfile通りのgemを利用できる環境上でrailsコマンドを実行することができる</span></span><br><span class="line">bin/rails db:create</span><br><span class="line"></span><br><span class="line"><span class="comment"># サーバー起動</span></span><br><span class="line">bin/rails s</span><br></pre></td></tr></table></figure>

<ul>
<li>うまくRails立ち上がらないので、書籍とは別のバージョンを入れる</li>
<li><a href="https://qiita.com/Gushi_maru/items/f3b5cc43e135e678085f">https://qiita.com/Gushi_maru/items/f3b5cc43e135e678085f</a></li>
<li><code>apt-get install libpq-dev</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 問題：postgresqlが5432portで立ち上がらない問題</span></span><br><span class="line"><span class="comment"># 原因：Windows側でインストールしているPostgresqlがすでに5432ポートで立ち上がっていたため</span></span><br><span class="line"><span class="comment"># 対策：Windows側で立ち上がっていたサービスを停止した上で起動</span></span><br><span class="line">root@DORAEMON:/etc/postgresql/10/main<span class="comment"># service postgresql start</span></span><br><span class="line"> * Starting PostgreSQL 10 database server                                                                                                                                                     * Removed stale pid file.</span><br><span class="line">Error: /usr/lib/postgresql/10/bin/pg_ctl /usr/lib/postgresql/10/bin/pg_ctl start -D /var/lib/postgresql/10/main -l /var/<span class="built_in">log</span>/postgresql/postgresql-10-main.log -s -o  -c config_file=<span class="string">"/etc/postgresql/10/main/postgresql.conf"</span>  exited with status 1:</span><br><span class="line">2021-03-28 04:08:07.395 JST [210] LOG:  could not <span class="built_in">bind</span> IPv4 address <span class="string">"127.0.0.1"</span>: Permission denied</span><br><span class="line">2021-03-28 04:08:07.395 JST [210] HINT:  Is another postmaster already running on port 5432? If not, <span class="built_in">wait</span> a few seconds and retry.</span><br><span class="line">2021-03-28 04:08:07.395 JST [210] WARNING:  could not create listen socket <span class="keyword">for</span> <span class="string">"localhost"</span></span><br><span class="line">2021-03-28 04:08:07.395 JST [210] FATAL:  could not create any TCP/IP sockets</span><br><span class="line">2021-03-28 04:08:07.396 JST [210] LOG:  database system is shut down</span><br><span class="line">pg_ctl: could not start server</span><br><span class="line">Examine the <span class="built_in">log</span> output.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 問題：DB作成ができない問題</span></span><br><span class="line">root@DORAEMON:/mnt/c/users/Tomo/ruby-work/scaffold-app<span class="comment"># bin/rails db:create</span></span><br><span class="line">FATAL:  role <span class="string">"root"</span> does not exist</span><br><span class="line">Couldn<span class="string">'t create '</span>scaffold_app_development<span class="string">' database. Please check your configuration.</span></span><br><span class="line"><span class="string">rails aborted!</span></span><br><span class="line"><span class="string">PG::ConnectionBad: FATAL:  role "root" does not exist</span></span><br><span class="line"><span class="string">/mnt/c/users/Tomo/ruby-work/scaffold-app/bin/rails:9:in `&lt;top (required)&gt;'</span></span><br><span class="line">/mnt/c/users/Tomo/ruby-work/scaffold-app/bin/spring:15:<span class="keyword">in</span> `&lt;top (required)&gt;<span class="string">'</span></span><br><span class="line"><span class="string">bin/rails:3:in `load'</span></span><br><span class="line">bin/rails:3:<span class="keyword">in</span> `&lt;main&gt;<span class="string">'</span></span><br><span class="line"><span class="string">Tasks: TOP =&gt; db:create</span></span><br><span class="line"><span class="string">(See full trace by running task with --trace)</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>そもそもPostgresqlにユーザ作成しておく必要がありそうなので対応</p>
</li>
<li><p>Postgresqlにユーザを作成する手順</p>
<ul>
<li><a href="https://qiita.com/krtsato/items/4565051608a63f11b316">https://qiita.com/krtsato/items/4565051608a63f11b316</a></li>
</ul>
</li>
<li><p>パスワードは環境変数に設定しておき読み込む</p>
<ul>
<li><a href="https://www.techscore.com/blog/2012/10/26/how-to-manage-database-yml/">https://www.techscore.com/blog/2012/10/26/how-to-manage-database-yml/</a></li>
</ul>
</li>
<li><p>ユーザ作成</p>
<ul>
<li><a href="https://qiita.com/sibakenY/items/407b721ad1bd0975bd00">https://qiita.com/sibakenY/items/407b721ad1bd0975bd00</a></li>
</ul>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/hexo/source/img/2021-03-28-15-05-16.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>

<ul>
<li>railsはHTTPサーバとしてpumaを使用している</li>
<li>Pumaは広く使用されており、Railsの機能を利用する上で不足はありません。</li>
</ul>
<h4 id="2-6-1-2-ユーザ管理画面の雛形を作る"><a href="#2-6-1-2-ユーザ管理画面の雛形を作る" class="headerlink" title="2-6-1-2 ユーザ管理画面の雛形を作る"></a>2-6-1-2 ユーザ管理画面の雛形を作る</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ユーザーに関するscaffoldを自動生成する</span></span><br><span class="line">bin/rails generate scaffold user name:string address:string age:<span class="built_in">integer</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ユーザ管理機能に使うデータベースを作成する</span></span><br><span class="line">bin/rails db:migrate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 準備が整ったところで再度アプリケーションを起動する</span></span><br><span class="line">bin/rails s</span><br></pre></td></tr></table></figure>

<h4 id="2-6-1-4-コードの通り道"><a href="#2-6-1-4-コードの通り道" class="headerlink" title="2-6-1-4 コードの通り道"></a>2-6-1-4 コードの通り道</h4><ul>
<li>Controllerからページテンプレート周りの簡単な説明</li>
</ul>
<h4 id="2-6-1-5-ディレクトリ構成"><a href="#2-6-1-5-ディレクトリ構成" class="headerlink" title="2-6-1-5 ディレクトリ構成"></a>2-6-1-5 ディレクトリ構成</h4><ul>
<li><p>ディレクトリ構成（割愛）</p>
</li>
<li><p><code>database.yml</code></p>
<ul>
<li>データベースと接続するための設定ファイル</li>
<li>development,test,productionという環境用にそれぞれ作成</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>項目名</th>
<th>説明</th>
</tr>
</thead>
<tbody><tr>
<td>adapter</td>
<td>データベースの接続に使用するアダプタの名前を指定します。アダプタには各データベースに対応するsqlite3,postgresql,mysql2,oracle_enhancedなどがある</td>
</tr>
<tr>
<td>encoding</td>
<td>文字コード</td>
</tr>
<tr>
<td>pool</td>
<td>コネクション数の上限</td>
</tr>
<tr>
<td>database</td>
<td>データベース名</td>
</tr>
<tr>
<td>username</td>
<td>データベースに接続するユーザ名</td>
</tr>
<tr>
<td>password</td>
<td>データベースに接続するユーザのパスワード</td>
</tr>
<tr>
<td>host</td>
<td>データベースが動作しているホスト名またはipアドレス</td>
</tr>
</tbody></table>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PostgreSQL. Versions 9.3 and up are supported.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Install the pg driver:</span></span><br><span class="line"><span class="comment">#   gem install pg</span></span><br><span class="line"><span class="comment"># On macOS with Homebrew:</span></span><br><span class="line"><span class="comment">#   gem install pg -- --with-pg-config=/usr/local/bin/pg_config</span></span><br><span class="line"><span class="comment"># On macOS with MacPorts:</span></span><br><span class="line"><span class="comment">#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config</span></span><br><span class="line"><span class="comment"># On Windows:</span></span><br><span class="line"><span class="comment">#   gem install pg</span></span><br><span class="line"><span class="comment">#       Choose the win32 build.</span></span><br><span class="line"><span class="comment">#       Install PostgreSQL and put its /bin directory on your path.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Configure Using Gemfile</span></span><br><span class="line"><span class="comment"># gem 'pg'</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">default:</span> <span class="meta">&amp;default</span></span><br><span class="line"><span class="attr">  adapter:</span> <span class="string">postgresql</span></span><br><span class="line"><span class="attr">  encoding:</span> <span class="string">unicode</span></span><br><span class="line">  <span class="comment"># For details on connection pooling, see Rails configuration guide</span></span><br><span class="line">  <span class="comment"># https://guides.rubyonrails.org/configuring.html#database-pooling</span></span><br><span class="line"><span class="attr">  pool:</span> &lt;%=<span class="ruby"> ENV.fetch(<span class="string">"RAILS_MAX_THREADS"</span>) &#123; <span class="number">5</span> &#125; </span>%&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">development:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*default</span></span><br><span class="line"><span class="attr">  database:</span> <span class="string">scaffold_app_development</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The specified database role being used to connect to postgres.</span></span><br><span class="line">  <span class="comment"># To create additional roles in postgres see `$ createuser --help`.</span></span><br><span class="line">  <span class="comment"># When left blank, postgres will use the default role. This is</span></span><br><span class="line">  <span class="comment"># the same name as the operating system user that initialized the database.</span></span><br><span class="line">  <span class="comment">#username: scaffold_app</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The password associated with the postgres role (username).</span></span><br><span class="line">  <span class="comment">#password:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Connect on a TCP socket. Omitted by default since the client uses a</span></span><br><span class="line">  <span class="comment"># domain socket that doesn't need configuration. Windows does not have</span></span><br><span class="line">  <span class="comment"># domain sockets, so uncomment these lines.</span></span><br><span class="line">  <span class="comment">#host: localhost</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The TCP port the server listens on. Defaults to 5432.</span></span><br><span class="line">  <span class="comment"># If your server runs on a different port number, change accordingly.</span></span><br><span class="line">  <span class="comment">#port: 5432</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Schema search path. The server defaults to $user,public</span></span><br><span class="line">  <span class="comment">#schema_search_path: myapp,sharedapp,public</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Minimum log levels, in increasing order:</span></span><br><span class="line">  <span class="comment">#   debug5, debug4, debug3, debug2, debug1,</span></span><br><span class="line">  <span class="comment">#   log, notice, warning, error, fatal, and panic</span></span><br><span class="line">  <span class="comment"># Defaults to warning.</span></span><br><span class="line">  <span class="comment">#min_messages: notice</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Warning: The database defined as "test" will be erased and</span></span><br><span class="line"><span class="comment"># re-generated from your development database when you run "rake".</span></span><br><span class="line"><span class="comment"># Do not set this db to the same as development or production.</span></span><br><span class="line"><span class="attr">test:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*default</span></span><br><span class="line"><span class="attr">  database:</span> <span class="string">scaffold_app_test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># As with config/credentials.yml, you never want to store sensitive information,</span></span><br><span class="line"><span class="comment"># like your database password, in your source code. If your source code is</span></span><br><span class="line"><span class="comment"># ever seen by anyone, they now have access to your database.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Instead, provide the password as a unix environment variable when you boot</span></span><br><span class="line"><span class="comment"># the app. Read https://guides.rubyonrails.org/configuring.html#configuring-a-database</span></span><br><span class="line"><span class="comment"># for a full rundown on how to provide these environment variables in a</span></span><br><span class="line"><span class="comment"># production deployment.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># On Heroku and other platform providers, you may have a full connection URL</span></span><br><span class="line"><span class="comment"># available as an environment variable. For example:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   DATABASE_URL="postgres://myuser:mypass@localhost/somedatabase"</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># You can use this database configuration with:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   production:</span></span><br><span class="line"><span class="comment">#     url: &lt;%= ENV['DATABASE_URL'] %&gt;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">production:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*default</span></span><br><span class="line"><span class="attr">  database:</span> <span class="string">scaffold_app_production</span></span><br><span class="line"><span class="attr">  username:</span> <span class="string">scaffold_app</span></span><br><span class="line"><span class="attr">  password:</span> &lt;%=<span class="ruby"> ENV[<span class="string">'SCAFFOLD_APP_DATABASE_PASSWORD'</span>] </span>%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Column-YAMLの基本"><a href="#Column-YAMLの基本" class="headerlink" title="Column YAMLの基本"></a>Column YAMLの基本</h2><ul>
<li>エイリアスとアンカー問機能</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">animal:</span> <span class="meta">&amp;animal</span></span><br><span class="line"><span class="attr">  cat:</span> <span class="string">'ネコ'</span></span><br><span class="line"><span class="attr">  dog:</span> <span class="string">'イヌ'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">animal_shop_1:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*animal</span></span><br><span class="line"><span class="attr">  hamster:</span> <span class="string">'ハムスター'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">animal_shop_2:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*animal</span></span><br><span class="line"><span class="attr">  parrot:</span> <span class="string">'オウム'</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>routes.rb</code><ul>
<li>アプリケーションのルーティングを定義するファイル</li>
<li>リクエストに対応するレスポンスを作るためにどの処理を実行するかを定義したもの</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># すべてのルーティングを確認できる</span></span><br><span class="line">bin/rails routes</span><br></pre></td></tr></table></figure>

<h3 id="2-6-2-RailsのMVC"><a href="#2-6-2-RailsのMVC" class="headerlink" title="2-6-2 RailsのMVC"></a>2-6-2 RailsのMVC</h3><h2 id="Chapter3-タスク管理アプリケーションを作ろう"><a href="#Chapter3-タスク管理アプリケーションを作ろう" class="headerlink" title="Chapter3 タスク管理アプリケーションを作ろう"></a>Chapter3 タスク管理アプリケーションを作ろう</h2><h2 id="3-1-アプリケーション作成の準備をしよう"><a href="#3-1-アプリケーション作成の準備をしよう" class="headerlink" title="3-1 アプリケーション作成の準備をしよう"></a>3-1 アプリケーション作成の準備をしよう</h2><h3 id="3-1-1-作成するアプリケーションの内容を考える"><a href="#3-1-1-作成するアプリケーションの内容を考える" class="headerlink" title="3-1-1 作成するアプリケーションの内容を考える"></a>3-1-1 作成するアプリケーションの内容を考える</h3><h3 id="3-1-2-アプリケーションの名前を決める"><a href="#3-1-2-アプリケーションの名前を決める" class="headerlink" title="3-1-2 アプリケーションの名前を決める"></a>3-1-2 アプリケーションの名前を決める</h3><h3 id="3-1-3-アプリケーションのひな形を作成する"><a href="#3-1-3-アプリケーションのひな形を作成する" class="headerlink" title="3-1-3 アプリケーションのひな形を作成する"></a>3-1-3 アプリケーションのひな形を作成する</h3><h3 id="3-1-4-データベースの環境ごとの使い分け"><a href="#3-1-4-データベースの環境ごとの使い分け" class="headerlink" title="3-1-4 データベースの環境ごとの使い分け"></a>3-1-4 データベースの環境ごとの使い分け</h3><h3 id="3-1-5-ビュー層を効率良く書くためにSlimを使えるようにする"><a href="#3-1-5-ビュー層を効率良く書くためにSlimを使えるようにする" class="headerlink" title="3-1-5 ビュー層を効率良く書くためにSlimを使えるようにする"></a>3-1-5 ビュー層を効率良く書くためにSlimを使えるようにする</h3><h3 id="3-1-6-アプリケーションの見栄えを良くするためにBootstrapを導入する"><a href="#3-1-6-アプリケーションの見栄えを良くするためにBootstrapを導入する" class="headerlink" title="3-1-6 アプリケーションの見栄えを良くするためにBootstrapを導入する"></a>3-1-6 アプリケーションの見栄えを良くするためにBootstrapを導入する</h3><h3 id="3-1-7-Railsのエラーメッセージなどを日本語で出せるようにする"><a href="#3-1-7-Railsのエラーメッセージなどを日本語で出せるようにする" class="headerlink" title="3-1-7 Railsのエラーメッセージなどを日本語で出せるようにする"></a>3-1-7 Railsのエラーメッセージなどを日本語で出せるようにする</h3><h2 id="3-2-タスクモデルを作成する"><a href="#3-2-タスクモデルを作成する" class="headerlink" title="3-2 タスクモデルを作成する"></a>3-2 タスクモデルを作成する</h2><h3 id="3-2-1-タスクモデルの属性を設計する"><a href="#3-2-1-タスクモデルの属性を設計する" class="headerlink" title="3-2-1 タスクモデルの属性を設計する"></a>3-2-1 タスクモデルの属性を設計する</h3><h3 id="3-2-2-タスクモデルのひな形を作成する"><a href="#3-2-2-タスクモデルのひな形を作成する" class="headerlink" title="3-2-2 タスクモデルのひな形を作成する"></a>3-2-2 タスクモデルのひな形を作成する</h3><h3 id="3-2-3-マイグレーションでデータベースにテーブルを追加する"><a href="#3-2-3-マイグレーションでデータベースにテーブルを追加する" class="headerlink" title="3-2-3 マイグレーションでデータベースにテーブルを追加する"></a>3-2-3 マイグレーションでデータベースにテーブルを追加する</h3><h2 id="3-3-コントローラとビュー"><a href="#3-3-コントローラとビュー" class="headerlink" title="3-3 コントローラとビュー"></a>3-3 コントローラとビュー</h2><h3 id="3-3-1-新規登録機能を実装する"><a href="#3-3-1-新規登録機能を実装する" class="headerlink" title="3-3-1 新規登録機能を実装する"></a>3-3-1 新規登録機能を実装する</h3><h3 id="3-3-2-一覧表示機能を実装する"><a href="#3-3-2-一覧表示機能を実装する" class="headerlink" title="3-3-2 一覧表示機能を実装する"></a>3-3-2 一覧表示機能を実装する</h3><h3 id="3-3-3-詳細表示機能を実装する"><a href="#3-3-3-詳細表示機能を実装する" class="headerlink" title="3-3-3 詳細表示機能を実装する"></a>3-3-3 詳細表示機能を実装する</h3><h3 id="3-3-4-編集機能を実装する"><a href="#3-3-4-編集機能を実装する" class="headerlink" title="3-3-4 編集機能を実装する"></a>3-3-4 編集機能を実装する</h3><h3 id="3-3-5-削除機能を実装する"><a href="#3-3-5-削除機能を実装する" class="headerlink" title="3-3-5 削除機能を実装する"></a>3-3-5 削除機能を実装する</h3><h3 id="3-3-6-シンプルなCRUD機能の完成"><a href="#3-3-6-シンプルなCRUD機能の完成" class="headerlink" title="3-3-6 シンプルなCRUD機能の完成"></a>3-3-6 シンプルなCRUD機能の完成</h3><h2 id="＜レベルアップ編＞"><a href="#＜レベルアップ編＞" class="headerlink" title="＜レベルアップ編＞"></a>＜レベルアップ編＞</h2><h2 id="Chapter4-現実の複雑さに対応する"><a href="#Chapter4-現実の複雑さに対応する" class="headerlink" title="Chapter4 現実の複雑さに対応する"></a>Chapter4 現実の複雑さに対応する</h2><h2 id="4-1-さまざまなマイグレーション操作を使いこなす"><a href="#4-1-さまざまなマイグレーション操作を使いこなす" class="headerlink" title="4-1 さまざまなマイグレーション操作を使いこなす"></a>4-1 さまざまなマイグレーション操作を使いこなす</h2><h3 id="4-1-1-マイグレーションの適用を理解しよう"><a href="#4-1-1-マイグレーションの適用を理解しよう" class="headerlink" title="4-1-1 マイグレーションの適用を理解しよう"></a>4-1-1 マイグレーションの適用を理解しよう</h3><h3 id="4-1-2-マイグレーションではバージョンの上げ下げ両方を意識しよう"><a href="#4-1-2-マイグレーションではバージョンの上げ下げ両方を意識しよう" class="headerlink" title="4-1-2 マイグレーションではバージョンの上げ下げ両方を意識しよう"></a>4-1-2 マイグレーションではバージョンの上げ下げ両方を意識しよう</h3><h3 id="4-1-3-マイグレーションの名前の付け方に注意する"><a href="#4-1-3-マイグレーションの名前の付け方に注意する" class="headerlink" title="4-1-3 マイグレーションの名前の付け方に注意する"></a>4-1-3 マイグレーションの名前の付け方に注意する</h3><h3 id="4-1-4-schema-rb"><a href="#4-1-4-schema-rb" class="headerlink" title="4-1-4 schema.rb"></a>4-1-4 schema.rb</h3><h3 id="4-1-5-マイグレーションに関する主なコマンド"><a href="#4-1-5-マイグレーションに関する主なコマンド" class="headerlink" title="4-1-5 マイグレーションに関する主なコマンド"></a>4-1-5 マイグレーションに関する主なコマンド</h3><h3 id="4-1-6-マイグレーションの適用中にエラーが出たときは"><a href="#4-1-6-マイグレーションの適用中にエラーが出たときは" class="headerlink" title="4-1-6 マイグレーションの適用中にエラーが出たときは"></a>4-1-6 マイグレーションの適用中にエラーが出たときは</h3><h2 id="4-2-データの内容を制限する"><a href="#4-2-データの内容を制限する" class="headerlink" title="4-2 データの内容を制限する"></a>4-2 データの内容を制限する</h2><h3 id="4-2-1-データ型"><a href="#4-2-1-データ型" class="headerlink" title="4-2-1 データ型"></a>4-2-1 データ型</h3><h3 id="4-2-2-NOT-NULL制約"><a href="#4-2-2-NOT-NULL制約" class="headerlink" title="4-2-2 NOT NULL制約"></a>4-2-2 NOT NULL制約</h3><h3 id="4-2-3-文字列カラムの長さを指定する"><a href="#4-2-3-文字列カラムの長さを指定する" class="headerlink" title="4-2-3 文字列カラムの長さを指定する"></a>4-2-3 文字列カラムの長さを指定する</h3><h3 id="4-2-4-ユニークインデックスを作成する"><a href="#4-2-4-ユニークインデックスを作成する" class="headerlink" title="4-2-4 ユニークインデックスを作成する"></a>4-2-4 ユニークインデックスを作成する</h3><h2 id="4-3-モデルの「検証」を使う"><a href="#4-3-モデルの「検証」を使う" class="headerlink" title="4-3 モデルの「検証」を使う"></a>4-3 モデルの「検証」を使う</h2><h3 id="4-3-1-モデルの検証の仕組み"><a href="#4-3-1-モデルの検証の仕組み" class="headerlink" title="4-3-1 モデルの検証の仕組み"></a>4-3-1 モデルの検証の仕組み</h3><h3 id="4-3-2-検証の書き方"><a href="#4-3-2-検証の書き方" class="headerlink" title="4-3-2 検証の書き方"></a>4-3-2 検証の書き方</h3><h3 id="4-3-3-必須かどうかの検証を追加する"><a href="#4-3-3-必須かどうかの検証を追加する" class="headerlink" title="4-3-3 必須かどうかの検証を追加する"></a>4-3-3 必須かどうかの検証を追加する</h3><h3 id="4-3-4-コントローラとビューで検証エラーに対応する"><a href="#4-3-4-コントローラとビューで検証エラーに対応する" class="headerlink" title="4-3-4 コントローラとビューで検証エラーに対応する"></a>4-3-4 コントローラとビューで検証エラーに対応する</h3><h3 id="4-3-5-文字列長の検証を追加する"><a href="#4-3-5-文字列長の検証を追加する" class="headerlink" title="4-3-5 文字列長の検証を追加する"></a>4-3-5 文字列長の検証を追加する</h3><h3 id="4-3-6-オリジナルの検証コードを書く"><a href="#4-3-6-オリジナルの検証コードを書く" class="headerlink" title="4-3-6 オリジナルの検証コードを書く"></a>4-3-6 オリジナルの検証コードを書く</h3><h3 id="4-3-7-検証が行われない登録・更新操作もある"><a href="#4-3-7-検証が行われない登録・更新操作もある" class="headerlink" title="4-3-7 検証が行われない登録・更新操作もある"></a>4-3-7 検証が行われない登録・更新操作もある</h3><h2 id="4-4-モデルの状態を自動的に制御する―「コールバック」"><a href="#4-4-モデルの状態を自動的に制御する―「コールバック」" class="headerlink" title="4-4 モデルの状態を自動的に制御する―「コールバック」"></a>4-4 モデルの状態を自動的に制御する―「コールバック」</h2><h3 id="4-4-1-コールバックの仕組み"><a href="#4-4-1-コールバックの仕組み" class="headerlink" title="4-4-1 コールバックの仕組み"></a>4-4-1 コールバックの仕組み</h3><h3 id="4-4-2-コールバックの実装"><a href="#4-4-2-コールバックの実装" class="headerlink" title="4-4-2 コールバックの実装"></a>4-4-2 コールバックの実装</h3><h3 id="4-4-3-トランザクション"><a href="#4-4-3-トランザクション" class="headerlink" title="4-4-3 トランザクション"></a>4-4-3 トランザクション</h3><h2 id="4-5-ログイン機能を作る"><a href="#4-5-ログイン機能を作る" class="headerlink" title="4-5 ログイン機能を作る"></a>4-5 ログイン機能を作る</h2><h3 id="4-5-1-セッションとCookie"><a href="#4-5-1-セッションとCookie" class="headerlink" title="4-5-1 セッションとCookie"></a>4-5-1 セッションとCookie</h3><h3 id="4-5-2-User-モデルを作る"><a href="#4-5-2-User-モデルを作る" class="headerlink" title="4-5-2 User モデルを作る"></a>4-5-2 User モデルを作る</h3><h3 id="4-5-3-パスワードを受け付けてdigestを保存する"><a href="#4-5-3-パスワードを受け付けてdigestを保存する" class="headerlink" title="4-5-3 パスワードを受け付けてdigestを保存する"></a>4-5-3 パスワードを受け付けてdigestを保存する</h3><h3 id="4-5-4-ユーザー管理機能一式を追加する"><a href="#4-5-4-ユーザー管理機能一式を追加する" class="headerlink" title="4-5-4 ユーザー管理機能一式を追加する"></a>4-5-4 ユーザー管理機能一式を追加する</h3><h3 id="4-5-5-ログイン機能を実装する"><a href="#4-5-5-ログイン機能を実装する" class="headerlink" title="4-5-5 ログイン機能を実装する"></a>4-5-5 ログイン機能を実装する</h3><h3 id="4-5-6-ログインのフォームを表示する"><a href="#4-5-6-ログインのフォームを表示する" class="headerlink" title="4-5-6 ログインのフォームを表示する"></a>4-5-6 ログインのフォームを表示する</h3><h3 id="4-5-7-ログインの実行"><a href="#4-5-7-ログインの実行" class="headerlink" title="4-5-7 ログインの実行"></a>4-5-7 ログインの実行</h3><h3 id="4-5-8-ログイン状態の取得を簡単にする"><a href="#4-5-8-ログイン状態の取得を簡単にする" class="headerlink" title="4-5-8 ログイン状態の取得を簡単にする"></a>4-5-8 ログイン状態の取得を簡単にする</h3><h3 id="4-5-9-ログアウト機能を実装する"><a href="#4-5-9-ログアウト機能を実装する" class="headerlink" title="4-5-9 ログアウト機能を実装する"></a>4-5-9 ログアウト機能を実装する</h3><h3 id="4-5-10-ログインしていなければタスク管理を利用できなくする"><a href="#4-5-10-ログインしていなければタスク管理を利用できなくする" class="headerlink" title="4-5-10 ログインしていなければタスク管理を利用できなくする"></a>4-5-10 ログインしていなければタスク管理を利用できなくする</h3><h3 id="4-5-11-ログインしているユーザーのデータだけを扱えるようにする"><a href="#4-5-11-ログインしているユーザーのデータだけを扱えるようにする" class="headerlink" title="4-5-11 ログインしているユーザーのデータだけを扱えるようにする"></a>4-5-11 ログインしているユーザーのデータだけを扱えるようにする</h3><h3 id="4-5-12-管理機能を管理者ユーザーだけに利用させるようにする"><a href="#4-5-12-管理機能を管理者ユーザーだけに利用させるようにする" class="headerlink" title="4-5-12 管理機能を管理者ユーザーだけに利用させるようにする"></a>4-5-12 管理機能を管理者ユーザーだけに利用させるようにする</h3><h3 id="4-5-13-最初の管理者ユーザーを作る"><a href="#4-5-13-最初の管理者ユーザーを作る" class="headerlink" title="4-5-13 最初の管理者ユーザーを作る"></a>4-5-13 最初の管理者ユーザーを作る</h3><h2 id="4-6-データを絞り込む"><a href="#4-6-データを絞り込む" class="headerlink" title="4-6 データを絞り込む"></a>4-6 データを絞り込む</h2><h3 id="4-6-1-絞り込みの起点"><a href="#4-6-1-絞り込みの起点" class="headerlink" title="4-6-1 絞り込みの起点"></a>4-6-1 絞り込みの起点</h3><h3 id="4-6-2-絞り込み条件"><a href="#4-6-2-絞り込み条件" class="headerlink" title="4-6-2 絞り込み条件"></a>4-6-2 絞り込み条件</h3><h3 id="4-6-3-実行部分"><a href="#4-6-3-実行部分" class="headerlink" title="4-6-3 実行部分"></a>4-6-3 実行部分</h3><h2 id="4-7-タスク一覧を作成日時の新しい順に表示する"><a href="#4-7-タスク一覧を作成日時の新しい順に表示する" class="headerlink" title="4-7 タスク一覧を作成日時の新しい順に表示する"></a>4-7 タスク一覧を作成日時の新しい順に表示する</h2><h2 id="4-8-scopeを活用する"><a href="#4-8-scopeを活用する" class="headerlink" title="4-8 scopeを活用する"></a>4-8 scopeを活用する</h2><h2 id="4-9-フィルタを使い重複を避ける"><a href="#4-9-フィルタを使い重複を避ける" class="headerlink" title="4-9 フィルタを使い重複を避ける"></a>4-9 フィルタを使い重複を避ける</h2><h3 id="4-10-詳しい説明に含まれるURLをリンクとして表示する"><a href="#4-10-詳しい説明に含まれるURLをリンクとして表示する" class="headerlink" title="4-10 詳しい説明に含まれるURLをリンクとして表示する"></a>4-10 詳しい説明に含まれるURLをリンクとして表示する</h3><h3 id="4-10-1-まとめ"><a href="#4-10-1-まとめ" class="headerlink" title="4-10-1 まとめ"></a>4-10-1 まとめ</h3><h2 id="Chapter5-テストをはじめよう"><a href="#Chapter5-テストをはじめよう" class="headerlink" title="Chapter5 テストをはじめよう"></a>Chapter5 テストをはじめよう</h2><h2 id="5-1-テストについて"><a href="#5-1-テストについて" class="headerlink" title="5-1 テストについて"></a>5-1 テストについて</h2><h2 id="5-2-テストを書くことのメリット"><a href="#5-2-テストを書くことのメリット" class="headerlink" title="5-2 テストを書くことのメリット"></a>5-2 テストを書くことのメリット</h2><h3 id="5-2-1-テスト全体にかかるコストの削減"><a href="#5-2-1-テスト全体にかかるコストの削減" class="headerlink" title="5-2-1 テスト全体にかかるコストの削減"></a>5-2-1 テスト全体にかかるコストの削減</h3><h3 id="5-2-2-変更をフットワーク軽く行えるようになる"><a href="#5-2-2-変更をフットワーク軽く行えるようになる" class="headerlink" title="5-2-2 変更をフットワーク軽く行えるようになる"></a>5-2-2 変更をフットワーク軽く行えるようになる</h3><h3 id="5-2-3-環境のバージョンアップやリファクタリングの必須条件"><a href="#5-2-3-環境のバージョンアップやリファクタリングの必須条件" class="headerlink" title="5-2-3 環境のバージョンアップやリファクタリングの必須条件"></a>5-2-3 環境のバージョンアップやリファクタリングの必須条件</h3><h3 id="5-2-4-仕様変更の影響の大きさを簡単に把握することができる"><a href="#5-2-4-仕様変更の影響の大きさを簡単に把握することができる" class="headerlink" title="5-2-4 仕様変更の影響の大きさを簡単に把握することができる"></a>5-2-4 仕様変更の影響の大きさを簡単に把握することができる</h3><h3 id="5-2-5-仕様を記述したドキュメントとしても機能する"><a href="#5-2-5-仕様を記述したドキュメントとしても機能する" class="headerlink" title="5-2-5 仕様を記述したドキュメントとしても機能する"></a>5-2-5 仕様を記述したドキュメントとしても機能する</h3><h3 id="5-2-6-仕様やインターフェイスを深く考えるきっかけとして役立つ"><a href="#5-2-6-仕様やインターフェイスを深く考えるきっかけとして役立つ" class="headerlink" title="5-2-6 仕様やインターフェイスを深く考えるきっかけとして役立つ"></a>5-2-6 仕様やインターフェイスを深く考えるきっかけとして役立つ</h3><h3 id="5-2-7-適切な粒度のコードになりやすい"><a href="#5-2-7-適切な粒度のコードになりやすい" class="headerlink" title="5-2-7 適切な粒度のコードになりやすい"></a>5-2-7 適切な粒度のコードになりやすい</h3><h3 id="5-2-8-確実性を高めることで開発効率を上げる"><a href="#5-2-8-確実性を高めることで開発効率を上げる" class="headerlink" title="5-2-8 確実性を高めることで開発効率を上げる"></a>5-2-8 確実性を高めることで開発効率を上げる</h3><h2 id="5-3-本章で利用するテスト用ライブラリ"><a href="#5-3-本章で利用するテスト用ライブラリ" class="headerlink" title="5-3 本章で利用するテスト用ライブラリ"></a>5-3 本章で利用するテスト用ライブラリ</h2><h3 id="5-3-1-RSpec"><a href="#5-3-1-RSpec" class="headerlink" title="5-3-1 RSpec"></a>5-3-1 RSpec</h3><h3 id="5-3-2-Capybara"><a href="#5-3-2-Capybara" class="headerlink" title="5-3-2 Capybara"></a>5-3-2 Capybara</h3><h3 id="5-3-3-FactoryBot"><a href="#5-3-3-FactoryBot" class="headerlink" title="5-3-3 FactoryBot"></a>5-3-3 FactoryBot</h3><h2 id="5-4-本章で記述するテストの種類"><a href="#5-4-本章で記述するテストの種類" class="headerlink" title="5-4 本章で記述するテストの種類"></a>5-4 本章で記述するテストの種類</h2><h3 id="5-4-1-モデルのテスト"><a href="#5-4-1-モデルのテスト" class="headerlink" title="5-4-1 モデルのテスト"></a>5-4-1 モデルのテスト</h3><h3 id="5-4-2-結合テスト"><a href="#5-4-2-結合テスト" class="headerlink" title="5-4-2 結合テスト"></a>5-4-2 結合テスト</h3><h3 id="5-4-3-ルーティング、メーラー、ジョブのテスト"><a href="#5-4-3-ルーティング、メーラー、ジョブのテスト" class="headerlink" title="5-4-3 ルーティング、メーラー、ジョブのテスト"></a>5-4-3 ルーティング、メーラー、ジョブのテスト</h3><h3 id="5-4-4-あまり利用しないテスト"><a href="#5-4-4-あまり利用しないテスト" class="headerlink" title="5-4-4 あまり利用しないテスト"></a>5-4-4 あまり利用しないテスト</h3><h2 id="Column-System-Specとは？"><a href="#Column-System-Specとは？" class="headerlink" title="Column System Specとは？"></a>Column System Specとは？</h2><h2 id="5-5-System-Specを書くための準備"><a href="#5-5-System-Specを書くための準備" class="headerlink" title="5-5 System Specを書くための準備"></a>5-5 System Specを書くための準備</h2><h3 id="5-5-1-RSpecのインストールと初期準備"><a href="#5-5-1-RSpecのインストールと初期準備" class="headerlink" title="5-5-1 RSpecのインストールと初期準備"></a>5-5-1 RSpecのインストールと初期準備</h3><h3 id="5-5-2-Capybaraの初期準備"><a href="#5-5-2-Capybaraの初期準備" class="headerlink" title="5-5-2 Capybaraの初期準備"></a>5-5-2 Capybaraの初期準備</h3><h3 id="5-5-3-FactoryBotのインストール"><a href="#5-5-3-FactoryBotのインストール" class="headerlink" title="5-5-3 FactoryBotのインストール"></a>5-5-3 FactoryBotのインストール</h3><h2 id="5-6-RSpecの基本形"><a href="#5-6-RSpecの基本形" class="headerlink" title="5-6 RSpecの基本形"></a>5-6 RSpecの基本形</h2><h2 id="5-7-FactoryBotでテストデータを作成できるように準備する"><a href="#5-7-FactoryBotでテストデータを作成できるように準備する" class="headerlink" title="5-7 FactoryBotでテストデータを作成できるように準備する"></a>5-7 FactoryBotでテストデータを作成できるように準備する</h2><h2 id="5-8-タスクの一覧表示機能のSystem-Spec"><a href="#5-8-タスクの一覧表示機能のSystem-Spec" class="headerlink" title="5-8 タスクの一覧表示機能のSystem Spec"></a>5-8 タスクの一覧表示機能のSystem Spec</h2><h3 id="5-8-1-ユーザーAを作成しておく"><a href="#5-8-1-ユーザーAを作成しておく" class="headerlink" title="5-8-1 ユーザーAを作成しておく"></a>5-8-1 ユーザーAを作成しておく</h3><h3 id="5-8-2-作成者がユーザーAであるタスクを作成しておく"><a href="#5-8-2-作成者がユーザーAであるタスクを作成しておく" class="headerlink" title="5-8-2 作成者がユーザーAであるタスクを作成しておく"></a>5-8-2 作成者がユーザーAであるタスクを作成しておく</h3><h3 id="5-8-3-ユーザーAでログインする"><a href="#5-8-3-ユーザーAでログインする" class="headerlink" title="5-8-3 ユーザーAでログインする"></a>5-8-3 ユーザーAでログインする</h3><h3 id="5-8-4-作成済みのタスクの名称が画面上に表示されていることを確認"><a href="#5-8-4-作成済みのタスクの名称が画面上に表示されていることを確認" class="headerlink" title="5-8-4 作成済みのタスクの名称が画面上に表示されていることを確認"></a>5-8-4 作成済みのタスクの名称が画面上に表示されていることを確認</h3><h2 id="5-9-他のユーザーが作成したタスクが表示されないことの確認"><a href="#5-9-他のユーザーが作成したタスクが表示されないことの確認" class="headerlink" title="5-9 他のユーザーが作成したタスクが表示されないことの確認"></a>5-9 他のユーザーが作成したタスクが表示されないことの確認</h2><h3 id="5-10-beforeを利用した共通化"><a href="#5-10-beforeを利用した共通化" class="headerlink" title="5-10 beforeを利用した共通化"></a>5-10 beforeを利用した共通化</h3><h3 id="5-11-letを利用した共通化"><a href="#5-11-letを利用した共通化" class="headerlink" title="5-11 letを利用した共通化"></a>5-11 letを利用した共通化</h3><h2 id="Column-letとlet"><a href="#Column-letとlet" class="headerlink" title="Column letとlet!"></a>Column letとlet!</h2><h3 id="5-12-詳細表示機能のSpecを追加する"><a href="#5-12-詳細表示機能のSpecを追加する" class="headerlink" title="5-12 詳細表示機能のSpecを追加する"></a>5-12 詳細表示機能のSpecを追加する</h3><h3 id="5-13-shared-examplesを利用する"><a href="#5-13-shared-examplesを利用する" class="headerlink" title="5-13 shared_examplesを利用する"></a>5-13 shared_examplesを利用する</h3><h3 id="5-14-新規作成機能のSystem-Spec"><a href="#5-14-新規作成機能のSystem-Spec" class="headerlink" title="5-14 新規作成機能のSystem Spec"></a>5-14 新規作成機能のSystem Spec</h3><h3 id="5-15-letの上書き"><a href="#5-15-letの上書き" class="headerlink" title="5-15 letの上書き"></a>5-15 letの上書き</h3><h3 id="5-16-Specが失敗したときの調査方法"><a href="#5-16-Specが失敗したときの調査方法" class="headerlink" title="5-16 Specが失敗したときの調査方法"></a>5-16 Specが失敗したときの調査方法</h3><h3 id="5-16-1-Specが失敗するとき"><a href="#5-16-1-Specが失敗するとき" class="headerlink" title="5-16-1 Specが失敗するとき"></a>5-16-1 Specが失敗するとき</h3><h3 id="5-16-2-Specが失敗したときに確認すべき情報"><a href="#5-16-2-Specが失敗したときに確認すべき情報" class="headerlink" title="5-16-2 Specが失敗したときに確認すべき情報"></a>5-16-2 Specが失敗したときに確認すべき情報</h3><h3 id="5-16-3-失敗場所とエラーメッセージを手がかりに原因を探す"><a href="#5-16-3-失敗場所とエラーメッセージを手がかりに原因を探す" class="headerlink" title="5-16-3 失敗場所とエラーメッセージを手がかりに原因を探す"></a>5-16-3 失敗場所とエラーメッセージを手がかりに原因を探す</h3><h3 id="5-16-4-コンソールを使って調査する"><a href="#5-16-4-コンソールを使って調査する" class="headerlink" title="5-16-4 コンソールを使って調査する"></a>5-16-4 コンソールを使って調査する</h3><h3 id="5-16-5-スクリーンショットを活用する"><a href="#5-16-5-スクリーンショットを活用する" class="headerlink" title="5-16-5 スクリーンショットを活用する"></a>5-16-5 スクリーンショットを活用する</h3><h2 id="Chapter6-Railsの全体像を理解する"><a href="#Chapter6-Railsの全体像を理解する" class="headerlink" title="Chapter6 Railsの全体像を理解する"></a>Chapter6 Railsの全体像を理解する</h2><h2 id="6-1-Railsを取り巻く世界"><a href="#6-1-Railsを取り巻く世界" class="headerlink" title="6-1 Railsを取り巻く世界"></a>6-1 Railsを取り巻く世界</h2><h2 id="6-2-ルーティング"><a href="#6-2-ルーティング" class="headerlink" title="6-2 ルーティング"></a>6-2 ルーティング</h2><h3 id="6-2-1-「-ルート」を構成する5つの要素"><a href="#6-2-1-「-ルート」を構成する5つの要素" class="headerlink" title="6-2-1 「 ルート」を構成する5つの要素"></a>6-2-1 「 ルート」を構成する5つの要素</h3><h3 id="6-2-2-1つのルートを定義する"><a href="#6-2-2-1つのルートを定義する" class="headerlink" title="6-2-2 1つのルートを定義する"></a>6-2-2 1つのルートを定義する</h3><h2 id="Column-URLヘルパーメソッドは使わなくてはダメ？"><a href="#Column-URLヘルパーメソッドは使わなくてはダメ？" class="headerlink" title="Column URLヘルパーメソッドは使わなくてはダメ？"></a>Column URLヘルパーメソッドは使わなくてはダメ？</h2><h3 id="6-2-3-「-RESTful」の概要をつかんでおこう"><a href="#6-2-3-「-RESTful」の概要をつかんでおこう" class="headerlink" title="6-2-3 「 RESTful」の概要をつかんでおこう"></a>6-2-3 「 RESTful」の概要をつかんでおこう</h3><h3 id="6-2-4-RESTfulにするための-Railsの流儀"><a href="#6-2-4-RESTfulにするための-Railsの流儀" class="headerlink" title="6-2-4 RESTfulにするための Railsの流儀"></a>6-2-4 RESTfulにするための Railsの流儀</h3><h2 id="Column-RESTfulはどの程度追求すべき？"><a href="#Column-RESTfulはどの程度追求すべき？" class="headerlink" title="Column RESTfulはどの程度追求すべき？"></a>Column RESTfulはどの程度追求すべき？</h2><h3 id="6-2-5-resourcesでCRUDのルート一式を定義する"><a href="#6-2-5-resourcesでCRUDのルート一式を定義する" class="headerlink" title="6-2-5 resourcesでCRUDのルート一式を定義する"></a>6-2-5 resourcesでCRUDのルート一式を定義する</h3><h3 id="6-2-6-routes-rbの構造化"><a href="#6-2-6-routes-rbの構造化" class="headerlink" title="6-2-6 routes.rbの構造化"></a>6-2-6 routes.rbの構造化</h3><h2 id="Column-routes-rbの整理のコツ"><a href="#Column-routes-rbの整理のコツ" class="headerlink" title="Column routes.rbの整理のコツ"></a>Column routes.rbの整理のコツ</h2><h2 id="6-3-国際化"><a href="#6-3-国際化" class="headerlink" title="6-3 国際化"></a>6-3 国際化</h2><h3 id="6-3-1-ユーザーごとに言語を切り替える"><a href="#6-3-1-ユーザーごとに言語を切り替える" class="headerlink" title="6-3-1 ユーザーごとに言語を切り替える"></a>6-3-1 ユーザーごとに言語を切り替える</h3><h3 id="6-3-2-翻訳ファイルの扱い方"><a href="#6-3-2-翻訳ファイルの扱い方" class="headerlink" title="6-3-2 翻訳ファイルの扱い方"></a>6-3-2 翻訳ファイルの扱い方</h3><h2 id="6-4-日時の扱い方"><a href="#6-4-日時の扱い方" class="headerlink" title="6-4 日時の扱い方"></a>6-4 日時の扱い方</h2><h3 id="6-4-1-日時の扱い方に関する設定"><a href="#6-4-1-日時の扱い方に関する設定" class="headerlink" title="6-4-1 日時の扱い方に関する設定"></a>6-4-1 日時の扱い方に関する設定</h3><h3 id="6-4-2-taskleafアプリケーションのデフォルトのタイムゾーンを日本時間にする"><a href="#6-4-2-taskleafアプリケーションのデフォルトのタイムゾーンを日本時間にする" class="headerlink" title="6-4-2 taskleafアプリケーションのデフォルトのタイムゾーンを日本時間にする"></a>6-4-2 taskleafアプリケーションのデフォルトのタイムゾーンを日本時間にする</h3><h3 id="6-4-3-Time-currentやDate-currentを利用する"><a href="#6-4-3-Time-currentやDate-currentを利用する" class="headerlink" title="6-4-3 Time.currentやDate.currentを利用する"></a>6-4-3 Time.currentやDate.currentを利用する</h3><h2 id="6-5-エラー処理のカスタマイズ"><a href="#6-5-エラー処理のカスタマイズ" class="headerlink" title="6-5 エラー処理のカスタマイズ"></a>6-5 エラー処理のカスタマイズ</h2><h3 id="6-5-1-Railsのエラー処理の概要"><a href="#6-5-1-Railsのエラー処理の概要" class="headerlink" title="6-5-1 Railsのエラー処理の概要"></a>6-5-1 Railsのエラー処理の概要</h3><h3 id="6-5-2-デバッグ用-x2F-本番用のエラー画面の切り分け"><a href="#6-5-2-デバッグ用-x2F-本番用のエラー画面の切り分け" class="headerlink" title="6-5-2 デバッグ用&#x2F;本番用のエラー画面の切り分け"></a>6-5-2 デバッグ用&#x2F;本番用のエラー画面の切り分け</h3><h3 id="6-5-3-Railsの本番用エラー画面のカスタマイズ"><a href="#6-5-3-Railsの本番用エラー画面のカスタマイズ" class="headerlink" title="6-5-3 Railsの本番用エラー画面のカスタマイズ"></a>6-5-3 Railsの本番用エラー画面のカスタマイズ</h3><h3 id="6-5-4-アプリケーション固有のエラー処理の追加"><a href="#6-5-4-アプリケーション固有のエラー処理の追加" class="headerlink" title="6-5-4 アプリケーション固有のエラー処理の追加"></a>6-5-4 アプリケーション固有のエラー処理の追加</h3><h2 id="6-6-Railsのログ"><a href="#6-6-Railsのログ" class="headerlink" title="6-6 Railsのログ"></a>6-6 Railsのログ</h2><h3 id="6-6-1-ログの利用方法"><a href="#6-6-1-ログの利用方法" class="headerlink" title="6-6-1 ログの利用方法"></a>6-6-1 ログの利用方法</h3><h3 id="6-6-2-ログ（ロガー）の設定"><a href="#6-6-2-ログ（ロガー）の設定" class="headerlink" title="6-6-2 ログ（ロガー）の設定"></a>6-6-2 ログ（ロガー）の設定</h3><h2 id="6-7-セキュリティを強化する"><a href="#6-7-セキュリティを強化する" class="headerlink" title="6-7 セキュリティを強化する"></a>6-7 セキュリティを強化する</h2><h3 id="6-7-1-意図しないパラメータを弾く「Strong-Parameters」"><a href="#6-7-1-意図しないパラメータを弾く「Strong-Parameters」" class="headerlink" title="6-7-1 意図しないパラメータを弾く「Strong Parameters」"></a>6-7-1 意図しないパラメータを弾く「Strong Parameters」</h3><h3 id="6-7-2-CSRF対策を利用する"><a href="#6-7-2-CSRF対策を利用する" class="headerlink" title="6-7-2 CSRF対策を利用する"></a>6-7-2 CSRF対策を利用する</h3><h3 id="6-7-3-インジェクションに注意する"><a href="#6-7-3-インジェクションに注意する" class="headerlink" title="6-7-3 インジェクションに注意する"></a>6-7-3 インジェクションに注意する</h3><h3 id="6-7-4-Content-Security-Policy（CSP）を設定する"><a href="#6-7-4-Content-Security-Policy（CSP）を設定する" class="headerlink" title="6-7-4 Content Security Policy（CSP）を設定する"></a>6-7-4 Content Security Policy（CSP）を設定する</h3><h2 id="6-8-アセットパイプライン"><a href="#6-8-アセットパイプライン" class="headerlink" title="6-8 アセットパイプライン"></a>6-8 アセットパイプライン</h2><h3 id="6-8-1-環境による挙動の違い"><a href="#6-8-1-環境による挙動の違い" class="headerlink" title="6-8-1 環境による挙動の違い"></a>6-8-1 環境による挙動の違い</h3><h3 id="6-8-2-ブラウザにアセットを読み込ませる"><a href="#6-8-2-ブラウザにアセットを読み込ませる" class="headerlink" title="6-8-2 ブラウザにアセットを読み込ませる"></a>6-8-2 ブラウザにアセットを読み込ませる</h3><h3 id="6-8-3-連結結果のファイルをどうやって生成するか"><a href="#6-8-3-連結結果のファイルをどうやって生成するか" class="headerlink" title="6-8-3 連結結果のファイルをどうやって生成するか"></a>6-8-3 連結結果のファイルをどうやって生成するか</h3><h3 id="6-8-4-マニフェストファイルを記述する"><a href="#6-8-4-マニフェストファイルを記述する" class="headerlink" title="6-8-4 マニフェストファイルを記述する"></a>6-8-4 マニフェストファイルを記述する</h3><h3 id="6-8-5-アセットの探索パス"><a href="#6-8-5-アセットの探索パス" class="headerlink" title="6-8-5 アセットの探索パス"></a>6-8-5 アセットの探索パス</h3><h3 id="6-8-6-アセット関連の設定"><a href="#6-8-6-アセット関連の設定" class="headerlink" title="6-8-6 アセット関連の設定"></a>6-8-6 アセット関連の設定</h3><h2 id="6-9-production環境でアプリケーションを立ち上げる"><a href="#6-9-production環境でアプリケーションを立ち上げる" class="headerlink" title="6-9 production環境でアプリケーションを立ち上げる"></a>6-9 production環境でアプリケーションを立ち上げる</h2><h3 id="6-9-1-アセットのプリコンパイル"><a href="#6-9-1-アセットのプリコンパイル" class="headerlink" title="6-9-1 アセットのプリコンパイル"></a>6-9-1 アセットのプリコンパイル</h3><h3 id="6-9-2-静的ファイルの配信サーバを設定する"><a href="#6-9-2-静的ファイルの配信サーバを設定する" class="headerlink" title="6-9-2 静的ファイルの配信サーバを設定する"></a>6-9-2 静的ファイルの配信サーバを設定する</h3><h3 id="6-9-3-production環境用のデータベースを作成する"><a href="#6-9-3-production環境用のデータベースを作成する" class="headerlink" title="6-9-3 production環境用のデータベースを作成する"></a>6-9-3 production環境用のデータベースを作成する</h3><h3 id="6-9-4-config-x2F-master-key-が存在することを確認する"><a href="#6-9-4-config-x2F-master-key-が存在することを確認する" class="headerlink" title="6-9-4 config&#x2F;master.key が存在することを確認する"></a>6-9-4 config&#x2F;master.key が存在することを確認する</h3><h3 id="6-9-5-productionモードでサーバを起動する"><a href="#6-9-5-productionモードでサーバを起動する" class="headerlink" title="6-9-5 productionモードでサーバを起動する"></a>6-9-5 productionモードでサーバを起動する</h3><h3 id="6-9-6-production環境用の秘密情報の管理"><a href="#6-9-6-production環境用の秘密情報の管理" class="headerlink" title="6-9-6 production環境用の秘密情報の管理"></a>6-9-6 production環境用の秘密情報の管理</h3><h3 id="6-9-7-秘密情報の暗号化・復号"><a href="#6-9-7-秘密情報の暗号化・復号" class="headerlink" title="6-9-7 秘密情報の暗号化・復号"></a>6-9-7 秘密情報の暗号化・復号</h3><h2 id="Column-secret-key-base"><a href="#Column-secret-key-base" class="headerlink" title="Column secret_key_base"></a>Column secret_key_base</h2><h2 id="Column-カスタム暗号化ファイル（Encrypted）"><a href="#Column-カスタム暗号化ファイル（Encrypted）" class="headerlink" title="Column カスタム暗号化ファイル（Encrypted）"></a>Column カスタム暗号化ファイル（Encrypted）</h2><h2 id="Chapter7-機能を追加してみよう"><a href="#Chapter7-機能を追加してみよう" class="headerlink" title="Chapter7 機能を追加してみよう"></a>Chapter7 機能を追加してみよう</h2><h2 id="7-1-登録や編集の実行前に確認画面をはさむ"><a href="#7-1-登録や編集の実行前に確認画面をはさむ" class="headerlink" title="7-1 登録や編集の実行前に確認画面をはさむ"></a>7-1 登録や編集の実行前に確認画面をはさむ</h2><h3 id="7-1-1-確認画面を表示するアクションを追加する"><a href="#7-1-1-確認画面を表示するアクションを追加する" class="headerlink" title="7-1-1 確認画面を表示するアクションを追加する"></a>7-1-1 確認画面を表示するアクションを追加する</h3><h3 id="7-1-2-新規登録画面からの遷移先を変える"><a href="#7-1-2-新規登録画面からの遷移先を変える" class="headerlink" title="7-1-2 新規登録画面からの遷移先を変える"></a>7-1-2 新規登録画面からの遷移先を変える</h3><h3 id="7-1-3-登録アクションで「戻る」ボタンからの遷移に対応する"><a href="#7-1-3-登録アクションで「戻る」ボタンからの遷移に対応する" class="headerlink" title="7-1-3 登録アクションで「戻る」ボタンからの遷移に対応する"></a>7-1-3 登録アクションで「戻る」ボタンからの遷移に対応する</h3><h2 id="Column-確認画面があるほうが良いとは限らない"><a href="#Column-確認画面があるほうが良いとは限らない" class="headerlink" title="Column 確認画面があるほうが良いとは限らない"></a>Column 確認画面があるほうが良いとは限らない</h2><h2 id="7-2-一覧画面に検索機能を追加する"><a href="#7-2-一覧画面に検索機能を追加する" class="headerlink" title="7-2 一覧画面に検索機能を追加する"></a>7-2 一覧画面に検索機能を追加する</h2><h3 id="7-2-1-Ransackのインストール"><a href="#7-2-1-Ransackのインストール" class="headerlink" title="7-2-1 Ransackのインストール"></a>7-2-1 Ransackのインストール</h3><h3 id="7-2-2-名称による検索"><a href="#7-2-2-名称による検索" class="headerlink" title="7-2-2 名称による検索"></a>7-2-2 名称による検索</h3><h3 id="7-2-3-検索時のSQLの確認と検索マッチャー"><a href="#7-2-3-検索時のSQLの確認と検索マッチャー" class="headerlink" title="7-2-3 検索時のSQLの確認と検索マッチャー"></a>7-2-3 検索時のSQLの確認と検索マッチャー</h3><h3 id="7-2-4-登録日時による検索"><a href="#7-2-4-登録日時による検索" class="headerlink" title="7-2-4 登録日時による検索"></a>7-2-4 登録日時による検索</h3><h3 id="7-2-5-検索条件を絞る"><a href="#7-2-5-検索条件を絞る" class="headerlink" title="7-2-5 検索条件を絞る"></a>7-2-5 検索条件を絞る</h3><h2 id="7-3-一覧画面にソート機能を追加する"><a href="#7-3-一覧画面にソート機能を追加する" class="headerlink" title="7-3 一覧画面にソート機能を追加する"></a>7-3 一覧画面にソート機能を追加する</h2><h2 id="7-4-メールを送る"><a href="#7-4-メールを送る" class="headerlink" title="7-4 メールを送る"></a>7-4 メールを送る</h2><h3 id="7-4-1-メイラーの実装"><a href="#7-4-1-メイラーの実装" class="headerlink" title="7-4-1 メイラーの実装"></a>7-4-1 メイラーの実装</h3><h3 id="7-4-2-テンプレートの実装"><a href="#7-4-2-テンプレートの実装" class="headerlink" title="7-4-2 テンプレートの実装"></a>7-4-2 テンプレートの実装</h3><h3 id="7-4-3-メール送信処理"><a href="#7-4-3-メール送信処理" class="headerlink" title="7-4-3 メール送信処理"></a>7-4-3 メール送信処理</h3><h3 id="7-4-4-動作確認"><a href="#7-4-4-動作確認" class="headerlink" title="7-4-4 動作確認"></a>7-4-4 動作確認</h3><h3 id="7-4-5-メイラーのテスト"><a href="#7-4-5-メイラーのテスト" class="headerlink" title="7-4-5 メイラーのテスト"></a>7-4-5 メイラーのテスト</h3><h2 id="7-5-ファイルをアップロードしてモデルに添付する"><a href="#7-5-ファイルをアップロードしてモデルに添付する" class="headerlink" title="7-5 ファイルをアップロードしてモデルに添付する"></a>7-5 ファイルをアップロードしてモデルに添付する</h2><h3 id="7-5-1-タスクに画像ファイルを添付する"><a href="#7-5-1-タスクに画像ファイルを添付する" class="headerlink" title="7-5-1 タスクに画像ファイルを添付する"></a>7-5-1 タスクに画像ファイルを添付する</h3><h3 id="7-5-2-Active-Storage"><a href="#7-5-2-Active-Storage" class="headerlink" title="7-5-2 Active Storage"></a>7-5-2 Active Storage</h3><h3 id="7-5-3-Active-Storageの準備"><a href="#7-5-3-Active-Storageの準備" class="headerlink" title="7-5-3 Active Storageの準備"></a>7-5-3 Active Storageの準備</h3><h3 id="7-5-4-タスクモデルに画像を添付できるようにする"><a href="#7-5-4-タスクモデルに画像を添付できるようにする" class="headerlink" title="7-5-4 タスクモデルに画像を添付できるようにする"></a>7-5-4 タスクモデルに画像を添付できるようにする</h3><h2 id="7-6-CSV形式のファイルのインポート-x2F-エクスポート"><a href="#7-6-CSV形式のファイルのインポート-x2F-エクスポート" class="headerlink" title="7-6 CSV形式のファイルのインポート&#x2F;エクスポート"></a>7-6 CSV形式のファイルのインポート&#x2F;エクスポート</h2><h3 id="7-6-1-タスクをCSV出力（エクスポート）する"><a href="#7-6-1-タスクをCSV出力（エクスポート）する" class="headerlink" title="7-6-1 タスクをCSV出力（エクスポート）する"></a>7-6-1 タスクをCSV出力（エクスポート）する</h3><h3 id="7-6-2-CSVデータを入力（インポート）する"><a href="#7-6-2-CSVデータを入力（インポート）する" class="headerlink" title="7-6-2 CSVデータを入力（インポート）する"></a>7-6-2 CSVデータを入力（インポート）する</h3><h2 id="7-7-ページネーション"><a href="#7-7-ページネーション" class="headerlink" title="7-7 ページネーション"></a>7-7 ページネーション</h2><h3 id="7-7-1-kaminariのインストール"><a href="#7-7-1-kaminariのインストール" class="headerlink" title="7-7-1 kaminariのインストール"></a>7-7-1 kaminariのインストール</h3><h3 id="7-7-2-ページ番号に対応する範囲のデータを検索するようにする"><a href="#7-7-2-ページ番号に対応する範囲のデータを検索するようにする" class="headerlink" title="7-7-2 ページ番号に対応する範囲のデータを検索するようにする"></a>7-7-2 ページ番号に対応する範囲のデータを検索するようにする</h3><h3 id="7-7-3-ビューにページネーションのための情報を表示する"><a href="#7-7-3-ビューにページネーションのための情報を表示する" class="headerlink" title="7-7-3 ビューにページネーションのための情報を表示する"></a>7-7-3 ビューにページネーションのための情報を表示する</h3><h3 id="7-7-4-動作確認"><a href="#7-7-4-動作確認" class="headerlink" title="7-7-4 動作確認"></a>7-7-4 動作確認</h3><h3 id="7-7-5-デザインの調整"><a href="#7-7-5-デザインの調整" class="headerlink" title="7-7-5 デザインの調整"></a>7-7-5 デザインの調整</h3><h3 id="7-7-6-表示件数を変更したいとき"><a href="#7-7-6-表示件数を変更したいとき" class="headerlink" title="7-7-6 表示件数を変更したいとき"></a>7-7-6 表示件数を変更したいとき</h3><h2 id="7-8-非同期処理や定期実行を行う（Jobスケジューリング）"><a href="#7-8-非同期処理や定期実行を行う（Jobスケジューリング）" class="headerlink" title="7-8 非同期処理や定期実行を行う（Jobスケジューリング）"></a>7-8 非同期処理や定期実行を行う（Jobスケジューリング）</h2><h3 id="7-8-1-非同期処理ツールの導入"><a href="#7-8-1-非同期処理ツールの導入" class="headerlink" title="7-8-1 非同期処理ツールの導入"></a>7-8-1 非同期処理ツールの導入</h3><h3 id="7-8-2-ジョブの作成、実行"><a href="#7-8-2-ジョブの作成、実行" class="headerlink" title="7-8-2 ジョブの作成、実行"></a>7-8-2 ジョブの作成、実行</h3><h3 id="7-8-3-実行日時指定"><a href="#7-8-3-実行日時指定" class="headerlink" title="7-8-3 実行日時指定"></a>7-8-3 実行日時指定</h3><h3 id="7-8-4-７章の終わりに"><a href="#7-8-4-７章の終わりに" class="headerlink" title="7-8-4 ７章の終わりに"></a>7-8-4 ７章の終わりに</h3><h2 id="＜発展編＞"><a href="#＜発展編＞" class="headerlink" title="＜発展編＞"></a>＜発展編＞</h2><h2 id="Chapter8-RailsとJavaScript"><a href="#Chapter8-RailsとJavaScript" class="headerlink" title="Chapter8 RailsとJavaScript"></a>Chapter8 RailsとJavaScript</h2><h2 id="8-1-JavaScriptでページに変化をつける"><a href="#8-1-JavaScriptでページに変化をつける" class="headerlink" title="8-1 JavaScriptでページに変化をつける"></a>8-1 JavaScriptでページに変化をつける</h2><h2 id="8-2-AjaxでRailsサーバと通信する"><a href="#8-2-AjaxでRailsサーバと通信する" class="headerlink" title="8-2 AjaxでRailsサーバと通信する"></a>8-2 AjaxでRailsサーバと通信する</h2><h3 id="8-2-1-Ajaxでタスクを削除する"><a href="#8-2-1-Ajaxでタスクを削除する" class="headerlink" title="8-2-1 Ajaxでタスクを削除する"></a>8-2-1 Ajaxでタスクを削除する</h3><h3 id="8-2-2-rails-ujsの果たしている役割"><a href="#8-2-2-rails-ujsの果たしている役割" class="headerlink" title="8-2-2 rails-ujsの果たしている役割"></a>8-2-2 rails-ujsの果たしている役割</h3><h3 id="8-2-3-コントローラからJavaScriptを返して実行する（SJR）"><a href="#8-2-3-コントローラからJavaScriptを返して実行する（SJR）" class="headerlink" title="8-2-3 コントローラからJavaScriptを返して実行する（SJR）"></a>8-2-3 コントローラからJavaScriptを返して実行する（SJR）</h3><h2 id="Column-CoffeeScriptは使わないことも検討する"><a href="#Column-CoffeeScriptは使わないことも検討する" class="headerlink" title="Column CoffeeScriptは使わないことも検討する"></a>Column CoffeeScriptは使わないことも検討する</h2><h2 id="Column-jQuery"><a href="#Column-jQuery" class="headerlink" title="Column jQuery"></a>Column jQuery</h2><h2 id="8-3-Turbolinks"><a href="#8-3-Turbolinks" class="headerlink" title="8-3 Turbolinks"></a>8-3 Turbolinks</h2><h3 id="8-3-1-Turbolinksの発行するイベント"><a href="#8-3-1-Turbolinksの発行するイベント" class="headerlink" title="8-3-1 Turbolinksの発行するイベント"></a>8-3-1 Turbolinksの発行するイベント</h3><h3 id="8-3-3-Turbolinksが有効な環境での注意点"><a href="#8-3-3-Turbolinksが有効な環境での注意点" class="headerlink" title="8-3-3 Turbolinksが有効な環境での注意点"></a>8-3-3 Turbolinksが有効な環境での注意点</h3><h3 id="8-3-4-Turbolinksを無効化するには"><a href="#8-3-4-Turbolinksを無効化するには" class="headerlink" title="8-3-4 Turbolinksを無効化するには"></a>8-3-4 Turbolinksを無効化するには</h3><h2 id="8-4-モダンなJavaScript管理を行う"><a href="#8-4-モダンなJavaScript管理を行う" class="headerlink" title="8-4 モダンなJavaScript管理を行う"></a>8-4 モダンなJavaScript管理を行う</h2><h3 id="8-4-1-Yarn"><a href="#8-4-1-Yarn" class="headerlink" title="8-4-1 Yarn"></a>8-4-1 Yarn</h3><h3 id="8-4-2-Webpacker"><a href="#8-4-2-Webpacker" class="headerlink" title="8-4-2 Webpacker"></a>8-4-2 Webpacker</h3><h2 id="8-5-taskleafにReactを導入してみる"><a href="#8-5-taskleafにReactを導入してみる" class="headerlink" title="8-5 taskleafにReactを導入してみる"></a>8-5 taskleafにReactを導入してみる</h2><h2 id="Column-Webpackerのメリット・デメリット"><a href="#Column-Webpackerのメリット・デメリット" class="headerlink" title="Column Webpackerのメリット・デメリット"></a>Column Webpackerのメリット・デメリット</h2><h2 id="Chapter9-複数人でRailsアプリケーションを開発する"><a href="#Chapter9-複数人でRailsアプリケーションを開発する" class="headerlink" title="Chapter9 複数人でRailsアプリケーションを開発する"></a>Chapter9 複数人でRailsアプリケーションを開発する</h2><h2 id="9-1-チーム開発の風景（導入編）"><a href="#9-1-チーム開発の風景（導入編）" class="headerlink" title="9-1 チーム開発の風景（導入編）"></a>9-1 チーム開発の風景（導入編）</h2><h3 id="9-1-1-ソースコードの変更を管理する"><a href="#9-1-1-ソースコードの変更を管理する" class="headerlink" title="9-1-1 ソースコードの変更を管理する"></a>9-1-1 ソースコードの変更を管理する</h3><h3 id="9-1-2-GitHubなどの開発プラットフォームを使う"><a href="#9-1-2-GitHubなどの開発プラットフォームを使う" class="headerlink" title="9-1-2 GitHubなどの開発プラットフォームを使う"></a>9-1-2 GitHubなどの開発プラットフォームを使う</h3><h3 id="9-1-3-GitHubを使うには？"><a href="#9-1-3-GitHubを使うには？" class="headerlink" title="9-1-3 GitHubを使うには？"></a>9-1-3 GitHubを使うには？</h3><h3 id="9-1-4-Pull-Requestベースの開発"><a href="#9-1-4-Pull-Requestベースの開発" class="headerlink" title="9-1-4 Pull Requestベースの開発"></a>9-1-4 Pull Requestベースの開発</h3><h3 id="9-1-5-Gitに入れるファイル、入れないファイル"><a href="#9-1-5-Gitに入れるファイル、入れないファイル" class="headerlink" title="9-1-5 Gitに入れるファイル、入れないファイル"></a>9-1-5 Gitに入れるファイル、入れないファイル</h3><h2 id="Column-database-ymlとセキュリティ"><a href="#Column-database-ymlとセキュリティ" class="headerlink" title="Column database.ymlとセキュリティ"></a>Column database.ymlとセキュリティ</h2><h3 id="9-1-6-Pull-Requestの変更差分を最新状態との比較にする"><a href="#9-1-6-Pull-Requestの変更差分を最新状態との比較にする" class="headerlink" title="9-1-6 Pull Requestの変更差分を最新状態との比較にする"></a>9-1-6 Pull Requestの変更差分を最新状態との比較にする</h3><h3 id="9-1-7-Gitのpush-fに気をつける"><a href="#9-1-7-Gitのpush-fに気をつける" class="headerlink" title="9-1-7 Gitのpush -fに気をつける"></a>9-1-7 Gitのpush -fに気をつける</h3><h3 id="9-1-8-GitHubとチャットツールを連携させる"><a href="#9-1-8-GitHubとチャットツールを連携させる" class="headerlink" title="9-1-8 GitHubとチャットツールを連携させる"></a>9-1-8 GitHubとチャットツールを連携させる</h3><h2 id="9-2-チーム開発の風景（コードレビュー編）"><a href="#9-2-チーム開発の風景（コードレビュー編）" class="headerlink" title="9-2 チーム開発の風景（コードレビュー編）"></a>9-2 チーム開発の風景（コードレビュー編）</h2><h3 id="9-2-1-コードレビューではどんな点を見て、何をコメントする？"><a href="#9-2-1-コードレビューではどんな点を見て、何をコメントする？" class="headerlink" title="9-2-1 コードレビューではどんな点を見て、何をコメントする？"></a>9-2-1 コードレビューではどんな点を見て、何をコメントする？</h3><h3 id="9-2-2-コーディング規約"><a href="#9-2-2-コーディング規約" class="headerlink" title="9-2-2 コーディング規約"></a>9-2-2 コーディング規約</h3><h2 id="Column-コーディング規約との付き合い方"><a href="#Column-コーディング規約との付き合い方" class="headerlink" title="Column コーディング規約との付き合い方"></a>Column コーディング規約との付き合い方</h2><h3 id="9-2-3-Lintツールの活用"><a href="#9-2-3-Lintツールの活用" class="headerlink" title="9-2-3 Lintツールの活用"></a>9-2-3 Lintツールの活用</h3><h2 id="Column-コードレビューは素晴らしい、だが万能ではない"><a href="#Column-コードレビューは素晴らしい、だが万能ではない" class="headerlink" title="Column コードレビューは素晴らしい、だが万能ではない"></a>Column コードレビューは素晴らしい、だが万能ではない</h2><h3 id="9-2-4-CIツールとGitHubを連動させる"><a href="#9-2-4-CIツールとGitHubを連動させる" class="headerlink" title="9-2-4 CIツールとGitHubを連動させる"></a>9-2-4 CIツールとGitHubを連動させる</h3><h2 id="9-3-チーム開発の風景（分担編）"><a href="#9-3-チーム開発の風景（分担編）" class="headerlink" title="9-3 チーム開発の風景（分担編）"></a>9-3 チーム開発の風景（分担編）</h2><h3 id="9-3-1-チームで開発するときの分担の仕方"><a href="#9-3-1-チームで開発するときの分担の仕方" class="headerlink" title="9-3-1 チームで開発するときの分担の仕方"></a>9-3-1 チームで開発するときの分担の仕方</h3><h2 id="9-4-開発環境の構築方法をわかりやすくしておく"><a href="#9-4-開発環境の構築方法をわかりやすくしておく" class="headerlink" title="9-4 開発環境の構築方法をわかりやすくしておく"></a>9-4 開発環境の構築方法をわかりやすくしておく</h2><h3 id="9-4-1-誰でも簡単にセットアップできるようにする"><a href="#9-4-1-誰でも簡単にセットアップできるようにする" class="headerlink" title="9-4-1 誰でも簡単にセットアップできるようにする"></a>9-4-1 誰でも簡単にセットアップできるようにする</h3><h3 id="9-4-2-仮想化環境を利用する"><a href="#9-4-2-仮想化環境を利用する" class="headerlink" title="9-4-2 仮想化環境を利用する"></a>9-4-2 仮想化環境を利用する</h3><h3 id="9-4-3-初期データ・テスト用データの共有"><a href="#9-4-3-初期データ・テスト用データの共有" class="headerlink" title="9-4-3 初期データ・テスト用データの共有"></a>9-4-3 初期データ・テスト用データの共有</h3><h2 id="9-5-マイグレーションに注意する"><a href="#9-5-マイグレーションに注意する" class="headerlink" title="9-5 マイグレーションに注意する"></a>9-5 マイグレーションに注意する</h2><h3 id="9-5-1-ロールバックできることを確認しよう"><a href="#9-5-1-ロールバックできることを確認しよう" class="headerlink" title="9-5-1 ロールバックできることを確認しよう"></a>9-5-1 ロールバックできることを確認しよう</h3><h3 id="9-5-2-「redo」を習慣にしよう"><a href="#9-5-2-「redo」を習慣にしよう" class="headerlink" title="9-5-2 「redo」を習慣にしよう"></a>9-5-2 「redo」を習慣にしよう</h3><h3 id="9-5-3-完全なロールバックができないとき"><a href="#9-5-3-完全なロールバックができないとき" class="headerlink" title="9-5-3 完全なロールバックができないとき"></a>9-5-3 完全なロールバックができないとき</h3><h3 id="9-5-4-過去のマイグレーションファイルの変更には慎重になろう"><a href="#9-5-4-過去のマイグレーションファイルの変更には慎重になろう" class="headerlink" title="9-5-4 過去のマイグレーションファイルの変更には慎重になろう"></a>9-5-4 過去のマイグレーションファイルの変更には慎重になろう</h3><h2 id="Column-「きれいなマイグレーション」を追求しない"><a href="#Column-「きれいなマイグレーション」を追求しない" class="headerlink" title="Column 「きれいなマイグレーション」を追求しない"></a>Column 「きれいなマイグレーション」を追求しない</h2><h3 id="9-5-5-マイグレーションファイルが多くなってきたら"><a href="#9-5-5-マイグレーションファイルが多くなってきたら" class="headerlink" title="9-5-5 マイグレーションファイルが多くなってきたら"></a>9-5-5 マイグレーションファイルが多くなってきたら</h3><h3 id="9-5-6-直接DBを変更したら必ずマイグレーションファイルも追加しておこう"><a href="#9-5-6-直接DBを変更したら必ずマイグレーションファイルも追加しておこう" class="headerlink" title="9-5-6 直接DBを変更したら必ずマイグレーションファイルも追加しておこう"></a>9-5-6 直接DBを変更したら必ずマイグレーションファイルも追加しておこう</h3><h3 id="9-5-7-データメンテナンス"><a href="#9-5-7-データメンテナンス" class="headerlink" title="9-5-7 データメンテナンス"></a>9-5-7 データメンテナンス</h3><h2 id="Column-Rakeタスクでのデータメンテナンス"><a href="#Column-Rakeタスクでのデータメンテナンス" class="headerlink" title="Column Rakeタスクでのデータメンテナンス"></a>Column Rakeタスクでのデータメンテナンス</h2><h2 id="Chapter10-Railsアプリケーションと長く付き合うために"><a href="#Chapter10-Railsアプリケーションと長く付き合うために" class="headerlink" title="Chapter10 Railsアプリケーションと長く付き合うために"></a>Chapter10 Railsアプリケーションと長く付き合うために</h2><h3 id="10-1-バージョンアップにどう取り組むか"><a href="#10-1-バージョンアップにどう取り組むか" class="headerlink" title="10-1 バージョンアップにどう取り組むか"></a>10-1 バージョンアップにどう取り組むか</h3><h3 id="10-2-小さなバージョンアップ"><a href="#10-2-小さなバージョンアップ" class="headerlink" title="10-2 小さなバージョンアップ"></a>10-2 小さなバージョンアップ</h3><h3 id="10-2-1-bundle-updateとは"><a href="#10-2-1-bundle-updateとは" class="headerlink" title="10-2-1 bundle updateとは"></a>10-2-1 bundle updateとは</h3><h3 id="10-2-2-bundle-updateの際に行うべきこと"><a href="#10-2-2-bundle-updateの際に行うべきこと" class="headerlink" title="10-2-2 bundle updateの際に行うべきこと"></a>10-2-2 bundle updateの際に行うべきこと</h3><h3 id="10-3-bundle-update-はチーム全体で行う"><a href="#10-3-bundle-update-はチーム全体で行う" class="headerlink" title="10-3 bundle update はチーム全体で行う"></a>10-3 bundle update はチーム全体で行う</h3><h3 id="10-4-bundle-updateを自動化でサポートする"><a href="#10-4-bundle-updateを自動化でサポートする" class="headerlink" title="10-4 bundle updateを自動化でサポートする"></a>10-4 bundle updateを自動化でサポートする</h3><h3 id="10-5-大きなバージョンアップを行う際に気をつけること"><a href="#10-5-大きなバージョンアップを行う際に気をつけること" class="headerlink" title="10-5 大きなバージョンアップを行う際に気をつけること"></a>10-5 大きなバージョンアップを行う際に気をつけること</h3><h3 id="10-6-アプリケーションの複雑性に立ち向かう"><a href="#10-6-アプリケーションの複雑性に立ち向かう" class="headerlink" title="10-6 アプリケーションの複雑性に立ち向かう"></a>10-6 アプリケーションの複雑性に立ち向かう</h3><h3 id="10-7-第一の鍵─しかるべきところにコードを書く"><a href="#10-7-第一の鍵─しかるべきところにコードを書く" class="headerlink" title="10-7 第一の鍵─しかるべきところにコードを書く"></a>10-7 第一の鍵─しかるべきところにコードを書く</h3><h3 id="10-7-1-コントローラに入り込む複雑さ"><a href="#10-7-1-コントローラに入り込む複雑さ" class="headerlink" title="10-7-1 コントローラに入り込む複雑さ"></a>10-7-1 コントローラに入り込む複雑さ</h3><h3 id="10-7-2-モデルに書くべきコードをモデルに寄せる"><a href="#10-7-2-モデルに書くべきコードをモデルに寄せる" class="headerlink" title="10-7-2 モデルに書くべきコードをモデルに寄せる"></a>10-7-2 モデルに書くべきコードをモデルに寄せる</h3><h3 id="10-7-3-ビューに入り込んだビジネスロジックをモデルに寄せる"><a href="#10-7-3-ビューに入り込んだビジネスロジックをモデルに寄せる" class="headerlink" title="10-7-3 ビューに入り込んだビジネスロジックをモデルに寄せる"></a>10-7-3 ビューに入り込んだビジネスロジックをモデルに寄せる</h3><h3 id="10-7-4-Decoratorパターンでモデル固有の表示ロジックを分離する"><a href="#10-7-4-Decoratorパターンでモデル固有の表示ロジックを分離する" class="headerlink" title="10-7-4 Decoratorパターンでモデル固有の表示ロジックを分離する"></a>10-7-4 Decoratorパターンでモデル固有の表示ロジックを分離する</h3><h3 id="10-8-第二の鍵─上手に共通化する"><a href="#10-8-第二の鍵─上手に共通化する" class="headerlink" title="10-8 第二の鍵─上手に共通化する"></a>10-8 第二の鍵─上手に共通化する</h3><h3 id="10-9-モデルの共通化"><a href="#10-9-モデルの共通化" class="headerlink" title="10-9 モデルの共通化"></a>10-9 モデルの共通化</h3><h3 id="10-9-1-共通機能のモジュールを複数のモデルクラスにMix-inする"><a href="#10-9-1-共通機能のモジュールを複数のモデルクラスにMix-inする" class="headerlink" title="10-9-1 共通機能のモジュールを複数のモデルクラスにMix-inする"></a>10-9-1 共通機能のモジュールを複数のモデルクラスにMix-inする</h3><h3 id="10-9-2-STI（単一テーブル継承）で共通機能を基底クラスに持たせる"><a href="#10-9-2-STI（単一テーブル継承）で共通機能を基底クラスに持たせる" class="headerlink" title="10-9-2 STI（単一テーブル継承）で共通機能を基底クラスに持たせる"></a>10-9-2 STI（単一テーブル継承）で共通機能を基底クラスに持たせる</h3><h3 id="10-9-3-全モデルクラスに共通の処理をApplicationRecordに書く"><a href="#10-9-3-全モデルクラスに共通の処理をApplicationRecordに書く" class="headerlink" title="10-9-3 全モデルクラスに共通の処理をApplicationRecordに書く"></a>10-9-3 全モデルクラスに共通の処理をApplicationRecordに書く</h3><h3 id="10-9-3-ApplicationRecordとモデルクラスの間に抽象的なクラスを挟む"><a href="#10-9-3-ApplicationRecordとモデルクラスの間に抽象的なクラスを挟む" class="headerlink" title="10-9-3 ApplicationRecordとモデルクラスの間に抽象的なクラスを挟む"></a>10-9-3 ApplicationRecordとモデルクラスの間に抽象的なクラスを挟む</h3><h3 id="10-10-コントローラの共通化"><a href="#10-10-コントローラの共通化" class="headerlink" title="10-10 コントローラの共通化"></a>10-10 コントローラの共通化</h3><h3 id="10-10-1-共通機能のモジュールを複数のコントローラクラスにMix-inする"><a href="#10-10-1-共通機能のモジュールを複数のコントローラクラスにMix-inする" class="headerlink" title="10-10-1 共通機能のモジュールを複数のコントローラクラスにMix-inする"></a>10-10-1 共通機能のモジュールを複数のコントローラクラスにMix-inする</h3><h3 id="10-10-2-基底クラスを追加して共通機能を持たせる"><a href="#10-10-2-基底クラスを追加して共通機能を持たせる" class="headerlink" title="10-10-2 基底クラスを追加して共通機能を持たせる"></a>10-10-2 基底クラスを追加して共通機能を持たせる</h3><h3 id="10-10-3-ApplicationControllerに共通機能を記述する"><a href="#10-10-3-ApplicationControllerに共通機能を記述する" class="headerlink" title="10-10-3 ApplicationControllerに共通機能を記述する"></a>10-10-3 ApplicationControllerに共通機能を記述する</h3><h3 id="10-10-4-第一の鍵を使わない状態で第二の鍵を使ってはいけない"><a href="#10-10-4-第一の鍵を使わない状態で第二の鍵を使ってはいけない" class="headerlink" title="10-10-4 第一の鍵を使わない状態で第二の鍵を使ってはいけない"></a>10-10-4 第一の鍵を使わない状態で第二の鍵を使ってはいけない</h3><h3 id="10-11-ビュー（プレゼンテーション）の共通化"><a href="#10-11-ビュー（プレゼンテーション）の共通化" class="headerlink" title="10-11 ビュー（プレゼンテーション）の共通化"></a>10-11 ビュー（プレゼンテーション）の共通化</h3><h3 id="10-11-1-パーシャルテンプレートで画面の一部を共通化する"><a href="#10-11-1-パーシャルテンプレートで画面の一部を共通化する" class="headerlink" title="10-11-1 パーシャルテンプレートで画面の一部を共通化する"></a>10-11-1 パーシャルテンプレートで画面の一部を共通化する</h3><h3 id="10-11-2-レイアウトで画面の大枠を共通化する"><a href="#10-11-2-レイアウトで画面の大枠を共通化する" class="headerlink" title="10-11-2 レイアウトで画面の大枠を共通化する"></a>10-11-2 レイアウトで画面の大枠を共通化する</h3><h3 id="10-11-3-カスタムヘルパーに共通処理を記述する"><a href="#10-11-3-カスタムヘルパーに共通処理を記述する" class="headerlink" title="10-11-3 カスタムヘルパーに共通処理を記述する"></a>10-11-3 カスタムヘルパーに共通処理を記述する</h3><h3 id="10-11-4-カスタムヘルパーは小さく作る"><a href="#10-11-4-カスタムヘルパーは小さく作る" class="headerlink" title="10-11-4 カスタムヘルパーは小さく作る"></a>10-11-4 カスタムヘルパーは小さく作る</h3><h3 id="10-11-5-特定のモデルに依存する処理をカスタムヘルパーに含めない"><a href="#10-11-5-特定のモデルに依存する処理をカスタムヘルパーに含めない" class="headerlink" title="10-11-5 特定のモデルに依存する処理をカスタムヘルパーに含めない"></a>10-11-5 特定のモデルに依存する処理をカスタムヘルパーに含めない</h3><h3 id="10-12-第三の鍵─新しい構造を追加して役割を分担する"><a href="#10-12-第三の鍵─新しい構造を追加して役割を分担する" class="headerlink" title="10-12 第三の鍵─新しい構造を追加して役割を分担する"></a>10-12 第三の鍵─新しい構造を追加して役割を分担する</h3><h3 id="10-12-1-ActiveModel"><a href="#10-12-1-ActiveModel" class="headerlink" title="10-12-1 ActiveModel"></a>10-12-1 ActiveModel</h3><h3 id="10-12-2-共通処理を担当するオブジェクトを別につくって連携させる"><a href="#10-12-2-共通処理を担当するオブジェクトを別につくって連携させる" class="headerlink" title="10-12-2 共通処理を担当するオブジェクトを別につくって連携させる"></a>10-12-2 共通処理を担当するオブジェクトを別につくって連携させる</h3><h3 id="10-12-3-意味のあるパラメータの集合からクラスを生み出す"><a href="#10-12-3-意味のあるパラメータの集合からクラスを生み出す" class="headerlink" title="10-12-3 意味のあるパラメータの集合からクラスを生み出す"></a>10-12-3 意味のあるパラメータの集合からクラスを生み出す</h3><h3 id="10-12-4-外部サービスのロジックを閉じ込める"><a href="#10-12-4-外部サービスのロジックを閉じ込める" class="headerlink" title="10-12-4 外部サービスのロジックを閉じ込める"></a>10-12-4 外部サービスのロジックを閉じ込める</h3><h3 id="10-12-5-複数のモデルが絡む特定処理の専門家を作る"><a href="#10-12-5-複数のモデルが絡む特定処理の専門家を作る" class="headerlink" title="10-12-5 複数のモデルが絡む特定処理の専門家を作る"></a>10-12-5 複数のモデルが絡む特定処理の専門家を作る</h3><h3 id="10-12-6-サブリソース単位でコントローラを分割する"><a href="#10-12-6-サブリソース単位でコントローラを分割する" class="headerlink" title="10-12-6 サブリソース単位でコントローラを分割する"></a>10-12-6 サブリソース単位でコントローラを分割する</h3><h2 id="Column-何でも屋のアクションを実装しない"><a href="#Column-何でも屋のアクションを実装しない" class="headerlink" title="Column 何でも屋のアクションを実装しない"></a>Column 何でも屋のアクションを実装しない</h2><h3 id="10-13-モジュールを上手に利用するために"><a href="#10-13-モジュールを上手に利用するために" class="headerlink" title="10-13 モジュールを上手に利用するために"></a>10-13 モジュールを上手に利用するために</h3><h3 id="10-13-1-構造として分かりやすい意味を持たせる"><a href="#10-13-1-構造として分かりやすい意味を持たせる" class="headerlink" title="10-13-1 構造として分かりやすい意味を持たせる"></a>10-13-1 構造として分かりやすい意味を持たせる</h3><h3 id="10-13-2-利用元クラスの一部として違和感がないかを検討する"><a href="#10-13-2-利用元クラスの一部として違和感がないかを検討する" class="headerlink" title="10-13-2 利用元クラスの一部として違和感がないかを検討する"></a>10-13-2 利用元クラスの一部として違和感がないかを検討する</h3><h3 id="10-13-3-利用元クラスと内部データを共有していることを意識する"><a href="#10-13-3-利用元クラスと内部データを共有していることを意識する" class="headerlink" title="10-13-3 利用元クラスと内部データを共有していることを意識する"></a>10-13-3 利用元クラスと内部データを共有していることを意識する</h3><h3 id="10-13-4-独立的にして利用条件を分かりやすくする"><a href="#10-13-4-独立的にして利用条件を分かりやすくする" class="headerlink" title="10-13-4 独立的にして利用条件を分かりやすくする"></a>10-13-4 独立的にして利用条件を分かりやすくする</h3><h3 id="10-13-5-追加部品であるという節度を守る"><a href="#10-13-5-追加部品であるという節度を守る" class="headerlink" title="10-13-5 追加部品であるという節度を守る"></a>10-13-5 追加部品であるという節度を守る</h3><h3 id="10-14-おわりに"><a href="#10-14-おわりに" class="headerlink" title="10-14 おわりに"></a>10-14 おわりに</h3><h2 id="Appendix"><a href="#Appendix" class="headerlink" title="Appendix"></a>Appendix</h2><h2 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最終更新：<time datetime="2021-03-28T16:08:23.003Z" itemprop="dateUpdated">2021-03-29 01:08:23</time>
</span><br>


        
        thank you for your reading my article!!
        
    </div>
    
    <footer>
        <a href="http://yoursite.com">
            <img src="https://tutttuwi.github.io/output-over-there/img/avatar.png" alt="t-tsutsui">
            t-tsutsui
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="https://tutttuwi.github.io/output-over-there/tags/%E6%95%99%E7%A7%91%E6%9B%B8/" rel="tag">教科書</a></li></ul>


            


        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="https://tutttuwi.github.io/output-over-there/Linux/2021-11_Linux%E6%95%99%E7%A7%91%E6%9B%B8_LinuC%E3%83%AC%E3%83%99%E3%83%AB2Version10.0%E5%AF%BE%E5%BF%9C%20copy/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Linux教科書_LinuCレベル2Version10.0対応</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="https://tutttuwi.github.io/output-over-there/Security/2020-08_%E5%AE%89%E5%85%A8%E3%81%AAWeb%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9_%E8%84%86%E5%BC%B1%E6%80%A7%E3%81%8C%E7%94%9F%E3%81%BE%E3%82%8C%E3%82%8B%E5%8E%9F%E7%90%86%E3%81%A8%E5%AF%BE%E7%AD%96%E3%81%AE%E5%AE%9F%E8%B7%B5_%E7%AC%AC2%E7%89%88/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">安全なWebアプリケーションの作り方_脆弱性が生まれる原理と対策の実践_第2版</h4>
      </a>
    </div>
  
</nav>



    

















</article>



</div>

        <footer class="footer">
    <div class="top">
<!--        

        <p>
            
                <span><a href="https://tutttuwi.github.io/output-over-there/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>このブログの内容物は<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja">クリエイティブ・コモンズ 表示 - 非営利 - 継承 4.0 国際ライセンスの下に提供されています</a></span>
        </p> -->
    </div>
    <div class="bottom">
        <p><span>t-tsutsui &copy; 2015 - 2023</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: 'https://tutttuwi.github.io/output-over-there/', SHARE: false, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
